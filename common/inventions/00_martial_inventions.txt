martial_1 = {
	technology = military_tech
	color = hsv { 0 0.8 0.5 }

#### MILITARY CULTURE TREE ####

	# Level 0
	
	military_tech_investment_inv_1 = { 
		modifier = { price_state_investment_military_cost_modifier = -0.1 }
		on_activate = {
			add_1_free_province_investments = yes
		}
		# Discipline tree (and Foundry as well)
		ai_will_do = {
			modifier = {
				factor = irc_discipline_tree_65
			}
		}
	}

	# Level 1
	global_start_experience_inv_1 = { 
		modifier = { global_start_experience = 5 }
		requires = { military_tech_investment_inv_1 }
		# ai_will_do = {
		# 	modifier = {
		# 		add = 150
		# 		OR = {
		# 			is_antagonist = yes
		# 			tag = SEL
		# 			tag = TRE
		# 			tag = EGY
		# 			tag = MAC
		# 			tag = EPI
		# 			tag = ALX
		# 			rank > regional_power
		# 		}
		# 	}
		# }
		ai_will_do = {
			base = 1
			# Foundry tree
			modifier = {
				factor = irc_foundry_tree_60
				does_benefit_from_unique_city_buildings = yes
			}
		}
	}

	sacred_band_inv = { 
		modifier = { 
			land_morale_recovery = 0.025
			plains_combat_bonus = 0.05
		}
		allow = {
			primary_culture = carthaginian
		}
		requires = { global_start_experience_inv_1 }
		ai_will_do = {
			base = 1
		}
	}

	global_start_experience_inv_2 = { 
		modifier = { global_start_experience = 2.5 }
		requires = { military_tech_investment_inv_1 }
		# ai_will_do = {
		# 	modifier = {
		# 		add = 25
		# 	}
		# 	modifier = {
		# 		add = 25
		# 		is_antagonist = yes
		# 	}
		# }

		# Discipline tree
		ai_will_do = {
			modifier = {
				factor = irc_discipline_tree_65
			}
		}
	}

	global_supply_limit_modifier_inv_3 = { 
		modifier = { global_supply_limit_modifier = 0.1 }
		requires = { military_tech_investment_inv_1 }
		ai_will_do = {
			base = 1
		}
	}

	# Level 2
	heavy_infantry_discipline_inv = {
		modifier = { heavy_infantry_discipline = 0.05 }
		requires = { global_start_experience_inv_3 }
		ai_will_do = {
			base = 1
		}
	}

	global_start_experience_inv_3 = { 
		modifier = { global_start_experience = 2.5 }
		requires = { global_start_experience_inv_1 }
		# ai_will_do = {
		# 	modifier = {
		# 		add = 150
		# 		OR = {
		# 			is_antagonist = yes
		# 			tag = SEL
		# 			tag = TRE
		# 			tag = EGY
		# 			tag = MAC
		# 			tag = EPI
		# 			tag = ALX
		# 			rank > regional_power
		# 		}
		# 	}
		# }
		ai_will_do = {
			base = 1
			# Foundry tree
			modifier = {
				factor = irc_foundry_tree_60
				does_benefit_from_unique_city_buildings = yes
			}
		}
	}

	#New for Invictus
	centralised_production_inv = {
		modifier = { global_tax_modifier = 0.01 }
		requires = { global_start_experience_inv_3 }
		on_activate = { custom_tooltip = "enables_foundry_building_tt" }
		# ai_will_do = {
		# 	modifier = {
		# 		add = 150
		# 		OR = {
		# 			is_antagonist = yes
		# 			tag = SEL
		# 			tag = TRE
		# 			tag = EGY
		# 			tag = MAC
		# 			tag = EPI
		# 			tag = ALX
		# 			rank > regional_power
		# 		}
		# 	}
		# }
		keystone = yes
		ai_will_do = {
			base = 1
			# Foundry tree - target
			modifier = {
				factor = irc_100
				does_benefit_from_unique_city_buildings = yes
			}
		}
	}

	experience_decay_inv_1 = { 
		modifier = { 
			discipline = 0.05
		}
		requires = { global_start_experience_inv_2 }
		# ai_will_do = {
		# 	modifier = {
		# 		add = 25
		# 	}
		# 	modifier = {
		# 		add = 25
		# 		is_antagonist = yes
		# 	}
		# }
		# Discipline tree
		ai_will_do = {
			modifier = {
				factor = irc_discipline_tree_65
			}
		}
	}

	fort_maintenance_cost_inv = {
		modifier = { fort_maintenance_cost = -0.1 }
		requires = { global_supply_limit_modifier_inv_2 }
		ai_will_do = {
			base = 1
		}
	}

	global_supply_limit_modifier_inv_1 = { 
		modifier = { global_supply_limit_modifier = 0.1 }
		requires = { general_loyalty_inv }
		ai_will_do = {
			base = 1
		}
	}

	general_loyalty_inv = {
		modifier = { general_loyalty = 5 }
		requires = { global_supply_limit_modifier_inv_3 }
		ai_will_do = {
			base = 1
		}
	}

	global_supply_limit_modifier_inv_2 = { 
		modifier = { global_supply_limit_modifier = 0.05 }
		requires = { global_supply_limit_modifier_inv_3 }
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
	backgammon_inv = {
    	modifier = { 
    		discipline = 0.025
    		global_start_experience = 2.5
    	}
        
        requires = { global_start_experience_inv_1 }
        allow = {
			OR = {
				country_culture_group = east_levantine
				custom_tooltip = {
					#Need a new text
					text = integrated_any_east_levantine_culture
					has_variable = mesopotamian_science
					any_integrated_culture = {
						is_mesopotamian_culture_group_trigger = yes
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

	#New Invictus invention
    karduchian_longbow_inv = { #Karduchian Longbow
    	requires = { global_start_experience_inv_2 }
    	modifier = {
    		light_infantry_defensive = 0.1
			archers_discipline = 0.1
		}
    	allow = {
    		primary_culture = cardukoi
    	}
		ai_will_do = {
			base = 1
		}
    }

	#New Invictus invention
    boulder_assaults_inv = { #Boulder Assaults
    	requires = { global_start_experience_inv_2 }
    	modifier = {
    		mountain_combat_bonus = 0.1
			light_infantry_mountain_combat_bonus = 0.15
		}
    	allow = {
    		primary_culture = cardukoi
    	}
		ai_will_do = {
			base = 1
		}
    }

	#New Invictus invention
    khanjali_inv = { #Khanjali
    	requires = { global_start_experience_inv_2 }
    	modifier = {
    		light_infantry_discipline = 0.1
			movement_speed_if_no_road = 0.1
		}
    	allow = {
    		primary_culture = suani
    	}
		ai_will_do = {
			base = 1
		}
    }

	#Level 3
	discipline_inv_4 = { 
		requires = { discipline_inv_3 }
		modifier = { 
			discipline = 0.05
			loyalty_gain_chance_modifier = -0.05
		}
		on_activate = {
			custom_tooltip = "exp_from_sieging_legions"
		}
		keystone = yes
		# Discipline tree + mega priority on its own
		ai_will_do = {
			modifier = {
				factor = irc_99
			}
		}
	}

	army_maintenance_cost_inv_2 = { 
		modifier = { army_maintenance_cost = -0.05  }
		requires = { global_cohort_recruit_speed_inv }
		# ai_will_do = {
		# 	modifier = {
		# 		add = 25
		# 	}
		# 	modifier = {
		# 		add = 25
		# 		is_antagonist = yes
		# 	}
		# }
		# Discipline tree
		ai_will_do = {
			modifier = {
				factor = irc_discipline_tree_65
			}
		}
	}


	cohort_reinforcement_speed_inv = {
		requires = { experience_decay_inv_1 }
		modifier = { cohort_reinforcement_speed = 0.05 }
		# ai_will_do = {
		# 	modifier = {
		# 		add = 25
		# 	}
		# 	modifier = {
		# 		add = 25
		# 		is_antagonist = yes
		# 	}
		# }
		# Discipline tree
		ai_will_do = {
			modifier = {
				factor = irc_discipline_tree_65
			}
		}
	}

	global_cohort_recruit_speed_inv = { 
		modifier = { 
			discipline = 0.05 
			experience_decay = -0.005
		}
		keystone = yes
		requires = { experience_decay_inv_1 }
		on_activate = {
			if = {
				limit = {
					is_republic = yes
				}
				custom_tooltip = "allow_capital_legion_law"
			}
			if = {
				limit = {
					is_ai = yes
					is_republic = yes
				}
				pay_price = enact_law
				if = {
					limit = { tag = ROM }
					change_law = punic_reforms
				}
				else_if = {
					limit = { tag = CAR }
					change_law = republic_military_recruitment_car_2
				}
				else = {
					change_law = republican_recruitment_2
				}
			}
		}
		# ai_will_do = {
		# 	modifier = {
		# 		factor = 100
		# 	}
		# }
		# Discipline tree + mega priority on its own
		ai_will_do = {
			modifier = {
				factor = irc_99
			}
		}
	}
	
	gw_effect_martial_education_inv = {
		on_activate = { custom_tooltip = "allow_gw_effect_martial_education" }
		requires = { global_cohort_recruit_speed_inv }
		allow = { has_dlc = "Heirs of Alexander" }
		icon_override = gw_icon
		ai_will_do = {
			base = 1
		}
	}

	sibyna_inv = {
		modifier = { spearmen_offensive = 0.1 }
		requires = { gw_effect_martial_education_inv }
		allow = {
			OR = {
				country_culture_group = illyrian_group
				custom_tooltip = {
					text = integrated_any_haemic_culture
					has_variable = haemic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:illyrian_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	corinth_helmet_inv = {
		modifier = { 
			spearmen_defensive = 0.05
			spearmen_morale = 0.05 
		}
		requires = { gw_effect_martial_education_inv }
		allow = {
			primary_culture = achaean
		}
		ai_will_do = {
			base = 1
		}
	}

	rhomphaia_inv = {
		modifier = { spearmen_offensive = 0.1 }
		requires = { gw_effect_martial_education_inv }
		allow = {
			primary_culture = triballoi
		}
		ai_will_do = {
			base = 1
		}
	}
	
	discipline_inv_2 = { 
		modifier = { discipline = 0.025 }
		requires = { cohort_reinforcement_speed_inv }
		# Discipline tree
		ai_will_do = {
			modifier = {
				factor = irc_discipline_tree_65
			}
		}
	}

	army_movement_speed_inv = { 
		modifier = { 
			army_movement_speed = 0.05 
			
		}
		on_activate = {
			custom_tooltip = "enables_forced_march"
		}
		keystone = yes
		requires_or = { military_tech_investment_inv_2 global_supply_limit_modifier_inv_4 }
		ai_will_do = {
			base = 1
		}
	}

	military_tech_investment_inv_2 = { 
		modifier = { army_movement_speed = 0.05 }
		requires = { global_supply_limit_modifier_inv_1 }
		ai_will_do = {
			base = 1
		}
	}

	global_supply_limit_modifier_inv_4 = { 
		requires = { fort_maintenance_cost_inv }
		modifier = { global_supply_limit_modifier = 0.05 }
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
	
	#New for Invictus
	slavemaster_inv = {
		modifier = { 
			global_tax_modifier = 0.05
			global_slaves_output = 0.05
			global_slaves_happyness = -0.1 
		}
		requires = { centralised_production_inv }
		ai_will_do = {
			base = 1
		}
	}

	cured_ham_inv = {
		modifier = { 
			supply_train_cost = -0.1
			global_supply_limit_modifier = 0.05
		}
		
		requires = { global_supply_limit_modifier_inv_2 }
		allow = {
			OR = {
				country_culture_group = celt_iberia
				country_culture_group = iberia
				custom_tooltip = {
					text = integrated_any_iberian_culture
					has_variable = iberian_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:celt_iberia
							this.culture.culture_group = culture_group:iberia
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}
	
	#New for Invictus
	toxic_honey_inv = {
		modifier = { 
			hostile_attrition = 1
			global_supply_limit_modifier = 0.05
		}
		
		requires = { global_supply_limit_modifier_inv_2 }
		allow = {
			OR = {
				country_culture_group = caucasian
				country_culture_group = anatolian
				tag = COL
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
	draco_inv = {
		modifier = { character_loyalty = 3 }
		requires = { heavy_infantry_discipline_inv }
		allow = {
			country_culture_group = dacia_group
			custom_tooltip = {
				text = integrated_any_haemic_culture
				has_variable = haemic_science
				any_integrated_culture = {
					OR = {
						this.culture.culture_group = culture_group:dacia_group
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}


	# Level 4
	discipline_inv_3 = { 
		modifier = { 
			land_morale_recovery = 0.04
		}
		requires = { global_start_experience_inv_4 }
		# Discipline tree
		ai_will_do = {
			modifier = {
				factor = irc_discipline_tree_65
			}
		}
	}

	global_start_experience_inv_4 = { 
		requires = { army_maintenance_cost_inv_2 }
		modifier = { 
			global_start_experience = 5
			heavy_infantry_discipline = 0.05
		}
		on_activate = {
			custom_tooltip = "create_high_martial_rising_star"
			hidden_effect = {
				create_character = {
					add_martial = 8
					add_trait = conqueror
				}
			}
		}
		keystone = yes
		# ai_will_do = {
		# 	modifier = {
		# 		add = 25
		# 	}
		# 	modifier = {
		# 		add = 25
		# 		is_antagonist = yes
		# 	}
		# }
		
		# Discipline tree - target
		ai_will_do = {
			modifier = {
				factor = irc_100
			}
		}
	}

	global_start_experience_inv_5 = { 
		requires = { discipline_inv_2 }
		modifier = { global_start_experience = 2.5 }
		# Discipline tree
		ai_will_do = {
			modifier = {
				factor = irc_discipline_tree_65
			}
		}
	}

	italic_lituus_inv = {
		modifier = { discipline = 0.025 }
		requires = { global_start_experience_inv_5 }
		allow = {
			primary_culture = etruscan
		}
		ai_will_do = {
			base = 1
		}
	}

	club_inv = { 
		requires = { global_start_experience_inv_5 }
		modifier = { light_infantry_defensive = 0.05 }
		allow = {
			country_culture_group = dacia_group
			custom_tooltip = {
				text = integrated_any_haemic_culture
				has_variable = haemic_science
				any_integrated_culture = {
					OR = {
						this.culture.culture_group = culture_group:dacia_group
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	akinakes_inv = { 
		requires = { global_start_experience_inv_5 }
		modifier = { 
			light_infantry_defensive = 0.05
			light_infantry_offensive = 0.05
		}
		allow = {
			OR = {
				country_culture_group = scythia
				country_culture_group = scythian_east
				primary_culture = median
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	pelte_shield_inv = { 
		requires = { global_start_experience_inv_5 }
		modifier = { 
			heavy_infantry_defensive = 0.05
		}
		allow = {
			country_culture_group = thrace_group
			custom_tooltip = {
				text = integrated_any_haemic_culture
				has_variable = haemic_science
				any_integrated_culture = {
					OR = {
						this.culture.culture_group = culture_group:thrace_group
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	discipline_inv_5 = { 
		requires = { global_start_experience_inv_5 experience_decay_inv_2 }
		modifier = { 
			discipline = 0.05 
		}
		on_activate = {
			custom_tooltip = "allow_all_legion_law"
			if = {
				limit = {
					is_ai = yes
					is_monarchy = yes
				}
				pay_price = enact_law
				change_law = standing_army_law
			}
			else_if = {
				limit = {
					is_ai = yes
					is_republic = yes
				}
				pay_price = enact_law
				if = {
					limit = {
						tag = ROM
					}
					change_law = marian_reforms
				}
				else_if = {
					limit = { tag = CAR }
					change_law = republic_military_recruitment_car_4
				}
				else = {
					change_law = republican_recruitment_4
				}
			}
		}
		keystone = yes
		# ai_will_do = {
		# 	modifier = {
		# 		add = 100
		# 		is_tribal = no
		# 	}
		# }

		# Discipline tree - target
		ai_will_do = {
			modifier = {
				factor = irc_100
			}
		}
	}	


	hostile_attrition_inv = { 
		modifier = { hostile_attrition = 1  }
		requires = { retreat_delay_inv }
		ai_will_do = {
			base = 1
		}
	}

	tribulus_inv = { 
		modifier = { hostile_attrition = 0.5  }
		requires = { hostile_attrition_inv }
		allow = {
			OR = {
				primary_culture = roman
				primary_culture = macedonian
			}
		}
		ai_will_do = {
			base = 1
		}
	}


	global_supply_limit_modifier_inv_5 = { 
		requires = { army_movement_speed_inv }
		modifier = { global_supply_limit_modifier = 0.1 }
		ai_will_do = {
			base = 1
		}
	}


	army_maintenance_cost_inv_1 = { 
		modifier = { army_maintenance_cost = -0.05  }
		requires = { global_supply_limit_modifier_inv_4 }
		ai_will_do = {
			base = 1
		}
	}
	 
	#New Invictus invention
    dogs_of_war_inv = { #Dogs of War
    	requires = { cohort_reinforcement_speed_inv }
    	modifier = {
    		light_infantry_offensive = 0.1
			cohort_reinforcement_speed = 0.05
		}
    	allow = {
    		OR = {
				primary_culture = caspian
				custom_tooltip = {
					text = integrated_caspian_culture
					any_country_culture = {
						is_integrated = yes
						is_culture = caspian
					}
				}
			}
    	}
		ai_will_do = {
			base = 1
		}
    }

	#New Invictus invention
	iberian_cavalry_inv = {
		modifier = { 
			heavy_cavalry_offensive = 0.1 
			heavy_cavalry_defensive = 0.1 
		}
		
		requires = { cured_ham_inv }
		allow = {
			OR = {
				country_culture_group = celt_iberia
				country_culture_group = iberia
				custom_tooltip = {
					text = integrated_any_iberian_culture
					has_variable = iberian_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:celt_iberia
							this.culture.culture_group = culture_group:iberia
						}
					}
				}
			}
		}
		# ai_will_do = {
		# 	modifier = {
		# 		add = 150
		# 		OR = {
		# 			is_antagonist = yes
		# 			tag = SEL
		# 			tag = TRE
		# 			tag = EGY
		# 			tag = MAC
		# 			tag = EPI
		# 			tag = ALX
		# 		}
		# 	}
		# }
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
	falconry_inv = {
		modifier = { army_maintenance_cost = -0.025 }
		requires = { heavy_infantry_discipline_inv }
		allow = {
			country_culture_group = thrace_group
			custom_tooltip = {
				text = integrated_any_haemic_culture
				has_variable = haemic_science
				any_integrated_culture = {
					OR = {
						this.culture.culture_group = culture_group:thrace_group
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	illyrian_helmet_inv = {
		modifier = { spearmen_defensive = 0.10 }
		requires = { heavy_infantry_discipline_inv }
		allow = {
			OR = {
				country_culture_group = illyrian_group
				custom_tooltip = {
					text = integrated_any_haemic_culture
					has_variable = haemic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:illyrian_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
	bitless_bridle_inv = { 
        modifier = { 
			light_cavalry_defensive = 0.05
			heavy_cavalry_defensive = 0.05
			light_cavalry_offensive = 0.05
			heavy_cavalry_offensive = 0.05
		}
        
        requires_or = { global_supply_limit_modifier_inv_4 }
        allow = {
			OR = {
				country_culture_group = numidian
				country_culture_group = fezzani
				custom_tooltip = {
					#Need a new text
					text = integrated_any_numidian_culture
					has_variable = numidian_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:numidian
							this.culture.culture_group = culture_group:fezzani
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

	# Level 5
	experience_decay_inv_2 = { 
		requires = { global_start_experience_inv_4 }
		modifier = { experience_decay = -0.005 }
		# ai_will_do = {
		# 	modifier = {
		# 		add = 25
		# 	}
		# 	modifier = {
		# 		add = 25
		# 		is_antagonist = yes
		# 	}
		# }

		# Discipline tree
		ai_will_do = {
			modifier = {
				factor = irc_discipline_tree_65
			}
		}
	}

	retreat_delay_inv = {
		requires = { army_movement_speed_inv }
		modifier = { retreat_delay = -2 }
		ai_will_do = {
			base = 1
		}
	}

	land_unit_attrition_inv = { 
		requires_or = { global_supply_limit_modifier_inv_5 army_maintenance_cost_inv_1 }
		keystone = yes
		modifier = { 
			land_unit_attrition = -0.1   
			global_supply_limit_modifier = 0.15
		}
		on_activate = {
			random_character = {
				limit = {
					has_doctor_office_trigger = yes
				}
				add_finesse = 3
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
	werewolves_inv = {
		modifier = { 
			discipline = 0.025
			global_start_experience = 2.5
		}
		requires = { draco_inv }
		allow = {
			country_culture_group = dacia_group
			custom_tooltip = {
				text = integrated_any_haemic_culture
				has_variable = haemic_science
				any_integrated_culture = {
					OR = {
						this.culture.culture_group = culture_group:dacia_group
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
    postal_service_inv = {
    	modifier = {
    		light_cavalry_movement_speed = 0.1
    		heavy_cavalry_movement_speed = 0.1
    		camels_movement_speed = 0.1
    		horse_archers_movement_speed = 0.1
    	}
        
        requires = { global_start_experience_inv_5 }
        allow = {
			OR = {
				country_culture_group = persia
				custom_tooltip = {
					#Need a new text
					text = integrated_any_persian_culture
					has_variable = persian_science
					any_integrated_culture = {
						is_persian_culture_group_trigger = yes
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    #New Invictus invention
    decimal_command_inv = {
    	modifier = { discipline = 0.025 }
        
        requires = { postal_service_inv }
        allow = {
			OR = {
				country_culture_group = persia
				custom_tooltip = {
					#Need a new text
					text = integrated_any_persian_culture
					has_variable = persian_science
					any_integrated_culture = {
						is_persian_culture_group_trigger = yes
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    #New Invictus invention
    khatru_inv = {
    	modifier = {
			 army_maintenance_cost = -0.025   		
			 global_tax_modifier = 0.025
    	}
        
        requires = { decimal_command_inv }
        allow = {
			OR = {
				country_culture_group = persia
				custom_tooltip = {
					#Need a new text
					text = integrated_any_persian_culture
					has_variable = persian_science
					any_integrated_culture = {
						is_persian_culture_group_trigger = yes
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }
}

#### MILITARY INVENTIONS TREE ####
military_inventions = {
	technology = military_tech
	color = hsv { 0 0.6 0.9 }
	# Level 0
	buy_military_tradition_inv = { 
		modifier = { army_weight_modifier = -0.1  }
		# ai_will_do = {
		# 	modifier = {
		# 		add = 150
		# 		OR = {
		# 			is_antagonist = yes
		# 			tag = SEL
		# 			tag = TRE
		# 			tag = EGY
		# 			tag = MAC
		# 			tag = EPI
		# 			tag = ALX
		# 			rank >= regional_power
		# 		}
		# 	}
		# }
		# Because of 2 child techs that are criminal not to get
		ai_will_do = {
			modifier = {
				factor = irc_100
			}
		}
	}

	# Level 1
	discipline_inv_1 = { 
		modifier = { discipline = 0.025 }
		requires = { buy_military_tradition_inv }
		# ai_will_do = {
		# 	modifier = {
		# 		add = 150
		# 		OR = {
		# 			is_antagonist = yes
		# 			tag = SEL
		# 			tag = TRE
		# 			tag = EGY
		# 			tag = MAC
		# 			tag = EPI
		# 			tag = ALX
		# 			rank >= regional_power
		# 		}
		# 	}
		# }
		# We already take parent for other reasons so might as well force it as well, 2.5 Ds for 1 inno is good
		ai_will_do = {
			modifier = {
				factor = irc_100
			}
		}
	}

	global_defensive_inv_1 = {
		modifier = { global_defensive = 0.05 }
		requires = { buy_military_tradition_inv }
		ai_will_do = {
			base = 1
		}
	}

	siege_engineers_inv_1 = { 
		modifier = { siege_engineers = 1  }
		requires = { buy_military_tradition_inv }
		on_activate = {
			custom_tooltip = "allow_gw_effect_siege_doctrine"
		}
		# Just 2 inno for country wide +1 engineer and -10% weight
		ai_will_do = {
			modifier = {
				factor = irc_100
			}
		}
	}

	
	crossbow_inv = {
		modifier = { archers_offensive = 0.15 }
		requires = { siege_engineers_inv_1 }
		allow = {
			OR = {
				primary_culture = tocharian
				primary_culture = yuezhi
				primary_culture = sakan
				primary_culture = wusun
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	battering_ram_inv = { 
		modifier = { assault_ability = 0.1 }
		requires = { siege_engineers_inv_1 }
		allow = {
			primary_culture = carthaginian
		}
		ai_will_do = {
			base = 1
		}
	}

	# Level 2
	heavy_cavalry_discipline_inv = {
		modifier = { heavy_cavalry_discipline = 0.05 }
		requires = { discipline_inv_1 }
		ai_will_do = {
			base = 1
		}
	}

	chalcidian_helmet_inv = {
		modifier = { spearmen_defensive = 0.05 }
		requires = { discipline_inv_1 }
		allow = {
			primary_culture = boeotian
		}
		ai_will_do = {
			base = 1
		}
	}

	phrygian_helmet_inv = {
		modifier = { light_infantry_defensive = 0.05 }
		requires = { discipline_inv_1 }
		allow = {
			primary_culture = phrygian
		}
		ai_will_do = {
			base = 1
		}
	}

	scythian_helmet_inv = {
		modifier = { 
			heavy_cavalry_defensive = 0.05
			light_cavalry_defensive = 0.05
			horse_archers_defensive = 0.05
		}
		allow = {
			primary_culture = scythian
		}
		requires = { heavy_cavalry_discipline_inv }
		ai_will_do = {
			base = 1
		}
	}

	global_defensive_inv_2 = { 
		modifier = { global_defensive = 0.05 }
		requires = { global_defensive_inv_1 }
		on_activate = {
			if = {
				limit = {
					has_dlc = "Heirs of Alexander"
				}
				custom_tooltip = "allow_gw_effect_defense_doctrine"
			}
		}
		ai_will_do = {
			base = 1
		}
	}	

	global_defensive_inv_4 = { 
		requires_or = { global_defensive_inv_1 siege_engineers_inv_1 }
		modifier = { 
			global_defensive = 0.1 
			garrison_size = 0.1
			garrison_growth = 0.1
		}
		keystone = yes
		ai_will_do = {
			base = 1
		}
	}

	assault_ability_inv = { 
		modifier = { assault_ability = 0.05 }
		requires = { siege_engineers_inv_1 }
		ai_will_do = {
			base = 1
		}
	}

	# Level 3
	siege_engineers_inv_3 = { 
		modifier = { siege_ability = 0.025  }
		requires = { assault_ability_inv }
		ai_will_do = {
			base = 1
		}
	}	

	#Changed for Invictus
	heavy_infantry_cost_inv = {
		modifier = { heavy_infantry_cost = -0.1 }
		requires = { heavy_cavalry_discipline_inv }
		ai_will_do = {
			base = 1
		}
	}

    italic_pilum_scutum_inv = {
		modifier = { 
			heavy_infantry_offensive = 0.05
            light_infantry_offensive = 0.05 
		}
		requires = { heavy_infantry_cost_inv }
		allow = {
			country_culture_group = latin
		}
		ai_will_do = {
			base = 1
		}
    }

	global_defensive_inv_3 = { 
		modifier = { global_defensive = 0.05 }
		keystone = yes
		requires = { global_defensive_inv_2 }
		on_activate = {
			custom_tooltip = "enables_rampart_building_tt"
		}
		ai_will_do = {
			base = 1
		}
	}	

	siege_speed_inv_3 = { 
		modifier = { siege_ability = 0.025 }
		requires = { global_defensive_inv_4 }
		ai_will_do = {
			base = 1
		}
	}

	syrian_elephants_inv = {
		modifier = { 
			warelephant_discipline = 0.05
			warelephant_offensive = 0.05
		}
		requires = { global_defensive_inv_4 }
		allow = {
			OR = {
				primary_culture = aramaic
				primary_culture = assyrian
				primary_culture = babylonian
				primary_culture = elamite
				primary_culture = uxian
				primary_culture = pasargadi
				primary_culture = utian
				primary_culture = gedrosian
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	siege_speed_inv_2 = { 
		modifier = { siege_ability = 0.025 }
		requires = { assault_ability_inv }
		ai_will_do = {
			base = 1
		}
	}		


	#New Invictus invention
	kikkuli_inv = {
    	modifier = { 
    		heavy_cavalry_morale = 0.05
    		light_cavalry_morale = 0.05
    		horse_archers_morale = 0.05
    	}
        
        requires = { heavy_cavalry_discipline_inv }
        allow = {
			OR = {
				country_culture_group = anatolian
				custom_tooltip = {
					#Need a new text
					text = integrated_any_anatolian_culture
					has_variable = anatolian_science
					any_integrated_culture = {
						this.culture.culture_group = culture_group:anatolian
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }


	# Level 4
	siege_speed_inv_4 = { 
		modifier = { siege_ability = 0.025 }
		requires = { global_defensive_inv_3 }
		requires_or = { heavy_infantry_cost_inv siege_speed_inv_3 }
		ai_will_do = {
			base = 1
		}
	}

	siege_engineers_inv_5 = { 
		requires = { siege_engineers_inv_3 }
		requires_or = { siege_speed_inv_2 siege_speed_inv_3 }
		modifier = { 
			engineer_cohort_cost = -0.1  
			siege_ability = 0.05
			land_unit_attrition = -0.05
		}
		keystone = yes
		ai_will_do = {
			base = 1
		}
	}	

	#New Invictus invention
	castella_inv = { 
		modifier = { 
			global_defensive = 0.05 
			garrison_size = 0.05
			garrison_growth = 0.05
		}
		requires = { siege_speed_inv_3 }
		allow = {
			OR = {
				country_culture_group = celt_iberia
				country_culture_group = iberia
				custom_tooltip = {
					text = integrated_any_iberian_culture
					has_variable = iberian_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:celt_iberia
							this.culture.culture_group = culture_group:iberia
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
    bloomeries_inv = { 
        modifier = {
        	slaves_move_cost_modifier = -0.15
        	global_tax_modifier = 0.05
        }
        
        requires = { heavy_infantry_cost_inv }
        allow = {
			OR = {
				country_culture_group = meroitic_group
				country_culture_group = aksumite_group
				custom_tooltip = {
					#Need a new text
					text = integrated_any_nubian_culture
					OR = {
						has_variable = nubian_science
						has_variable = new_egyptian_dynasty
					}
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:meroitic_group
							this.culture.culture_group = culture_group:aksumite_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }


	# Level 5
	siege_speed_inv_5 = { 
		requires = { siege_engineers_inv_5 }
		modifier = { siege_ability = 0.025 }
		ai_will_do = {
			base = 1
		}
	}

	global_defensive_inv_5 = { 
		requires = { siege_speed_inv_4 }
		modifier = { 
			global_defensive = 0.20 
		}
		keystone = yes
		ai_will_do = {
			base = 1
		}
	}

	siege_engineers_inv_4 = { 
		modifier = { siege_engineers = 1  }
		requires = { siege_engineers_inv_5 }
		ai_will_do = {
			base = 1
		}
	}


	#New Invictus invention
    royal_iron_monopoly_inv = { 
        modifier = {
        	global_goods_from_slaves = -1
        }
        
        requires = { bloomeries_inv }
        allow = {
			OR = {
				country_culture_group = meroitic_group
				country_culture_group = aksumite_group
				custom_tooltip = {
					#Need a new text
					text = integrated_any_nubian_culture
					OR = {
					has_variable = nubian_science
					has_variable = new_egyptian_dynasty
					}
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:meroitic_group
							this.culture.culture_group = culture_group:aksumite_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

	# Level 6
	siege_speed_inv_1 = { 
		modifier = { engineer_cohort_maintenance_cost = -0.1 }
		requires = { siege_engineers_inv_4 }
		ai_will_do = {
			base = 1
		}
	}

	# Level 7
	siege_engineers_inv_6 = { 
		requires = {   global_defensive_inv_5 }
		requires_or = { siege_speed_inv_1 siege_speed_inv_5  }
		modifier = { 
			siege_engineers = 1
			engineer_cohort_cost = -0.1
			army_movement_speed = -0.05
		}
		keystone = yes
		ai_will_do = {
			base = 1
		}
	}

	helepolis_inv = { 
		modifier = { siege_engineers = 1  }
		requires = { siege_engineers_inv_6 }
		allow = {
			OR = {
				tag = PRY
				tag = ALX
				has_variable = me_ant_start_flag
			}
		}
		keystone = yes
		ai_will_do = {
			base = 1
		}
	}

	boetia_flamethrower_inv = { 
		requires = { siege_speed_inv_3 }
		modifier = { 
			assault_ability = 0.1
		}
		allow = {
			OR = {
				tag = BOE
				AND = {
					primary_culture = boeotian
					tag = HLA
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	#### Gallic Specific Invention Tree ####
    ## Gallic Specific - Level 0
    #Vanilla invention modified for Invictus
    gallic_oppidum_inv = {
    	modifier = { 
			global_defensive  = 0.1 
    		fort_limit = 1
    		commerce_value = 0.01
		}
        requires = { global_defensive_inv_3 }
		allow = {
			OR = {
				country_culture_group = gallic
				country_culture_group = celto_pannonian_group
				country_culture_group = belgae_group
				custom_tooltip = {
					text = integrated_any_celtic_culture
					has_variable = celtic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:gallic
							this.culture.culture_group = culture_group:celto_pannonian_group
							this.culture.culture_group = culture_group:belgae_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    ## Gallic Specific - Level 1
    #Vanilla invention modified for Invictus
    gallic_noric_steel_inv = {
    	modifier = { light_infantry_offensive = 0.05
    				 heavy_infantry_offensive = 0.05 }
        requires = { gallic_oppidum_inv }
        allow = {
			OR = {
				country_culture_group = gallic
				country_culture_group = celto_pannonian_group
				country_culture_group = belgae_group
				custom_tooltip = {
					text = integrated_any_celtic_culture
					has_variable = celtic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:gallic
							this.culture.culture_group = culture_group:celto_pannonian_group
							this.culture.culture_group = culture_group:belgae_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    gallic_celtic_calendar_inv = {
    #Vanilla invention modified for Invictus
    	modifier = { global_tribesmen_output = 0.1 }
        requires = { gallic_oppidum_inv }
        allow = {
			OR = {
				country_culture_group = gallic
				country_culture_group = celto_pannonian_group
				country_culture_group = belgae_group
				custom_tooltip = {
					text = integrated_any_celtic_culture
					has_variable = celtic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:gallic
							this.culture.culture_group = culture_group:celto_pannonian_group
							this.culture.culture_group = culture_group:belgae_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    ## Gallic Specific - Level 2
    #Vanilla invention modified for Invictus
    gallic_celtic_plough_inv = {
    	modifier = { global_tribesmen_output = 0.1 
    				 global_population_growth = 0.01 }
        requires = { gallic_noric_steel_inv }
        allow = {
			OR = {
				country_culture_group = gallic
				country_culture_group = celto_pannonian_group
				country_culture_group = belgae_group
				custom_tooltip = {
					text = integrated_any_celtic_culture
					has_variable = celtic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:gallic
							this.culture.culture_group = culture_group:celto_pannonian_group
							this.culture.culture_group = culture_group:belgae_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    #Vanilla invention modified for Invictus
    gallic_chainmail_inv = {
    	modifier = { 
    		light_infantry_defensive  = 0.05 
			heavy_infantry_defensive = 0.05
    		heavy_cavalry_defensive = 0.05
		}
    	requires = { gallic_noric_steel_inv }
        allow = {
			OR = {
				country_culture_group = gallic
				country_culture_group = celto_pannonian_group
				country_culture_group = belgae_group
				custom_tooltip = {
					text = integrated_any_celtic_culture
					has_variable = celtic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:gallic
							this.culture.culture_group = culture_group:celto_pannonian_group
							this.culture.culture_group = culture_group:belgae_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    } 

    #Vanilla invention modified for Invictus
    gallic_four_horned_saddle_inv = {
    	modifier = { light_cavalry_offensive = 0.1 
    				 heavy_cavalry_offensive = 0.1 
    				 horse_archers_offensive = 0.1}
        requires = { gallic_celtic_calendar_inv }
		allow = {
			OR = {
				country_culture_group = gallic
				country_culture_group = celto_pannonian_group
				country_culture_group = belgae_group
				custom_tooltip = {
					text = integrated_any_celtic_culture
					has_variable = celtic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:gallic
							this.culture.culture_group = culture_group:celto_pannonian_group
							this.culture.culture_group = culture_group:belgae_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    ## Gallic Specific - Level 3
    #Vanilla invention modified for Invictus
    gallic_montefortino_helmet_inv = {
    	modifier = { light_infantry_discipline = 0.1 
    				 heavy_infantry_discipline = 0.1 }
        requires = { gallic_celtic_plough_inv gallic_chainmail_inv }
        allow = {
			OR = {
				country_culture_group = gallic
				country_culture_group = celto_pannonian_group
				country_culture_group = belgae_group
				custom_tooltip = {
					text = integrated_any_celtic_culture
					has_variable = celtic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:gallic
							this.culture.culture_group = culture_group:celto_pannonian_group
							this.culture.culture_group = culture_group:belgae_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    #Vanilla invention modified for Invictus
    gallic_trimarcisia_inv = {
    	modifier = { light_cavalry_morale = 0.1 
    				 heavy_cavalry_morale = 0.1 
    				 horse_archers_morale = 0.1 }
        requires = { gallic_four_horned_saddle_inv }
		allow = {
			OR = {
				country_culture_group = gallic
				country_culture_group = celto_pannonian_group
				country_culture_group = belgae_group
				custom_tooltip = {
					text = integrated_any_celtic_culture
					has_variable = celtic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:gallic
							this.culture.culture_group = culture_group:celto_pannonian_group
							this.culture.culture_group = culture_group:belgae_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    ## Gallic Specific - Level 4
    #Vanilla invention modified for Invictus
    gallic_timbered_roads_inv = {
    	modifier = { army_maintenance_cost = -0.1
    				 army_movement_speed = 0.1 }
        requires = { gallic_montefortino_helmet_inv gallic_trimarcisia_inv }
        allow = {
			OR = {
				country_culture_group = gallic
				country_culture_group = celto_pannonian_group
				country_culture_group = belgae_group
				custom_tooltip = {
					text = integrated_any_celtic_culture
					has_variable = celtic_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:gallic
							this.culture.culture_group = culture_group:celto_pannonian_group
							this.culture.culture_group = culture_group:belgae_group
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }	
}

#### MILITARY NAVAL TREE ###
naval_tree = {
	technology = military_tech
	color = hsv { 0 0.6 0.7 }
	# Level 0
	pirate_spawn_chance_inv_1 = { 
		modifier = { naval_range = 0.05 }
		on_activate = {
			random_owned_province = {
				limit = {
					is_coastal = yes
					num_of_port_building < 1
					can_build_building = port_building
				}
				alternative_limit = {
					num_of_port_building > 0
					can_build_building = port_building
				}
				add_building_level = port_building
			}
		}
		# ai_will_do = {
		# 	modifier = {
		# 		factor = 0
		# 		num_of_ports > 10
		# 	}
		# }
		ai_will_do = {
			base = 1
		}
	}

	# Level 1
	liburnian_invention_2 = {
		modifier = { liburnian_morale = 0.05 }
		requires = { pirate_spawn_chance_inv_1 }
		ai_will_do = {
			base = 1
		}
	}

	lembus_inv = {
		modifier = { 
			global_goods_from_slaves = -1
		}
		requires = { liburnian_invention_2 }
		allow = {
			primary_culture = liburnian_culture
		}
		ai_will_do = {
			base = 1
		}
	}

	galaia_inv = {
		modifier = { 
			enslavement_efficiency = 0.05
		}
		requires = { lembus_inv }
		ai_will_do = {
			base = 1
		}
	}

	katapharct_inv = {
		modifier = { tetrere_defensive = 0.05
					 hexere_defensive = 0.05 }
		requires = { pirate_spawn_chance_inv_1 }
		ai_will_do = {
			base = 1
		}
	}	

	# Country Specific, Level 1
	archimedes_principle = {
		requires = { pirate_spawn_chance_inv_1 }
		allow = {
			OR = {
				primary_culture = syracusan 
				primary_culture = siculian
				tag = SIC
			}
		}
		modifier = { global_ship_start_experience = 10 }
		ai_will_do = {
			base = 1
		}
	}

	archimedes_steam_cannon_inv = {
		requires = { archimedes_death_ray_inv }
		modifier = { 
			global_defensive = 0.05
			garrison_size = 0.1
		}
		allow = {
			OR = {
				primary_culture = syracusan 
				primary_culture = siculian
				tag = SIC
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	archimedes_death_ray_inv = {
		requires = { archimedes_principle }
		modifier = { 
			global_defensive = 0.05 
			fort_maintenance_cost = 0.05
		}
		allow = {
			OR = {
				primary_culture = syracusan 
				primary_culture = siculian
				tag = SIC
			}
		}
		on_activate = {
			custom_tooltip = "archimedes_death_ray_effect"
		}
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
    sewn_planks_inv = { 
        modifier = { 
        	naval_range = 0.25
        }
        
        requires = { pirate_spawn_chance_inv_1 }
        allow = {
			OR = {
				country_culture_group = aryan
				country_culture_group = pracyan
				country_culture_group = indian
				custom_tooltip = {
					#Need a new text
					text = integrated_any_indian_culture
					has_variable = indian_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:aryan
							this.culture.culture_group = culture_group:pracyan
							this.culture.culture_group = culture_group:indian
						}
					}
				}
				country_culture_group = south_levantine
				country_culture_group = south_arabian
				custom_tooltip = {
					#Need a new text
					text = integrated_any_arabian_culture
					has_variable = arabian_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:south_levantine
							this.culture.culture_group = culture_group:south_arabian
						}
					}
				}
				country_culture_group = meroitic_group
				country_culture_group = aksumite_group
				custom_tooltip = {
					#Need a new text
					text = integrated_any_nubian_culture
					OR = {
						has_variable = new_egyptian_dynasty
						has_variable = nubian_science
					}
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:meroitic_group
							this.culture.culture_group = culture_group:aksumite_group
						}
					}	
				}
				tag = TYO
				tag = TLM
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    #New Invictus invention
    cotton_trade_inv = { 
        modifier = { 
        	global_commerce_modifier = 0.2
        }
        
        requires = { pirate_spawn_chance_inv_1 }
        allow = { tag = TYO }
		ai_will_do = {
			base = 1
		}
    }

	# Level 2
	naval_tactic_inv_1 = { 
		modifier = {
			naval_damage_taken = -0.05
		}
		requires = { liburnian_invention_2 }
		ai_will_do = {
			base = 1
		}
	}

	naval_weapon_platform_inv_2 = {
		modifier = { tetrere_offensive = 0.05 }
		requires = { katapharct_inv }
		ai_will_do = {
			base = 1
		}
	}

	navy_maintenance_cost_inv_1 = {
		modifier = { navy_maintenance_cost = -0.05  }
		requires = { katapharct_inv }
		on_activate = {
			if = {
				limit = {
					any_owned_province = { is_port = yes }
				}
				random_owned_province = {
					limit = {
						is_port = yes
					}
					owner = {
						create_unit = {
							navy = yes
							location = prev.prev
							add_subunit = liburnian
							add_subunit = liburnian
							add_subunit = liburnian
							add_subunit = liburnian
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
    monsoon_navigation_inv = { 
        modifier = { 
        	diplomatic_range_modifier = 1.5
        	control_range_modifier = 0.33
        }
        
        requires = { sewn_planks_inv }
        allow = {
			OR = {
				country_culture_group = aryan
				country_culture_group = pracyan
				country_culture_group = indian
				custom_tooltip = {
					#Need a new text
					text = integrated_any_indian_culture
					has_variable = indian_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:aryan
							this.culture.culture_group = culture_group:pracyan
							this.culture.culture_group = culture_group:indian
						}
					}
				}
				country_culture_group = south_levantine
				country_culture_group = south_arabian
				custom_tooltip = {
					#Need a new text
					text = integrated_any_arabian_culture
					has_variable = arabian_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:south_levantine
							this.culture.culture_group = culture_group:south_arabian
						}
					}
				}
				country_culture_group = meroitic_group
				country_culture_group = aksumite_group
				custom_tooltip = {
					#Need a new text
					text = integrated_any_nubian_culture
					OR = {
						has_variable = new_egyptian_dynasty
						has_variable = nubian_science
					}
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:meroitic_group
							this.culture.culture_group = culture_group:aksumite_group
						}
					}	
				}
				tag = TYO
				tag = TLM
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    #New Invictus invention
    beden_inv = { 
        modifier = { 
        	naval_morale_recovery = 0.1
        }
        
        requires = { sewn_planks_inv }
        allow = {
			OR = {
				country_culture_group = meroitic_group
				country_culture_group = aksumite_group
				custom_tooltip = {
					#Need a new text
					text = integrated_any_nubian_culture
					OR = {
						has_variable = new_egyptian_dynasty
						has_variable = nubian_science
					}
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:meroitic_group
							this.culture.culture_group = culture_group:aksumite_group
						}
					}	
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

    #New Invictus invention
    dhow_inv = { 
        modifier = { 
        	global_ship_start_experience = 5
        	global_ship_recruit_speed = 0.15
        }
        
        requires = { sewn_planks_inv }
        allow = {
			OR = {
				country_culture_group = south_levantine
				country_culture_group = south_arabian
				custom_tooltip = {
					#Need a new text
					text = integrated_any_arabian_culture
					has_variable = arabian_science
					any_integrated_culture = {
						OR = {
							this.culture.culture_group = culture_group:south_levantine
							this.culture.culture_group = culture_group:south_arabian
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

	# Level 3
		liburnian_invention_1 = {
		modifier = { liburnian_offensive = 0.05}
		requires = { naval_tactic_inv_1 }
		ai_will_do = {
			base = 1
		}
	}

	naval_rostra_inv_1 = {
		modifier = { liburnian_discipline = 0.05
					 trireme_discipline = 0.05 }
		requires = { liburnian_invention_2 }
		ai_will_do = {
			base = 1
		}
	}	

	trireme_discipline_inv_2 = { 
		modifier = { tetrere_discipline = 0.05 }
		requires = { navy_maintenance_cost_inv_1 }
		ai_will_do = {
			base = 1
		}
	}	

	# Level 4
	pirate_spawn_chance_inv_2 = { 
		requires_or = { liburnian_invention_1 naval_rostra_inv_1 }
		modifier = { naval_range = 0.05 }
		ai_will_do = {
			base = 1
		}
	}

	trireme_discipline_inv_4 = { 
		requires_or = { naval_rostra_inv_1 naval_weapon_platform_inv_2}
		modifier = { 
			hexere_discipline = 0.05 		 
			tetrere_discipline = 0.05 
			naval_range = 0.1
			naval_damage_taken = -0.05
		}
		keystone = yes
		ai_will_do = {
			base = 1
		}
	}

	naval_tactic_inv_3 = {
		modifier = { naval_damage_done = 0.05 }
		requires = { naval_weapon_platform_inv_2 }
		ai_will_do = {
			base = 1
		}
	}

	trireme_discipline_inv_1 = { 
		modifier = {
			naval_damage_taken = -0.05
			global_ship_start_experience = 10
			max_mercenary_stacks = 1
		}
		requires = { trireme_discipline_inv_2 }
		keystone = yes
		on_activate = {
			if = {
				limit = { is_monarchy = yes }
				custom_tooltip = allows_maritime_laws
			}
		}
		ai_will_do = {
			modifier = {
				factor = 100
			}
		}
	}			

	# Level 5
	trireme_discipline_inv_3 = { 
		modifier = { trireme_discipline = 0.1 }
		requires = { pirate_spawn_chance_inv_2 }
		ai_will_do = {
			base = 1
		}
	}

	naval_weapon_platform_inv_1 = {
		modifier = { trireme_offensive = 0.05 }
		requires = { pirate_spawn_chance_inv_2 }
		ai_will_do = {
			base = 1
		}	
	}	

	naval_weapon_platform_inv_3 = {
		modifier = { 
			octere_offensive = 0.25 
			octere_defensive = -0.1
		}
		keystone = yes
		requires = { naval_tactic_inv_3 trireme_discipline_inv_1 }	
		ai_will_do = {
			base = 1
		}
	}

	sambuca_siege_inv = {
		modifier = { 
			mega_galley_discipline = 0.05
		}
		allow = {
			OR = {
				tag = TAR
				tag = ITA
				AND = {
					tag = MGG
					primary_culture = italiotian
				}			}
		}
		on_activate = {
			custom_tooltip = "allow_improved_naval_siege"
			set_variable = improved_naval_siege
		}
		requires_or = { naval_weapon_platform_inv_3 }
		ai_will_do = {
			base = 1
		}
	}

	double_bow_and_stern_inv_1 = {
		modifier = { tetrere_defensive = 0.05 
					 hexere_defensive = 0.05 }
		requires = { trireme_discipline_inv_1 }
		ai_will_do = {
			base = 1
		}
	}	

	#New Invictus invention
	serial_production_inv = {
		modifier = { global_ship_recruit_speed = 0.2  }
		requires = { naval_tactic_inv_3 }
		 allow = {
			OR = {
				country_culture_group = west_levantine
				custom_tooltip = {
					#Need a new text
					text = integrated_any_punic_culture
					has_variable = punic_science
					any_integrated_culture = {
						this.culture.culture_group = culture_group:west_levantine
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	#New Invictus invention
    imperial_navy_inv = {
    	modifier = {
    		navy_maintenance_cost = -0.05
    		diplomatic_range_modifier = 0.75
    		naval_range = 0.3
    	}
        
        requires = { trireme_discipline_inv_1 }
        allow = {
			OR = {
				country_culture_group = persia
				custom_tooltip = {
					#Need a new text
					text = integrated_any_persian_culture
					has_variable = persian_science
					any_integrated_culture = {
						is_persian_culture_group_trigger = yes
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
    }

	# Level 6
	navy_movement_speed_inv = { 
		requires_or = { trireme_discipline_inv_3 naval_weapon_platform_inv_1 }
		modifier = { liburnian_discipline = 0.1 }
		ai_will_do = {
			base = 1
		}
	}

	naval_rostra_inv_2 = {
		modifier = { naval_morale_modifier = 0.05 }
		requires = { trireme_discipline_inv_4 }
		ai_will_do = {
			base = 1
		}
	}	

	blockade_efficiency_inv = {
		requires = { double_bow_and_stern_inv_1 }
		modifier = { blockade_efficiency = 0.2 }
		ai_will_do = {
			base = 1
		}
	}	

	#New Invictus invention
	cedar_planks_inv = {
		modifier = { global_ship_start_experience = 5
					 naval_damage_taken = -0.05 }
		requires = { serial_production_inv }
		 allow = {
			OR = {
				country_culture_group = west_levantine
				custom_tooltip = {
					#Need a new text
					text = integrated_any_punic_culture
					has_variable = punic_science
					any_integrated_culture = {
						this.culture.culture_group = culture_group:west_levantine
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	# Level 7
	naval_tactic_inv_2 = {
		modifier = { 
			liburnian_offensive = 0.05 
		}
		requires = { navy_movement_speed_inv }
		ai_will_do = {
			base = 1
		}
	}
	
	siege_engineers_inv_2 = { 
		modifier = { siege_engineers = 1  }
		requires = { navy_movement_speed_inv }
		ai_will_do = {
			base = 1
		}
	}

	trireme_discipline_inv_5 = { 
		requires = { naval_rostra_inv_2 }
		modifier = { naval_damage_done = 0.05 }
		ai_will_do = {
			base = 1
		}
	}		

	counterbalanced_oars_inv = {
		modifier = { naval_morale_recovery = 0.05 }
		requires = { blockade_efficiency_inv }
		ai_will_do = {
			base = 1
		}
	}

	navy_maintenance_cost_inv_2 = { 
		requires = { blockade_efficiency_inv }
		modifier = { naval_damage_taken = -0.05 }
		ai_will_do = {
			base = 1
		}
	}		

	# Level 7 Country Specific
	
	corvus_invention = {
		requires = { trireme_discipline_inv_5 } 
		allow = {
			trigger_if = {
				limit = { tag = ROM }
				tag = ROM
			}
			trigger_if = {
				limit = { tag = CAR }
				tag = CAR
				has_completed_mission_task = carthaginian_rome_expansion_mission_task_3
			}
		}
		modifier = { ship_capture_chance = 0.05 }
		ai_will_do = {
			base = 1
		}
	}	

	# Level 8
	naval_rostra_inv_3 = {
		modifier = { 
			naval_morale_modifier = 0.1 
			naval_damage_done = 0.05
			trireme_offensive = 0.05
		}
		keystone = yes
		requires = { trireme_discipline_inv_5 }
		requires_or = { naval_tactic_inv_2 siege_engineers_inv_2 }
		ai_will_do = {
			base = 1
		}	
	}

	naval_unit_attrition_inv = {
		modifier = { 
			naval_unit_attrition = -0.1 
			navy_maintenance_cost = -0.1
		}
		keystone = yes
		requires_or = { counterbalanced_oars_inv navy_maintenance_cost_inv_2 }
		ai_will_do = {
			base = 1
		}
	}	

	# Level 9	
	global_ship_recruit_speed_inv = { 
		modifier = { 
			global_ship_recruit_speed = 0.25 
		}
		keystone = yes
		requires_or = { naval_rostra_inv_3 naval_unit_attrition_inv }
		potential = {
			num_of_ports >= 1
		}
		on_activate = {
			random_owned_province = {
				limit = {
					num_of_port_building > 0 
				}
				owner = {
					create_unit = {
						navy = yes
						location = prev.prev
						add_subunit = tetrere
						add_subunit = tetrere
						add_subunit = tetrere
						add_subunit = tetrere
						add_subunit = hexere
						add_subunit = hexere
						add_subunit = hexere
						add_subunit = hexere
					}
				}
			}
		}
		ai_will_do = {
			base = 1
		}
	}

	# Level 10
	double_bow_and_stern_inv_2 = {
		modifier = { octere_defensive = 0.05 
					 mega_galley_defensive = 0.05 }
		requires = { global_ship_recruit_speed_inv }
		ai_will_do = {
			base = 1
		}
	}

	mega_catamaran_inv = {
		modifier = { blockade_efficiency = 0.1 }
		requires = { global_ship_recruit_speed_inv }
		ai_will_do = {
			base = 1
		}
	}	

	# Level 11
	naval_rostra_inv_4 = {
		modifier = { octere_discipline = 0.05
					 mega_galley_discipline = 0.05 }
		requires = { double_bow_and_stern_inv_2 mega_catamaran_inv }
		ai_will_do = {
			base = 1
		}
	}
}