albion_mission = {
	header = "mission_image_macedon"  # placeholder when specific icon / header
	icon = "macedon_2"
	repeatable = no
	
	potential = {
		not = { has_variable = albion_mission }
		is_subject = no
		has_civil_war = no
		OR = {
			tag = AIO
			tag = HIB
			tag = CCC
			tag = BRA
			AND = {
				country_culture_group = britannic
				any_owned_province = {
					count >= 50
					OR =  {
						is_in_region = caledonia_region
						is_in_region = britain_region
					}
				}
			}
		}
	}

	abort ={
		is_subject = yes
		ai_mission_back_out_trigger = yes
		custom_tooltip = {
			text = albion_mission_abort
			any_owned_province = {
				count = 0
				OR =  {
					is_in_region = caledonia_region
					is_in_region = britain_region
				}
			}
		}
	}
	on_abort = {
		custom_tooltip = general_mission_cooldown_tt
		set_variable = {
			name = albion_mission
			days = 7300
		}
	}	
	on_start = {
		start_mission_ai_effect = yes
	}

	on_completion = {
        complete_mission_effect = yes
    }

	albion_main_mission_start = { #start main tree
	icon = task_political

	duration = 150

	bypass = {
		OR = {
			tag = AIO
			AND = {
				region:britain_region = {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
				region:caledonia_region =  {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
			}
		}
	}

		allow = {
			political_influence >= 60
			stability >= 40
			has_civil_war = no
		}

		on_start = {
			add_political_influence = -60
		}
		 on_completion = {
			trigger_event = {id = me_albion.19}
			custom_tooltip = completion_albion_main_mission_start
			add_country_modifier = {
				name = albion_mod_22
				duration = 7300 #20 years
			}
			hidden_effect = {
				region:britain_region = {
					every_region_province = {add_claim = ROOT}
				}
				region:caledonia_region = {
					every_region_province = {add_claim = ROOT}
				}
				every_country = {
					limit = {
						country_culture_group = britannic
						NOT = {
							is_subject_of = ROOT
						}
						NOT = {
							this = root
						}
					}
					add_opinion = {
						modifier = AIO_unification
						target = ROOT
					}
				}
			}
		}
	}
	albion_main_mission_1_1 = { # conquest of the west
		icon = task_expansion
		
		duration = 60
		
		requires = {
			albion_main_mission_start  #
		}
		bypass = {
			tag = AIO
		}
		allow = {
			custom_tooltip = {
				text = trigger_albion_main_mission_1_1
				region:caledonia_region = {
					area:hibernia_meridionalis_area = {
						any_area_province = {
							count = all
							OR = {
								has_owner = no
								owned_or_subject_owned = ROOT
							}
						}
					}
					area:hibernia_occidentalis_area = {
						any_area_province = {
							count = all
							OR = {
								has_owner = no
								owned_or_subject_owned = ROOT
							}
						}
					}	
					area:hibernia_orientalis_area = {
						any_area_province = {
							count = all
							OR = {
								has_owner = no
								owned_or_subject_owned = ROOT
							}
						}
					}
					area:hibernia_septentrionalis_area = {
						any_area_province = {
							count = all
							OR = {
								has_owner = no
								owned_or_subject_owned = ROOT
							}
						}
					}
				}
			}
		}
		highlight = {
			scope:province = {
				is_uninhabitable = no
				has_owner = yes
				OR = {
					is_in_area = hibernia_meridionalis_area
					is_in_area = hibernia_occidentalis_area
					is_in_area = hibernia_orientalis_area
					is_in_area = hibernia_septentrionalis_area
				}
				NOT = { owner = ROOT }
				owner = {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}

		on_start = {
			custom_tooltip = completion_albion_main_mission_1_1
			if = {
				limit = {
					OR = {
						primary_culture = ivernian
						primary_culture = voluntian
					}
				}
				trigger_event = {
					id = me_albion.31
				}
			}
			else_if = {
				limit = {
					any_country_culture = { #check if any of these culture are present in the country
						count >= 1
						OR = {
							is_culture = culture:ivernian
							is_culture = culture:voluntian
						}
					}
				}
				trigger_event = {
					id = me_albion.32
				}
			} 
			else = {
				hidden_effect = {
					add_political_influence = 20
					current_ruler = {
						add_popularity = 10
					}
				}
			}
		} 
	}	
	albion_main_mission_1_2 = { # conquest of the north
		icon = task_battle

		duration = 60

		requires = {
			albion_main_mission_start  #
		}
		bypass = { 
			tag = AIO	
		}
		allow = {
			custom_tooltip = {
				text = trigger_albion_main_mission_1_2
				region:caledonia_region = {
					area:caledonia_meridionalis_area = {
						any_area_province = {
							count = all
							OR = {
								has_owner = no
								owned_or_subject_owned = ROOT
							}
						}
					}
					area:caledonia_occidentalis_area = {
						any_area_province = {
							count = all
							OR = {
								has_owner = no
								owned_or_subject_owned = ROOT
							}
						}
					}	
					area:caledonia_septentrionalis_area = {
						any_area_province = {
							count = all
							OR = {
								has_owner = no
								owned_or_subject_owned = ROOT
							}
						}
					}
				}
			}
		}
		highlight = {
			scope:province = {
				is_uninhabitable = no
				has_owner = yes
				OR = {
					is_in_area = caledonia_meridionalis_area
					is_in_area = caledonia_occidentalis_area
					is_in_area = caledonia_septentrionalis_area
				}
				NOT = { owner = ROOT }
				owner = {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}

		on_start = {
			custom_tooltip = completion_albion_main_mission_1_2
			if = {
				limit = {
					OR = {
						primary_culture = votadinian
						primary_culture = caledonian
						primary_culture = damnonian
						primary_culture = taexalian
					}
				}
				trigger_event = {
					id = me_albion.31
				}
			}
			else_if = {
				limit = {
					any_country_culture = {
						count >= 1
						OR = {
							is_culture = culture:votadinian
							is_culture = culture:caledonian
							is_culture = culture:damnonian
							is_culture = culture:taexalian
						}
					}
				}
				trigger_event = {
					id = me_albion.33
				}
			} 
			else = {
				hidden_effect = {
					add_political_influence = 20
					current_ruler = {
						add_popularity = 10
					}
				}
			}
		}
	}
	albion_main_mission_1_3 = { # conquest of the south
		icon = task_conquest

		duration = 60

		requires = {
			albion_main_mission_start  #
		}
		
		bypass = { 
			tag = AIO
		}
		
		allow = {
			custom_tooltip = {
				text = trigger_albion_main_mission_1_3
				region:britain_region = {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
			}
		}
		highlight = {
			scope:province = {
				is_uninhabitable = no
				has_owner = yes
					is_in_region = britain_region
				NOT = { owner = ROOT }
				owner = {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}

		on_start = { 
			custom_tooltip = completion_albion_main_mission_1_3
			if = {
				limit = {
					OR = {
						primary_culture = iceni
						primary_culture = trinovantian
						primary_culture = cantian
						primary_culture = durotrigan
						primary_culture = dumnonian
						primary_culture = dobunnian
						primary_culture = demetian
						primary_culture = ordovitian
						primary_culture = coritani
						primary_culture = cornovian
						primary_culture = brigantic
						primary_culture = parisian
					}
				}
				trigger_event = {
					id = me_albion.31
				}
			}
			else_if = {
				limit = {
					any_country_culture = {
						count >= 1
						OR = {
							is_culture = culture:iceni
							is_culture = culture:trinovantian
							is_culture = culture:cantian
							is_culture = culture:durotrigan
							is_culture = culture:dumnonian
							is_culture = culture:dobunnian
							is_culture = culture:demetian
							is_culture = culture:ordovitian
							is_culture = culture:coritani
							is_culture = culture:cornovian
							is_culture = culture:brigantic
							is_culture = culture:parisian
						}
					}
				}
				trigger_event = {
					id = me_albion.34
				}
			}
			else = {
				hidden_effect = {
					add_political_influence = 20
					current_ruler = {
						add_popularity = 10
					}
				}
			}
		}
	}
	albion_main_mission_2_1 = { #port of the west
		icon = task_economical
		requires = {
			albion_main_mission_1_1  #
		}
	
		allow = {
				custom_tooltip = {
					text = trigger_albion_main_mission_2_1
					any_owned_province = {
						OR = {
							is_in_area = hibernia_meridionalis_area
							is_in_area = hibernia_occidentalis_area
							is_in_area = hibernia_orientalis_area
							is_in_area = hibernia_septentrionalis_area
						}
						is_state_capital = yes
						has_city_status = yes
						num_of_port_building >= 3
						total_population >= 20
					}
				}
			}


		highlight = {
			scope:province = {
				is_uninhabitable = no
				is_coastal = yes
				OR = {
					is_in_area = hibernia_meridionalis_area
					is_in_area = hibernia_occidentalis_area
					is_in_area = hibernia_orientalis_area
					is_in_area = hibernia_septentrionalis_area
				}
			}
		}
		on_completion = {
			custom_tooltip = completion_albion_main_mission_2_1
			show_as_tooltip = {
				random_province = {
					limit = {
						OR = {
							is_in_area = hibernia_meridionalis_area
							is_in_area = hibernia_occidentalis_area
							is_in_area = hibernia_orientalis_area
							is_in_area = hibernia_septentrionalis_area
						}
					}
					add_permanent_province_modifier  = {
						name = albion_mod_13
						duration = -1
					}
				}
			}
			trigger_event = {id = me_albion.14}
		}
	}
	albion_main_mission_2_2 = { #fortress of the north
		icon = task_heracles
		requires = {
			albion_main_mission_1_2  
		}
		
		allow = {
				custom_tooltip = {
					text = trigger_albion_main_mission_2_2
					any_owned_province = {
						OR = {
							terrain = forest
							terrain = mountain
							terrain = marsh
							}
						OR = {
							is_in_area = caledonia_meridionalis_area
							is_in_area = caledonia_occidentalis_area
							is_in_area = caledonia_septentrionalis_area
							}
							is_state_capital = yes
							has_city_status = yes
							num_of_fortress_building >= 3
							total_population >= 15
						}
					}
				}
		
		highlight = {
			scope:province = {
				is_uninhabitable = no
				OR = {
					is_in_area = caledonia_meridionalis_area
					is_in_area = caledonia_occidentalis_area
					is_in_area = caledonia_septentrionalis_area
				}
				OR = {
					terrain = forest
					terrain = mountain
					terrain = marsh
				}
			}
		}

		on_completion = {
			custom_tooltip = completion_albion_main_mission_2_2
			show_as_tooltip = {
				random_province = {
					limit = {
						OR = {
						is_in_area = caledonia_meridionalis_area
						is_in_area = caledonia_occidentalis_area
						is_in_area = caledonia_septentrionalis_area
						}
					}
					add_permanent_province_modifier  = {
						name = albion_mod_14
						duration = -1
					}
				}
			}
			trigger_event = {id = me_albion.15}
		}
	}
	albion_main_mission_2_3 = { #pearl of the south
		icon = task_happiness
		requires = {
			albion_main_mission_1_3  #
		}
		
		allow = {
			custom_tooltip = {
				text = trigger_albion_main_mission_2_3
				region:britain_region = {
					any_region_province = {
						has_city_status = yes
						owner = ROOT
						is_state_capital = yes
						total_population >= 25
						num_of_commerce_building >= 2
						num_of_forum_building >= 1
						OR = {
							terrain = plains
							terrain = farmland
							terrain = forest
						}
					}
				}
			}
		}
		highlight = {
			scope:province = {
				is_uninhabitable = no
				is_in_region = britain_region
				OR = {
					terrain = plains
					terrain = farmland
					terrain = forest
				}
			}
		}
		on_completion = {
			custom_tooltip = completion_albion_main_mission_2_3
			show_as_tooltip = {
				random_province = {
					limit = {
						is_in_region = britain_region
						has_city_status = yes
						OR = {
							terrain = plains
							terrain = farmland
							terrain = forest
						}
					}
					add_permanent_province_modifier  = {
						name = albion_mod_15
						duration = -1
					}
				}
			}
			trigger_event = {id = me_albion.16}
		}
	}	

	albion_main_mission_3 = { #victory over the island
		icon = task_apollo
		requires = {
			albion_main_mission_2_1 albion_main_mission_2_2 albion_main_mission_2_3
		}
		
		allow = {
			custom_tooltip = {
				text = trigger_albion_main_mission_3
				region:britain_region = {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
				region:caledonia_region =  {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
			}
			war = no
		}

		highlight = {
			scope:province = {
				is_uninhabitable = no
				has_owner = yes
					OR = {
					is_in_region = britain_region
					is_in_region = caledonia_region
					}
				NOT = { owner = ROOT }
				owner = {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_main_mission_3 
			trigger_event = { id = me_albion.13}
			hidden_effect = {
				region:caledonia_region = {
					every_region_province = {
						set_owned_by = ROOT
						if = {
							limit = {total_population < 1}
							create_pop = tribesmen
						}
						if = {
							limit = {total_population < 2}
							create_pop = freemen
						}	
					}
				}
				region:britain_region = {
					every_region_province = {
						set_owned_by = ROOT
						if = {
							limit = {total_population < 1}
							create_pop = tribesmen
						}
						if = {
							limit = {total_population < 2}
							create_pop = freemen
						}
					}
				}
			}
		}
	}

	albion_main_mission_4 = { #New power
		icon = task_atlas
		requires = {
			albion_main_mission_3
		}
		
		allow = { 
			custom_tooltip = {
				text = trigger_formed_albion
				has_variable = formed_albion_inv #add in the decision of Albion
			}
		}

		on_completion = { 
			trigger_event = { id = me_albion.11 }
			custom_tooltip =  completion_albion_main_mission_4
			add_country_modifier = {
				name = albion_mod_6
				duration = 36500 #100 years
			}
			remove_variable = formed_albion_inv
		}
	}

	albion_main_mission_5_1 = { # a new wall
		icon = task_expansion
		requires = {
			albion_main_mission_4
		}
		
		allow = { 
			#custom_tooltip = {
				#text = trigger_albion_main_mission_5_1
				num_of_ships >= 100
			#}
		}

		on_completion = { 
			trigger_event = { id = me_albion.8} 
			custom_tooltip = completion_albion_main_mission_5_1 #we will unlock the naval focus in the decision
			add_country_modifier = {
				name = albion_mod_31
				duration = -1
			}
		}
	}
	albion_main_mission_5_2 = { # stabilize the country
		icon = task_political
		requires = {
			albion_main_mission_4
		}
		
		allow = { 
			stability >= 60
			war = no
			has_monthly_balance >= 10
			has_monthly_income >= 25
		}

		on_completion = { 
			add_country_modifier = {
			name = albion_mod_9
			duration = 10950 #30 years
			} 
			trigger_event = { id = me_albion.7}
		} 
	}
	albion_main_mission_6_1 = { # professional sailor
		icon = task_expansion
		requires = {
			albion_main_mission_5_1 
		}
		
		allow = { 
			invention = trireme_discipline_inv_1
		}

		on_completion = { 
			custom_tooltip = completion_albion_main_mission_6_1 
			trigger_event = { id = me_albion.9}
			} #reward with a naval bonuses through the event
	}
	albion_main_mission_6_2 = { # a new adventure 
		icon = task_economical
		requires = {
			albion_main_mission_5_1 albion_main_mission_5_2  #
		}

		duration = 365
		
		allow = {
			treasury >= 1000
			political_influence >= 50
		}

		on_start = { 
			add_political_influence = -50
			add_treasury = -1000
			custom_tooltip = completion_albion_main_mission_6_2
			trigger_event = {id =  me_albion_travel.1 } #event to chose to travel OR not
		} 
	}

	albion_main_mission_6_3 = { # a new capital ?
		icon = task_athena
		requires = {
			albion_main_mission_5_2  #
		}

		duration = 120
		
		allow = {
			war = no
			trigger_if = {
				limit = {
					towards_civil_war = yes
				}
				towards_civil_war = no
			}	
		}

		on_completion = { 
			custom_tooltip = completion_albion_main_mission_6_3
			trigger_event = {id =  me_albion.17}
		} 
	}

	albion_main_mission_6_4 = { # developement focus 
		icon = task_economical
		requires = {
			#albion_main_mission_5_2  #
		}
		
		allow = {
			civic_tech >= 4
			treasury >= 250
			has_completed_mission_task = albion_main_mission_5_2
		}

		on_completion = { 
			add_treasury = -250 
			add_country_modifier = {
				name = albion_mod_18
				duration = 10950 #30 years
			}
			hidden_effect = {
				if = { #to avoid modifier stacking
					limit = {has_country_modifier = albion_mod_8}
					remove_country_modifier = albion_mod_8
					add_4_free_province_investments = yes
				}
			}
		}
	}

	albion_main_mission_6_5 = { #colonial adventure
		icon = task_expansion
		requires = {
			albion_main_mission_5_1  #
		}

		bypass = {
			area:ultima_thule_area = {
				any_area_province = {
					count = all
					owned_or_subject_owned = ROOT
				}
			}
			
		}
		
		allow = {
			custom_tooltip = {
                text = trigger_albion_main_mission_6_5
                any_unit = {
                    is_navy = yes
					OR = {
						unit_location = p:5820
						unit_location = p:5823
					}
                    any_sub_unit = {
                        count >= 30
                    }
                }
            }
		}

		highlight = {
			scope:province = {
				OR = {
                    province_id = 5820
					province_id = 5823
				}
			}
        }

		on_completion = { 
			custom_tooltip = completion_albion_main_mission_6_5
			if = {
				limit = {
					area:ultima_thule_area = {
						any_area_province = {
							count >= 1
							has_owner = no
							NOT = {
								OR = {
									province_id = 6037
									province_id = 6035
								}
							}
						}
					}
				}
				trigger_event = { id = me_albion.23 }
			}
			else = {
				trigger_event = { id = me_albion.24 }
				set_variable = {
					name = no_albion_colony
				}
			}
		 }

		 on_bypass = {
			set_variable = {
				name = no_albion_colony
			}
		 }
	}

	albion_main_mission_7_1 = { # reform the country
		icon = task_calm
		requires = { albion_main_mission_6_2 }

		bypass = {
			OR = {
				has_variable = albion_mission_refused_travel
				has_completed_mission_task = albion_main_mission_7_2
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_main_mission_7_1
			custom_tooltip = completion_albion_main_mission_7_1_bis
			trigger_event = {id = me_albion.18} 
		}
	}

	albion_main_mission_7_2 = { # invest in our tradition
		icon = task_religion
		requires = {
			albion_main_mission_6_2  #
		}
		
		allow = {
		}

		bypass = {
			has_completed_mission_task = albion_main_mission_7_1
		}

		on_completion = { 
			show_as_tooltip = {
				add_country_modifier = {
					name = albion_mod_65
					duration = 10950 #30 years
				}
			}
			if = {
				limit = {has_variable = visited_alexandria }
				remove_variable = visited_alexandria 
			}
			if = {
				limit = {has_variable = visited_carthage }
				remove_variable = visited_carthage
			}
			if = {
				limit = {has_variable = visited_greece }
				remove_variable = visited_greece
			}
			if = {
				limit = {has_variable = visited_rome }
				remove_variable = visited_rome
			}
			if = {
				limit = {has_variable = visited_tyre }
				remove_variable = visited_tyre
			}
			trigger_event = {id = me_albion.55}
			custom_tooltip = completion_albion_main_mission_7_2
		} 
	}

	albion_main_mission_7_3 = { # growing population
		icon = task_economical
		requires = {
			albion_main_mission_6_3  #
		}
		
		allow = {
			capital_scope = {
				total_population >= 50
				num_of_aqueduct_building >= 1
			}
		}

		on_completion = { add_5_free_province_investments = yes }
	}

	albion_main_mission_7_4 = { # capital infrastructure
		icon = task_political
		requires = {
			albion_main_mission_6_3  #
		}
		
		allow = {
			capital_scope.state = {
				calc_true_if = {
					amount >= 3
					state_improvement_military_trigger = yes 
					state_improvement_civic_trigger = yes
					state_improvement_oratory_trigger = yes
					state_improvement_religious_trigger = yes 
				}
			}
			capital_scope = {
				custom_tooltip = {
					text = trigger_albion_main_mission_7_4
					num_of_used_building_slots >= 6
				}
				trigger_if = {
					limit = {
						has_construction = yes
					}
					custom_tooltip = {
						text = ongoing_construction_trigger_tt
						has_construction = no
					}
				}
			}
		}
		on_completion = { 
			capital_scope = {
				add_permanent_province_modifier = {
					name = albion_mod_23
					duration = -1
				}
			}
	 	} 
	}

	albion_main_mission_7_5 = { # iron supplies
		icon = task_conquest
		requires = {
			albion_main_mission_6_4  #
		}
		
		allow = {
			any_owned_province = {
				count >= 3
				trade_goods = iron
				num_goods_produced >= 3
				OR = {
					num_of_foundry_building >= 1
					num_of_slave_mine_building >= 1
				}
				custom_tooltip = {
					text = caledonia_or_britain
					OR = {
						is_in_region = caledonia_region
						is_in_region = britain_region
					}
				}
			}
		}
		highlight = {
			scope:province = {
				OR = {
					is_in_region = caledonia_region
					is_in_region = britain_region
				}
				trade_goods = iron		
			}
		}

		on_completion = { 
			add_country_modifier = {
				name = albion_mod_24
				duration = -1
			} 
			trigger_event = {id = me_albion.20}	
		}
	}

	albion_main_mission_7_6 = { # feed the people
		icon = task_economical
		requires = {
			albion_main_mission_6_4  #
		}

		bypass = {
			any_province = {
				count <= 15
				OR = {
					is_in_region = caledonia_region
					is_in_region = britain_region
				}
				has_food_trade_good_trigger = yes
				has_city_status = no
			}
		}
		
		allow = {
			any_owned_province = {
				count >= 15
				has_food_trade_good_trigger = yes
				num_of_basic_settlement_infratructure_building >= 1
				custom_tooltip = {
					text = caledonia_or_britain
					OR = {
						is_in_region = caledonia_region
						is_in_region = britain_region
					}
				}
			}
		}

		highlight = {
			scope:province = {
				OR = {
					is_in_region = caledonia_region
					is_in_region = britain_region
				}
				has_food_trade_good_trigger = yes
				has_city_status = no		
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_main_mission_7_6
			show_as_tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = albion_mod_25
							duration = -1
					}
				}
			}
			hidden_effect = {
				region:britain_region = {
					every_region_province = {
						add_province_modifier = {
							name = albion_mod_25
							duration = -1
						}
					}
				}
				region:caledonia_region = {
					every_region_province = {
						add_province_modifier = {
							name = albion_mod_25
							duration = -1
						}	
					}
				}
			}
			trigger_event = { id  = me_albion.78 }
		} 
	}

	albion_main_mission_7_7 = { #prosper colony 
		icon = task_conquest
		requires = {
			albion_main_mission_6_5  #
		}
		
		bypass = { has_variable = no_albion_colony }
		
		allow = {
			trigger_if = { 
				limit = { has_variable = albion_norse_colony }
					var:albion_norse_colony = {
						owner = ROOT
						total_population >= 12
						civilization_value >= 20
						OR = {
							num_of_ports >= 1
							num_of_fortress_building >= 1
						}
					}
			}
			trigger_else = {
				custom_tooltip = {
					text = trigger_albion_main_mission_7_7
					num_of_ships >= 9999
				}
			}
		}
		on_completion = { 
			if = {
				limit = { has_variable = albion_norse_colony }
				show_as_tooltip = {
					var:albion_norse_colony = {
						add_province_modifier = {
							name = albion_mod_32
							duration = -1
						}
						if = {
							limit = { has_city_status = no }
							set_city_status = city
						}
					}
				}
				trigger_event = { id = me_albion.79 }
			}
			custom_tooltip =  completion_albion_main_mission_7_7
			hidden_effect = {
				area:ultima_thule_area = {
					every_area_province = {add_claim = ROOT}
				}
			}
		 } 
	}

	albion_main_mission_7_8 = { # Urban planning
		icon = task_economical
		requires = {
			albion_main_mission_6_4  #
		}
		
		allow = {
			custom_tooltip = {
				text = trigger_albion_main_mission_7_8
				any_owned_province = {
					count >= 15
					has_city_status = yes
					OR = {
						is_in_region = caledonia_region
						is_in_region = britain_region
					}
				}
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_main_mission_7_8
			show_as_tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = albion_mod_38
						duration = 14600 #40 years
					}
				}
			}
			custom_tooltip = completion_albion_main_mission_7_8_bis
			hidden_effect = {
				region:caledonia_region = {
					every_region_province = {
						limit = {
							has_city_status = yes
							is_capital = no
						}
						add_province_modifier = {
							name = albion_mod_38
							duration = 14600 #40 years
						}
					}
				}
				region:britain_region = {
					every_region_province = {
						limit = {
							has_city_status = yes
							is_capital = no
						}
						add_province_modifier = {
							name = albion_mod_38
							duration = 14600 #40 years
						}
					}
				}
				if = {
					limit = {
						capital_scope = {
							OR = {
								is_in_region = britain_region
								is_in_region = caledonia_region
							}
							has_city_status = yes
						}
					}
					capital_scope = {
						add_permanent_province_modifier = {
							name = albion_mod_38
							duration = -1
						}
					}
				}
		 	} 
		}
	}

	albion_main_mission_8_1 = { # a modern army
		icon = task_battle
		requires = {
			albion_main_mission_7_1  #
		}
		
		allow = {
			trigger_if = {
				limit = {has_variable = hellenic_ways}
				custom_tooltip = {
					text = albion_main_mission_8_1_hellenic_army
					any_legion = {
						any_legion_unit = {
							any_sub_unit = {
								count >= 20
								OR = {
									sub_unit_type = spearmen
									sub_unit_type = light_infantry
								}
							}
							any_sub_unit = {
								count >= 10
								OR = {
									sub_unit_type = light_cavalry
									sub_unit_type = heavy_cavalry
								} 
							}
						}
					}
				}
			}
			trigger_else_if = {
				limit = {has_variable = italic_ways}
				custom_tooltip = {
					text = albion_main_mission_8_1_italic_army
					any_legion = {
						any_legion_unit = {
							any_sub_unit = {
								count >= 20
								OR = {
									sub_unit_type = spearmen
									sub_unit_type = heavy_infantry
								}
							}
							any_sub_unit = {
								count >= 10
								sub_unit_type = heavy_cavalry
							}
						}
					}
				}
			}
			trigger_else_if = {
				limit = {has_variable = punic_ways}
				custom_tooltip = {
					text = albion_main_mission_8_1_punic_army
					any_legion = {
						any_legion_unit = {
							any_sub_unit = {
								count >= 20
								OR = {
									sub_unit_type = heavy_infantry
									sub_unit_type = light_infantry
								}
							}
							any_sub_unit = {
								count >= 10
								OR ={
									sub_unit_type = warelephant
									sub_unit_type = light_cavalry
								}
							}
						}
					}
				}
			}
			trigger_else = {
				custom_tooltip = { #preventing completing the mission with cheese 
					text = AIO_choose_a_way
					num_of_ships >= 9999
				}
			}
		}
		bypass = {
			OR = {
				has_variable = albion_mission_refused_travel
				has_completed_mission_task = albion_main_mission_7_2
			}
		}

		on_completion = { 
			if = {
				limit = { has_variable = italic_ways }
				trigger_event = { id = me_albion.61 }
			}
			else_if = {
				limit = { has_variable = hellenic_ways }
				trigger_event = { id = me_albion.62 }
			}
			else_if = {
				limit = { has_variable = punic_ways }
				trigger_event = { id = me_albion.60 }
			}
			else = {}
			custom_tooltip = completion_albion_main_mission_8_1
		 }
	}

	albion_main_mission_8_2 = { # new infrastructures
		icon = task_economical
		requires = {
			albion_main_mission_7_1  #
		}
		
		allow = {
			trigger_if = {
				limit = {has_variable = hellenic_ways}
				custom_tooltip = {
					text = albion_main_mission_8_2_hellenic_infra
					any_owned_province = {
						count >= 6
						has_city_status = yes
						OR = {
							AND = {
								num_of_academy_building >= 1
								num_of_military_building >= 2
							}
							num_of_temple_building >= 1
						}
						total_population >= 15
					}		
				}
			}
			trigger_else_if = {
				limit = {has_variable = italic_ways}
				custom_tooltip = {
					text = albion_main_mission_8_2_italic_infra
					any_owned_province = {
						count >= 6
						has_city_status = yes
						OR = {
							AND = {
								num_of_aqueduct_building >= 1
								num_of_forum_building >= 1
							}
							num_of_theathre_building >= 1
						}
						total_population >= 15
					}
				}
			}
			trigger_else_if = {
				limit = {has_variable = punic_ways}
				custom_tooltip = {
					text = albion_main_mission_8_2_punic_infra
					any_owned_province = {
						count >= 6
						has_city_status = yes
						OR = {
							AND = {
								num_of_port_building >= 1
								num_of_commerce_building >= 2
							}
							num_of_foundry_building >= 1
						}
						total_population >= 15
					}
				}
			}
			trigger_else = {
				custom_tooltip = { #preventing completing the mission with cheese 
					text = AIO_choose_a_way
					num_of_ships >= 9999
				}
			}
		}
		bypass = {
			OR = {
				has_variable = albion_mission_refused_travel
				has_completed_mission_task = albion_main_mission_7_2
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_main_mission_8_2
			trigger_event = { id = me_albion.59}
	 	} 
	}

	albion_main_mission_8_3 = { # a new alphabet
		icon = task_apollo
		requires = {
			albion_main_mission_7_1  #
		}
		duration = 365
		
		allow = {
			oratory_tech >= 4
			treasury >= 500
			political_influence >= 25
		}
		bypass = {
			OR = {
				has_variable = albion_mission_refused_travel
				has_completed_mission_task = albion_main_mission_7_2
			}
		}

		on_start = { 
			add_treasury = -500
			add_political_influence = -25
			custom_tooltip = completion_albion_main_mission_8_3
			trigger_event = { id = me_albion.58} }
		}

	albion_main_mission_8_4 = { # a celtic army
		icon = task_conquest
		requires = {
			albion_main_mission_7_2  #
		}
		
		allow = {
			custom_tooltip = {
				text = trigger_albion_main_mission_8_4
				any_legion = {
					any_legion_unit = {
						any_sub_unit = {
							count >= 20
							OR = {
								sub_unit_type = archers
								sub_unit_type = light_infantry
							}
						}
						any_sub_unit = {
							count >= 10
							OR ={
								sub_unit_type = chariots
								sub_unit_type = light_cavalry
							}
						}
					}
				}
			}
		}
		bypass = {
			has_completed_mission_task = albion_main_mission_7_1
		}

		on_completion = { 
			trigger_event = { id = me_albion.56 }
			custom_tooltip = completion_albion_main_mission_8_4
		}

	}

	albion_main_mission_8_5 = { #traditional architecture
		icon = task_calm
		requires = {
			albion_main_mission_7_2  #
		}
		
		allow = {
			custom_tooltip = {
				text = trigger_albion_main_mission_8_5
				any_owned_province = {
					count >= 6
					has_city_status = yes
					OR = {
						AND = {
							num_of_town_hall_building  >= 2
							num_of_court_building >= 1
						}
						num_of_temple_building >= 1
					}
					total_population >= 15
				}
			}
		}

		bypass = {
			has_completed_mission_task = albion_main_mission_7_1
		}

		on_completion = { 
			trigger_event = { id = me_albion.63 }
			show_as_tooltip = {
				add_country_modifier = {
					name = albion_mod_91
					duration = 14600 #40 years
				}
			}
		} 
	}

	albion_main_mission_8_6 = { # orale tradition
		icon = task_religion
		requires = {
			albion_main_mission_7_2
		}

		duration = 365
		
		allow = {
			political_influence >= 40
			oratory_tech >= 4
			religious_unity >= 0.85

		}

		bypass = {
			has_completed_mission_task = albion_main_mission_7_1
		}

		on_start = { 
			add_political_influence = -40
			custom_tooltip = completion_albion_main_mission_8_6
			trigger_event = { id = me_albion.57 }
		}
	}

	albion_main_mission_8_7 = { # assimilation
		icon = task_political
		requires = {
			albion_main_mission_7_3  #
		}
		
		allow = {
			trigger_if = {
				limit = { 
					war = yes
				}
				war = no
			}
			political_influence >= 25
			
		}

		on_completion = {
			custom_tooltip = completion_albion_main_mission_8_7 
			add_political_influence = -25
			trigger_event = {id = me_albion.21 }
		 } 
	}

	albion_main_mission_8_8 = { # new justice
		icon = task_apollo
		requires = {
			albion_main_mission_7_3
			albion_main_mission_7_4  
		}
		
		allow = {
			trigger_if = {
				limit = { 
					war = yes
				}
				war = no
			}
			capital_scope = {
				num_of_court_building >= 2
				num_of_academy_building >= 1
				num_of_temple_building >= 1
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_main_mission_8_8
			trigger_event = {id = me_albion.22 }
		} 
	}

	albion_main_mission_8_9 = { # importing supplies
		icon = task_economical
		requires = {
			albion_main_mission_7_4  #
		}
		
		allow = {
			capital_scope.state = {
				incoming_trade_routes >= 7
			}
		}

		on_completion = { 
			capital_scope = {
				add_permanent_province_modifier = {
					name = albion_mod_30
					duration = -1
				}
			}
		} 
	}

	albion_main_mission_8_10 = { # pile of wood
		icon = task_expansion
		requires = {
			albion_main_mission_7_5  
		}
		
		allow = {
			any_owned_province = {
				count >= 6
				custom_tooltip = {
					text = caledonia_or_britain 
					OR = {
						is_in_region = caledonia_region
						is_in_region = britain_region
					}
				}
					num_goods_produced >= 2
					trade_goods = wood
				}
			}
			
			highlight = {
				scope:province = {
					OR = {
						is_in_region = caledonia_region
						is_in_region = britain_region
					}
					trade_goods = wood
				}
			}
		on_completion = { 
			add_country_modifier = {
				name = albion_mod_39
				duration = -1
			}
			custom_tooltip = completion_albion_main_mission_8_10
			show_as_tooltip = {
				random_province = {
					limit = {
						OR = {
							is_in_region = caledonia_region
							is_in_region = britain_region
						}
					trade_goods = wood
					}
					add_permanent_province_modifier = {
						name = albion_mod_40
						duration = -1
					}
				}
			}
			hidden_effect = {
				region:britain_region = {
					every_region_province = {
						limit = {
							owner = ROOT
							trade_goods = wood
							num_goods_produced >= 2
						}
						add_permanent_province_modifier = {
							name = albion_mod_40
							duration = -1
						}
					}
				}
				region:caledonia_region = {
					every_region_province = {
						limit = {
							owner = ROOT
							trade_goods = wood
							num_goods_produced >= 2
						}
						add_permanent_province_modifier = {
							name = albion_mod_40
							duration = -1
						}
					}
				}
			}
		 } 
	}

	albion_main_mission_8_11 = { # Horse of Brigantia
		icon = task_economical
		requires = {
			albion_main_mission_7_5  #
		}
		
		allow = {
			p:2090 = {
				owner = ROOT
				is_holy_site = yes
				num_goods_produced >= 3
				has_city_status = yes
				num_of_temple_building >= 1
			}
			trigger_if = {
				limit = {
					p:2090 = {
						NOT = {
							dominant_province_religion = druidism
						}
					}	
				}
				p:2090 = {
					dominant_province_religion = druidism
				}
			}
		}
		
		highlight = {
			scope:province = {
				province_id = 2090
			}
		}

		on_completion = { 
			add_military_experience = 30
			add_country_modifier = {
				name = albion_mod_41
				duration = -1
			}
			p:2090 = {
				add_permanent_province_modifier = {
					name = albion_mod_42
					duration = -1 
				}
			}
			trigger_event = { id = me_albion.76 }
		 } 
	}

	albion_main_mission_8_12 = { # hunting party
		icon = task_artemis
		requires = {
			albion_main_mission_7_6  #
		}

		bypass = {
			any_province = {
				count < 3
				OR = {
					is_in_region = caledonia_region
					is_in_region = britain_region
				}
				trade_goods = wild_game
			}	
		}
		allow = {
			any_owned_province = {
				count >= 3
				num_of_hill_fort >= 1
				trade_goods = wild_game
			}
		}

		highlight = {
			scope:province = {
				OR = {
					is_in_region = caledonia_region
					is_in_region = britain_region
				}
				trade_goods = wild_game
			}
		}


		on_completion = { 
			add_innovation = 1
			add_country_modifier = {
				name = albion_mod_43
				duration = 7200 #20 years 
			}
			custom_tooltip = completion_albion_main_mission_8_12
			set_variable = {
				name = AIO_improved_olympics
			}
			trigger_event = { id = me_albion.77 }
		}	 
	}

	albion_main_mission_8_13 = { # salt conservation
		icon = task_calm
		requires = {
			albion_main_mission_7_6  #
		}
		
		allow = {
			any_owned_province = {
				count >= 4
				trade_goods = salt
				num_goods_produced >= 2
			}
			hidden:capital_scope.state = {
				trade_good_surplus = {
					target = salt
					value >= 2
				}
			}
		}

		highlight = {
			scope:province = {
				trade_goods = salt
				OR = {
					is_in_region = britain_region
					is_in_region = caledonia_region
				}
			}
		}

		on_completion = { 
			add_innovation = 2 
			add_country_modifier = {
				name = albion_mod_45
				duration = 9125 # 25 years
			}
		} 
	}

		albion_main_mission_8_15 = { #norse colony
		icon = task_diplomatic
		requires = {
			albion_main_mission_7_7  #
		}
		
		allow = {
				owns_area = ultima_thule_area
		}

		highlight = {
			scope:province = {
				is_in_area = ultima_thule_area
			}
		}

		on_completion = { 
			custom_tooltip = AIO_colony_established
			show_as_tooltip = {
				p:6043 = {
					add_province_modifier = {
						name = albion_mod_33
						duration = -1
					}
				}
			}
			custom_tooltip = completion_albion_main_mission_8_15
			hidden_effect = {
				area:ultima_thule_area = {
					every_area_province = {
						add_province_modifier = {
							name = albion_mod_33
							duration = -1
						}
					}
				}
			}
			trigger_event = {id = me_albion.25}
	 	}
	}

	albion_main_mission_9_1 = { # Down of a new era
		icon = task_zeus_cornucopia
		requires = {
			albion_main_mission_8_1
			albion_main_mission_8_2
			albion_main_mission_8_3 
		}

		duration = 182 #6 months
		
		allow = {
			trigger_if = {
				limit = {has_civil_war = yes }
				has_civil_war = no
			}
		}

		bypass = {
			OR = {
				has_variable = albion_mission_refused_travel
				has_completed_mission_task = albion_main_mission_7_2
			}	
		}

		on_start = {
			trigger_event = { id = me_albion.49  }
		}

		monthly_on_action = AIO_mission_pulse_1_on_action

		on_completion = {
			custom_tooltip = completion_albion_main_mission_9_1
			if = {
				limit = {has_variable = AIO_traditionnalist_appeased}
				remove_variable = AIO_traditionnalist_appeased
				if = {
					limit = { 
						OR = {
							has_variable = italic_ways
							has_variable = punic_ways
							has_variable = hellenic_ways
						}
					}
					trigger_event = {
						id = me_albion.52
						days = 1
					}
				}
			}
			else = {
				trigger_event = { id = me_albion.50  }
			}
			set_variable = {
				name = AIO_recent_completion
				days = 1825 #5 years
			}
		}
	}

	albion_main_mission_9_2 = { # Unify the tradition
		icon = task_political
		requires = {
			albion_main_mission_8_4
			albion_main_mission_8_5
			albion_main_mission_8_6 
		}
		
		allow = {
			treasury >= 750
			war = no
		}

		bypass = {
			has_completed_mission_task = albion_main_mission_7_1
		}

		on_completion = { 
			trigger_event = { id = me_albion.64  } 
			custom_tooltip = completion_albion_main_mission_9_2
			set_variable = {
				name = AIO_recent_completion
				days = 1825 #5 years
			}
		} 
	}

	albion_main_mission_9_3 = { # a new nobility
		icon = task_conquest
		requires = {
			albion_main_mission_8_7
		}
		
		allow = {
			capital_scope = {
				trigger_if = {
					limit = { num_of_nobles >= 1}
					nobles_happiness >= 0.75
				}
				num_of_nobles >= 17
			}

		}
		on_completion = { 
			custom_tooltip = completion_albion_main_mission_9_3
			trigger_event = { id = me_albion.66  } 
		} 
	}

	albion_main_mission_9_4 = { # new bureaucrats
		icon = task_calm
		requires = {
			albion_main_mission_8_8
		}
		
		allow = {
			capital_scope = {
				trigger_if = {
					limit = { num_of_citizen >= 1}
					citizen_happiness >= 0.75
				}
				num_of_citizen >= 25
			}
		}
		on_completion = { 
			custom_tooltip = completion_albion_main_mission_9_4
			trigger_event = { id = me_albion.65  } 
		} 
	}

	albion_main_mission_9_5 = { # trade hub
		icon = task_economical
		requires = {
			albion_main_mission_8_9
		}
		
		allow = {
			capital_scope.state = {
				state_commerce_income >= 5
			}
		}
		on_completion = { 
			custom_tooltip = completion_albion_main_mission_9_5
			trigger_event = { id = me_albion.67  } 
		} 
	}

	albion_main_mission_9_6 = { # my precious
		icon = task_economical
		requires = {
			albion_main_mission_8_10
			albion_main_mission_8_11
		}
		
		allow = {
			custom_tooltip = {
				text = trigger_albion_main_mission_9_6
				any_owned_province = {
					count >= 3
					trade_goods = precious_metals
					num_goods_produced >= 3
					OR = {
						num_of_foundry_building >= 1
						num_of_slave_mine_building >= 1
					}
					OR = {
						is_in_region = caledonia_region
						is_in_region = britain_region
					}
				}
			}
		}

		highlight = {
			scope:province = {
				OR = {
					is_in_region = caledonia_region
					is_in_region = britain_region
				}
					trade_goods = precious_metals
			}
		}
		on_completion = { 
			show_as_tooltip = {
				add_country_modifier = {
					name = albion_mod_56
					duration = 10950 #30 years
				}
				add_treasury = {
					add = has_monthly_income
					multiply = 24
					min = 500
					max = 3000
				}
			}
			trigger_event = {id = me_albion.36 }
		}
	}

	albion_main_mission_9_7 = { # New nectar
		icon = task_apollo
		requires = {
			albion_main_mission_8_12
			albion_main_mission_8_13
		}
		
		allow = {
			capital_scope = {
				is_importing_trade_good = wine
			}
		}
		
		on_completion = { 
			custom_tooltip = completion_albion_main_mission_9_7
			add_country_modifier = {
				name = albion_mod_57
				duration = 10950 #30 years
			}
			trigger_event = { id = me_albion.37 }

			set_variable = { #to unlock the decision to transform farmland into wine trade goods
				name = AIO_wine_import 
			}
		 } 
	}

	albion_main_mission_10_1 = { #Golden age
		icon = task_economical
		requires = {
			albion_main_mission_9_1
			albion_main_mission_9_2
		}
		
		allow = {
			war = no
			stability >= 50
			has_war_exhaustion <= 5
			custom_tooltip = {
				text = trigger_albion_main_mission_10_1
				AND = {
					not = { has_variable = AIO_recent_completion }
					OR = {
						has_completed_mission_task = albion_main_mission_9_1
						has_completed_mission_task = albion_main_mission_9_2
					}
				}
			}
		}
		on_completion = { 
			custom_tooltip = completion_albion_main_mission_10_1
			trigger_event = { id = me_albion.53 }
		 } 
	}

	albion_main_mission_10_2 = { # Imperial city
		icon = task_economical
		requires = {
			albion_main_mission_9_3
			albion_main_mission_9_4
			albion_main_mission_9_5
		}
		
		allow = {
			capital_scope = {
				has_province_rank = city_metropolis
				total_population >= 100
				province_income >= 1.75
			}
		}
		on_completion = { 
			trigger_event = { id  = me_albion.69 } 
			show_as_tooltip = {
				capital_scope = {
					add_permanent_province_modifier = {
						name = albion_mod_96
						duration = -1
					}
				}
			}
		} 
	}

	albion_main_mission_11_1 = { #  Celtic olympics games
		icon = task_battle
		requires = {
			albion_main_mission_9_1
		}
		
		allow = {
			stability >= 40
			political_influence >= 30
			treasury >= 1000
			has_civil_war = no
		}

		bypass = {
			OR = {
				has_variable = albion_mission_refused_travel
				has_completed_mission_task = albion_main_mission_7_2
			}	
		}
		
		on_completion = { 
			custom_tooltip = completion_albion_main_mission_11_1
			set_variable = {
				name = num_celt_olympics_game
				value = 1
			}
			add_political_influence = -30
			add_treasury = -1000
			trigger_event = { id = me_albion.38}
		 }
	}

	albion_main_mission_11_2 = { #  new starting point
		icon = task_economical
		requires = {
			albion_main_mission_10_1
		}
		
		allow = {
			war = no
		}
		on_completion = { 
			custom_tooltip = completion_albion_main_mission_11_2
			trigger_event = { id = me_albion.54}  
		} 
	}

	albion_main_mission_11_3 = { #  Manifest destiny
		icon = task_atlas
		requires = {
			albion_main_mission_10_1
			albion_main_mission_10_2
		}
		
		final = yes

		allow = {
			has_completed_mission_task = albion_conquest_mission_3_1
			has_civil_war = no
		}

		on_completion = {
			add_country_modifier = {
				name = albion_mod_19
				duration = -1
			} 
			current_ruler = {
				add_popularity = 20
			}
			trigger_event = { id = me_albion.68 }
		}
	}

	albion_side_mission_start = { # Centralize the tribe
		icon = task_political

		bypass = {is_tribal = no}
		allow = {
			centralization >= 70
		}
		on_completion = { trigger_event = {id = me_albion.6 }}
	}

	albion_side_mission_1 = { #  A political question
		icon = task_expansion
		requires = { albion_side_mission_start}
		bypass = {is_tribal = no}
		
		duration = 120
		allow = {}
		on_completion = { 
			custom_tooltip = completion_albion_side_mission_start
			trigger_event = {
				id = me_albion.2
			} 
		} 
	}

	albion_side_mission_2 = { #  Support of the elite
		icon = task_calm
		requires = { albion_side_mission_1}
		bypass = {is_tribal = no}
		allow = {
			trigger_if = {
				limit = {
					towards_civil_war = yes
				}
				towards_civil_war = no
			}
			trigger_if = {
				limit = { 
					has_civil_war = yes
				}
			has_civil_war = no
			}
			custom_tooltip = {
				text = trigger_albion_side_mission_2
				any_character ={
					count = 0
					is_head_of_family = yes
					loyalty <= 55
				}
			}
			current_ruler = { 
				popularity >= 70
			}
		}
		on_completion = {
			add_country_modifier = {
			name = albion_mod_7
			duration = 1825
			} 
			trigger_event =  {id= me_albion.3}
		} 
	}

	albion_side_mission_3_1 = { #  Absolute power
		icon = task_heracles
		requires = { albion_side_mission_2}
		bypass = {is_tribal = no}
		allow = {
			political_influence >= 50
			has_law = absolute_authority
			stability >= 40
			trigger_if = {
				limit = {
					towards_civil_war = yes
				}
				towards_civil_war = no
			}
			trigger_if = {
				limit = { 
					has_civil_war = yes
				}
			has_civil_war = no
			}
		}
		prevented_by = {albion_side_mission_3_2}
		on_completion = { 
			add_political_influence = -50
			change_government = despotic_monarchy
			switch_government_type_event_clearup_effect = yes  
			current_ruler = {
				add_martial = 2
				add_finesse = 1
				add_charisma = 1
				add_zeal = 2
			}
			add_tyranny = 30
			trigger_event =  {id= me_albion.5}
		} 
	}

	albion_side_mission_3_2 = { #  Respect the elder
		icon = task_happiness
		requires = { albion_side_mission_2}
		bypass = {is_tribal = no}
		allow = {
			political_influence >= 50
			has_law = increased_council_powers
			stability >= 40
			trigger_if = {
				limit = {
					towards_civil_war = yes
				}
				towards_civil_war = no
			}
			trigger_if = {
				limit = { 
					has_civil_war = yes
				}
			has_civil_war = no
			}
		}
		prevented_by = {albion_side_mission_3_1}
		on_completion = { 
			add_political_influence = -50
			change_government = democratic_republic
			switch_government_type_event_clearup_effect = yes
			current_ruler = {
				add_martial = 1
				add_finesse = 2
				add_charisma = 2
				add_zeal = 1
			}
			add_tyranny = -30
			trigger_event =  {id= me_albion.4}
		} 
	}

	albion_side_mission_4_1 = { #  Throne of Albion
		icon = task_battle
		requires = { albion_side_mission_3_1}
		prevented_by = {albion_side_mission_4_2 }
		allow = { 
			is_monarchy = yes
			treasury >= 250
			trigger_if = {
				limit = {
					towards_civil_war = yes
				}
				towards_civil_war = no
			}
			trigger_if = {
				limit = { 
					has_civil_war = yes
				}
			has_civil_war = no
			}
			current_ruler = {
				popularity >= 70
			}
			stability >= 50
			has_completed_mission_task = albion_main_mission_5_2
		}
		on_completion = {
			 add_treasury = -250
			 custom_tooltip = completion_albion_side_mission_4_1
			 trigger_event = {
				id = me_albion.1
			 }
		} 
	}

	albion_side_mission_4_2 = { #  Great republic of Albion
		icon = task_athena
		requires = { albion_side_mission_3_2}
		prevented_by = {albion_side_mission_4_1}
		allow = {
				is_republic = yes
				trigger_if = {
					limit = {
						towards_civil_war = yes
					}
					towards_civil_war = no
				}
				trigger_if = {
					limit = { 
						has_civil_war = yes
					}
				has_civil_war = no
				}
				stability >= 60
				has_completed_mission_task = albion_main_mission_5_2
		}
		on_completion = { 
			add_country_modifier = {
				name = albion_mod_5
				duration = -1
			}
			trigger_event =  {id= me_albion.12}
		}
	}

	albion_conquest_mission_start = { #brother in despair
		icon = task_happiness
		bypass = {
			region:armorica_region = {
				area:armorica_minoris_area = {
					any_area_province = {
						count = all
						OR = {
							owned_or_subject_owned = ROOT
							has_owner = no
						}
					}
				}
				area:armorica_centralis_area = {
					any_area_province = {
						count = all
						OR = {
							owned_or_subject_owned = ROOT
							has_owner = no
						}
					}
				}
				area:armorica_maioris_area = {
					any_area_province = {
						count = all
						OR = {
							owned_or_subject_owned = ROOT
							has_owner = no
						}
					}
				}
				area:cenomannia_area = {
					any_area_province = {
						count = all
						OR = {
							owned_or_subject_owned = ROOT
							has_owner = no
						}
					}
				}
			}
			region:belgica_region = {
				area:veliocassia_area = {
					any_area_province = {
						count = all
						OR = {
							owned_or_subject_owned = ROOT
							has_owner = no
						}
					}
				}
				area:morinia_area = {
					any_area_province = {
						count = all
						OR = {
							owned_or_subject_owned = ROOT
							has_owner = no
						}
					}
				}
				area:ganuenta_area = {
					any_area_province = {
						count = all
						OR = {
							owned_or_subject_owned = ROOT
							has_owner = no
						}
					}
				}
			}
		}

		allow = {
			has_completed_mission_task = albion_main_mission_5_1
			has_completed_mission_task = albion_main_mission_5_2
			has_civil_war = no
			political_influence >= 60
		}

		duration = 150

		on_start = {
			add_political_influence = -60
		}

		on_completion = { 
			trigger_event = {id = me_albion.26 }
			custom_tooltip = completion_albion_conquest_mission_start
			add_country_modifier = {
				name = albion_mod_22
				duration = 7300 #20 years
			}
			hidden_effect = {
				every_country = {
					limit = {
						NOT = {
							is_subject_of = ROOT
						}
						OR = {
							country_culture_group = belgae_group
							AND = {
								country_culture_group = gallic
								capital_scope = {
									is_in_region = armorica_region
								}
							}
						}
					}
					add_opinion = {
						modifier = AIO_foreign_conqueror
						target = ROOT
					}
				}
			}
		 } 
	}

	albion_conquest_mission_1_1 = { #secure coastal armorica
		icon = task_expansion
		requires = {
			albion_conquest_mission_start  
		}
		
		allow = {
			owns_or_subject_owns_area = armorica_minoris_area
			owns_or_subject_owns_area = armorica_centralis_area
			owns_or_subject_owns_area = armorica_maioris_area
			owns_or_subject_owns_area =	cenomannia_area
		}

		highlight = {
			scope:province = {
				OR = {
					is_in_area = armorica_minoris_area
					is_in_area = armorica_centralis_area
					is_in_area = armorica_maioris_area
					is_in_area = armorica_maioris_area
					is_in_area = cenomannia_area
				}
				NOT = { owner = ROOT}
				owner = {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}

		on_completion = { 
			add_political_influence = 20
			current_ruler = {
				add_popularity = 15
			}
		} 

	}
	albion_conquest_mission_1_2 = { #secure coastal belgica
		icon = task_battle
		requires = {
			albion_conquest_mission_start  
		}
		
		allow = {
			owns_or_subject_owns_area = veliocassia_area
			owns_or_subject_owns_area = morinia_area
			owns_or_subject_owns_area = ganuenta_area
		}

		highlight = {
			scope:province = {
				OR = {
				is_in_area = veliocassia_area
				is_in_area = morinia_area
				is_in_area = ganuenta_area
				}
				NOT = { owner = ROOT}
				owner = {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}

		on_completion = {
			add_political_influence = 20
			current_ruler = {
				add_popularity = 15
			} 
		} 
	}

	albion_conquest_mission_2_1 = { #Armorica restored
		icon = task_battle
		requires = {
			albion_conquest_mission_1_1 
		}
		
		allow = {
			owns_or_subject_owns_region = armorica_region
		}

		highlight = {
			scope:province = {
				is_in_region = armorica_region
				NOT = { owner = ROOT}
				owner = {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_conquest_mission_2_1
			trigger_event = { id  = me_albion.71 }  
		}
	}

	albion_conquest_mission_2_2 = { #Belgica restored
		icon = task_calm
		requires = {
			albion_conquest_mission_1_2
		}
		
		allow = {
			owns_or_subject_owns_region = belgica_region
		}

		highlight = {
			scope:province = {
				is_in_region = belgica_region
				NOT = { owner = ROOT}
				owner = {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_conquest_mission_2_2
			trigger_event = { id  = me_albion.70 } 
		}
	}

	albion_conquest_mission_3_1 = { #Albion channel 
		icon = task_expansion

		allow = {
			owns_or_subject_owns_region = armorica_region
			owns_or_subject_owns_region = belgica_region
		}

		requires = {
			albion_conquest_mission_2_1
			albion_conquest_mission_2_2
		}

		on_completion = { 
			custom_tooltip = claims_aquitaine_gaul
			hidden_effect = {
				region:aquitaine_region = {
					every_region_province = {add_claim = ROOT}
				}
				region:central_gaul_region = {
					every_region_province = {add_claim = ROOT}
				}
				region:transalpine_gaul_region = {
					every_region_province = {add_claim = ROOT}
				}
			}
			add_country_modifier = {
				name = albion_mod_55
				duration = -1
			}
			trigger_event = { id  = me_albion.35 }
		}
	}

	albion_conquest_mission_4_1 = { #aquitanian submission
		icon = task_political
		requires = {
			albion_conquest_mission_3_1
		}

		allow = {
			owns_or_subject_owns_region = aquitaine_region
		}

		highlight = {
			scope:province = {
				is_in_region = aquitaine_region
				NOT = { owner = ROOT}
				owner = {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_conquest_mission_4_1
			trigger_event = { id  = me_albion.72 } 
		} 
	}

	albion_conquest_mission_4_2 = { #central gaul expedition
		icon = task_conquest
		requires = {
			albion_conquest_mission_3_1
		}

		allow = {
			owns_or_subject_owns_region = central_gaul_region
		}

		highlight = {
			scope:province = {
				is_in_region = central_gaul_region
				NOT = { owner = ROOT}
				owner = {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_conquest_mission_4_2
			trigger_event = { id  = me_albion.73 } 
		}
	}

	albion_conquest_mission_5_1 = { #ports in mediteranean 
		icon = task_economical
		requires = {
			albion_conquest_mission_4_1
			albion_conquest_mission_4_2
		}

		allow = {
			custom_tooltip = {
				text = trigger_albion_conquest_mission_5_1
				any_owned_province = {
					count >= 4
					is_in_region = transalpine_gaul_region
					is_coastal = yes
					num_of_port_building >= 1
				}
			}
		}
		highlight = {
			scope:province = {
				is_in_region = transalpine_gaul_region
				is_coastal = yes
				NOT = {
					owner = ROOT
				}
			}
		}

		on_completion = {
			add_country_modifier = {
				name = albion_mod_54
				duration = 9125 # 25 years
			}
			add_2_free_province_investments = yes
			trigger_event = { id  = me_albion.75 }
		 } 
	}

	albion_conquest_mission_6_1 = { #deal with romans
		icon = task_battle
		requires = {
			albion_conquest_mission_5_1
		}

		bypass = {
			c:ROM = {
				OR = {
					has_land = no
					AND = {
						is_subject = yes
						NOT = {
							is_subject_of = ROOT
						}
					}
				}
			}
		}

		allow = {
			OR = {
				hidden:c:ROM = {
					opinion = { target = ROOT value >= 125}
				}
				custom_tooltip = {
					text = trigger_albion_conquest_mission_6_1
					OR = {
						trigger_if = {
							limit ={ 
								war_with = c:ROM
							}
							any_current_war = {
								war_score = {
									target = c:ROM
									value <= 60
								}
							}
						}
						trigger_else = {
							num_of_ships = 99999
						}
						c:ROM = {
							is_subject_of = ROOT
						}	
					}
				}
			}
		}
		on_completion = { 
			custom_tooltip = albion_roman_respect
			show_as_tooltip = {
				add_country_modifier = {
					name = albion_mod_34
					duration = 10950 #30 years
				}
				add_innovation = 4
				add_military_experience = 50
			}
			custom_tooltip = albion_roman_superiority
			show_as_tooltip = {
				add_country_modifier = {
					name = albion_mod_35
					duration = 10950 #30 years
				}
				add_military_experience = 100
			}
			hidden_effect = {
				if = {
					limit = {
						c:ROM = {
							opinion = { target = ROOT value >= 125}
							is_subject = no
						}
					}
					add_country_modifier = {
						name = albion_mod_34
						duration = 10950 #30 years
					}
					add_innovation = 4
					add_military_experience = 50
					trigger_event = {id = me_albion.27}
				}
				else = {
					add_country_modifier = {
						name = albion_mod_35
						duration = 10950 #30 years
					}
					add_military_experience = 100
					trigger_event = {id = me_albion.28}
				}
			}
		} 
	}
	albion_conquest_mission_6_2 = { #two kingdoms, one empire
		icon = task_economical
		requires = {
			albion_conquest_mission_5_1
		}

		allow = {
			owns_region = transalpine_gaul_region
			owns_region = armorica_region
			owns_region = aquitaine_region
			owns_region = central_gaul_region
			owns_region = belgica_region
		}

		highlight = {
			scope:province = {
				OR = {
					is_in_region = transalpine_gaul_region
					is_in_region = armorica_region
					is_in_region = aquitaine_region
					is_in_region= central_gaul_region
					is_in_region = belgica_region
				}
				NOT = {
					owner = ROOT
				}
			}
		}

		on_completion = { 
			add_country_modifier = {
				name = albion_mod_36
				duration = -1
			}
			add_innovation = 2
			current_ruler = {
				add_martial = 1
				add_finesse = 1
				add_charisma = 1
				add_zeal = 1
				add_popularity = 50
			}
			if = {
				limit = {is_monarchy = yes}
				add_legitimacy = 30
			}
			else = {
				add_political_influence = 50
				add_tyranny = -10
			}
			trigger_event = {id = me_albion.29 }
		} 
	}

	albion_conquest_mission_7_1 = { #Dynastic capital
		icon = task_economical
		requires = {
			albion_conquest_mission_6_2  #
		}
		allow = {
			custom_tooltip = {
				text = trigger_albion_conquest_mission_6_2
				any_owned_province = {
					OR = {
						is_in_region = transalpine_gaul_region
						is_in_region = armorica_region
						is_in_region = aquitaine_region
						is_in_region = central_gaul_region
						is_in_region = belgica_region
					}
					is_state_capital = yes
					has_province_rank = city_metropolis
					total_population >= 100
					dominant_province_culture = ROOT.culture
					dominant_province_religion = ROOT.religion
				}
			}
		}

		on_completion = { 
			custom_tooltip = completion_albion_conquest_mission_7_1
			show_as_tooltip = {
				capital_scope = {
					add_permanent_province_modifier = {
						name = albion_mod_37
						duration = -1
					}
				}
			}
			show_as_tooltip = {
				add_country_modifier = {
					name = albion_mod_46
					duration = -1
				}
			}
			trigger_event = { id = me_albion.30 }
		 }
	}
}


