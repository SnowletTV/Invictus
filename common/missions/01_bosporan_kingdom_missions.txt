01_bosporan_kingdom = { 
    header = "mission_image_general"
    icon = "general_1"

    repeatable = no
    chance = 1000

    potential = {
        NOT = { has_variable = mission_cooldown_var }
        tag = BPK
    }

    abort = {}
    on_start = {
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = mission_cooldown_var
            days = 7300
        }
    }
    on_completion = {}
    01_bosporan_kingdom_task_1 = {
        icon = "task_diplomatic"
        duration = 30
        highlight = {
            scope:province = {
                OR = {
                    is_in_area = taurica_area
                }
            }
        }
        allow = {
            political_influence >= 15
        }
        on_completion = {
            add_political_influence = -15
            area:taurica_area = {
                add_provincial_claim_effect = yes
            }
            trigger_event = me_bosporan.1
        }
    }
    01_bosporan_kingdom_task_2 = {
        icon = "task_conquest"
        requires = {01_bosporan_kingdom_task_1}
        highlight = {
            scope:province = {
                OR = {
                    province_id = 4536
                    province_id = 4538
                }
            }
        }
        allow = {
            owns_or_subject_owns = 4536
            owns_or_subject_owns = 4538
        }
        on_completion = {
            trigger_event = me_bosporan.2
            area:olbia_area = {
                add_provincial_claim_effect = yes
            }
            area:clepia_area = {
                add_provincial_claim_effect = yes
            }
        }
    }
    01_bosporan_kingdom_task_3 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_1}
        highlight = {
            scope:province = {
                OR = {
                    is_in_area = taurica_area
                }
            }
        }
        allow = {
            owns_or_subject_owns_area = taurica_area
        }
        on_completion = {
            trigger_event = me_bosporan.3
            area:maeotia_area = {
                add_provincial_claim_effect = yes
            }
            area:borysthenia_minor_area = {
                add_provincial_claim_effect = yes
            }
        }
    }
    01_bosporan_kingdom_task_4 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_2 01_bosporan_kingdom_task_3}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.4
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_5 = {
        icon = "task_expansion"
        highlight = {
            scope:province = { province_id = 4544 }
        }
        allow = {
            p:4544 = {
                num_of_port_building >= 2
            }
            hidden:p:4544.state = {
                custom_tooltip = {
                    text = "bosporan_needs_civic_investments_tt"
                    calc_true_if = {
                        amount >= 1
                        state_improvement_oratory_trigger = yes   
                    }
                }
            }
        }
        on_completion = {
            current_ruler = {
                add_popularity = 5
            }
            p:4544 = {
                add_permanent_province_modifier = {
                    name = theodosia_warm_water_port_mod
                }
            }
            trigger_event = me_bosporan.5
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_6 = {
        icon = "task_battle"
        requires = {01_bosporan_kingdom_task_5}
        highlight = {
            scope:province = { province_id = 2746 }
        }
        allow = {
            war = no
            custom_tooltip = {
                text = bosporan_missions_task_6_tt
                any_unit = {
                    is_navy = yes
                    unit_location = p:2746
                    any_sub_unit = {
                        count >= 30
                    }
                }
            }
        }
        on_completion = {
            p:4565 = {
                remove_province_modifier = pirate_haven_modifier
            }
            current_ruler = {
                add_martial = 1
            }
            trigger_event = me_bosporan.6
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_7 = {
        icon = "task_calm"
        duration = 60
        requires = {01_bosporan_kingdom_task_5}
        allow = {
            political_influence >= 10
            treasury >= 25
            capital_scope.state = {
                trade_good_surplus = {
                    target = grain
                    value >= 2
                }
            }
        }
        on_completion = {
            add_political_influence = -10
            add_treasury = -25
            p:4544 = {
                while = {
                    count = 3
                    define_pop = {
                        type = freemen
                        culture = athenian
                        religion = roman_pantheon
                    } 
                }
            }
            trigger_event = me_bosporan.7
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_8 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_6 01_bosporan_kingdom_task_7}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.8
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_9 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_4 01_bosporan_kingdom_task_8}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.9
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_10 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_9}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.10
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_11 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_10}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.11
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_12 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_4}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.12
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_13 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_8}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.13
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_14 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_12}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.14
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_15 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_11}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.15
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_16 = {
        icon = "task_political"
        requires = {01_bosporan_kingdom_task_13}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.16
            show_as_tooltip = {

            }
        }
    }
    01_bosporan_kingdom_task_17 = {
        icon = "task_political"
        final = yes
        requires = {01_bosporan_kingdom_task_14 01_bosporan_kingdom_task_15 01_bosporan_kingdom_task_16}
        allow = {}
        on_completion = {
            trigger_event = me_bosporan.15
            show_as_tooltip = {

            }
        }
    }
}