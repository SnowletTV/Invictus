barbaricum_noricum_mission = {
    header = "mssion_gaul"
	icon = "general_1"

    repeatable = no

    chance = {
        factor = 5
    }

    potential = {
        NOT = { has_variable = barbaricum_noricum_mission }
        is_subject = no
        has_civil_war = no
		primary_culture = noric
		is_tribal = yes
		OR = {
			tag = NRC
			c:NRC = {
				has_land = no
			}
		}
    }

    abort = {
        ai_mission_back_out_trigger = yes
    }

    on_start = {
        start_mission_ai_effect = yes
		trigger_event = flavor_gaul.81
    }

    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = barbaricum_noricum_mission
            days = 7300
        }
    }

    on_completion = {
        complete_mission_effect = yes
    }


    barbaricum_noricum_mission_task_1 = { # Norican Diplomacy

        icon = "task_diplomatic"
		


        highlight = {
			scope:province = {
				is_in_region = rhaetia_region
                has_owner = yes
                owner = {
                    is_subject = no
                    primary_culture = noric
                }
			}
        }
		
        allow = {
			region:rhaetia_region = {
	        	any_region_province = {
					count >= 21
					custom_tooltip = {
						text = barbaricum_noricum_mission_task_1_requirement_tt #we are allied or they have an opinion >= 25 with us, they = Noricans in Rhaetia with a total sum of 21 Norican province
						has_owner = yes
						owner = {
							OR = {
								alliance_with = root
								opinion = {
									target = root
									value >= 25
								}
							}
							primary_culture = noric
						}
					}
	        	}
			}	
		}
		
		bypass = {
			owns_or_subject_owns_area = alpes_raetiae_orientalis
			owns_or_subject_owns_area = helvetia_orientalis_area
			owns_or_subject_owns_area = lauriacum_area
        }

        on_completion = {
			custom_tooltip = barbaricum_noricum_mission_task_1_reward_tt #send envoys to Noricans and they might become feudatories
			trigger_event = flavor_gaul.82 # 83,84,85
        }
    }
	
	barbaricum_noricum_mission_task_2 = { # Balance the Tribes
        icon = "task_political"


        allow = {	
			custom_tooltip = {
				text = barbaricum_treveria_mission_task_3_tt #all clan chiefs have loyalty >=70
				NOT = {
					any_character = {
						is_clan_chief = yes
						loyalty <= 70
					}
				}
			}
			has_law = absolute_authority
        }

        on_completion = {
			add_political_influence = 25
        }
    }
	
	barbaricum_noricum_mission_task_3 = { # Norican Unification
		requires = { barbaricum_noricum_mission_task_1 barbaricum_noricum_mission_task_2 }
        icon = "task_diplomatic"
		duration = 180


        allow = {
			political_influence >= 50
			stability >= 50
        }
		
		on_start = {
			trigger_event = flavor_gaul.86
			show_as_tooltip = {
				add_political_influence = -50
			}
		}

        on_completion = {
			show_as_tooltip = {
				change_government = despotic_monarchy
				change_country_name = "NORICUM_NAME"
			}
			trigger_event = flavor_gaul.87
			custom_tooltip = barbaricum_noricum_claims_3_tt
			hidden_effect = {
				area:alpes_raetiae_orientalis = { mission_area_claim_effect = yes }
				area:helvetia_orientalis_area = { mission_area_claim_effect = yes }
				area:lauriacum_area = { mission_area_claim_effect = yes }
				area:noricum_mediterranum_area = { mission_area_claim_effect = yes }
			}
			current_ruler = {
				add_trait = silver_tongued
			}
        }
    }
	
	barbaricum_noricum_mission_task_4 = { # The Norican Border
		requires = { barbaricum_noricum_mission_task_3 }
       	icon = "task_conquest"
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = alpes_raetiae_orientalis
					is_in_area = helvetia_orientalis_area
					is_in_area = lauriacum_area
					is_in_area = noricum_mediterranum_area
				}
			}
		}


        allow = {
			owns_or_subject_owns_area = alpes_raetiae_orientalis
			owns_or_subject_owns_area = helvetia_orientalis_area
			owns_or_subject_owns_area = lauriacum_area
			owns_or_subject_owns_area = noricum_mediterranum_area
			any_owned_province = {
				count >=3
				OR = {
					is_in_area = alpes_raetiae_orientalis
					is_in_area = helvetia_orientalis_area
					is_in_area = lauriacum_area
					is_in_area = noricum_mediterranum_area
				}
				fort_level >= 1
			}
        }

        on_completion = {
			custom_tooltip = barbaricum_noricum_claims_4_tt
			hidden_effect = {
				area:ferraria_area = { mission_area_claim_effect = yes }
				area:venetia_area = { mission_area_claim_effect = yes }
				area:histria_area = { mission_area_claim_effect = yes }
				area:dalmatia_occidentalis_area = { mission_area_claim_effect = yes }
				area:alpes_raetiae_occidentalis = { mission_area_claim_effect = yes }
				area:alpes_graiae_area = { mission_area_claim_effect = yes }
				area:dalmatia_centralis_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_noricum_mission_task_5 = { # The Adriatic Coast
		requires = { barbaricum_noricum_mission_task_4 barbaricum_noricum_mission_task_6 }
        	icon = "task_conquest"
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = ferraria_area
					is_in_area = venetia_area
					is_in_area = histria_area
					is_in_area = dalmatia_occidentalis_area
					is_in_area = dalmatia_centralis_area
				}
			}
		}


        allow = {
			owns_or_subject_owns_area = ferraria_area
			owns_or_subject_owns_area = venetia_area
			owns_or_subject_owns_area = histria_area
			owns_or_subject_owns_area = dalmatia_occidentalis_area
			owns_or_subject_owns_area = dalmatia_centralis_area
        }

        on_completion = {
			custom_tooltip = barbaricum_noricum_claims_5_tt
			hidden_effect = {
				area:dumnonia_area = { mission_area_claim_effect = yes }
				area:morinia_area = { mission_area_claim_effect = yes }
				area:ganuenta_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_noricum_mission_task_6 = { # Delegation to the Senate
		requires = { barbaricum_noricum_mission_task_3 }
        icon = "task_diplomatic"
		duration = 365
		
		highlight = {
			scope:province = {
				owned_or_subject_owned = c:ROM
			}
        }


        allow = {
			c:ROM = {
				has_land = yes
			}
			NOR = {
				alliance_with = c:ROM
				war_with = c:ROM
			}
			any_character = {
				has_office = office_foreign_minister
				charisma >= 7
			}
        }
		
		bypass = {
			c:ROM = {
				has_land = no
			}
		}
		
		on_start = {
			c:ROM = {
				trigger_event = flavor_gaul.87 #answers 88 + 89
				days = { 360 365 }
			}
		}

        on_completion = {
			custom_tooltip = barbaricum_noricum_mission_task_6_tt #we might become allied to Rome
        }
    }
	
	barbaricum_noricum_mission_task_7 = { # Royal Blood
		requires = { barbaricum_noricum_mission_task_3 }
        icon = "task_political"

        allow = {
			any_character = {
				is_spouse_of = root.current_ruler
			}
			any_character = {
				has_trait = first_born
			}
			any_character = {
				has_trait = second_born
			}
			any_character = {
				has_trait = third_born
			}
        }

        on_completion = {
			show_as_tooltip = {
				current_ruler = {
					add_zeal = 1
					add_martial = 1
					add_finesse = 1
					add_charisma = 1
					add_popularity = 10
				}
				random_character = {
					limit = {
						is_primary_heir = yes
						has_trait = first_born
					}
					add_zeal = 1
					add_martial = 1
					add_finesse = 1
					add_charisma = 1
				}
			}
			trigger_event = flavor_gaul.90
        }
    }
	
	barbaricum_noricum_mission_task_8 = { # Spread our Dynasty
		requires = { barbaricum_noricum_mission_task_7 }
        icon = "task_diplomatic"


        allow = {
			any_subject = {
				num_of_cities >=4
			}
			custom_tooltip = {
				text = barbaricum_noricum_mission_task_8_requirement_tt #have male heir that is not primary heir and must be adult
				any_character = {
					OR = {
						has_trait = second_born
						has_trait = third_born
						has_trait = fourth_born
						has_trait = fifth_born
						has_trait = sixth_born
						has_trait = seventh_born
						has_trait = eighth_born
					}
					is_primary_heir = no
					is_male = yes
					is_adult = yes
				}
			}
			
        }

        on_completion = {
			custom_tooltip = barbaricum_noricum_mission_task_8_reward_tt
			trigger_event = flavor_gaul.91
			show_as_tooltip = {
				add_legitimacy = 20
			}
			#subject becomes monarchy with ruler of our family
        }
    }
	
	barbaricum_noricum_mission_task_9 = { # Roman Client Kingdom
		requires = { barbaricum_noricum_mission_task_5 barbaricum_noricum_mission_task_8 }
        	icon = "task_diplomatic"
		
		highlight = {
			scope:province = {
				owned_or_subject_owned = c:ROM
			}
        }


        allow = {
		
        }

        on_completion = {
			
        }
    }
	
	barbaricum_noricum_mission_task_10 = { # Roman Rival
		requires = { barbaricum_noricum_mission_task_5 }
        icon = "task_battle"
		
		highlight = {
			scope:province = {
				owned_or_subject_owned = c:ROM
			}
        }


        allow = {
			c:ROM = {
				has_land = no
			}
        }
		
		bypass = {
			c:ROM = {
				is_subject_of = root
			}
		}

        on_completion = {
			show_as_tooltip = {
				add_military_experience = 20
			}
        }
    }
	
	barbaricum_noricum_mission_task_11 = { # Norico Est Imperare Orbi Universo
		requires = { barbaricum_noricum_mission_task_9 barbaricum_noricum_mission_task_10 }
        icon = "task_expansion"
		final = yes

        allow = {
			num_of_cities >= 100
        }

        on_completion = {
			show_as_tooltip = {
				add_3_free_province_investments = yes
				add_legitimacy = 20
			}
			trigger_event = flavor_gaul.92
        }
    }
	
	barbaricum_noricum_mission_task_12 = { # Altar of Virunum
		requires = { barbaricum_noricum_mission_task_2 }
        icon = "task_economical"
		
		highlight = {
			scope:province = {
				province_id = 3671
			}
		}


        allow = {
			owns = 3671
			p:3671 = {
				OR = {
					has_province_rank = city 
					has_province_rank = city_metropolis
				}
				free_building_slots = 0
				civilization_value >= 40
				has_building = forum_building
			}
        }

        on_completion = {
			show_as_tooltip = {
				p:3671 = {
					add_province_modifier = {
						name = altar_of_virunum
						duration = -1
					}
					create_state_pop = citizen
					create_state_pop = citizen
					create_state_pop = freemen
					create_state_pop = freemen
				}
			}
			trigger_event = flavor_gaul.93
        }
    }
	
	barbaricum_noricum_mission_task_13 = { # The Central Alpine Passes
		requires = { barbaricum_noricum_mission_task_4 }
        icon = "task_diplomatic"
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = alpes_raetiae_occidentalis
					is_in_area = alpes_graiae_area
				}
			}
		}


        allow = {
			owns_or_subject_owns_area = alpes_raetiae_occidentalis
			owns_or_subject_owns_area = alpes_graiae_area
        }

        on_completion = {
			custom_tooltip = barbaricum_noricum_claims_13_tt
			hidden_effect = {
				area:helvetia_inferioris_area = { mission_area_claim_effect = yes }
				area:tulingia_area = { mission_area_claim_effect = yes }
				area:helvetia_superioris_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_noricum_mission_task_14 = { # Source of the Danube
		requires = { barbaricum_noricum_mission_task_13 }
        icon = "task_conquest"
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = helvetia_inferioris_area
					is_in_area = tulingia_area
					is_in_area = helvetia_superioris_area
				}
			}
		}


        allow = {
			owns_or_subject_owns_area = helvetia_inferioris_area
			owns_or_subject_owns_area = tulingia_area
			owns_or_subject_owns_area = helvetia_superioris_area
        }

        on_completion = {
			p:3636 = {
				if = {
					limit = {
						NOR = { 
							has_province_rank = city 
							has_province_rank = city_metropolis
						} 
					}
					custom_tooltip = "time_to_complete_city_tt"
					hidden_effect = {
						add_province_modifier = {
							name = founding_city_in_progress
							duration = 730
						}
					}
					trigger_event = {
						id = state_improvement.6
						days = 730
					}
				}
				else = {
					create_state_pop = freemen
					create_state_pop = freemen
					create_state_pop = freemen
					create_state_pop = freemen
				}
			}
			p:3773 = {
				if = {
					limit = {
						NOR = { 
							has_province_rank = city 
							has_province_rank = city_metropolis
						} 
					}
					custom_tooltip = "time_to_complete_city_tt"
					hidden_effect = {
						add_province_modifier = {
							name = founding_city_in_progress
							duration = 730
						}
					}
					trigger_event = {
						id = state_improvement.6
						days = 730
					}
				}
				else = {
					create_state_pop = freemen
					create_state_pop = freemen
					create_state_pop = freemen
					create_state_pop = freemen
				}
			}
			#make Brigantium 3636 a city and 3773, too
        }
    }
	
	barbaricum_noricum_mission_task_15 = { # Import Food
        icon = "task_economical"


         allow = {
			capital_scope = {
				OR = {
					is_importing_trade_good = grain
					is_importing_trade_good = fish
					is_importing_trade_good = cattle
					is_importing_trade_good = honey
					is_importing_trade_good = vegetables
					is_importing_trade_good = dates
					is_importing_trade_good = fruits
				}
			}
			capital_scope.state = {
				has_state_food >= 350.0
			}
        }

        on_completion = {
			custom_tooltip = barbaricum_noricum_claims_15_tt
			hidden_effect = {
				area:marcomannia_minores_area = { mission_area_claim_effect = yes }
				area:marcomannia_maiores_area = { mission_area_claim_effect = yes }
				area:boioa_meridionalis_area = { mission_area_claim_effect = yes }
				area:noricum_mediterranum_area = { mission_area_claim_effect = yes }
				area:pannonia_prima_occidentalis_area = { mission_area_claim_effect = yes }
				area:carnuntia_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_noricum_mission_task_16 = { # Threat of Encirclement
        requires = { barbaricum_noricum_mission_task_15 }

        icon = "task_battle"
		
		highlight = {
			scope:province = {
				OR = {
					owner = c:BOA
					owner = c:TSC
				}
			}
		}


        allow = {
			c:TSC = {
				OR = {
					has_land = no
					is_subject_of = root
				}
			}
			c:TSC = {
				OR = {
					has_land = no
					is_subject_of = root
				}
			}
        }

        on_completion = {
			add_stability = 10
			add_military_experience = 10
        }
    }
	
	barbaricum_noricum_mission_task_17 = { # Decline of the Pannonian Celts
		requires = { barbaricum_noricum_mission_task_15 }
        icon = "task_happiness"
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = noricum_mediterranum_area
					is_in_area = carnuntia_area
					is_in_area = pannonia_prima_occidentalis_area
				}
			}
		}


        allow = {
			owns_or_subject_owns_area = noricum_mediterranum_area
			owns_or_subject_owns_area = carnuntia_area
			owns_or_subject_owns_area = pannonia_prima_occidentalis_area
        }

        on_completion = {
			custom_tooltip = barbaricum_noricum_claims_15_tt
			hidden_effect = {
				area:marcomannia_minores_area = { mission_area_claim_effect = yes }
				area:marcomannia_maiores_area = { mission_area_claim_effect = yes }
				area:boioa_meridionalis_area = { mission_area_claim_effect = yes }
				area:noricum_mediterranum_area = { mission_area_claim_effect = yes }
				area:pannonia_prima_occidentalis_area = { mission_area_claim_effect = yes }
				area:carnuntia_area = { mission_area_claim_effect = yes }
				area:savia_orientalis_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_noricum_mission_task_18 = { # Norican Pannonia
		requires = { barbaricum_noricum_mission_task_17 }
        icon = "task_conquest"

        highlight = {
			scope:province = {
				OR = {
					is_in_area = pannonia_prima_orientalis_area
					is_in_area = pannonia_valeria_area
					is_in_area = savia_occidentalis_area
					is_in_area = pannonia_secunda_area
					is_in_area = pannonia_terminus_area
					is_in_area = savia_orientalis_area
				}
			}
		}


        allow = {
			owns_or_subject_owns_area = pannonia_prima_orientalis_area
			owns_or_subject_owns_area = pannonia_valeria_area
			owns_or_subject_owns_area = savia_occidentalis_area
			owns_or_subject_owns_area = pannonia_secunda_area
			owns_or_subject_owns_area = pannonia_terminus_area
			owns_or_subject_owns_area = savia_orientalis_area
        }

        on_completion = {
			custom_tooltip = barbaricum_noricum_claims_18_tt
			hidden_effect = {
				area:transcarpathia_occidentalis_area = { mission_area_claim_effect = yes }
				area:porolissensis_area = { mission_area_claim_effect = yes }
				area:porolissensis_inferioris_area = { mission_area_claim_effect = yes }
				area:transcarpathia_orientalis_area = { mission_area_claim_effect = yes }
				area:iazygia_minoris_area = { mission_area_claim_effect = yes }
				area:iazygia_majoris_area = { mission_area_claim_effect = yes }
				area:apulensis_area = { mission_area_claim_effect = yes }
				area:transcarpathia_centralis_area = { mission_area_claim_effect = yes }
			}
        }
    }
	
	barbaricum_noricum_mission_task_19 = { # Carpathian Basin
		requires = { barbaricum_noricum_mission_task_18 }
        icon = "task_conquest"
		
		highlight = {
			scope:province = {
				OR = {
					is_in_area = transcarpathia_occidentalis_area
					is_in_area = porolissensis_area
					is_in_area = porolissensis_inferioris_area
					is_in_area = transcarpathia_orientalis_area
					is_in_area = iazygia_minoris_area
					is_in_area = iazygia_majoris_area
					is_in_area = apulensis_area
					is_in_area = transcarpathia_centralis_area
				}
			}
		}


        allow = {
			owns_or_subject_owns_area = transcarpathia_occidentalis_area
			owns_or_subject_owns_area = porolissensis_area
			owns_or_subject_owns_area = porolissensis_inferioris_area
			owns_or_subject_owns_area = transcarpathia_orientalis_area
			owns_or_subject_owns_area = iazygia_minoris_area
			owns_or_subject_owns_area = iazygia_majoris_area
			owns_or_subject_owns_area = apulensis_area
			owns_or_subject_owns_area = transcarpathia_centralis_area
        }

        on_completion = {
			show_as_tooltip = {
				add_country_modifier = {
					name = norican_dacia #defensiveness, fort cost
					duration = 7300
				}
				add_military_experience = 10
			}
			trigger_event = flavor_gaul.94
        }
    }
	
	barbaricum_noricum_mission_task_20 = { # Expand the Iron Mines
	
        icon = "task_economical"
		
		highlight = {
			scope:province = {
				OR = {
					province_id = 3672
					province_id = 4131
				}
			}
		}

        allow = {
			p:3672 = {
				has_building = slave_mine_building
			}
			p:4131 = {
				has_building = slave_mine_building
			}
        }

        on_completion = {
			p:3672 = {
				create_state_pop = slaves
				create_state_pop = slaves
				create_state_pop = slaves
				create_state_pop = slaves
				create_state_pop = slaves
			}
			p:4131 = {
				create_state_pop = slaves
				create_state_pop = slaves
				create_state_pop = slaves
				create_state_pop = slaves
				create_state_pop = slaves
			}
        }
    }
	
	barbaricum_noricum_mission_task_21 = { # Ferrum Noricum
		requires = { barbaricum_noricum_mission_task_20 }
        icon = "task_expansion"
		duration = 365
		
		highlight = {
			scope:province = {
				OR = {
					province_id = 3672
					province_id = 4131
				}
			}
        }


        allow = {
			owns = 3672
			owns = 4131
			treasury >= 250
			military_experience >= 20
        }
		
		on_start = {
			show_as_tooltip = {
				add_treasury = -250
			}
			trigger_event = flavor_gaul.95
		}

        on_completion = {
			show_as_tooltip = {
				add_country_modifier = {
					name = noricum_ferrum_noricum_mod
					duration = -1
				}
			}
			trigger_event = flavor_gaul.96
        }
    }
	
	
    
}
