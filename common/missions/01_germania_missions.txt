germania_mission = {
	header = "mssion_gaul"
    icon = cde_celts_battle_romans_celts
	repeatable = no
	
	potential = {
		not = { has_variable = germania_mission }
		not = {tag = GEE}
		is_subject = no
		has_civil_war = no
		OR = {
			has_variable = germania_mission_allowed_var
			any_owned_province = {
				count >= 50
				OR =  {
					is_in_region = germania_region
					is_in_region = germania_superior_region
					is_in_region = venedia_region
					is_in_region = vistulia_region
					is_in_region = scandinavia_region
					is_in_region = bohemia_area
				}
			}
		}
	}

	abort ={
		is_subject = yes
		ai_mission_back_out_trigger = yes
	}

	on_abort = {
		custom_tooltip = general_mission_cooldown_tt
		set_variable = {
			name = germania_mission
			days = 7300
		}
	}	
	on_start = {
		start_mission_ai_effect = yes
	}

	on_completion = {
        complete_mission_effect = yes
		capital_formable_large_effect = yes
		remove_variable = germania_mission_allowed_var
    }

	germania_main_mission_start = { #start main tree
	icon = task_political

	duration = 150

	bypass = {
		OR = {
			tag = GEE
			AND = {
				region:germania_region = {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
				region:germania_superior_region =  {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
				region:venedia_region = {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
				region:vistulia_region =  {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
				region:scandinavia_region = {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
				region:bohemia_area =  {
					any_region_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = ROOT
						}
					}
				}
			}
		}
	}

		allow = {
			political_influence >= 30
			stability >= 40
			has_civil_war = no
		}

		on_start = {
			add_political_influence = -30
		}
		 on_completion = {
			trigger_event = {id = me_germania.19}
			add_country_modifier = {
				name = germania_mod_22
				duration = 7300 #20 years
			}
			hidden_effect = {
				
				every_country = {
					limit = {
						country_culture_group = germanic
						NOT = {
							is_subject_of = ROOT
						}
						NOT = {
							this = root
						}
					}
					add_opinion = {
						modifier = GEE_unification
						target = ROOT
					}
				}
			}
		}
	}
	germania_main_mission_1_1 = { # conquest of the west
		icon = task_expansion
		
		requires = {
			germania_main_mission_start  #
		}

		bypass = {
			tag = GEE
		}

		allow = {
			custom_tooltip = {
                text = germania_main_mission_1_tt
                owns_percent_of_region = {
                    PROVINCE = "p:3830"
                    PERCENT = "0.5"
                }
            }
		}

		highlight = {
			scope:province = {
				is_in_region = germania_region
			}
		}

		on_completion = {
			custom_tooltip = germania_main_mission_1_tt2
			hidden_effect = {
				region:germania_region = {
					every_region_province = {add_claim = ROOT}
				}
			}
			show_as_tooltip = {
				add_political_influence = 20
				current_ruler = {
					add_popularity = 5
				}
			}
			trigger_event = {
				id = me_germania.31
			}
		} 
	}	
	germania_main_mission_1_2 = { # conquest of the north
		icon = task_battle

		requires = {
			germania_main_mission_start  #
		}

		highlight = {
			scope:province = {
				is_in_region = scandinavia_region
			}
		}

		bypass = { 
			tag = GEE	
		}

		allow = {
			custom_tooltip = {
                text = germania_main_mission_1_2_tt
                owns_percent_of_region = {
                    PROVINCE = "p:3857"
                    PERCENT = "0.5"
                }
            }
		}

		on_completion = {
			custom_tooltip = germania_main_mission_1_2_tt2
			show_as_tooltip = {
				add_political_influence = 20
				current_ruler = {
					add_popularity = 5
				}
			}
			hidden_effect = {
				region:scandinavia_region = {
					every_region_province = {add_claim = ROOT}
				}
			}

			trigger_event = {
				id = me_germania.32
			}
		}
	}
	germania_main_mission_1_3 = { # conquest of the east
		icon = task_conquest

		highlight = {
			scope:province = {
				is_in_region = venedia_region
			}
		}

		requires = {
			germania_main_mission_start  #
		}
		
		bypass = { 
			tag = GEE
		}
		
		allow = {
			custom_tooltip = {
                text = germania_main_mission_1_3_tt
                owns_percent_of_region = {
                    PROVINCE = "p:4768"
                    PERCENT = "0.5"
                }
            }
		}

		on_completion = {
			custom_tooltip = germania_main_mission_1_3_tt2 
			show_as_tooltip = {
				add_political_influence = 20
				current_ruler = {
					add_popularity = 5
				}
			}
			hidden_effect = {
				region:venedia_region = {
					every_region_province = {add_claim = ROOT}
				}
			}
			trigger_event = {
				id = me_germania.33
			}
		}
	}

	germania_main_mission_2_1 = { #port of the west
		icon = task_expansion
		requires = {
			germania_main_mission_1_1  #
		}
	
		allow = {
				custom_tooltip = {
					text = trigger_germania_main_mission_2_1
					any_owned_province = {
						OR = {
							is_in_area = pharodenia_area
							is_in_area = rugia_area
							is_in_area = galindia_area
							is_in_area = chrononis_area
							is_in_area = turuntia_area
						}
						is_state_capital = yes
						has_city_status = yes
						num_of_port_building >= 3
						total_population >= 20
					}
				}
			}


		highlight = {
			scope:province = {
				is_uninhabitable = no
				is_coastal = yes
				OR = {
					is_in_area = pharodenia_area
					is_in_area = rugia_area
					is_in_area = galindia_area
					is_in_area = chrononis_area
					is_in_area = turuntia_area
				}
			}
		}

		on_completion = {
			custom_tooltip = completion_germania_main_mission_2_1
			show_as_tooltip = {
				add_centralization = 5
				random_province = {
					limit = {
						OR = {
							is_in_area = pharodenia_area
							is_in_area = rugia_area
							is_in_area = galindia_area
							is_in_area = chrononis_area
							is_in_area = turuntia_area
						}
					}
					add_permanent_province_modifier  = {
						name = germania_mod_13
						duration = -1
					}
				}
				root = {
            		create_unit = {
                		navy = yes
                		location = 5846
            		}		
        		}
			}
			trigger_event = {id = me_germania.14}
		}
	}

	germania_main_mission_2_2 = { # fortified capital
		icon = task_heracles
		requires = {
			germania_main_mission_1_2  
		}
		duration = 90

		highlight = {
			scope:province ={
				owner = root
				is_capital = yes
			}
		}
		
		allow = {
			war = no
			custom_tooltip = {
                text = it_has_to_be_summertime_tt
                root = { has_global_variable = harvest_summer_var  }
            }
			treasury >= 100
			manpower >= 4
			capital_scope = {
				has_city_status = yes
				num_of_fortress_building >= 2
				num_of_population_building >= 1
				total_population >= 20
			}
		}
		
		on_completion = {
			show_as_tooltip = {
				add_centralization = 5
				add_manpower = -4
				add_treasury = -100
				capital_scope = {
					add_permanent_province_modifier = {
						name = germania_mod_14
						duration = -1
					}
					add_building_level = fortress_ramparts_building
				}
			}
			trigger_event = {id = me_germania.15}
		}
	}
	germania_main_mission_2_3 = { #amber coast
		icon = task_happiness
		requires = {
			germania_main_mission_1_3  #
		}
		
		allow = {
			custom_tooltip = {
                text = germania_amber_total_svalue_tt
                androphagian_amber_total_svalue >= 10
            }
		}

		highlight = {
            scope:province = {
                trade_goods = amber
            }
        }

		on_completion = {
			show_as_tooltip = {
				add_treasury = 250
				add_2_free_province_investments = yes
			}
			trigger_event = {id = me_germania.16}
		}
	}	

	germania_main_mission_3 = { 
		icon = task_apollo
		requires = {
			germania_main_mission_2_1 germania_main_mission_2_2 germania_main_mission_2_3
		}

		highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }
		
		allow = {
			capital_scope = {
				civilization_value >= 10
			}
		}


		on_completion = { 
			show_as_tooltip = {
				add_stability = 5
			}
			trigger_event = { id = me_germania.13}
			
		}
	}

	germania_main_mission_4 = { #New power
		icon = task_atlas
		requires = {
			germania_main_mission_3
		}
		
		allow = { 
			treasury >= 150
			stability >= 60
		}

		on_completion = { 
			trigger_event = { id = me_germania.11 }
			add_treasury = -150
			add_country_modifier = {
				name = germania_migratory_settler_mod
				duration = 9125
			}
		}
	}

	germania_main_mission_5_1 = { 
		icon = task_expansion
		
		requires = {
			germania_conquest_mission_start
		}
		
		allow = { 
			custom_tooltip = {
                text = pillars_herc_tt
                invention = pirate_spawn_chance_inv_1
            } 
			current_ruler = {
				martial >= 8
			}
			num_of_ships >= 20
		}

		on_completion = { 
			current_ruler = {
				force_add_trait = seadog
			}
		}
	}
	germania_main_mission_5_2 = { 
		icon = task_political
		requires = {
			germania_side_mission_4_1
			germania_side_mission_4_2
		}
		
		allow = { 
			stability >= 65
			war = no
		}

		on_completion = {
			custom_tooltip = completion_germania_side_mission_4_1 
			add_country_modifier = {
			name = germania_mod_9
			duration = 10950 #30 years
			} 
			trigger_event = { id = me_germania.7}
		} 
	}
	germania_main_mission_6_1 = { 
		icon = task_conquest
		requires = {
			germania_conquest_mission_2_1 
		}
		
		allow = { 
			invention = global_start_experience_inv_2
			military_experience >= 40
		}

		on_completion = { 
			add_military_experience = -40
			custom_tooltip = completion_germania_main_mission_6_1 
			trigger_event = { id = me_germania.9}
		} 
	}

	germania_main_mission_6_2 = { 
		icon = task_economical
		requires = {
			germania_main_mission_5_2  
		}

		allow = {
			custom_tooltip = {
				text = trigger_germania_main_mission_8_4
				any_legion = {
					any_legion_unit = {
						any_sub_unit = {
							count >= 20
							OR = {
								sub_unit_type = archers
								sub_unit_type = light_infantry
							}
						}
						any_sub_unit = {
							count >= 10
							sub_unit_type = light_cavalry
						}
					}
				}
			}
		}

		on_completion = { 
			trigger_event = { id = me_germania.56 }
			custom_tooltip = completion_germania_main_mission_8_4
		}
	}

	germania_main_mission_6_3 = {
		icon = task_athena
		requires = {
			germania_main_mission_5_2  
		}

		highlight = {
			scope:province ={
				owner = root
				is_capital = yes
			}
		}
		
		allow = {
			capital_scope = {
				total_population >= 50
				num_of_aqueduct_building >= 1
				num_of_town_hall_building >= 1
				num_of_commerce_building >= 1
			}
		}

		on_completion = { 
			capital_scope = {
				add_province_modifier = {
					name = germania_mod_32
					duration = -1
				}
			}
			add_2_free_province_investments = yes
			capital_scope = {
            	create_pop = nobles
            	create_pop = freemen
            	create_pop = freemen
            	create_pop = citizen
        	} 
		}
	}

	germania_main_mission_6_4 = { # developement focus 
		icon = task_economical
		duration = 90
		
		allow = {
			civic_tech >= 2
			treasury >= 100
		}

		on_completion = { 
			add_treasury = -100
			current_ruler = {add_finesse = 1}
		}
	}

	germania_main_mission_6_5 = { #colonial adventure
		icon = task_expansion
		requires = {
			germania_main_mission_5_1
		}

		bypass = {
			p:9371 = {
				has_owner = yes
			}
		}
		
		allow = {
			hidden:p:9371 = {
				has_owner = no
			}
			custom_tooltip = {
                text = trigger_germania_main_mission_6_5
                any_unit = {
                    is_navy = yes
					unit_location = p:6519
                    any_sub_unit = {
                        count >= 30
                    }
                }
            }
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 6519
					province_id = 9371
				}
			}
        }

		on_completion = { 
			show_as_tooltip = {
				p:9371 = {
					set_owned_by = root
				}
				add_country_modifier = {
					name = germania_finland_colony_mod
					duration = -1
				}
			}
			trigger_event = { id = me_germania.23 }
		}
	}

	germania_main_mission_7_5 = { 
		icon = task_conquest
		requires = {
			germania_main_mission_6_4  
		}
		
		allow = {
			custom_tooltip = {
				text = germania_main_mission_7_5tt
				any_owned_province = {
				count >= 3
				trade_goods = stone
				num_goods_produced >= 3
				num_of_slave_mine_building >= 1
				is_in_region = germania_region
			}
			}
		}

		highlight = {
			scope:province = {
				is_in_region = germania_region
				trade_goods = stone		
			}
		}

		on_completion = { 
			add_country_modifier = {
				name = germania_mod_24
				duration = -1
			} 
			trigger_event = {id = me_germania.20}	
		}
	}

	germania_main_mission_7_6 = { 
		icon = task_economical
		requires = {
			germania_main_mission_6_4  
		}

		bypass = {
			any_province = {
				count <= 10
				OR = {
					is_in_region = germania_region
					is_in_region = venedia_region
				}
				has_food_trade_good_trigger = yes
				has_city_status = no
			}
		}
		
		allow = {
			custom_tooltip = {
				text = germania_main_mission_7_6_task_tt
				any_owned_province = {
				count >= 10
				has_food_trade_good_trigger = yes
				num_of_basic_settlement_infratructure_building >= 1
				OR = {
					is_in_region = germania_region
					is_in_region = venedia_region
				}
			}
			}
		}

		highlight = {
			scope:province = {
				OR = {
					is_in_region = germania_region
					is_in_region = venedia_region
				}
				has_food_trade_good_trigger = yes
				has_city_status = no		
			}
		}

		on_completion = { 
			custom_tooltip = completion_germania_main_mission_7_6
			show_as_tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = germania_mod_25
						duration = -1
					}
				}
			}
			hidden_effect = {
				region:germania_region = {
					every_region_province = {
						limit = { has_food_trade_good_trigger = yes }
						add_province_modifier = {
							name = germania_mod_25
							duration = -1
						}
					}
				}
				region:venedia_region = {
					every_region_province = {
						limit = { has_food_trade_good_trigger = yes }
						add_province_modifier = {
							name = germania_mod_25
							duration = -1
						}
					}
				}
			}
			trigger_event = { id  = me_germania.78 }
		} 
	}

	germania_main_mission_7_7 = {  
		icon = task_conquest
		duration = 730
		requires = {
			germania_main_mission_6_5  #
		}

		highlight = {
			scope:province = {
				province_id = 9371
			}
        }
		
		allow = {
			treasury >= 150
			manpower >= 5
		}

		on_start = {
			capital_scope = {
				add_province_modifier = {
					name = germania_mod_127
					duration = 730
				}
			}
		}

		on_completion = { 
			add_treasury = -150
			add_manpower = -5
			p:9371 = {
				set_city_status = city
				create_state_pop = tribesmen
				create_state_pop = tribesmen
				create_state_pop = tribesmen
			}
		} 
	}

	germania_main_mission_7_8 = { 
		icon = task_economical
		requires = {
			germania_main_mission_7_5  
			germania_main_mission_8_10 
		}

		highlight = {
			scope:province = {
				OR = {
					is_in_region = germania_region
					is_in_region = venedia_region
				}
				has_city_status = yes		
			}
		}
		
		allow = {
			custom_tooltip = {
				text = trigger_germania_main_mission_7_8
				any_owned_province = {
					count >= 5
					has_city_status = yes
					OR = {
						is_in_region = germania_region
						is_in_region = venedia_region
					}
				}
			}
		}

		on_completion = { 
			custom_tooltip = completion_germania_main_mission_7_8
			show_as_tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = germania_mod_38
						duration = 3650 #10 years
					}
				}
			}
			custom_tooltip = completion_germania_main_mission_7_8_bis
			hidden_effect = {
				region:germania_region = {
					every_region_province = {
						limit = {
							has_city_status = yes
							is_capital = no
						}
						add_province_modifier = {
							name = germania_mod_38
							duration = 3650 #10 years
						}
					}
				}
				region:venedia_region = {
					every_region_province = {
						limit = {
							has_city_status = yes
							is_capital = no
						}
						add_province_modifier = {
							name = germania_mod_38
							duration = 3650 #10 years
						}
					}
				}
				if = {
					limit = {
						capital_scope = {
							has_city_status = yes
						}
					}
					capital_scope = {
						add_permanent_province_modifier = {
							name = germania_mod_38
							duration = -1
						}
					}
				}
		 	} 
		}
	}

	germania_main_mission_8_1 = { 
		icon = task_battle
		requires = {
			germania_main_mission_6_2 
		}
		
		allow = {
			custom_tooltip = {
				text = germania_main_mission_8_1_hellenic_army
				any_legion = {
					any_legion_unit = {
						any_sub_unit = {
							count >= 25
							OR = {
								sub_unit_type = spearmen
								sub_unit_type = light_infantry
							}
						}
					any_sub_unit = {
						count >= 25
							OR = {
								sub_unit_type = light_cavalry
								sub_unit_type = heavy_cavalry
							} 
						}
					}
				}
			}
		}
		
		on_completion = { 
			trigger_event = { id = me_germania.62 }
			custom_tooltip = completion_germania_main_mission_8_1
		}
	}

	germania_main_mission_8_4 = { 
		icon = task_battle
		requires = {
			germania_main_mission_6_1 
			germania_conquest_mission_3_1 
		}

		allow = {
			invention = navy_maintenance_cost_inv_1
			military_experience >= 40
		}

		on_completion = {
			show_as_tooltip = {
				add_military_experience = -40
			add_country_modifier = {
				name = germania_mod_19
				duration = -1
			} 
			current_ruler = {
				add_popularity = 20
			}
			}
			trigger_event = { id = me_germania.68 }
		}

	}

	germania_main_mission_8_5 = { #traditional architecture
		icon = task_calm
		requires = {
			germania_main_mission_9_6
		}
		
		allow = {
			custom_tooltip = {
				text = trigger_germania_main_mission_8_5
				any_owned_province = {
					count >= 10
					has_city_status = yes
					OR = {
						AND = {
							num_of_town_hall_building  >= 2
							num_of_court_building >= 1
						}
						num_of_temple_building >= 1
					}
					total_population >= 15
				}
			}
		}

		on_completion = { 
			trigger_event = { id = me_germania.63 }
			show_as_tooltip = {
				current_ruler = {add_finesse = 1}
				add_country_modifier = {
					name = germania_mod_91
					duration = 3650
				}
			}
		} 
	}

	germania_main_mission_8_6 = { 
		icon = task_religion
		requires = {
			germania_main_mission_8_5
		}

		duration = 365
		
		allow = {
			political_influence >= 40
			oratory_tech >= 4
			religious_unity >= 0.85

		}

		on_start = { 
			add_political_influence = -40
			custom_tooltip = completion_germania_main_mission_8_6
			trigger_event = { id = me_germania.57 }
		}
	}

	germania_main_mission_8_7 = { 
		icon = task_calm	
		requires = {
			germania_main_mission_8_5  
		}
		
		allow = {
			trigger_if = {
				limit = { 
					war = yes
				}
				war = no
			}
			political_influence >= 25	
		}

		on_completion = {
			custom_tooltip = completion_germania_main_mission_8_7 
			add_political_influence = -25
			trigger_event = {id = me_germania.21 }
		 } 
	}

	germania_main_mission_8_9 = { 
		icon = task_economical
		requires = {
			germania_conquest_mission_4_2
		}
		
		allow = {
			capital_scope.state = {
				incoming_trade_routes >= 7
			}
		}

		on_completion = { 
			capital_scope = {
				add_permanent_province_modifier = {
					name = germania_mod_30
					duration = -1
				}
			}
		} 
	}

	germania_main_mission_8_10 = { # pile of wood
		icon = task_expansion
		requires = {
			germania_main_mission_6_4  
		}
		
		allow = {
			custom_tooltip = {
				text = germania_main_mission_8_10tt
				any_owned_province = {
				count >= 6
				OR = {
					is_in_region = germania_region
					is_in_region = venedia_region
				}
				num_goods_produced >= 2
				trade_goods = wood
				}
			}
		}
			
		highlight = {
			scope:province = {
				OR = {
					is_in_region = germania_region
					is_in_region = venedia_region
				}
				trade_goods = wood
			}
		}
		
		on_completion = { 
			add_country_modifier = {
				name = germania_mod_39
				duration = -1
			}
			custom_tooltip = completion_germania_main_mission_8_10
			show_as_tooltip = {
				random_province = {
					limit = {
						OR = {
							is_in_region = germania_region
							is_in_region = venedia_region
						}
					trade_goods = wood
					}
					add_permanent_province_modifier = {
						name = germania_mod_40
						duration = -1
					}
				}
			}
			hidden_effect = {
				region:germania_region = {
					every_region_province = {
						limit = {
							owner = ROOT
							trade_goods = wood
							num_goods_produced >= 2
						}
						add_permanent_province_modifier = {
							name = germania_mod_40
							duration = -1
						}
					}
				}
				region:venedia_region = {
					every_region_province = {
						limit = {
							owner = ROOT
							trade_goods = wood
							num_goods_produced >= 2
						}
						add_permanent_province_modifier = {
							name = germania_mod_40
							duration = -1
						}
					}
				}
			}
		 } 
	}

	germania_main_mission_8_11 = { 
		icon = task_economical

		requires = {
			germania_main_mission_4  
		}
		
		allow = {
			custom_tooltip = {
                text = germania_horses_total_svalue_tt
                germania_horses_total_svalue >= 10
            }
		}
		
		highlight = {
            scope:province = {
                trade_goods = horses
            }
        }

		on_completion = { 
			add_country_modifier = {
				name = germania_mod_41
				duration = -1
			}
			trigger_event = { id = me_germania.76 }
		 } 
	}

	germania_main_mission_8_12 = { # hunting party
		icon = task_artemis
		requires = {
			germania_main_mission_7_6  #
		}

		bypass = {
			any_province = {
				count < 3
				OR = {
					is_in_region = germania_region
					is_in_region = venedia_region
				}
				trade_goods = wild_game
			}	
		}

		allow = {
			custom_tooltip = {
				text = germania_main_mission_8_12_tt
				any_owned_province = {
					count >= 3
					num_of_hill_fort >= 1
					trade_goods = wild_game
				}
			}
		}

		highlight = {
			scope:province = {
				OR = {
					is_in_region = germania_region
					is_in_region = venedia_region
				}
				trade_goods = wild_game
			}
		}

		on_completion = { 
			add_innovation = 1
			add_country_modifier = {
				name = germania_mod_43
				duration = 3650
			}
			trigger_event = { id = me_germania.77 }
		}	 
	}

	germania_main_mission_8_13 = { 
		icon = task_calm
		requires = {
			germania_main_mission_7_8
			germania_main_mission_8_12 
		}
		
		allow = {
			custom_tooltip = {
				text = germania_main_mission_8_13_tt1
				any_owned_province = {
					trade_goods = salt
					num_of_latifundia_building >= 1
					count >= 3
				}
			}
			custom_tooltip = {
				text = germania_main_mission_8_13_tt2
				hidden:capital_scope.state = {
					trade_good_surplus = {
						target = salt
						value >= 2
					}
				}
			}
		}

		highlight = {
			scope:province = {
				trade_goods = salt
			}
		}

		on_completion = { 
			add_innovation = 1
			add_country_modifier = {
				name = germania_mod_45
				duration = 9125 # 25 years
			}
		} 
	}

		germania_main_mission_8_15 = { 
		icon = task_diplomatic
		requires = {
			germania_main_mission_7_7  #
		}

		highlight = {
			scope:province = {
				province_id = 9371
			}
        }
		
		bypass = { 
			p:9371 = {
				NOT = {
					owned_or_subject_owned = ROOT
				}
			}
		}

		allow = {
			custom_tooltip = {
                text = germania_amber_total_svalue_tt2
                androphagian_amber_total_svalue >= 15
            }
		}

		on_completion = { 
			show_as_tooltip = {
				p:9371 = {
					add_province_modifier = {
						name = germania_mod_33
						duration = -1
					}
				}
			}
			custom_tooltip = completion_germania_main_mission_8_15
			trigger_event = {id = me_germania.25}
	 	}
	}

	germania_main_mission_9_2 = { # Unify the tradition
		icon = task_political
		requires = {
			germania_main_mission_8_5 
		}
		
		allow = {
			treasury >= 500
			war = no
		}

		on_completion = { 
			trigger_event = { id = me_germania.64  } 
			custom_tooltip = completion_germania_main_mission_9_2
		} 
	}

	germania_main_mission_9_3 = { 
		icon = task_diplomatic
		requires = {
			germania_main_mission_8_7
		}
		
		allow = {
			capital_scope = {
				trigger_if = {
					limit = { num_of_nobles >= 1}
					nobles_happiness >= 0.75
				}
				num_of_nobles >= 10
			}

		}
		on_completion = { 
			custom_tooltip = completion_germania_main_mission_9_3
			trigger_event = { id = me_germania.66  } 
		} 
	}

	germania_main_mission_9_5 = { # trade hub
		icon = task_economical
		requires = {
			germania_main_mission_8_9
		}
		
		allow = {
			capital_scope.state = {
				state_commerce_income >= 5
			}
		}
		on_completion = { 
			custom_tooltip = completion_germania_main_mission_9_5
			trigger_event = { id = me_germania.67  } 
		} 
	}

	germania_main_mission_9_6 = { 
		icon = task_calm
		duration = 180
		requires = {
			germania_main_mission_7_8
		}
		
		allow = {
			civic_tech >= 4
			treasury >= 250
		}

		highlight = {
			scope:province = {
				has_owner = yes
				OR = {
					owner = ROOT
					AND = {
						owner = { is_subject_type = march }
						owner = { is_subject_of = ROOT }
					}
				}
				has_city_status = no
				terrain = forest
			}
		}

		on_completion = { 
			trigger_event = {id = me_germania.36 }
			add_treasury = -250
			current_ruler = {add_finesse = 1}
			custom_tooltip = trigger_germania_main_mission_9_6
			set_variable = germ_forest_all_var
		}
	}

	germania_main_mission_9_7 = { 
		icon = task_apollo
		requires = {
			germania_main_mission_7_6
		}
		
		allow = {
			capital_scope = {
				is_importing_trade_good = wine
			}
		}
		
		on_completion = { 
			custom_tooltip = germania_main_mission_9_7_tt
			trigger_event = { id = me_germania.37 }
		 } 
	}

	germania_main_mission_10_1 = { #Golden age
		icon = task_economical
		requires = {
			germania_main_mission_5_2
		}
		
		allow = {
			war = no
			stability >= 60
			has_war_exhaustion <= 5
		}

		on_completion = { 
			custom_tooltip = completion_germania_main_mission_10_1
			trigger_event = { id = me_germania.53 }
		} 
	}

	germania_main_mission_10_2 = { # Imperial city
		icon = task_heracles
		requires = {
			germania_main_mission_9_5
		}

		highlight = {
			scope:province ={
				owner = root
				is_capital = yes
			}
		}

		allow = {
			hidden:capital_scope = {
				has_province_rank = city_metropolis
			}
		}

		on_completion = { 
			trigger_event = { id  = me_germania.69 } 
			show_as_tooltip = {
				capital_scope = {
					add_permanent_province_modifier = {
						name = germania_mod_96
						duration = -1
					}
				}
			}
		} 
	}

	germania_main_mission_11_2 = { 
		icon = task_economical
		requires = {
			germania_main_mission_10_1
		}
		final = yes

		allow = {
            custom_tooltip = {
                text = you_need_to_form_germania_tt
                tag = GEE
            }
        }

		on_completion = { 
			custom_tooltip = completion_germania_main_mission_11_2
			trigger_event = { id = me_germania.54}  
		} 
	}

	germania_side_mission_start = { 
		icon = task_religion
		duration = 30
		requires = {germania_main_mission_5_2}

		allow = {
			war = no
			has_completed_mission_task = germania_main_mission_9_6
			custom_tooltip = {
                text = germania_side_mission_start_tt
                any_character = {
					OR = {
						has_office = office_high_priest_monarchy
						has_office = office_high_priest
					}
                    zeal >= 10
                }
            }
			treasury >= 50
		}
		on_completion = {
			add_treasury = -50 
			trigger_event = {id = me_germania.6}
		}
	}

	germania_side_mission_1 = { 
		icon = task_expansion
		requires = {germania_side_mission_start}

		highlight = {
            scope:province = {
                is_in_region = scandinavia_region
            } 
        }
		
		allow = {
			custom_tooltip = {
                text = you_need_to_form_germania_tt
                tag = GEE
            }
			war = no
			stability >= 50
			has_deity_in_pantheon = deity:omen_wodenaz
            custom_tooltip = {
                text = perform_divine_sacrifice_please_stab_the_pig
                has_country_modifier = stability_investment
            }
			owns_or_subject_owns_region = scandinavia_region
		}

		on_completion = { 
			trigger_event = {
				id = me_germania.2
			} 
		} 
	}

	germania_side_mission_2 = { 
		icon = task_calm
		bypass = {is_tribal = no}

		requires = {germania_main_mission_3}

		allow = {
			trigger_if = {
				limit = {
					towards_civil_war = yes
				}
				towards_civil_war = no
			}
			trigger_if = {
				limit = { 
					has_civil_war = yes
				}
			has_civil_war = no
			}
			custom_tooltip = {
				text = trigger_germania_side_mission_2
				any_character ={
					count = 0
					is_head_of_family = yes
					loyalty <= 60
				}
			}
			current_ruler = { 
				popularity >= 90
			}
		}
		on_completion = {
			show_as_tooltip = {
				current_ruler = {
					add_finesse = 1
				}
				add_country_modifier = {
					name = germania_mod_7
					duration = 1825
				}
			} 
			trigger_event =  {id= me_germania.3}
		} 
	}

	germania_side_mission_3_1 = { #  Absolute power
		icon = task_heracles
		requires = { germania_side_mission_2}
		prevented_by = {germania_side_mission_3_2}
		
		bypass = {is_tribal = no}

		allow = {
			political_influence >= 100
			has_law = absolute_authority
			stability >= 50
			trigger_if = {
				limit = {
					towards_civil_war = yes
				}
				towards_civil_war = no
			}
			trigger_if = {
				limit = { 
					has_civil_war = yes
				}
			has_civil_war = no
			}
		}

		on_completion = { 
			show_as_tooltip = {
				add_political_influence = -100
				add_tyranny = 25
				change_government = despotic_monarchy
				switch_government_type_event_clearup_effect = yes  
				current_ruler = {
					add_martial = 2
					add_finesse = 1
					add_charisma = 1
					add_zeal = 2
				}
			}
			trigger_event =  {id= me_germania.5}
		} 
	}

	germania_side_mission_3_2 = { #  Respect the elder
		icon = task_happiness
		requires = { germania_side_mission_2}
		bypass = {is_tribal = no}
		allow = {
			political_influence >= 75
			has_law = increased_council_powers
			stability >= 40
			trigger_if = {
				limit = {
					towards_civil_war = yes
				}
				towards_civil_war = no
			}
			trigger_if = {
				limit = { 
					has_civil_war = yes
				}
			has_civil_war = no
			}
		}
		prevented_by = {germania_side_mission_3_1}
		on_completion = { 
			add_political_influence = -75
			change_government = democratic_republic
			switch_government_type_event_clearup_effect = yes
			current_ruler = {
				add_martial = 1
				add_finesse = 2
				add_charisma = 2
				add_zeal = 1
			}
			add_tyranny = -30
			trigger_event =  {id= me_germania.4}
		} 
	}

	germania_side_mission_4_1 = { #  Throne of germania
		icon = task_battle
		requires = { germania_side_mission_3_1}
		prevented_by = {germania_side_mission_4_2 }
		bypass = {has_completed_mission_task = germania_side_mission_3_2}

		allow = { 
			is_monarchy = yes
			treasury >= 250
			trigger_if = {
				limit = {
					towards_civil_war = yes
				}
				towards_civil_war = no
			}
			trigger_if = {
				limit = { 
					has_civil_war = yes
				}
			has_civil_war = no
			}
			current_ruler = {
				popularity >= 90
			}
		}

		on_completion = {
			add_treasury = -250
			trigger_event = {
				id = me_germania.1
			}
		} 
	}

	germania_side_mission_4_2 = { #  Great republic of germania
		icon = task_athena
		requires = { germania_side_mission_3_2}
		prevented_by = {germania_side_mission_4_1}

		bypass = {
			OR = {
       	        government = aristocratic_monarchy
                government = despotic_monarchy
       	        government = dictatorship
       	        government = imperial_cult
       	        government = imperium
                government = plutocratic_monarchy
                government = stratocratic_monarchy
       	        government = theocratic_monarchy
       	    }
		}

		allow = {
			is_republic = yes
			current_ruler = {
				popularity >= 90
				corruption <= 10
			}
			trigger_if = {
				limit = {
					towards_civil_war = yes
				}
				towards_civil_war = no
			}
			trigger_if = {
				limit = { 
					has_civil_war = yes
				}
			has_civil_war = no
			}
		}

		on_completion = { 
			add_country_modifier = {
				name = germania_mod_5
				duration = -1
			}
			trigger_event =  {id= me_germania.12}
		}
	}

	germania_conquest_mission_start = { 
		icon = task_battle
		duration = 60

		bypass = {
			is_tribal = no
		}

		allow = {
			custom_tooltip = {
				text = germania_conquest_mission_start_tt
				current_ruler = {
					has_variable = nomadic_raid_cooldown
				}
			}
		} 

		on_completion = { 
			trigger_event = {id = me_germania.26 }
			custom_tooltip = completion_germania_conquest_mission_start
			add_country_modifier = {
				name = germania_mod_22
				duration = 1825
			}
		 } 
	}

	germania_conquest_mission_1_1 = { 
		icon = task_conquest
		requires = {
			germania_conquest_mission_start  
		}
		
		allow = {
			military_experience >= 25
		}

		on_completion = { 
			add_military_experience = -25
			add_aggressive_expansion = 5
			current_ruler = {
				add_popularity = 5
			}
			add_country_modifier = {
				name = germania_mod_126
				duration = 7300
			}
		} 

	}
	germania_conquest_mission_1_2 = { 
		icon = task_battle
		requires = {
			germania_conquest_mission_start  
		}
		
		allow = {
			custom_tooltip = {
                text = germanic_ports_tt
                germanic_ports_current >= germanic_ports_total
            }
		}

		on_completion = {
			add_political_influence = 50
			add_treasury = {
			add = root.has_monthly_income
				multiply = 24
				max = 500
			}
			current_ruler = {
				add_popularity = 10
			} 
		} 
	}

	germania_conquest_mission_2_1 = { 
		icon = task_battle
		requires = {
			germania_conquest_mission_1_1 
		}
		bypass = {is_tribal = no}
		allow = {
			custom_tooltip = {
                text = bravest_belgae_ruler_duel_tt
                current_ruler = { 
                    has_variable = ruler_challenged_duel_recently
                }
            }
		}

		on_completion = { 
			current_ruler = {
                add_charisma = 1
                add_zeal = 1
                add_martial = 1
                add_popularity = 20
            }
            trigger_event = me_caledonian.14
		}
	}

	germania_conquest_mission_2_2 = { 
		icon = task_calm
		requires = {
			germania_conquest_mission_1_2
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 5779
					province_id = 5780
					province_id = 5781
				}
			}
        }
		
		allow = {
			has_aggressive_expansion >= 10
			custom_tooltip = {
                text = completion_germania_conquest_mission_2_2_22
                any_unit = {
                    is_navy = yes
					unit_location = p:5779
                    any_sub_unit = {
                        count >= 10
                    }
                }
				any_unit = {
                    is_navy = yes
					unit_location = p:5780
                    any_sub_unit = {
                        count >= 10
                    }
                }
				any_unit = {
                    is_navy = yes
					unit_location = p:5781
                    any_sub_unit = {
                        count >= 10
                    }
                }
            }
		}

		on_completion = { 
			custom_tooltip = completion_germania_conquest_mission_2_2
			show_as_tooltip = {
				add_aggressive_expansion = 10
				add_country_modifier = {
					name = germania_mod_98
					duration = 9125 #25 yers
				}
				capital_scope = {
            		create_pop = slaves
            		create_pop = slaves
            		create_pop = slaves
            		create_pop = slaves
            		create_pop = slaves
        		}
			}
			trigger_event = { id  = me_germania.70 } 
		}
	}

	germania_conquest_mission_3_1 = { #germania channel 
		icon = task_expansion

		bypass = {
			has_variable = construct_pirate_haven_allowed_variable
		}

		allow = {
			custom_tooltip = {
                text = we_need_fast_sea_raid_tt
                has_military_bonus =  germanic_sea_path_2
            }
			current_ruler = {
				martial >= 7 
			}
		}

		requires = {
			germania_conquest_mission_2_1
			germania_conquest_mission_2_2
		}

		on_completion = { 
			custom_tooltip = constructing_pirate_haven_allowed_tt
            root = {
                set_variable = construct_pirate_haven_allowed_variable
            }
			trigger_event = { id = me_germania.35 }
		}
	}

	germania_conquest_mission_4_1 = { 
		icon = task_political
		requires = {
			germania_main_mission_1_1
		}

		allow = {
			owns_or_subject_owns_region = germania_region
		}

		highlight = {
			scope:province = {
				is_in_region = germania_region
			}
		}

		on_completion = { 
			add_3_free_province_investments = yes
			custom_tooltip = completion_germania_conquest_mission_4_1
			trigger_event = { id = me_germania.72 } 
		} 
	}

	germania_conquest_mission_4_2 = { 
		icon = task_apollo
		requires = {
			germania_main_mission_3
		}

		highlight = {
			scope:province ={
				owner = root
				is_capital = yes
			}
		}

		allow = {
			capital_scope.state = {
				calc_true_if = {
					amount >= 3
					state_improvement_military_trigger = yes 
					state_improvement_civic_trigger = yes
					state_improvement_oratory_trigger = yes
					state_improvement_religious_trigger = yes 
				}
			}
			capital_scope = {
				custom_tooltip = {
					text = trigger_germania_main_mission_7_4
					num_of_used_building_slots >= 6
				}
				trigger_if = {
					limit = {
						has_construction = yes
					}
					custom_tooltip = {
						text = ongoing_construction_trigger_tt
						has_construction = no
					}
				}
			}
		}
		on_completion = { 
			capital_scope = {
				add_permanent_province_modifier = {
					name = germania_mod_23
					duration = -1
				}
			}
	 	} 
	}

	germania_conquest_mission_5_1 = {  
		icon = task_economical
		duration = 90
		requires = {
			germania_main_mission_1_1
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 3911
					province_id = 3912
					province_id = 3940
					province_id = 3941
					province_id = 3942
					province_id = 3943
					province_id = 3915
					province_id = 4008
					province_id = 4009
				}
			}
        }

		allow = {
			treasury >= 200
			owns_percent_of_area = {
                PROVINCE = "p:3988"
                PERCENT = "0.25"
            }
			owns_percent_of_area = {
                PROVINCE = "p:3998"
                PERCENT = "0.25"
            }
		}

		on_completion = {
			custom_tooltip = germania_conquest_mission_5_1_tt
			trigger_event = { id  = me_germania.75 }
		 } 
	}

	germania_conquest_mission_6_1 = { 
		icon = task_battle
		duration = 90
		requires = {
			germania_conquest_mission_5_1
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 3913
					province_id = 3944
					province_id = 3945
					province_id = 3812
					province_id = 3813
					province_id = 3814
					province_id = 3815
					province_id = 3816
				}
			}
        }

		allow = {
			treasury >= 200
			manpower >= 4
		}

		on_completion = {
			add_treasury = -200
			add_manpower = -4
			if = {
				limit = { p:3913 = { has_owner = no } }
				p:3913 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3944 = { has_owner = no } }
				p:3944 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3945 = { has_owner = no } }
				p:3945 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3812 = { has_owner = no } }
				p:3812 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3813 = { has_owner = no } }
				p:3813 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3814 = { has_owner = no } }
				p:3814 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3815 = { has_owner = no } }
				p:3815 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3816 = { has_owner = no } }
				p:3816 = {
					set_conquered_by = root
				}
			} 
		} 
	}
	germania_conquest_mission_6_2 = { 
		icon = task_economical
		duration = 90
		requires = {
			germania_conquest_mission_5_1
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 3928
					province_id = 3932
					province_id = 3930
					province_id = 3922
					province_id = 3921
					province_id = 3920
					province_id = 3929
					province_id = 4016
					province_id = 3926
				}
			}
        }

		allow = {
			treasury >= 200
			manpower >= 4
		}

		on_completion = {
			add_treasury = -200
			add_manpower = -4
			if = {
				limit = { p:3928 = { has_owner = no } }
				p:3928 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3932 = { has_owner = no } }
				p:3932 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3930 = { has_owner = no } }
				p:3930 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3922 = { has_owner = no } }
				p:3922 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3921 = { has_owner = no } }
				p:3921 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3920 = { has_owner = no } }
				p:3920 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3929 = { has_owner = no } }
				p:3929 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:4016 = { has_owner = no } }
				p:4016 = {
					set_conquered_by = root
				}
			}
			if = {
				limit = { p:3926 = { has_owner = no } }
				p:3926 = {
					set_conquered_by = root
				}
			}
		} 
	}

	germania_conquest_mission_7_1 = { 
		icon = task_economical
		requires = {
			germania_conquest_mission_6_1
			germania_conquest_mission_6_2
		}

		allow = {
			political_influence >= 50
			current_ruler = {
				popularity >= 75
			}
		}

		on_completion = {
			custom_tooltip = germania_conquest_mission_7_1_tt
			trigger_event = me_germania.85
		}
	}
}


