ionian_resurgence_2 = { # mission tree after pan-ionian league
    icon = cde_indo_greek_port_city
    header = mission_image_syracuse

    repeatable = no
    chance = {
		factor = 10
	}

    potential = {
        OR = {
            has_completed_mission = ionian_resurgence
            tag = IOU
        }
        NOT = {
            has_variable = ion2_mission_cooldown_var
        }
        NOT = {
            has_variable = disallow_paniona_var
        }
    }

    abort = {
		ai_mission_back_out_trigger = yes
	}

    on_start = {
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = ion2_mission_cooldown_var
            days = 7300
        }
    }
    on_completion = {
		complete_mission_effect = yes
        add_1_free_province_investments = yes
	}

    ionian_league_task_1 = {
        icon = "task_diplomatic"

		duration = 60

		on_completion = {
            trigger_event = ionian_resurgence_event.26
            show_as_tooltip = {
                add_military_experience = 15
                mission_claim_region_effect = { REGION = asia_region }
            }
        }
    }

    ionian_league_task_2 = {
        icon = "task_diplomatic"

		allow = {
            owns_or_subject_owns_region = asia_region
        }

        highlight = {
			scope:province = {
				is_in_region = asia_region
				NOT = {
					owner = root
				}
			}
		}

        requires = {
            ionian_league_task_1
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.27
            show_as_tooltip = {
                mission_claim_region_effect = { REGION = galatia_region }
                mission_claim_region_effect = { REGION = bithynia_region }
                mission_claim_region_effect = { REGION = cilicia_region }
                mission_claim_region_effect = { REGION = thrace_region }
                mission_claim_area_effect = { AREA = aegean_islands_area }
            }
        }
    }

    ionian_league_task_3 = {
        icon = "task_diplomatic"

		allow = {
            owns_or_subject_owns_area = aegean_islands_area
        }

        requires = {
            ionian_league_task_2
        }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = aegean_islands_area
                }
            }
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.28
            show_as_tooltip = {
                mission_claim_region_effect = { REGION = greece_region }
                capital_scope = {
                    state = {
                        add_state_modifier = {
                            name = trading_hub_smod
                            duration = -1
                        }
                    }
                }
                p:263 = {
                    state = {
                        add_state_modifier = {
                            name = trading_hub_smod
                            duration = -1
                        }
                    }
                }
            }
        }
    }

    ionian_league_task_4 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_2
        }

		allow = {
            owns_or_subject_owns_region = galatia_region
        }

        highlight = {
			scope:province = {
				is_in_region = galatia_region
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.29
            custom_tooltip = militos_asia_tt
            show_as_tooltip = {
                mission_claim_region_effect = { REGION = cappadocia_region }
            }
        }
    }

    ionian_league_task_5 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_10
        }

		allow = {
            owns_or_subject_owns_region = bithynia_region
        }

        highlight = {
			scope:province = {
				is_in_region = bithynia_region
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.30
            show_as_tooltip = {
                mission_claim_region_effect = { REGION = cappadocia_pontica_region }
            }
        }
    }

    ionian_league_task_6 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_10
        }

		allow = {
            owns_or_subject_owns_area = rhodope_area
        }

        highlight = {
			scope:province = {
				is_in_area = rhodope_area
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.31
            show_as_tooltip = {
                add_political_influence = 50
                mission_claim_region_effect = { REGION = macedonia_region }
            }
        }
    }

    ionian_league_task_7 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_1
        }

		allow = {}

		on_completion = {
            trigger_event = ionian_resurgence_event.32
        }
    }

    ionian_league_task_8 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_11 ionian_league_task_12
        }

		allow = {
            owns_or_subject_owns_region = greece_region
        }

        highlight = {
			scope:province = {
				is_in_region = greece_region
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.33
        }
    }

    ionian_league_task_9 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_4
        }

		allow = {
            owns_or_subject_owns_region = cappadocia_region
        }

        highlight = {
			scope:province = {
				is_in_region = cappadocia_region
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.34
        }
    }

    ionian_league_task_10 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_2
        }

		allow = {
            #owns_or_subject_owns_area = rhodope_area
            owns_or_subject_owns_area = europa_area
            owns_or_subject_owns_area = bithynia_inferior_area
        }

        highlight = {
			scope:province = {
				OR = {
                    #is_in_area = rhodope_area
                    is_in_area = europa_area
                    is_in_area = bithynia_inferior_area
                }
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.35
        }
    }

    ionian_league_task_11 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_3
        }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = crete_area
                }
            }
        }

		allow = {
            owns_or_subject_owns_area = crete_area
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.36
        }
    }

    ionian_league_task_12 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_3
        }

        highlight = {
            scope:province = {
                OR = {
                    province_id = 416
                    province_id = 440
                    province_id = 427
                    province_id = 399
                    province_id = 418
                    province_id = 424
                    province_id = 426
                    province_id = 407
                }
            }
        }

		allow = {
            calc_true_if = {
                amount >= 3
                owns = 416
                owns = 440
                owns = 427
                owns = 399
                owns = 418
                owns = 424
                owns = 426
                owns = 407
            }
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.37
            show_as_tooltip = {
                add_treasury = {
                    value = 50
                    multiply = ionia_greece_reward_svalue
                    min = 50
                }
                add_political_influence = {
                    value = 10
                    multiply = ionia_greece_reward_svalue
                    min = 10
                }
            }
            custom_tooltip = ionia_greece_reward_tt
        }
    }

    ionian_league_task_13 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_6
        }

		allow = {
            owns_or_subject_owns_area = chalkidiki_area
            owns_or_subject_owns_area = macedonia_area
            owns_or_subject_owns_area = thessaly_area
            owns_or_subject_owns_area = upper_macedonia_area
        }

        highlight = {
			scope:province = {
				OR = {
                    is_in_area = chalkidiki_area
                    is_in_area = macedonia_area
                    is_in_area = thessaly_area
                    is_in_area = upper_macedonia_area
                }
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.38
        }
    }

    ionian_league_task_14 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_5 ionian_league_task_9
        }

		allow = {
            owns_or_subject_owns_region = cappadocia_pontica_region
        }

        highlight = {
			scope:province = {
				is_in_region = cappadocia_pontica_region
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.39
        }
    }

    ionian_league_task_15 = {
        icon = "task_diplomatic"

        final = yes

        requires = {
            ionian_league_task_14
            ionian_league_task_8
        }

		allow = {
            owns_or_subject_owns_region = cappadocia_pontica_region
        }

        highlight = {
			scope:province = {
				is_in_region = cappadocia_pontica_region
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.39
        }
    }
}