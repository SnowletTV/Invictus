ionian_resurgence_2 = { # mission tree after pan-ionian league
    icon = cde_indo_greek_port_city
    header = mission_image_syracuse

    repeatable = no
    chance = {
		factor = 10
	}

    potential = {
        OR = {
            has_completed_mission = ionian_resurgence
            tag = IOU
        }
        NOT = {
            has_variable = ion2_mission_cooldown_var
        }
        NOT = {
            has_variable = disallow_paniona_var
        }
    }

    abort = {
		ai_mission_back_out_trigger = yes
	}

    on_start = {
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = ion2_mission_cooldown_var
            days = 7300
        }
    }
    on_completion = {
		complete_mission_effect = yes
        add_2_free_province_investments = yes
	}

    ionian_league_task_1 = {
        icon = "task_expansion"

		duration = 60

		on_completion = {
            trigger_event = ionian_resurgence_event.26
            show_as_tooltip = {
                mission_claim_region_effect = { REGION = asia_region }
                add_country_modifier = {
                    name = ionian_preventive_campaigns
                    duration = 9125 # 25 years
                }
            }
        }
    }

    ionian_league_task_2 = {
        icon = "task_conquest"

		allow = {
            owns_or_subject_owns_region = asia_region
        }

        highlight = {
			scope:province = {
				is_in_region = asia_region
				NOT = {
					owner = root
				}
			}
		}

        requires = {
            ionian_league_task_1
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.27
            show_as_tooltip = {
                mission_claim_region_effect = { REGION = galatia_region }
                mission_claim_region_effect = { REGION = bithynia_region }
                mission_claim_region_effect = { REGION = cilicia_region }
                mission_claim_region_effect = { REGION = thrace_region }
                mission_claim_area_effect = { AREA = aegean_islands_area }
            }
        }
    }

    ionian_league_task_3 = {
        icon = "task_conquest"

		allow = {
            owns_or_subject_owns_area = aegean_islands_area
        }

        requires = {
            ionian_league_task_2
        }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = aegean_islands_area
                }
            }
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.28
            show_as_tooltip = {
                mission_claim_region_effect = { REGION = greece_region }
                p:263 = {
                    state = {
                        add_state_modifier = {
                            name = trading_hub_smod
                            duration = -1
                        }
                    }
                }
            }
        }
    }

    ionian_league_task_4 = {
        icon = "task_conquest"

        requires = {
            ionian_league_task_2
        }

		allow = {
            owns_or_subject_owns_region = galatia_region
        }

        highlight = {
			scope:province = {
				is_in_region = galatia_region
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.29
            custom_tooltip = militos_asia_tt
            show_as_tooltip = {
                mission_claim_region_effect = { REGION = cappadocia_region }
            }
        }
    }

    ionian_league_task_5 = {
        icon = "task_expansion"

        requires = {
            ionian_league_task_10
        }

		allow = {
            owns_or_subject_owns_area = sinai_area
            owns_or_subject_owns_area = eastern_delta_area
            p:509 = {
                num_of_fortress_building >= 3
            }
            p:1693 = {
                num_of_fortress_building >= 4
            }
        }

        highlight = {
			scope:province = {
                OR = {
                    is_in_area = sinai_area
                    is_in_area = eastern_delta_area
                }
                
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.30
            show_as_tooltip = {
                mission_claim_region_effect = { REGION = cappadocia_pontica_region }
                random_owned_province = {
					limit = {
						is_port = yes
					}
					owner = {
						create_unit = {
							navy = yes
							location = prev.prev
							add_subunit = octere
							add_subunit = octere
							add_subunit = hexere
							add_subunit = hexere
							add_subunit = hexere
							add_subunit = trireme
							add_subunit = trireme
							add_subunit = trireme
							add_subunit = trireme
							add_subunit = liburnian
							add_subunit = liburnian
							add_subunit = liburnian
							add_subunit = liburnian
							add_subunit = liburnian
						}
					}
				}
            }
        }
    }

    ionian_league_task_6 = {
        icon = "task_expansion"

        requires = {
            ionian_league_task_10
        }

		allow = {
            owns_or_subject_owns_area = rhodope_area
        }

        highlight = {
			scope:province = {
				is_in_area = rhodope_area
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.31
            show_as_tooltip = {
                add_political_influence = 50
                mission_claim_region_effect = { REGION = macedonia_region }
            }
        }
    }

    ionian_league_task_7 = {
        icon = "task_political"

        requires = {
            ionian_league_task_1
        }

		allow = {
            custom_tooltip = {
				text = thebes_missions_01_restoration_task_12_tooltip
				any_country_sub_unit = {
					count >= 10
					is_cohort = yes
				}
			}
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.32
            show_as_tooltip = {
                add_political_influence = 25
                add_military_experience = 25
                current_ruler = {
                    add_martial = 1
                    add_charisma = 1
                }
            }
        }
    }

    ionian_league_task_8 = {
        icon = "task_happiness"

        requires = {
            ionian_league_task_11 ionian_league_task_12
        }

		allow = {
            owns_or_subject_owns_region = greece_region
        }

        highlight = {
			scope:province = {
				is_in_region = greece_region
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.33
            custom_tooltip = ionia_greek_influence_tt
        }
    }

    ionian_league_task_9 = {
        icon = "task_expansion"

        requires = {
            ionian_league_task_4
        }

		allow = {
            owns_or_subject_owns_region = cappadocia_region
        }

        highlight = {
			scope:province = {
				is_in_region = cappadocia_region
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.34
            show_as_tooltip = {
                mission_claim_region_effect = { REGION = cappadocia_pontica_region }
                custom_tooltip = zeus_dacieus_unlock_tt
                custom_tooltip = cataonian_apollo_unlock_tt
            }
        }
    }

    ionian_league_task_10 = {
        icon = "task_economical"

        requires = {
            ionian_league_task_2
        }

		allow = {
            owns_or_subject_owns_area = mysia_area
            owns_or_subject_owns_area = europa_area
            owns_or_subject_owns_area = bithynia_inferior_area
        }

        highlight = {
			scope:province = {
				OR = {
                    is_in_area = mysia_area
                    is_in_area = europa_area
                    is_in_area = bithynia_inferior_area
                }
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.35
            show_as_tooltip = {
                add_treasury = 500
                every_country_state = {
                    limit = {
                        any_state_province = {
                            OR = {
                                is_in_area = mysia_area
                                is_in_area = europa_area
                                is_in_area = bithynia_inferior_area
                            }
                        }
                    }
                    add_state_modifier = {
                        name = propontic_tolls
                        duration = -1
                    }
                }
            }
        }
    }

    ionian_league_task_11 = {
        icon = "task_expansion"

        requires = {
            ionian_league_task_3
        }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = crete_area
                }
            }
        }

		allow = {
            owns_or_subject_owns_area = crete_area
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.36
            custom_tooltip = ionia_crete_tt
        }
    }

    ionian_league_task_12 = {
        icon = "task_political"

        requires = {
            ionian_league_task_3
        }

        highlight = {
            scope:province = {
                OR = {
                    province_id = 416
                    province_id = 440
                    province_id = 427
                    province_id = 399
                    province_id = 418
                    province_id = 424
                    province_id = 426
                    province_id = 407
                }
            }
        }

		allow = {
            calc_true_if = {
                amount >= 3
                owns = 416
                owns = 440
                owns = 427
                owns = 399
                owns = 418
                owns = 424
                owns = 426
                owns = 407
            }
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.37
            show_as_tooltip = {
                add_treasury = {
                    value = 50
                    multiply = ionia_greece_reward_svalue
                    min = 50
                }
                add_political_influence = {
                    value = 10
                    multiply = ionia_greece_reward_svalue
                    min = 10
                }
            }
            custom_tooltip = ionia_greece_reward_tt
        }
    }

    ionian_league_task_13 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_6
        }

		allow = {
            owns_or_subject_owns_area = chalkidiki_area
            owns_or_subject_owns_area = macedonia_area
            owns_or_subject_owns_area = thessaly_area
            owns_or_subject_owns_area = upper_macedonia_area
        }

        highlight = {
			scope:province = {
				OR = {
                    is_in_area = chalkidiki_area
                    is_in_area = macedonia_area
                    is_in_area = thessaly_area
                    is_in_area = upper_macedonia_area
                }
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.38
            show_as_tooltip = {
                add_political_influence = 100
                add_country_modifier = {
                    name = ending_macedonian_rule
                    duration = -1
                }
            }
        }
    }

    ionian_league_task_14 = {
        icon = "task_conquest"

        requires = {
            ionian_league_task_9 ionian_league_task_18 ionian_league_task_19
        }

		allow = {
            owns_or_subject_owns_region = cappadocia_pontica_region
        }

        highlight = {
			scope:province = {
				is_in_region = cappadocia_pontica_region
				NOT = {
					owner = root
				}
			}
		}

		on_completion = {
            trigger_event = ionian_resurgence_event.39
            show_as_tooltip = {
                add_aggressive_expansion = -25
                add_military_experience = 100
            }
        }
    }

    ionian_league_task_15 = {
        icon = "task_expansion"

        final = yes

        requires = {
            ionian_league_task_14
            ionian_league_task_8
        }

		allow = {
            num_of_ships >= 100
            country_population >= 2500
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.40
            show_as_tooltip = {
                add_country_modifier = {
                    name = ionia_ruls_the_waves
                    duration = -1
                }
            }
        }
    }

    ionian_league_task_16 = {
        icon = "task_expansion"

        requires = {
            ionian_league_task_2
        }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = milyas_area
                    is_in_area = lycia_area
                }
            }
        }

		allow = {
            owns_or_subject_owns_area = milyas_area
            owns_or_subject_owns_area = lycia_area
            c:LYC = {
                has_land = no
            }
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.41
            show_as_tooltip = {
                custom_tooltip = ionia_lycia_tt
            }
        }
    }

    ionian_league_task_17 = {
        icon = "task_diplomatic"

        requires = {
            ionian_league_task_2
        }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = pamphylia_area
                    is_in_area = cilicia_pedias_area
                    is_in_area = cilicia_trachea_area
                }
            }
        }

		allow = {
            owns_or_subject_owns_area = pamphylia_area
            owns_or_subject_owns_area = cilicia_pedias_area
            owns_or_subject_owns_area = cilicia_trachea_area
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.42
            show_as_tooltip = {
                custom_tooltip = cilicia_pamphylia_ports_tt
                p:1910.state = { # pamphylia
                    add_state_modifier = {
                        name = pamphylia_cilicia_statemod
                        duration = -1
                    }
                }
                p:1883.state = { # cilicia trachea
                    add_state_modifier = {
                        name = pamphylia_cilicia_statemod
                        duration = -1
                    }
                }
                p:1881.state = { # cilicia pedias
                    add_state_modifier = {
                        name = pamphylia_cilicia_statemod
                        duration = -1
                    }
                }
            }
        }
    }

    ionian_league_task_18 = {
        icon = "task_battle"

        requires = {
            ionian_league_task_17
        }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = cyprus_area
                }
            }
        }

		allow = {
            owns_or_subject_owns_area = cyprus_area
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.43
            show_as_tooltip = {
                p:331.state = {
                    add_state_modifier = {
                        name = cyprus_copper_statemod
                        duration = -1
                    }
                }
                if = {
                    limit = {
                        p:331 = {
                            free_building_slots >= 1
                        }
                    }
                    p:331 = {
                        add_building_level = port_building
                    }
                }
                else_if = {
                    limit = {
                        p:334 = {
                            free_building_slots >= 1
                        }
                    }
                    p:334 = {
                        add_building_level = port_building
                    }
                }
                else = {
                    add_treasury = 50
                }
            }
        }
    }

    ionian_league_task_19 = {
        icon = "task_conquest"

        requires = {
            ionian_league_task_16
        }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = isauria_area
                    is_in_area = pisidia_area
                }
            }
        }

		allow = {
            custom_tooltip = {
                text = "ionian_league_task_19_requirement_1_tt"
                area:isauria_area = {
                    any_area_province = {
                        count >= pan_ionia_mission_task_18_requirement_value
                        OR = {
                            controller = ROOT
                            controller = {
                                is_subject_of = ROOT
                            }
                            owned_or_subject_owned = ROOT
                        }   
                    }
                }
            }
            custom_tooltip = {
                text = "ionian_league_task_19_requirement_2_tt"
                area:pisidia_area = {
                    any_area_province = {
                        count >= pan_ionia_mission_task_18_requirement_value
                        OR = {
                            controller = ROOT
                            controller = {
                                is_subject_of = ROOT
                            }
                            owned_or_subject_owned = ROOT
                        }  
                    }
                }
            }   
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.44
            show_as_tooltip = {
                add_military_experience = 50
                add_country_modifier = {
                    name = subjugated_hillmen
                    duration = 9125 # 25 years
                }
                custom_tooltip = "ionian_league_task_19_reward_tt"
            }
        }
    }

    ionian_league_task_20 = {
        icon = "task_economical"

        requires = {
            ionian_league_task_7
        }

		allow = {
            capital_scope = {
                total_population >= 40
                free_building_slots = 0
                has_construction = no
            }
        }

        highlight = {
            scope:province = {
                this = root.capital_scope
            }
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.45
            show_as_tooltip = {
                capital_scope = {
                    add_permanent_province_modifier = {
                        name = heart_of_ionia
                    }
                }
            }
        }
    }

    ionian_league_task_21 = {
        icon = "task_economical"

        requires = {
            ionian_league_task_20
        }

		allow = {
            custom_tooltip = {
				text = country_ougoing_trade_routes_svalue_10
				country_ougoing_trade_routes_svalue >= 10
			}
        }

		on_completion = {#claims on syracuse area
            trigger_event = ionian_resurgence_event.46
            show_as_tooltip = {
                add_treasury = 300
                capital_scope = {
                    state = {
                        add_state_modifier = {
                            name = trading_hub_smod
                            duration = -1
                        }
                    }
                }
                mission_claim_area_effect = { AREA = syracuse_area }
            }
        }
    }

    ionian_league_task_22 = {
        icon = "task_battle"

        requires = {
            ionian_league_task_7
        }

		allow = {
            military_experience >= 100
			manpower >= 10
			trigger_if = {
                limit = {
					has_dlc = "Heirs of Alexander"
                    capital_scope.governorship = { has_legion_trigger = yes }
                    any_unit = { legion = ROOT.capital_scope.governorship.legion }
                }
                custom_tooltip = {
                    text = cap_legion_distinction_tt
                    any_legion = {
						distinction_count >= 4 # primigenia and generic count
                    }
                }
            }
			trigger_else_if = {
				limit = {
					NOT = { has_dlc = "Heirs of Alexander" }
					capital_scope.governorship = { has_legion_trigger = yes }
                    any_unit = { legion = ROOT.capital_scope.governorship.legion }
				}
				custom_tooltip = {
                    text = cap_legion_count_tt
                    any_legion = {
						any_legion_unit = {
                            unit_size >= 40
                        }
                    }
                }
			}
            trigger_else = {
                trigger_if = {
					limit = {
						has_dlc = "Heirs of Alexander"
					}
					custom_tooltip = {
						text = cap_legion_distinction_tt
						always = no
					}
				}
				trigger_else = {
					custom_tooltip = {
						text = cap_legion_count_tt
						always = no
					}
				}
            }
        }

		on_completion = {
            trigger_event = ionian_resurgence_event.47
            show_as_tooltip = {
                add_manpower = -10
                add_country_modifier = {
                    name = guarding_ionia
                    duration = -1
                }
            }
        }
    }

    ionian_league_task_23 = { 
		icon = "task_happiness"

		allow = {
			owns = 290
			hidden:p:290 = {
				has_building = temple_building
			}
		}

		duration = 30

		highlight = {
			scope:province = {
				province_id = 290
			}
		}

		requires = { ionian_league_task_25 }

		on_completion = {
			trigger_event = miletos_event.35
			show_as_tooltip = {
				p:290 = {
					add_permanent_province_modifier = {
						name = artemis_temple_ephesos
					}
				}
			}
		}
	}

    ionian_league_task_24 = { 
		icon = "task_diplomatic"

		allow = {
			owns = 1987
			hidden:p:1987 = {
				has_building = temple_building
			}
		}

		duration = 30

		highlight = {
			scope:province = {
				province_id = 1987
			}
		}

		requires = { ionian_league_task_25 }

		on_completion = {
			trigger_event = miletos_event.20
			custom_tooltip = mlo_aphrodite_euploia_unlock_tt
			show_as_tooltip = {
				p:1987 = {
					add_permanent_province_modifier = {
						name = aph_temple_knidos
					}
					if = {
						limit = {
							is_holy_site = no
							deity:omen_aphrodite_euploia = {
								has_holy_site = no
							}
						}
						set_province_deity = deity:omen_aphrodite_euploia
					}
				}
			}
			treasure:treasure_aphrodite_of_knidos = {
				save_scope_as = treasure_aphrodite_of_knidos_scope
			}
			custom_tooltip = miletos_knidos_plus_tt
		}
	}

	ionian_league_task_25 = { 
		icon = "task_happiness"

		allow = {
			religious_unity >= 0.5
			custom_tooltip = {
				text = miletos_religion_tt
				anatolian_pops_in_country >= 50
			}
		}

		requires = { ionian_league_task_1 }

		on_completion = {
			trigger_event = miletos_event.21
			show_as_tooltip = {
				add_country_modifier = {
					name = ionian_religious_practice
					duration = 9125
				}
			}
		}
	}

    ionian_league_task_26 = { 
		icon = "task_economical"

		allow = {
            owns = 1973
			hidden:p:1973 = {
				has_building = temple_building
			}
		}

		duration = 30

		highlight = {
			scope:province = {
				province_id = 1973
			}
		}

		requires = { ionian_league_task_25 }

		on_completion = {
			deity:omen_apollo_didymaios = {
				save_scope_as = apollo_deity
			}
			show_as_tooltip = {
				custom_tooltip = seleukid_mission_03_anatolia_task_15_effect_tt
        		set_variable = unlock_apollo_didymaios
				p:1973 = {
					add_permanent_province_modifier = {
						name = sanctuary_didyma
						duration = -1
					}
					if = {
						limit = {
							is_holy_site = no
							scope:apollo_deity = {
								has_holy_site = no
							}
						}
						set_province_deity = scope:apollo_deity
					}
				}
			}
			trigger_event = miletos_event.18
		}
	}

    ionian_league_task_27 = {
        icon = "task_political"
        duration = 180

		allow = {
			custom_tooltip = {
				text = civic_tech_8_skill_tt
				any_character = {
					has_tech_office_of = civic_tech
					finesse >= 8
				}
			}
			custom_tooltip = {
				text = oratory_tech_8_skill_tt
				any_character = {
					has_tech_office_of = oratory_tech
					charisma >= 8
				}
			}
			custom_tooltip = {
				text = religious_tech_8_skill_tt
				any_character = {
					has_tech_office_of = religious_tech
					zeal >= 8
				}
			}
			custom_tooltip = {
				text = military_tech_8_skill_tt
				any_character = {
					has_tech_office_of = military_tech
				martial >= 8
				}
			}
			capital_scope = {
				num_of_academy_building >= 3
			}
		}

		requires = { ionian_league_task_20 }

		highlight = {
			scope:province = {
				this = root.capital_scope
			}
		}

		on_start = {
			trigger_event = {
				id = miletos_event.36
				days = { 14 28 }
			}
			trigger_event = {
				id = miletos_event.38
				days = { 60 80 }
			}
		}

		on_completion = {
			trigger_event = miletos_event.29
			show_as_tooltip = {
				add_innovation = 2
				add_2_free_province_investments = yes
			}
		}
    }

    ionian_league_task_28 = { 
		icon = "task_battle"

		allow = {
			p:4799 = {
                controller = root
            }
		}

		highlight = {
			scope:province = {
				province_id = 4799
			}
		}

		requires = { ionian_league_task_39 }

		on_completion = {
			trigger_event = miletos_event.48
			show_as_tooltip = {
                add_political_influence = 100
                add_country_modifier = {
                    name = took_revenge_persia
                    duration = 9125 # 25 years
                }
			}
		}
	}

    ionian_league_task_29 = {# A Foothold in the West
        icon = "task_expansion"

        allow = {
            custom_tooltip = {
                text = "ionian_league_task_29_requirement_tt"
                any_owned_province = {
                    count >= 1
                    AND = {
                        is_in_area = syracuse_area
                        num_of_commerce_building >= 1
                    }
                }
            }
        }

        highlight = {
            scope:province = {
                is_in_area = syracuse_area
            }
        }

        requires = { ionian_league_task_21 }

        on_completion = {#claims on corsica
            trigger_event = ionian_resurgence_event.51
            show_as_tooltip = {
                add_country_modifier = {
                    name = expanded_reach_in_the_western_mediterranean_ionia_cmod
                    duration = 7300 #20 years
                }
                custom_tooltip = "ionian_league_task_29_reward_tt"
            }
        }
    }
    

    ionian_league_task_30 = { #Aquisiton of Corsica
        icon = "task_diplomatic"

        allow = {
            OR = {
                AND = {
                    custom_tooltip = {
                        text = "ionian_league_task_30_requirement_1_tt"
                        any_country = {#country that owns corsica's biggest settlement has an opinion of ROOT of at least 50
                            count >= 1
                            any_owned_province = {
                                count >= 1
                                is_in_area = corsica_area
                                OR = {
                                    has_city_status = yes
                                    area:corsica_area = {
                                        any_area_province = {
                                            count < 1
                                            has_city_status = yes
                                        }
                                    }
                                }
                            }
                            opinion = {
                                target = ROOT
                                value >= 50
                            }
                        }
                    }
                    treasury >= 100
                }
                custom_tooltip = {
                    text = "ionian_league_task_30_requirement_2_tt"
                    AND = {
                        area:corsica_area = {
                            any_area_province = {#owns all of habitable corsica
                                count = all
                                OR = {
                                    owned_or_subject_owned = ROOT
                                    has_owner = no
                                }
                            }
                        }
                    }
                }
            }
        }

        highlight = {
            scope:province = {
                AND = {
                    is_in_area = corsica_area
                    has_owner = yes
                }
            }
        }

        requires = { ionian_league_task_29 }

        on_completion = { #
            trigger_event = ionian_resurgence_event.52
            show_as_tooltip = {
                add_political_influence = 100
                custom_tooltip = "ionian_league_task_30_reward_tt"
            }
        }
    }

    ionian_league_task_31 = { #A Colony in Africa
        icon = "task_economical"

        allow = {
            OR = {
                AND = {
                    custom_tooltip = {
                        text = "ionian_league_task_31_requirement_1_tt"
                        any_country = {#Great relatons with any country in africa with a port there
                            any_owned_province = {
                                is_capital = no
                                OR = {
                                    is_in_region = africa_region
                                    is_in_region = numidia_region
                                }
                                num_of_port_building >= 1
                                has_city_status = no
                            }
                            opinion = {
                                target = ROOT
                                value >= 80
                            }
                        }
                    }
                    treasury >= 100
                }
                custom_tooltip = {
                    text = "ionian_league_task_31_requirement_2_tt" #Has a port in Africa
                    any_owned_province = {
                        OR = {
                            is_in_region = africa_region
                            is_in_region = numidia_region
                        }
                        num_of_port_building >= 1
                        has_city_status = no
                    }
                }
            }
        }

        highlight = {
            scope:province = {
                OR = {
                    is_in_region = africa_region
                    is_in_region = numidia_region
                }
                has_city_status = no
                num_of_ports >= 1
            }
        }

        requires = { ionian_league_task_29 }

        on_completion = { #gain 20 political power + gain claims on every port in africa and numidia regions
            trigger_event = ionian_resurgence_event.57 
            show_as_tooltip = {
                add_political_influence = 20
                custom_tooltip = "ionian_league_task_31_reward_1_tt" #____ will gain claims over every port in the Africa and Numidia regions 
                custom_tooltip = "ionian_league_task_31_reward_2_tt" 
            }
        }
    }

    ionian_league_task_32 = { #Links with Massalia
        icon = "task_diplomatic"

        allow = {
            custom_tooltip = { #Good relations with Massalia
                text = "ionian_league_task_32_requirement_1_tt"
                c:MAS = {
                    opinion = {
                        target = ROOT
                        value >= 80
                    }
                }
            } 
            custom_tooltip = { #Good relations with Massalia
                text = "ionian_league_task_32_requirement_2_tt"
                OR = {
                    c:MAS = {
                        imports_from = ROOT
                    }
                    imports_from = c:MAS
                }
            } 
        }

        bypass = {
            c:MAS = {
                has_land = NO
            }
        }

        highlight = {
            scope:province = {
                owner = c:MAS
            }
        }

        requires = { ionian_league_task_29 }

        on_completion = { #trade power for 10 years + claims on massalia
            trigger_event = ionian_resurgence_event.62 #63 is massalia recieves link event
            custom_tooltip = "ionian_league_task_32_reward_tt_1"
            show_as_tooltip = {
                add_treasury = 50
                add_country_modifier = {
                    name = trade_routes_into_gaul_ionia_cmod
                    duration = 18250 #50 years 
                }
            }
        }
    }
    
    ionian_league_task_33 = { #Our port in Libue
        icon = "task_economical"

        allow = {
            custom_tooltip = { #African colony territory has 2 markets and 2 ports
                text = "ionian_league_task_33_requirement_tt"
                any_owned_province = {
                    count >= 1
                    num_of_port_building >= 1
                    OR = {
                        is_in_region = africa_region
                        is_in_region = numidia_region
                    }
                    num_of_port_building >= 2
                    num_of_commerce_building >= 2
                }
            }
            
        }

        highlight = {
            scope:province = {
                OR = {
                    is_in_region = africa_region
                    is_in_region = numidia_region
                }
                owner = ROOT
                is_port = yes
            }
        }

        requires = { ionian_league_task_31 }

        on_completion = { #Free provincial investment + local building slot + local max pops + local trade value
            trigger_event = ionian_resurgence_event.64
            show_as_tooltip = {
                add_1_free_province_investments = yes
                custom_tooltip = "ionian_league_task_33_reward_tt"
                p:3126 = {
                    add_province_modifier = {
                        name = ionian_colony_in_africa_pmod
                        duration = -1
                    }
                }
            }
        }
    }

    ionian_league_task_34 = { #Corsican Markets
        icon = "task_economical"

        allow = {
            p:3508 = {
                custom_tooltip = {
                    text = "ionian_league_task_34_requirement_tt" #ROOT owns the territory of _p:3508__ 
                    owner = root
                }
                has_city_status = yes
                num_of_commerce_building >= 2
            }        
        }
 
        highlight = {
            scope:province = {
                province_id = 3508
            }
        }

        requires = { ionian_league_task_30 }

        on_completion = { #much local trade value + cash
            trigger_event = ionian_resurgence_event.65
            show_as_tooltip = {
                add_treasury = 50
                p:3508 = {
                    add_province_modifier = {
                        name = a_trade_hub_in_corsica_ionia_pmod
                        duration = -1
                    }
                }
            }
        }
    }

    ionian_league_task_35 = { #seize the pillars
        icon = "task_conquest"

        allow = {
            custom_tooltip = { #Have 50 ships in the strait, with an army of at least 10k boarded.
                text = "ionian_league_task_35_requirement_tt"
                any_navy = {
                    count >= 1
                    unit_location = p:2730
                    unit_size >= 50
                }
                any_unit = {
                    count >= 1
                    unit_size >= 10
                    unit_location = p:2730
                    is_navy = no
                }
            }
            manpower >= 20
        }

        bypass = {
            AND = {
                p:1347 = {
                    owned_or_subject_owned = ROOT
                }
                p:3061 = {
                    owned_or_subject_owned = ROOT
                }
            }
        }

        highlight = {
            scope:province = {
                province_id = 2730
            }
        }

        requires = { ionian_league_task_30 ionian_league_task_31 }

        on_completion = { #loose 5k manpower, + sieze the strait, start an event chain over control of the strait
            trigger_event = ionian_resurgence_event.66
            show_as_tooltip = {
                add_political_influence = 100
            }
        }
    }

    ionian_league_task_36 = { #Ties with the Prettaniki
        icon = "task_diplomatic"

        allow = {
            custom_tooltip = { #Be importing from a british nation in the dumnonia area with over 80 opinion of you
                text = "ionian_league_task_36_requirement_tt"
                any_country = {
                    count >= 1
                    capital_scope = {
                        is_in_region = britain_region
                    }
                    any_owned_province = {
                        count >= 1
                        is_in_area = dumnonia_area
                    }
                    save_temporary_scope_as = ionia_importing_from_brittanic_country
                    ROOT = {
                        imports_from = scope:ionia_importing_from_brittanic_country
                    }
                    opinion = {
                        target = ROOT
                        value >= 80
                    }
                }
            }
        }

        highlight = {
            scope:province = {
                owner = {
                    capital_scope = {
                        is_in_region = britain_region
                    }
                    any_owned_province = {
                        count >= 1
                        is_in_area = dumnonia_area
                    }
                }
            }
        }

        requires = { ionian_league_task_35 }

        on_completion = { #option to ally with nation, with diplo slot expansion OR brittish tin modifier with some cash
            trigger_event = ionian_resurgence_event.74
            show_as_tooltip = {
                add_treasury = 25
                custom_tooltip = "ionian_league_task_36_reward_1_tt"
                add_country_modifier = {
                    name = prittani_ionian_alliance_cmod
                    duration = 36500 #100 years
                }
                custom_tooltip = "ionian_league_task_36_reward_2_tt"
                add_country_modifier = {
                    name = tin_from_prittania_ionia_cmod
                    duration = 36500 #100 years
                }
            }
        }
    }

    ionian_league_task_37 = { #Phoenician trade routes
        icon = "task_economical"

        allow = {
            custom_tooltip = { #Owners of at least 2 of the cities of Palmyra, Tyre etc. have +80 opinions of you. 
                text = "ionian_league_task_37_requirement_tt"
                any_province = {
                    count >= 2
                    OR = {
                        province_id = 754 #Palmyra
                        province_id = 790 #Antioch
                        province_id = 818 #Edessa
                        province_id = 743 #Tyre
                        province_id = 747 #Sidon
                    }
                    owner = {
                        opinion = {
                            target = ROOT
                            value >= 80
                        }
                    }
                }
            }
        }

        highlight = {
            scope:province = {
                OR = {
                    province_id = 754 #Palmyra
                    province_id = 790 #Antioch
                    province_id = 818 #Edessa
                    province_id = 743 #Tyre
                    province_id = 747 #Sidon
                }
            }
        }

        requires = { ionian_league_task_21 }

        on_completion = { #Trade and diplo range modifier
            trigger_event = ionian_resurgence_event.76
            show_as_tooltip = {
                add_political_influence = 100
                add_country_modifier = {
                    name = extended_eastern_routes_ionia_cmod
                    duration = 18250 #50 years
                }
            }
        }
    }

    ionian_league_task_38 = { #Indian Goods
        icon = "task_economical"

        allow = {
            custom_tooltip = { #Is importing food items from at least 2 different indian kingdoms 
                text = "ionian_league_task_38_requirement_tt"
                any_country = {
                    count >= 2
                    capital_scope = {
                        OR = {
                            is_in_region = maru_region
                            is_in_region = gandhara_region
                            is_in_region = avanti_region
                            is_in_region = aparanta_region
                            is_in_region = madhyadesa_region
                            is_in_region = vindhyaprstha_region
                            is_in_region = karnata_region
                            is_in_region = dravida_region
                            is_in_region = pracya_region
                            is_in_region = burma_region
                        }
                    }
                    save_temporary_scope_as = ionia_importing_from_indian_country
                    ROOT = {
                        imports_from = scope:ionia_importing_from_indian_country
                    }
                }
            }
        }

        highlight = {
            scope:province = {
                owner = {
                    capital_scope = {
                        OR = {
                            is_in_region = maru_region
                            is_in_region = gandhara_region
                            is_in_region = avanti_region
                            is_in_region = aparanta_region
                            is_in_region = madhyadesa_region
                            is_in_region = vindhyaprstha_region
                            is_in_region = karnata_region
                            is_in_region = dravida_region
                            is_in_region = pracya_region
                            is_in_region = burma_region
                        }
                    }
                }
            }
        }

        requires = { ionian_league_task_37  }#ionian_league_task_39

        on_completion = { #Trade and diplo range modifier + 3 closest cities with marketplaces to syria get local trade modifiers.
            trigger_event = ionian_resurgence_event.77
            show_as_tooltip = {
                add_political_influence = 50
                add_country_modifier = {
                    name = indian_trade_ionia_cmod
                    duration = -1
                }
            }
        }
    }

    ionian_league_task_39 = { #A Base in Socotra
        icon = "task_political"

        allow = {
            owns_or_subject_owns = p:7530
            p:7530 = {
                num_of_commerce_building >= 1
                num_of_port_building >= 1
            }
        }

        highlight = {
            scope:province = {
                province_id = 7530
            }
        }

        requires = { ionian_league_task_5 }

        on_completion = { #Trade and diplo range modifier
            trigger_event = ionian_resurgence_event.78
            show_as_tooltip = {
                add_political_influence = 50
                p:4799 = {
                    add_claim = ROOT
                }
                p:7530 = {
                    add_province_modifier = {
                        name = socotran_outpost_ionia_pmod
                        duration = -1
                    }
                }
            }
        }
    }
}