roman_mission_08_greece = {
    header = "mission_image_rome"
    icon = "rome_4"

    repeatable = no

    chance = {
    	factor = 8
    }
	
	ai_chance = {
		factor = 15
		modifier = {
			factor = 0
			NOT = {
				has_completed_mission = roman_2_provincia
			}
		}
	}

    potential = {
        NOT = { has_variable = roman_mission_08_greece }
        has_dlc = "The Punic Wars"
    	tag = ROM
    	OR = {
    		any_owned_province = {
    			is_in_region = greece_region
    		}
    		has_completed_mission = roman_1_italia
    	}
        is_subject = no
        has_civil_war = no
    }

    abort = {
        ai_mission_back_out_trigger = yes
    }

    on_start = {
        start_mission_ai_effect = yes
    	root = { save_scope_as = mission_country }
    	c:EGY = { save_scope_as = egypt_country }
    	c:MAC = { save_scope_as = macedon_country }
    	c:TRE = { save_scope_as = thrace_country }
    	c:PRY = { save_scope_as = phrygia_country }
    	c:SEL = { save_scope_as = seleucid_country }
    	p:422 = { save_scope_as = apollonia_province }
    	p:4088 = { save_scope_as = rhizon_province }
		if = {
			limit = {
				is_ai = yes
				NOT = {
					any_country = {
						capital_scope = {
							is_in_region = illyria_region
						}
						is_ai = no
					}
				}
			}
			every_country = {
				limit = {
					capital_scope = {
						is_in_region = illyria_region
					}
					OR = {
						is_tribal = yes
						num_of_cities <= 40
					}
					is_ai = yes
					NOT = {
						AND = {
							is_subject = yes
							overlord = {
								is_ai = no
							}
						}
					}
				}
				every_owned_province = {
					limit = {
						is_in_region = illyria_region
					}
					set_owned_by = c:ROM
				}
			}
		}
        if = {
            limit = { is_ai = yes }
            region:illyria_region = {
                every_region_province = { add_claim = ROOT }
            }
            region:greece_region = {
                every_region_province = { add_claim = ROOT }
            }
            region:macedonia_region = {
                every_region_province = { add_claim = ROOT }
            }
            region:thrace_region = {
                every_region_province = { add_claim = ROOT }
            }
        }
    }

    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = roman_mission_08_greece
            days = 7300
        }
    }

    on_completion = {
        complete_mission_effect = yes
    }

    roman_mission_08_greece_task_1 = { # Eastern Strike Fleet
        icon = "task_expansion"

    	requires = { roman_mission_08_greece_task_3 }

        allow = {
        	custom_tooltip = {
        		text = roman_mission_08_greece_task_1_trigger_tt
        		roman_mission_eastern_strike_fleet_current_svalue >= roman_mission_eastern_strike_fleet_max_svalue
        	}
        }

        on_completion = {
        	add_country_modifier = {
        		name = roman_mission_eastern_strike_fleet_modifier
        		duration = 3650
        	}
        }
    }

    roman_mission_08_greece_task_2 = { # Negotiate with Illyrians
        icon = "task_diplomatic"

    	duration = 180

        highlight = {
            scope:province = {
                is_in_region = illyria_region
                is_coastal = yes
                owner = {
                    is_subject = no
                    not = { war_with = root }
                    num_of_cities >= 4
                    country_culture_group = illyrian_group
                }
            }
        }

        bypass = {
        	OR = {
                region:illyria_region = { 
                    NOT = {
                		any_region_province = {
                			is_coastal = yes
                            has_owner = yes
                			owner = {
                                is_subject = no
                				not = { war_with = root }
                				num_of_cities >= 4
                				country_culture_group = illyrian_group
                			}
                		}
                    }
            	}
                AND = {
                    owns_or_subject_owns_area = illyria_graeca_area
                    has_completed_mission_task = roman_mission_08_greece_task_3
                }
            }
        }

        allow = {
        	custom_tooltip = {
        		text = roman_mission_08_greece_task_2_trigger_tt
        		region:illyria_region = {
	        		any_region_province = {
	        			is_coastal = yes
	        			owner = {
                            is_subject = no
	        				not = { war_with = root }
	        				opinion = {
	        					target = root
	        					value >= 15
	        				}
	        				num_of_cities >= 4
	        				country_culture_group = illyrian_group
	        			}
	        		}
	        	}
        	}
        }

        on_completion = {
        	if = {
        		limit = {
        			region:illyria_region = {
		        		any_region_province = {
		        			is_coastal = yes
		        			owner = {
                                is_subject = no
		        				not = { war_with = root }
		        				opinion = {
		        					target = root
		        					value >= 15
		        				}
		        				num_of_cities >= 4
		        				country_culture_group = illyrian_group
		        			}
		        		}
		        	}
        		}
        		ordered_country = {
        			order_by = rank
        			limit = {
        				is_subject = no
        				NOT = { war_with = root }
        				opinion = {
        					target = root
        					value >= 15
        				}
        				any_owned_province = {
        					is_coastal = yes
        					is_in_region = illyria_region
        				}
        				num_of_cities >= 4
        				country_culture_group = illyrian_group
        			}
        			max = 1
        			custom_tooltip = roman_mission_08_greece_task_2_effect_1_tt
        			save_scope_as = negotiate_illyria_country
        		}
        	}
        	else = {
        		custom_tooltip = roman_mission_08_greece_task_2_effect_2_tt
        	}
        	trigger_event = { id = me_roman_8_greece.1 }
        }
    }

    roman_mission_08_greece_task_3 = { # Protect the Adriatic
        icon = "task_political"

        highlight = {
			scope:province = {
				OR = {
					province_id = 422
					province_id = 415
					province_id = 2336
					province_id = 4090
					province_id = 4091
					province_id = 4088
				}
        	}
        }

        allow = {
        	custom_tooltip = {
        		text = roman_mission_08_greece_task_3_trigger_tt
				OR = {
					owns_or_subject_owns = 422
					p:422 = {
						root = { is_ai = yes } #This can hold AI up for decades
						has_owner = no
					}
				}
	        	OR = {
					owns_or_subject_owns = 415
					p:415 = {
						root = { is_ai = yes }
						has_owner = no
					}
				}
				OR = {
					owns_or_subject_owns = 2336
					p:2336 = {
						root = { is_ai = yes }
						has_owner = no
					}
				}
				OR = {
					owns_or_subject_owns = 4090
					p:490 = {
						root = { is_ai = yes }
						has_owner = no
					}
				}
				OR = {
					owns_or_subject_owns = 4091
					p:4091 = {
						root = { is_ai = yes }
						has_owner = no
					}
				}
	        	OR = {
					owns_or_subject_owns = 4088
					p:4088 = {
						root = { is_ai = yes }
						has_owner = no
					}
				}
        	}
        }

        on_completion = {
        	roman_mission_ruler_popularity_effect = yes
        	custom_tooltip = roman_conquest_reward_tooltip
        	trigger_event = { id = roman_conquest_2.1 }
        	if = {
        		limit = {
        			any_subject = {
        				any_owned_province = {
        					OR = {
					        	province_id = 422
					        	province_id = 415
					        	province_id = 2336
					        	province_id = 4090
					        	province_id = 4091
					        	province_id = 4088
				        	}
        				}
        			}
        		}
        		every_subject = {
        			limit = {
        				any_owned_province = {
        					OR = {
					        	province_id = 422
					        	province_id = 415
					        	province_id = 2336
					        	province_id = 4090
					        	province_id = 4091
					        	province_id = 4088
				        	}
        				}
        			}
        			add_opinion = {
        				modifier = opinion_roman_mission_subject_appreciation
        				target = root
        			}
        		}
        	}
        	show_as_tooltip = {
        		if = {
					limit = {
						any_owned_province = { is_in_area = illyria_graeca_area }
					}
					random_owned_province = {
						limit = { is_in_area = illyria_graeca_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
				if = {
					limit = {
						any_owned_province = { is_in_area = dalmatia_orientalis_area }
					}
					random_owned_province = {
						limit = { is_in_area = dalmatia_orientalis_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
        	}
        }
    }

    roman_mission_08_greece_task_4 = { # Island Foothold
        icon = "task_economical"

    	requires = { roman_mission_08_greece_task_12 }

    	highlight = {
			scope:province = {
				OR = {
					province_id = 470
					province_id = 459
					province_id = 454
					province_id = 263
					province_id = 1835
				}
    		}
    	}

        allow = {
        	OR = {
	        	owns_or_subject_owns = 470
	        	owns_or_subject_owns = 459
	        	owns_or_subject_owns = 454
	        	owns_or_subject_owns = 263
	        	owns_or_subject_owns = 1835
        	}
        }

        on_completion = {
        	if = {
        		limit = {
        			any_owned_province = {
        				OR = {
        					province_id = 470
			        		province_id = 459
			        		province_id = 454
			        		province_id = 263
			        		province_id = 1835
        				}
        			}
        		}
        		ordered_owned_province = {
        			order_by = total_population
        			limit = {
        				OR = {
        					province_id = 470
			        		province_id = 459
			        		province_id = 454
			        		province_id = 263
			        		province_id = 1835
        				}
        			}
        			max = 1
        			state = {
						add_state_modifier = {
							name = new_roman_conquest_foreign_smod
							duration = 1825 # 5 years
						}
					}
        			if = {
        				limit = {
        					OR = {
        						has_building = fortress_building
        						free_building_slots = 0
        					}
        				}
        				add_province_modifier = {
        					name = roman_mission_island_foothold_naval_boon_modifier
        					duration = 7300
        				}
        			}
        			else = {
        				custom_tooltip = roman_mission_08_greece_task_4_effect_tt
        				trigger_event = { id = roman_conquest_2.3 }
        			}
	        	}
        	}
        	if = {
        		limit = {
        			any_subject = {
        				any_owned_province = {
        					OR = {
				    			province_id = 470
				        		province_id = 459
				        		province_id = 454
				        		province_id = 263
				        		province_id = 1835
				    		}
        				}
        			}
        		}
        		every_subject = {
        			limit = {
        				any_owned_province = {
        					OR = {
				    			province_id = 470
				        		province_id = 459
				        		province_id = 454
				        		province_id = 263
				        		province_id = 1835
				    		}
        				}
        			}
        			add_opinion = {
        				modifier = opinion_roman_mission_subject_appreciation
        				target = root
        			}
        		}
        	}
        }
    }

    roman_mission_08_greece_task_5 = { # Greek Allies
        icon = "task_diplomatic"

    	duration = 180

        highlight = {
            scope:province = {
				exists = owner
                owner = {
                    country_culture_group = hellenic
                    num_of_cities < 5
                    any_owned_province = {
                        NOR = {
                            is_in_area = crete_area
                            is_in_area = arcadia_area
                            is_in_area = euboea_area
                        }
                        is_in_region = greece_region
                    }
                }
            }
        }

        bypass = {
            OR = {
				is_ai = yes
                owns_or_subject_owns_region = greece_region
            	NOR = {
            		area:south_peleponnesos_area = {
            			roman_mission_greek_ally_area_potential_trigger = yes
        			}
        			area:achaea_area = {
            			roman_mission_greek_ally_area_potential_trigger = yes
        			}
        			area:central_greece_area = {
            			roman_mission_greek_ally_area_potential_trigger = yes
        			}
        			area:boeotia_area = {
            			roman_mission_greek_ally_area_potential_trigger = yes
        			}
        			area:aetolia_area = {
            			roman_mission_greek_ally_area_potential_trigger = yes
        			}
        			area:aegean_islands_area = {
            			roman_mission_greek_ally_area_potential_trigger = yes
        			}
            	}
            }
        }

        allow = {
        	OR = {
        		custom_tooltip = {
    				text = roman_mission_08_greece_task_5_trigger_peleponnese_tt
        			area:south_peleponnesos_area = {
	        			roman_mission_greek_ally_area_allow_trigger = yes
        			}
        		}
        		custom_tooltip = {
    				text = roman_mission_08_greece_task_5_trigger_achaea_tt
        			area:achaea_area = {
	        			roman_mission_greek_ally_area_allow_trigger = yes
        			}
        		}
        		custom_tooltip = {
    				text = roman_mission_08_greece_task_5_trigger_hellas_tt
        			area:central_greece_area = {
	        			roman_mission_greek_ally_area_allow_trigger = yes
        			}
        		}
        		custom_tooltip = {
    				text = roman_mission_08_greece_task_5_trigger_boeotia_tt
        			area:boeotia_area = {
	        			roman_mission_greek_ally_area_allow_trigger = yes
        			}
        		}
        		custom_tooltip = {
    				text = roman_mission_08_greece_task_5_trigger_aetolia_tt
        			area:aetolia_area = {
	        			roman_mission_greek_ally_area_allow_trigger = yes
        			}
        		}
        		custom_tooltip = {
    				text = roman_mission_08_greece_task_5_trigger_aegean_tt
        			area:aegean_islands_area = {
	        			roman_mission_greek_ally_area_allow_trigger = yes
        			}
        		}
				owns_or_subject_owns_region = greece_region
        	}
        }

        monthly_on_action = roman_8_greece_greek_allies_pulse

		on_start = {
			set_variable = {
				name = ongoing_mission_pulse_flag
				days = 180
			}
		}

        on_completion = {
        	custom_tooltip = roman_mission_08_greece_task_5_effect_tt
        }
    }

    roman_mission_08_greece_task_6 = { # Foothold in Illyria
        icon = "task_conquest"

    	requires = { roman_mission_08_greece_task_2 roman_mission_08_greece_task_3 }

    	highlight = {
			scope:province = {
				is_in_area = illyria_graeca_area
			}
    	}

        allow = {
			trigger_if = {
				limit = {
					is_ai = yes
				}
				area:illyria_graeca_area = {
					any_area_province = {
						count = all
						OR = {
							has_owner = no
							owned_or_subject_owned = c:ROM
						}
					}
				}
			}
			trigger_else = {
				owns_or_subject_owns_area = illyria_graeca_area
			}
        }

        on_completion = {
        	roman_mission_ruler_popularity_effect = yes
        	custom_tooltip = roman_conquest_reward_tooltip
        	trigger_event = { id = roman_conquest_2.2 }
        	show_as_tooltip = {
        		if = {
					limit = {
						any_owned_province = { is_in_area = illyria_graeca_area }
					}
					random_owned_province = {
						limit = { is_in_area = illyria_graeca_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
        	}
        	if = {
        		limit = {
        			any_subject = {
        				any_owned_province = {
        					is_in_area = illyria_graeca_area
        				}
        			}
        		}
        		every_subject = {
        			limit = {
        				any_owned_province = {
        					is_in_area = illyria_graeca_area
        				}
        			}
        			add_opinion = {
        				modifier = opinion_roman_mission_subject_appreciation
        				target = root
        			}
        		}
        	}
        }
    }

    roman_mission_08_greece_task_7 = { # Northern Sweep
        icon = "task_expansion"

    	requires = { roman_mission_08_greece_task_6 }

    	highlight = {
			scope:province = {
				is_in_area = dardania_inferioris_area
			}
    	}

    	allow = {
    		owns_or_subject_owns_area = dardania_inferioris_area
    	}

    	on_completion = {
    		roman_mission_ruler_popularity_effect = yes
        	custom_tooltip = roman_conquest_reward_tooltip
        	trigger_event = { id = roman_conquest_2.4 }
        	show_as_tooltip = {
        		if = {
					limit = {
						any_owned_province = { is_in_area = dardania_inferioris_area }
					}
					random_owned_province = {
						limit = { is_in_area = dardania_inferioris_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
        	}
        	if = {
        		limit = {
        			any_subject = {
        				any_owned_province = {
        					is_in_area = dardania_inferioris_area
        				}
        			}
        		}
        		every_subject = {
        			limit = {
        				any_owned_province = {
        					is_in_area = dardania_inferioris_area
        				}
        			}
        			add_opinion = {
        				modifier = opinion_roman_mission_subject_appreciation
        				target = root
        			}
        		}
        	}
    	}
    }

    roman_mission_08_greece_task_8 = { # Liberate Greece
        icon = "task_political"

    	requires = { roman_mission_08_greece_task_4 }

    	highlight = {
			scope:province = {
				OR = {
					province_id = 426
					province_id = 416
					province_id = 418
					AND = {
						exists = owner
						owner = {
							OR = {
								this = c:PRY
								AND = {
									is_subject = yes
									overlord = {
										this = c:PRY
									}
								}
							}
						}
					}
				}
			}
    	}

    	allow = {
    		trigger_if = {
    			limit = {
    				exists = scope:egypt_country
    				scope:egypt_country = {
    					any_subject = {
    						any_owned_province = {
    							is_in_region = greece_region
    						}
    					}  
    				}
    			}
    			custom_tooltip = {
    				text = roman_mission_08_greece_task_8_trigger_egypt_subject_tt
	    			scope:egypt_country = {
	    				NOR = {
	    					any_owned_province = {
	    						is_in_region = greece_region
	    					}
	    					any_subject = {
	    						any_owned_province = {
	    							is_in_region = greece_region
	    						}
	    					}
	    				}
	    			}
    			}
    		}
    		trigger_if = {
    			limit = {
    				exists = scope:macedon_country
    				scope:macedon_country = {
    					any_subject = {
    						any_owned_province = {
    							is_in_region = greece_region
    						}
    					}
    				}
    			}
    			custom_tooltip = {
    				text = roman_mission_08_greece_task_8_trigger_macedon_subject_tt
    				scope:macedon_country = {
    					NOR = {
	    					any_owned_province = {
	    						is_in_region = greece_region
	    					}
	    					any_subject = {
	    						any_owned_province = {
	    							is_in_region = greece_region
	    						}
	    					}
	    				}
    				}
    			}
    		}
    		trigger_if = {
    			limit = {
    				exists = scope:thrace_country
    				scope:thrace_country = {
    					any_subject = {
    						any_owned_province = {
    							is_in_region = greece_region
    						}
    					}
    				}
    			}
    			custom_tooltip = {
    				text = roman_mission_08_greece_task_8_trigger_thrace_subject_tt
    				scope:thrace_country = {
    					NOR = {
	    					any_owned_province = {
	    						is_in_region = greece_region
	    					}
	    					any_subject = {
	    						any_owned_province = {
	    							is_in_region = greece_region
	    						}
	    					}
	    				}
    				}
    			}
    		}
    		trigger_if = {
    			limit = {
    				exists = scope:phrygia_country
    				scope:phrygia_country = {
    					any_subject = {
    						any_owned_province = {
    							is_in_region = greece_region
    						}
    					}
    				}
    			}
    			custom_tooltip = {
    				text = roman_mission_08_greece_task_8_trigger_phrygia_subject_tt
    				scope:phrygia_country = {
    					NOR = {
	    					any_owned_province = {
	    						is_in_region = greece_region
	    					}
	    					any_subject = {
	    						any_owned_province = {
	    							is_in_region = greece_region
	    						}
	    					}
	    				}
    				}
    			}
    		}
    		trigger_if = {
    			limit = {
    				exists = scope:seleucid_country
    				scope:seleucid_country = {
    					any_subject = {
    						any_owned_province = {
    							is_in_region = greece_region
    						}
    					}
    				}
    			}
    			custom_tooltip = {
    				text = roman_mission_08_greece_task_8_trigger_seleucid_subject_tt
    				scope:seleucid_country = {
    					NOR = {
	    					any_owned_province = {
	    						is_in_region = greece_region
	    					}
	    					any_subject = {
	    						any_owned_province = {
	    							is_in_region = greece_region
	    						}
	    					}
	    				}
    				}
    			}
    		}
    		owns_or_subject_owns = 426
    		owns_or_subject_owns = 416
    		owns_or_subject_owns = 418
    	}

    	on_completion = {
    		add_country_modifier = {
    			name = roman_mission_liberator_of_greece_modifier
    			duration = 7300
    		}
    	}
    }

    roman_mission_08_greece_task_9 = { # Annexing Macedon
        icon = "task_conquest"

    	requires = { roman_mission_08_greece_task_10 }

    	highlight = {
			scope:province = {
				OR = {
					is_in_area = upper_macedonia_area
					is_in_area = macedonia_area
				}
			}
    	}

    	allow = {
    		owns_or_subject_owns_area = upper_macedonia_area
    		owns_or_subject_owns_area = macedonia_area
    	}

    	on_completion = {
    		roman_mission_ruler_popularity_effect = yes
        	custom_tooltip = roman_conquest_reward_tooltip
        	trigger_event = { id = roman_conquest_2.6 }
        	show_as_tooltip = {
        		if = {
					limit = {
						any_owned_province = { is_in_area = upper_macedonia_area }
					}
					random_owned_province = {
						limit = { is_in_area = upper_macedonia_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
				if = {
					limit = {
						any_owned_province = { is_in_area = macedonia_area }
					}
					random_owned_province = {
						limit = { is_in_area = macedonia_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
        	}
        	if = {
        		limit = {
        			any_subject = {
        				any_owned_province = {
        					OR = {
				    			is_in_area = upper_macedonia_area
				    			is_in_area = macedonia_area
				    		}
        				}
        			}
        		}
        		every_subject = {
        			limit = {
        				any_owned_province = {
        					OR = {
				    			is_in_area = upper_macedonia_area
				    			is_in_area = macedonia_area
				    		}
        				}
        			}
        			add_opinion = {
        				modifier = opinion_roman_mission_subject_appreciation
        				target = root
        			}
        		}
        	}
    	}
    }

    roman_mission_08_greece_task_10 = { # The Ionian Coast
        icon = "task_conquest"

    	requires = { roman_mission_08_greece_task_6 }

    	highlight = {
			scope:province = {
				OR = {
					is_in_area = aetolia_area
					is_in_area = epirus_area
				}
			}
    	}

    	allow = {
    		owns_or_subject_owns_area = aetolia_area
    		owns_or_subject_owns_area = epirus_area
    	}

    	on_completion = {
    		roman_mission_ruler_popularity_effect = yes
        	custom_tooltip = roman_conquest_reward_tooltip
        	trigger_event = { id = roman_conquest_2.5 }
        	show_as_tooltip = {
        		if = {
					limit = {
						any_owned_province = { is_in_area = aetolia_area }
					}
					random_owned_province = {
						limit = { is_in_area = aetolia_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
				if = {
					limit = {
						any_owned_province = { is_in_area = epirus_area }
					}
					random_owned_province = {
						limit = { is_in_area = epirus_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
        	}
        	if = {
        		limit = {
        			any_subject = {
        				any_owned_province = {
        					OR = {
				    			is_in_area = aetolia_area
				    			is_in_area = epirus_area
				    		}
        				}
        			}
        		}
        		every_subject = {
        			limit = {
        				any_owned_province = {
        					OR = {
				    			is_in_area = aetolia_area
				    			is_in_area = epirus_area
				    		}
        				}
        			}
        			add_opinion = {
        				modifier = opinion_roman_mission_subject_appreciation
        				target = root
        			}
        		}
        	}
    	}
    }

    roman_mission_08_greece_task_11 = { # Home of Civilization
        icon = "task_conquest"

    	requires = { roman_mission_08_greece_task_10 }

    	highlight = {
			scope:province = {
				OR = {
					is_in_area = boeotia_area
					is_in_area = central_greece_area
				}
			}
    	}

    	allow = {
    		owns_or_subject_owns_area = boeotia_area
    		owns_or_subject_owns_area = central_greece_area
    	}

    	on_completion = {
    		roman_mission_ruler_popularity_effect = yes
        	custom_tooltip = roman_conquest_reward_tooltip
        	trigger_event = { id = roman_conquest_2.8 }
        	show_as_tooltip = {
        		if = {
					limit = {
						any_owned_province = { is_in_area = boeotia_area }
					}
					random_owned_province = {
						limit = { is_in_area = boeotia_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
				if = {
					limit = {
						any_owned_province = { is_in_area = central_greece_area }
					}
					random_owned_province = {
						limit = { is_in_area = central_greece_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
        	}
        	if = {
        		limit = {
        			any_subject = {
        				any_owned_province = {
        					OR = {
				    			is_in_area = boeotia_area
				    			is_in_area = central_greece_area
				    		}
        				}
        			}
        		}
        		every_subject = {
        			limit = {
        				any_owned_province = {
        					OR = {
				    			is_in_area = boeotia_area
				    			is_in_area = central_greece_area
				    		}
        				}
        			}
        			add_opinion = {
        				modifier = opinion_roman_mission_subject_appreciation
        				target = root
        			}
        		}
        	}
    	}
    }

    roman_mission_08_greece_task_12 = { # Freedom First
        icon = "task_political"

    	requires = { roman_mission_08_greece_task_5 }

    	duration = 180

    	bypass = {
    		area:central_greece_area = {
    			NOT = {
	    			any_area_province = {
	    				owner = {
	    					OR = {
	    						is_republic = no
	    						NOT = { country_culture_group = hellenic }
	    					}
	    					NOT = { this = root }
	    				}
	    			}
	    		}
		    }
		    area:south_peleponnesos_area = {
		    	NOT = {
					any_area_province = {
	    				owner = {
	    					OR = {
	    						is_republic = no
	    						NOT = { country_culture_group = hellenic }
	    					}
	    					NOT = { this = root }
	    				}
	    				NOT = { # Exception for Sparta holding Spartan lands
	    					owner = { tag = SPA }
	    					OR = {
	    						province_id = 427
	    						province_id = 430
	    						province_id = 429
	    						province_id = 450 
	    						province_id = 471
	    					}
	    				}
	    			}
    			}
    		}
    		area:achaea_area = {
    			NOT = {
					any_area_province = {
						owner = {
							OR = {
								is_republic = no
								NOT = { country_culture_group = hellenic }
							}
							NOT = { this = root }
						}
					}
				}
			}
			area:boeotia_area = {
				NOT = {
	    			any_area_province = {
	    				owner = {
	    					OR = {
	    						is_republic = no
	    						NOT = { country_culture_group = hellenic }
	    					}
	    					NOT = { this = root }
	    				}
	    				NOT = { # Exception for Thebes holding Theban lands
	    					owner = { tag = THE }
	    					province_id = 426
	    				}
	    			}
    			}
    		}
            area:arcadia_area = {
                NOT = {
                    any_area_province = {
                        owner = {
                            OR = {
                                is_republic = no
                                NOT = { country_culture_group = hellenic }
                            }
                            NOT = { this = root }
                        }
                    }
                }
            }
            area:euboea_area = {
                NOT = {
                    any_area_province = {
                        owner = {
                            OR = {
                                is_republic = no
                                NOT = { country_culture_group = hellenic }
                            }
                            NOT = { this = root }
                        }
                    }
                }
            }
    	}

    	on_completion = {
    		if = {
    			limit = {
    				area:central_greece_area = {
		    			any_area_province = {
		    				owner = {
		    					OR = {
		    						is_republic = no
		    						NOT = { country_culture_group = hellenic }
		    					}
		    					NOT = { this = root }
		    				}
		    			}
		    		}
    			}
    			area:central_greece_area = {
    				save_temporary_scope_as = current_area
    				custom_tooltip = roman_mission_08_greece_task_12_effect_tt
	    			every_area_province = {
	    				limit = {
		    				owner = {
		    					OR = {
		    						is_republic = no
		    						NOT = { country_culture_group = hellenic }
		    					}
		    					NOT = { this = root }
		    				}
	    				}
	    			}
	    		}
    		}
    		if = {
    			limit = {
    				area:south_peleponnesos_area = {
	    				any_area_province = {
		    				owner = {
		    					OR = {
		    						is_republic = no
		    						NOT = { country_culture_group = hellenic }
		    					}
		    					NOT = { this = root }
		    				}
		    				NOT = { # Exception for Sparta holding Spartan lands
		    					owner = { tag = SPA }
		    					OR = {
		    						province_id = 427
		    						province_id = 430
		    						province_id = 429
		    						province_id = 450 
		    						province_id = 471
		    					}
		    				}
		    			}
		    		}
    			}
    			area:south_peleponnesos_area = {
    				save_temporary_scope_as = current_area
    				custom_tooltip = roman_mission_08_greece_task_12_effect_tt
	    			hidden_effect = {
		    			every_area_province = {
	    					limit = {
	    						owner = {
	    							OR = {
	    								is_republic = no
	    								NOT = { country_culture_group = hellenic }
	    							}
	    							NOT = { this = root }
	    						}
	    						NOT = { # Exception for Sparta holding Spartan lands
			    					owner = { tag = SPA }
			    					OR = {
			    						province_id = 427
			    						province_id = 430
			    						province_id = 429
			    						province_id = 450 
			    						province_id = 471
			    					}
			    				}
	    					}
	    					add_claim = root
	    				}
    				}
	    		}
    		}
    		if = {
    			limit = {
    				area:achaea_area = {
						any_area_province = {
							owner = {
								OR = {
									is_republic = no
									NOT = { country_culture_group = hellenic }
								}
								NOT = { this = root }
							}
						}
					}
    			}
    			area:achaea_area = {
    				save_temporary_scope_as = current_area
    				custom_tooltip = roman_mission_08_greece_task_12_effect_tt
	    			every_area_province = {
	    				limit = {
		    				owner = {
		    					OR = {
		    						is_republic = no
		    						NOT = { country_culture_group = hellenic }
		    					}
		    					NOT = { this = root }
		    				}
	    				}
	    			}
	    		}
    		}
    		if = {
    			limit = {
    				area:boeotia_area = {
		    			any_area_province = {
		    				owner = {
		    					OR = {
		    						is_republic = no
		    						NOT = { country_culture_group = hellenic }
		    					}
		    					NOT = { this = root }
		    				}
		    			}
		    		}
    			}
    			area:boeotia_area = {
    				save_temporary_scope_as = current_area
    				custom_tooltip = roman_mission_08_greece_task_12_effect_tt
    				hidden_effect = {
	    				every_area_province = {
	    					limit = {
	    						owner = {
	    							OR = {
	    								is_republic = no
	    								NOT = { country_culture_group = hellenic }
	    							}
	    							NOT = { this = root }
	    						}
	    					}
	    					add_claim = root
	    				}
    				}
    			}
    		}
            if = {
                limit = {
                    area:euboea_area = {
                        any_area_province = {
                            has_owner = yes
                            owner = {
                                OR = {
                                    is_republic = no
                                    NOT = { country_culture_group = hellenic }
                                }
                                NOT = { this = root }
                            }
                            NOT = { # Exception for Thebes holding Theban lands
                                owner = { tag = THE }
                                province_id = 426
                            }
                        }
                    }
                }
                area:euboea_area = {
                    save_temporary_scope_as = current_area
                    custom_tooltip = roman_mission_08_greece_task_12_effect_tt
                    hidden_effect = {
                        every_area_province = {
                            limit = {
                                has_owner = yes
                                owner = {
                                    OR = {
                                        is_republic = no
                                        NOT = { country_culture_group = hellenic }
                                    }
                                    NOT = { this = root }
                                }
                                NOT = { # Exception for Thebes holding Theban lands
                                    owner = { tag = THE }
                                    province_id = 426
                                }
                            }
                            add_claim = root
                        }
                    }
                }
            }
            if = {
                limit = {
                    area:arcadia_area = {
                        any_area_province = {
                            has_owner = yes
                            owner = {
                                OR = {
                                    is_republic = no
                                    NOT = { country_culture_group = hellenic }
                                }
                                NOT = { this = root }
                            }
                        }
                    }
                }
                area:arcadia_area = {
                    save_temporary_scope_as = current_area
                    custom_tooltip = roman_mission_08_greece_task_12_effect_tt
                    hidden_effect = {
                        every_area_province = {
                            limit = {
                                has_owner = yes
                                owner = {
                                    OR = {
                                        is_republic = no
                                        NOT = { country_culture_group = hellenic }
                                    }
                                    NOT = { this = root }
                                }
                            }
                            add_claim = root
                        }
                    }
                }
            }
    	}
    }

    roman_mission_08_greece_task_13 = { # Peloponnesian Campaign
        icon = "task_conquest"

    	requires = { roman_mission_08_greece_task_8 roman_mission_08_greece_task_11 }

    	highlight = {
			scope:province = {
				OR = {
					is_in_area = south_peleponnesos_area
					is_in_area = achaea_area
                    is_in_area = arcadia_area
				}
			}
    	}

    	allow = {
			trigger_if = {
				limit = {
					is_ai = no
				}
				owns_or_subject_owns_area = south_peleponnesos_area
				owns_or_subject_owns_area = achaea_area
				owns_or_subject_owns_area = arcadia_area
			}
			trigger_else = {
				area:south_peleponnesos_area = {
					any_area_province = {
						count = all
						OR = {
							has_owner = no
							owner = root
							owner = {
								is_subject_of = root
							}
						}
					}
				}
				area:achaea_area = {
					any_area_province = {
						count = all
						OR = {
							has_owner = no
							owner = root
							owner = {
								is_subject_of = root
							}
						}
					}
				}
				area:arcadia_area = {
					any_area_province = {
						count = all
						OR = {
							has_owner = no
							owner = root
							owner = {
								is_subject_of = root
							}
						}
					}
				}
			}
    	}

    	on_completion = {
    		roman_mission_ruler_popularity_effect = yes
        	custom_tooltip = roman_conquest_reward_tooltip
        	trigger_event = { id = roman_conquest_2.7 }
        	show_as_tooltip = {
        		if = {
					limit = {
						any_owned_province = { is_in_area = south_peleponnesos_area }
					}
					random_owned_province = {
						limit = { is_in_area = south_peleponnesos_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
				if = {
					limit = {
						any_owned_province = { is_in_area = achaea_area }
					}
					random_owned_province = {
						limit = { is_in_area = achaea_area }
						state = {
							add_state_modifier = {
								name = new_roman_conquest_foreign_smod
								duration = 1825 # 5 years
							}
						}
					}
				}
                if = {
                    limit = {
                        any_owned_province = { is_in_area = arcadia_area }
                    }
                    random_owned_province = {
                        limit = { is_in_area = arcadia_area }
                        state = {
                            add_state_modifier = {
                                name = new_roman_conquest_foreign_smod
                                duration = 1825 # 5 years
                            }
                        }
                    }
                }
        	}
        	if = {
        		limit = {
        			any_subject = {
        				any_owned_province = {
        					OR = {
				    			is_in_area = south_peleponnesos_area
				    			is_in_area = achaea_area
                                is_in_area = arcadia_area
				    		}
        				}
        			}
        		}
        		every_subject = {
        			limit = {
        				any_owned_province = {
        					OR = {
				    			is_in_area = south_peleponnesos_area
				    			is_in_area = achaea_area
                                is_in_area = arcadia_area
				    		}
        				}
        			}
        			add_opinion = {
        				modifier = opinion_roman_mission_subject_appreciation
        				target = root
        			}
        		}
        	}
    	}
    }

    roman_mission_08_greece_task_final = { # Greek Clients
        icon = "task_political"

    	requires = { roman_mission_08_greece_task_13 }

    	prevented_by = { roman_mission_08_greece_task_final_2 }

        final = yes

        highlight = {
			scope:province = {
				OR = {
					province_id = 427
					province_id = 416
					province_id = 418
					province_id = 426
				}
			}
        }

        allow = {
			owns = 427
			owns = 416
			owns = 418
			owns = 426
        }

        on_completion = {
        	custom_tooltip = roman_mission_08_greece_task_final_tt
        	if = {
        		limit = {
        			owns = 416
        			c:ATH = { num_of_cities = 0 }
        		}
        		trigger_event = { id = me_roman_8_greece.9 }
        	}
        	else_if = {
	    		limit = {
	    			owns = 427
	    			c:SPA = { num_of_cities = 0 }
	    		}
	    		trigger_event = { id = me_roman_8_greece.10 }
	    	}
	    	else_if = {
	    		limit = {
	    			owns = 418
	    		}
	    		trigger_event = { id = me_roman_8_greece.11 }
	    	}
	    	else_if = {
	    		limit = {
	    			owns = 426
	    			c:THE = { num_of_cities = 0 }
	    		}
	    		trigger_event = { id = me_roman_8_greece.12 }
	    	}
	    	else = {
	    		trigger_event = { id = me_roman_8_greece.13 }
	    	}
        }
    }

    roman_mission_08_greece_task_final_2 = { # Integrate
        icon = "task_economical"

    	requires = { roman_mission_08_greece_task_13 }

    	prevented_by = { roman_mission_08_greece_task_final }

        final = yes

        on_completion = {
        	every_country_state = {
        		limit = {
        			any_state_province = {
        				is_in_region = greece_region
        			}
        		}
        		custom = roman_mission_08_greece_task_final_2_effect_tt
	        	add_state_modifier = {
	        		name = roman_mission_integration_modifier
	        		duration = 7300
	        	}
        	}
        	if = {
	        	limit = {
	        		area:crete_area = {
	        			any_area_province = {
	        				NOT = { owned_or_subject_owned = root }
	        			}
	        		}
	        	}
	        	custom_tooltip = me_roman_8_greece.13.a.tt.crete
	        	hidden_effect = {
		        	area:crete_area = {
		        		every_area_province = {
		        			limit = {
		        				NOT = { owned_or_subject_owned = root }
		        			}
		        			add_claim = root
		        		}
		        	}
	        	}
	        }
	        if = {
	        	limit = {
	        		area:aegean_islands_area = {
	        			any_area_province = {
	        				NOT = { owned_or_subject_owned = root }
	        			}
	        		}
	        	}
	        	custom_tooltip = me_roman_8_greece.13.a.tt.aegean_islands
	        	hidden_effect = {
		        	area:aegean_islands_area = {
		        		every_area_province = {
		        			limit = {
		        				NOT = { owned_or_subject_owned = root }
		        			}
		        			add_claim = root
		        		}
		        	}
	        	}
	        }
        }
    }
}