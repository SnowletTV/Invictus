01_salluvian = { 
    header = "mission_image_general"
    icon = "general_1"

    repeatable = no
    chance = 1000

    potential = {
        NOT = { has_variable = mission_cooldown_var }
        primary_culture = salluvian
    }

    abort = {}
    on_start = {
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = mission_cooldown_var
            days = 7300
        }
    }
    on_completion = {}

    01_salluvian_task_1 = {
        icon = "task_political"

        allow = {
        	custom_tooltip = {
        		text = celto_ligurian_culture_tt
        		any_country_culture = {
                	is_culture = ligurian
                	has_pop_type_right = citizen
            	}
        	}
            custom_tooltip = {
                text = celto_ligurian_ally_tt
                any_country = {
                    limit = {
                        is_culture = ligurian
                    }
                    count >= 1
                    alliance_with = root
                }
            }
        }

        on_completion = {
            trigger_event = me_salluvian.1
            custom_tooltip = celto_ligurian_opinion_boost_tt
            show_as_tooltip = {
                add_political_influence = 25
                add_treasury = 50
                capital_scope = {
                    create_pop = tribesmen
                    create_pop = tribesmen
                    create_pop = tribesmen
                }
            }
            hidden_effect = {
                every_country = {
                    limit = {
                        country_culture_group = ligurian
                    NOT = {
                        this = root
                    }
                }
                add_opinion = {
                    modifier = opinion_celto_ligurian_people
                    target = root  
                }
            }
        }
        }
    }

    01_salluvian_task_2 = {
        icon = "task_political"
        requires = {01_salluvian_task_1}

        allow = {}
        on_completion = {
            trigger_event = me_salluvian.2
            show_as_tooltip = {

            }
        }
    }

    01_salluvian_task_3 = {
        icon = "task_political"
        requires = {01_salluvian_task_2}

        allow = {}
        on_completion = {
            trigger_event = me_salluvian.3
            show_as_tooltip = {

            }
        }
    }

    01_salluvian_task_4 = {
        icon = "task_political"

        bypass = {
            c:MAS = {
                has_land = no
            }
        }

        highlight = {
            scope:province = {
                has_owner = yes
                owner = c:MAS
            }
        }

        allow = {
            hidden:c:MAS = {
                opinion = {target = root value >= 30}
            }
        }

        on_completion = {
            trigger_event = me_salluvian.4
            show_as_tooltip = {

            }
        }
    }

    01_salluvian_task_5 = {
        icon = "task_political"
        duration = 365
        requires = {01_salluvian_task_1 01_salluvian_task_4}

        allow = {
            political_influence >= 50
        }

        on_completion = {
            trigger_event = me_salluvian.5
            add_political_influence = -50
            show_as_tooltip = {

            }
        }
    }

    01_salluvian_task_6 = {
        icon = "task_artemis"
        requires = {01_salluvian_task_5}

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = alpes_maritimae_area
                }
            }
        }

        allow = {
            war = no
            stability >= 50
            treasury >= 275
            political_influence >= 50
            custom_tooltip = {
                text = we_need_2_stone_surplus_tt
                capital_scope.state = {
                    trade_good_surplus = {
                        target = stone
                        value >= 2
                    }
                }
            }
            capital_scope = {
                total_population >= 20
            }
        }

        on_completion = {
            add_treasury = -275
            add_political_influence = -50
            current_ruler = {
                add_trait = founder
            }
            capital_scope = {
                set_city_status = city
            }
            trigger_event = me_salluvian.6
        }
    }

    01_salluvian_task_7 = {
        icon = "task_economical"
        requires = {01_salluvian_task_6}

        highlight = {
            scope:province = { 
                province_id = 3523
            }
        }

        allow = {
            capital_scope = {
                num_of_commerce_building >= 2
            }
            custom_tooltip = {
                text = direct_investments_saluvian_tt
                capital_scope.state = {
                    calc_true_if = {
                        amount >= 1
                        state_improvement_oratory_trigger = yes   
                    }
                }
            } 
        }

        on_completion = {
            trigger_event = me_salluvian.7
            show_as_tooltip = {
                capital_scope = {
                    add_province_modifier = {
                        name = ibero_italic_salluvian_mod
                        duration = -1
                    }
                }
                p:2319 = { add_road_towards = p:3523 }
            }
        }
    }

    01_salluvian_task_8 = {
        icon = "task_battle"
        requires = {01_salluvian_task_5}

        bypass = {
            c:MAS = {
                has_land = no
            }
        }

        allow = {
            custom_tooltip = {
                text = salluvian_10_ship_tooltip
                any_navy = {
                    any_sub_unit = {
                        count >= 10
                        OR = {
                            sub_unit_type = trireme
                            sub_unit_type = liburnian
                        }
                    }
                    has_commander = yes
                    commander = {
                        finesse >= 6
                    }
                }
            }
            custom_tooltip = {
                text = we_need_to_hire_mercenary_tt
                any_unit = {
                    exists = commander
                    commander = {
                        is_mercenary = yes
                    }
                }
            }
        }

        on_completion = {
            trigger_event = me_salluvian.8
            show_as_tooltip = {
                add_treasury = 300
                declare_war_with_wargoal = {
                    war_goal = conquer_wargoal
                    province = c:MAS.capital_scope
                    target = c:MAS
                }
            }
        }
    }

    01_salluvian_task_9 = {
        icon = "task_expansion"
        requires = {01_salluvian_task_8}

        highlight = {
            scope:province = { 
                province_id = 2325
            }
        }

        allow = {
            owns_or_subject_owns = 2325
        }

        on_completion = {
            add_innovation = 2
            p:1000 = {
                add_claim = root
            }
            p:1001 = {
                add_claim = root
            }
            p:2260 = {
                add_claim = root
            }
            trigger_event = me_salluvian.9
        }
    }

    01_salluvian_task_10 = {
        icon = "task_atlas"
        requires = {01_salluvian_task_9}
        final = yes

        allow = {
            stability >= 70
            current_ruler = {
                popularity >= 75
            }
            custom_tooltip = {
                text = we_have_formed_salluvian_confederacy_tt
                has_variable = formed_salluvian_confederacy
            }
        }
        on_completion = {
            trigger_event = me_salluvian.10
            current_ruler = {
                add_nickname = NICKNAME_THE_GREAT
                add_martial = 1
                add_finesse = 1
            }
            show_as_tooltip = {

            }
        }
    }

    01_salluvian_task_11 = {
        icon = "task_political"
        requires = {01_salluvian_task_9}

        allow = {}
        on_completion = {
            trigger_event = me_salluvian.11
            show_as_tooltip = {

            }
        }
    }

    01_salluvian_task_12 = {
        icon = "task_calm"
        requires = {01_salluvian_task_5}

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = alpes_maritimae_area
                    is_in_area = alpes_maritimae_two_area 
                    is_in_area = narbonensis_occidentalis_area
                    is_in_area = allobrogia_area
                }
            }
        }

        allow = {
            custom_tooltip = {
                text = salluvian_farms_task_tt
                salluvian_farms_task_current >= salluvian_farms_task_total
            }
        }

        on_completion = {
            trigger_event = me_salluvian.12
            show_as_tooltip = {
                current_ruler = {
                    add_popularity = 15
                }
                capital_scope = {
                    add_province_modifier = {
                        name = salluvian_farms_capital_mod
                        duration = -1
                    }
                }
            }
        }
    }

    01_salluvian_task_13 = {
        icon = "task_heracles"
        requires = {01_salluvian_task_12}

        highlight = {
            scope:province = { 
                OR = {
                    province_id = 2316
                    province_id = 2317
                }
            }
        }

        allow = {
            custom_tooltip = {
                text = it_has_to_be_summertime_tt
                root = { has_global_variable = harvest_summer_var  }
            }
            has_deity_in_pantheon = deity:omen_gobannus
            custom_tooltip = {
                text = gobannus_omen_active_tt
                has_this_omen = deity:omen_gobannus
            }
            hidden:p:2316 = {
                has_building = slave_mine_building
            }
            hidden:p:2317 = {
                has_building = slave_mine_building
            }
        }
        on_completion = {
            trigger_event = me_salluvian.13
            show_as_tooltip = {
                p:2316 = {
                    add_province_modifier = {
                        name = gobannus_salluvian_territory_mod
                        duration = -1
                    }
                }
                p:2317 = {
                    add_province_modifier = {
                        name = gobannus_salluvian_territory_mod
                        duration = -1
                    }
                }
            }
        }
    }

    01_salluvian_task_14 = {
        icon = "task_atlas"
        requires = {01_salluvian_task_13}

        allow = {
            hidden:capital_scope = {
                has_city_status = yes
                total_population >= 40
                free_building_slots >= 1
                num_of_used_building_slots >= 5
            }
        }

        on_completion = {
            capital_scope = {
                add_building_level = foundry_building
                add_province_modifier = {
                    name = salluvian_foundry_modifier
                    duration = -1
                }
            }
            trigger_event = me_salluvian.14
        }
    }

    01_salluvian_task_15 = {
        icon = "task_political"
        requires = {01_salluvian_task_7}

        allow = {}
        on_completion = {
            trigger_event = me_salluvian.15
            show_as_tooltip = {

            }
        }
    }
}