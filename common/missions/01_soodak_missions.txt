01_soodak_missions = {
	header = "albion_mission1_header"
	icon = cde_demetrius_fleet

	repeatable = no
	chance = {
		factor = 20
	}

	potential = {
		NOT = { has_variable = mission_cooldown_var }
		is_subject = yes #Set for now since the mission is designed around being one
		has_civil_war = no
		tag = SOO
	}

	abort = {
		ai_mission_back_out_trigger = yes
	}
	on_start = {
		trigger_event = me_soodak.1
		start_mission_ai_effect = yes
		soodak_get_overlord_effect = yes #Save the overlord as soodak_overlord
	}
	on_abort = {
		custom_tooltip = general_mission_cooldown_tt
		set_variable = {
			name = mission_cooldown_var
			days = 7300
		}
	}
	on_completion = {
		complete_mission_effect = yes
		add_2_free_province_investments = yes
		capital_scope = {
			capital_formable_small_effect = yes
		}
	}

	#01_soodak_missions_task_1 = {
	#	icon = "task_atlas"
	#
	#}

	01_soodak_missions_task_900 = { #Androphagian Diplomacy
		icon = "task_atlas"
		requires = { 01_soodak_missions_task_1 }

		allow = {
			political_influence >= 25
			manpower >= 1 #1 manpower equates to 500 in-game
			#If Androphagia doesn't exist, an event getting survivors will occur
			#custom_tooltip = {
			#	text = soodak_androphagia_exists
			#	any_country = {
			#		tag = ANP
			#	}
			#}
		}
		bypass = {
			#NOT = {
			#	any_country = {
			#		tag = ANP
			#	}
			#}
		}

		on_completion = {
			custom_tooltip = 01_soodak_missions_task_900_tt
			add_political_influence = -25
			add_manpower = -1 #1 manpower equates to 500 in-game
			trigger_event = { id = me_soodak.900 }
		}
	
	}

	01_soodak_missions_task_1 = { #First Steps
		icon = "task_artemis"
		highlight = {
			scope:province = {
				province_id = 9371
			}
		}

		allow = {
			hidden:p:9371 = {
				has_building = population_building
			}
			p:9371 = {
				calc_true_if = {
					amount >= 2
					is_importing_trade_good = grain
					is_importing_trade_good = vegetables
					is_importing_trade_good = fish
					is_importing_trade_good = cattle
				}
			}
		}
		on_completion = {
			custom_tooltip = 01_soodak_missions_task_01_tt
			show_as_tooltip = {
				p:9371 = {
					create_2_freemen_effect = yes
					add_province_modifier = {
						name = soodak_food_modifier
						duration = 3650
					}
				}
			}
		trigger_event = { id = me_soodak.2 }
		}
	
	}
	01_soodak_missions_task_2 = {
		icon = "task_political"
		requires = { 01_soodak_missions_task_1 }
		highlight = {
			scope:province = {
				province_id = 9373
			}
		}
		allow = {
			owns_or_subject_owns = 9373
			p:9373 = {
				OR = {
					has_building = basic_settlement_infratructure_building
					has_building = foundry_building
				}
			}
		}
		on_completion = {
			trigger_event = me_soodak.2000 #Set to 2000 since 2 is already used
			custom_tooltip = 01_soodak_missions_2_reward_tt
		}
	}
	01_soodak_missions_task_3 = { # A Sea-Faring Fleet
		icon = "task_political"
		requires = { 01_soodak_missions_task_1 }
		highlight = {
			scope:province = {
				province_id = 9371
			}
		}
		allow = {
			owns_or_subject_owns = 9371
			p:9373 = {
				OR = {
					has_building = port_building
				}
			}
			num_of_ships >= 5
		}
		on_completion = {
			trigger_event = me_soodak.3
			show_as_tooltip = {
				capital_scope.state = {
					add_state_modifier = {
						name = soodak_quality_port_state_modifier
						duration = 18250 #50 years
					}
				}
				capital_scope = {
					add_province_modifier = {
						name = soodak_quality_port_modifier
						duration = 18250 #50 years
					}
				}
			}
		}
	}
	01_soodak_missions_task_4 = { # Soodak Saunas
		icon = "task_political"
		requires = { 01_soodak_missions_task_1 }
		highlight = {
			scope:province = {
				province_id = 9371
			}
		}
		duration = 90
		allow = {
			treasury >= 100
		}
		on_start = {
			add_treasury = -100
		}
		on_completion = {
			trigger_event = me_soodak.4
			show_as_tooltip = {
				capital_scope = {
					add_province_modifier = {
						name = soodak_capital_saunas_modifier
						duration = -1 #End of Game
					}
				}
			}
		}
	}
	01_soodak_missions_task_5 = { # Recruit Extra Settlers
		icon = "task_political"
		requires = { 01_soodak_missions_task_100 }
		highlight = {
			scope:province = {
				province_id = 9371
			}
		}
		allow = {
			treasury >= 50
		}
		on_completion = {
			add_treasury = -50
			custom_tooltip = 01_soodak_missions_task_5_tt
			trigger_event = me_soodak.5
		}
	}
	01_soodak_missions_task_6 = {
		icon = "task_political"
		allow = {}
		on_completion = {
			trigger_event = me_soodak.6
			show_as_tooltip = {

			}
		}
	}
	01_soodak_missions_task_7 = { #Reinforce the Amber Supply
		icon = "task_political"
		requires = { 01_soodak_missions_task_2 }
		highlight = {
			scope:province = {
				OR = {
					province_id = 9374
					province_id = 9375
				}
			}
		}
		allow = {
			owns_or_subject_owns = 9374
			owns_or_subject_owns = 9375
		}
		on_completion = {
			trigger_event = me_soodak.7
			custom_tooltip = 01_soodak_missions_7_reward_tt
		}
	}
	01_soodak_missions_task_8 = {
		icon = "task_political"
		requires = { 01_soodak_missions_task_2 }
		highlight = {
			scope:province = {
				OR = {
					province_id = 9378
					province_id = 9379
				}
			}
		}
		allow = {
			owns_or_subject_owns = 9378
			owns_or_subject_owns = 9379
			p:9378 = {
				OR = {
					has_building = basic_settlement_infratructure_building
					has_building = population_building
				}
			}
		}
		on_completion = {
			trigger_event = me_soodak.8
			custom_tooltip = 01_soodak_missions_8_reward_tt
		}
	}
	01_soodak_missions_task_9 = {
		icon = "task_political"
		requires = { 01_soodak_missions_task_2 }
		highlight = {
			scope:province = {
				OR = {
					province_id = 9372
					province_id = 9377
				}
			}
		}
		allow = {
			owns_or_subject_owns = 9372
			owns_or_subject_owns = 9377
		}
		on_completion = {
			trigger_event = me_soodak.9
			show_as_tooltip = {
				add_country_modifier = {
					name = soodak_clay_and_rope_modifier
					duration = 20000
				}
			}
		}
	}
	01_soodak_missions_task_10 = {
		icon = "task_political"
		requires = {
			01_soodak_missions_task_11
			01_soodak_missions_task_9
		}
		highlight = {
			scope:province = {
				OR = {
					is_in_area = ilmandu_superior_area
				}
			}
		}
		allow = {
			owns_or_subject_owns_area = ilmandu_superior_area
		}
		on_completion = {
			trigger_event = me_soodak.10
			show_as_tooltip = {
				add_political_influence = 25
				add_stability = 10
				current_ruler = {
					add_popularity = 10
				}
			}
		}
	}
	01_soodak_missions_task_11 = {
		icon = "task_political"
		requires = {
			01_soodak_missions_task_7
			01_soodak_missions_task_8
		}
		highlight = {
			scope:province = {
				OR = {
					province_id = 9382
					province_id = 9380
					province_id = 9383
				}
			}
		}
		allow = {
			owns_or_subject_owns = 9382
			owns_or_subject_owns = 9380
			owns_or_subject_owns = 9383
		}
		on_completion = {
			trigger_event = me_soodak.11
			custom_tooltip = 01_soodak_missions_11_reward_tt
		}
	}
	01_soodak_missions_task_12 = {
		icon = "task_political"
		allow = {}
		on_completion = {
			trigger_event = me_soodak.12
			show_as_tooltip = {

			}
		}
	}
	01_soodak_missions_task_13 = {
		icon = "task_political"
		requires = {
			01_soodak_missions_task_10
		}
		highlight = {
			scope:province = {
				OR = {
					is_in_area = ilmandu_inferior_area
				}
			}
		}
		allow = {
			owns_or_subject_owns_area = ilmandu_inferior_area
		}
		on_completion = {
			trigger_event = me_soodak.13
			show_as_tooltip = {

			}
		}
	}
	01_soodak_missions_task_14 = {
		icon = "task_political"
		requires = {
			01_soodak_missions_task_10
		}
		highlight = {
			scope:province = {
				OR = {
					is_in_area = velho_area
				}
			}
		}
		allow = {
			owns_or_subject_owns_area = velho_area
		}
		on_completion = {
			trigger_event = me_soodak.14
			show_as_tooltip = {

			}
		}
	}

	01_soodak_missions_task_100 = { #Assembling a Government
		icon = "task_athena"
		requires = {
			01_soodak_missions_task_1
			01_soodak_missions_task_2
			01_soodak_missions_task_3
		}
		allow = {
			stability >= 35
			political_influence >= 50
		}

		on_completion = {
			custom_tooltip = 01_soodak_missions_task_100_tt
			add_political_influence = -50
			trigger_event = { id = me_soodak.100 }
		}
	
	}

	01_soodak_missions_task_15 = {
		icon = "task_political"
		requires = {
			01_soodak_missions_task_100
		}
		allow = {
			has_deity_in_pantheon = deity:omen_kuje
		}
		prevented_by = { 01_soodak_missions_task_16 }
		highlight = {
			scope:province = {
				AND = {
					is_capital = yes
					owner = root
				}
			}
		}
		on_completion = {
			trigger_event = me_soodak.15
			show_as_tooltip = {
				add_country_modifier = {
					name = soodak_kuu_modifier
					duration = 18250
				}
			}
			custom_tooltip = 01_soodak_missions_task_15_tt
		}
	}

	01_soodak_missions_task_16 = {
		icon = "task_political"
		requires = {
			01_soodak_missions_task_100
		}
		highlight = {
			scope:province = {
				AND = {
					is_capital = yes
					owner = root
				}
			}
		}
		allow = {
			custom_tooltip = {
			text = 01_soodak_missions_task_16_tt
				capital_scope = {
					has_building = temple_building
				}
			}
			political_influence >= 75
		}
		prevented_by = { 01_soodak_missions_task_15 }
		on_completion = {
			trigger_event = me_soodak.16
			show_as_tooltip = {
				add_political_influence = -75
				add_country_modifier = {
					name = soodak_decedent_sacrifice_modifier
					duration = 3650
				}
			}
		}
	}

	01_soodak_missions_task_17 = { #Request Financial Aid
		icon = "task_athena"
		requires = {
			01_soodak_missions_task_100
			01_soodak_missions_task_10
		}
		allow = {
			stability >= 50
			political_influence >= 25
		}

		on_completion = {
			add_political_influence = -25
			custom_tooltip = 01_soodak_missions_task_17_tt
			trigger_event = { id = me_soodak.17 }
		}
	
	}

	01_soodak_missions_task_18 = { #The Ultimate Sacrifice 
		icon = "task_political"
		requires = {
			01_soodak_missions_task_16
			01_soodak_missions_task_10
		}
		allow = {
			custom_tooltip = {
				text = 01_soodak_missions_task_18_tt2
				religious_unity >= 0.6
			}
			custom_tooltip = {
				text = igk_has_high_priest_tt
				NAND = {
					office_is_empty = office_high_priest
					office_is_empty = office_high_priest_monarchy
					office_is_empty = office_augur
				}
			}
			trigger_if = {
				#limit = { is_tribal = yes }
				limit = { NOT = { office_is_empty = office_high_priest } }
				job_holder:office_high_priest = {
					has_religion = germanic_religion
					#zeal >= 8
				}
			}
			trigger_if = {
				#limit = { AND = { is_monarchy = yes office_is_empty = { office_high_priest_monarchy } } }
				limit = { NOT = { office_is_empty = office_high_priest_monarchy } }
				job_holder:office_high_priest_monarchy = {
					has_religion = germanic_religion
					#zeal >= 8
				}
			}
			trigger_if = {
				#limit = { is_republic = yes }
				limit = { NOT = { office_is_empty = office_augur } }
				job_holder:office_augur = {
					has_religion = germanic_religion
					#zeal >= 8
				}
			}
		}
		prevented_by = { 01_soodak_missions_task_15 }
		on_completion = {
			trigger_event = me_soodak.18
			show_as_tooltip = {
				remove_country_modifier = soodak_cursed_modifier
				add_country_modifier = {
					name = soodak_blessed_by_the_sun_god_modifier
					duration = -1
				}
				custom_tooltip = 01_soodak_missions_task_18_tt
			}
		}
	}

	01_soodak_missions_task_19 = { #Integrate With Mainland (Loyalist Path)
		icon = "task_political"
		requires = {
			01_soodak_missions_task_17
		}
		highlight = {
			scope:province = {
				province_id = 9371
			}
		}
		allow = {
			is_subject = yes
			has_low_economic_policy = income_commerce
			diplomatic_stance = trading_stance
			p:9371 = {
				num_of_commerce_building >= 2
			}
		}

		on_completion = {
			show_as_tooltip = {
				add_country_modifier = {
					name = soodak_integrated_economies_modifier
					duration = -1
				}
				add_1_free_province_investments = yes
			}
			trigger_event = { id = me_soodak.19 }
		}
	
	}

	01_soodak_missions_task_20 = { #Purchase Gotland (Loyalist Path)
		icon = "task_political"
		requires = {
			01_soodak_missions_task_19
		}
		highlight = {
			scope:province = {
				province_id = 6010
			}
		}
		allow = {
			is_subject = yes
			treasury >= 200
			p:6010 = {
				owner = scope:soodak_overlord
			}
			custom_tooltip = {
				text = 01_soodak_missions_task_20_tt2
				scope:soodak_overlord = {
					NOT = {
						capital_scope = {
							province_id = 6010
						}
					}
				}
			}
		}

		on_completion = {
			custom_tooltip = 01_soodak_missions_task_20_tt
			trigger_event = { id = me_soodak.20 }
		}
	
	}

	01_soodak_missions_task_22 = { #Recruit More Workers (Loyalist Path)
		icon = "task_political"
		requires = {
			01_soodak_missions_task_19
		}
		allow = {
			is_subject = yes
			any_owned_province = { #Have 3 Amber provs with a foundary
				count >= 3
				trade_goods = amber
				num_of_foundry_building >= 1
			}
			
		}

		on_completion = {
			custom_tooltip = 01_soodak_missions_task_22_tt
			trigger_event = { id = me_soodak.22 }
		}
	
	}


}