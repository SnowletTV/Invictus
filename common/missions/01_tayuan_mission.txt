tayuan_mission_1 = {
	header = "mission_image_macedon"
	icon = "macedon_2"

	repeatable = no
	chance = {
		factor = 5
	}

	potential = {
        tag = TAY
    }

	abort = {
		ai_mission_back_out_trigger = yes
	}

	on_start = {
		start_mission_ai_effect = yes
		trigger_event = me_tayuan.1
	}

	tayuan_task_start = {
		icon = "task_diplomatic"
		duration = 21

		 on_start = {
			hidden_effect = {
				create_character = {
					culture = root.culture
					religion = root.religion
					female = no
					age = 37
					no_traits = yes
					add_trait = explorer
					add_trait = vengeful
					add_trait = narrowminded
					add_martial = 4
					save_scope_as = tayuan_explorer
				}
			}
			trigger_event = {
				id = me_tayuan.2
			}
			add_treasury = -50
			add_manpower = -2
		 }

		 allow = { 
			treasury >= 50
			manpower >= 2
			war = no
		}

		 on_completion = {
			trigger_event = {
				id = me_tayuan.3
			}
		}
	}

	tayuan_task_1 = {
		icon = "task_diplomatic"
		duration = 14
		
		requires = { tayuan_task_start }
		
		allow = {
			trigger_if = {
				limit = {
					is_ai = no
				}
				invention = agressive_expansion_impact_inv_5
			}	
			trigger_else = { # for ai
				current_date >= 453.10.1
			}
			political_influence >=15
		}

		on_start = {
			add_political_influence = -15
		}

		on_completion = {
			trigger_event = {
				id = me_tayuan.5
			}
		}
	}

	tayuan_task_2 = {
		icon = "task_diplomatic"
		duration = 30

		requires = { tayuan_task_start } 

		allow = {
			treasury >= 50
			political_influence >= 25
		}

		on_start = {
			add_political_influence = -25
		}

		on_completion = {
			trigger_event = {
				id = me_tayuan.6
			}
		}
	}

	tayuan_task_3 = {
		icon = "task_diplomatic"
		requires = { tayuan_task_1 tayuan_task_2 } 
		duration = 20

		allow = { 
			political_influence >= 40
		}

		on_start = {
			add_political_influence = -40
		}

		on_completion = {
			trigger_event = {
				id = me_tayuan.7
			}
		}
	}

	tayuan_task_4 = {
		icon = "task_diplomatic"
		requires = { tayuan_task_3 }

		allow = {
			p:6703 = {
				num_of_used_building_slots >= 3
				OR = {
					has_building = forum_building
					has_building = aqueduct_building
					has_building = population_building
				}
			}
			hidden:p:6704 = {
					has_building = aqueduct_building
			}
			treasury >= 100
		}

		highlight = {
            scope:province = {
                OR = {
                    province_id = 6703
                    province_id = 6704
                }
            }
        }    

		on_completion = {
			trigger_event = {
				id = me_tayuan.8
			}
            p:6704 = {
                    add_province_modifier = {
                        name = tayuan_citiesoftheconquerors
                    }
                }
            p:6703 = {
                    add_province_modifier = {
                        name = tayuan_citiesoftheconquerors
                    }
					if = {
                        limit = {
                            NOT = { has_road_towards = p:790 }
                        }
                        add_road_towards = p:6704
                    }
                }
		}
	}

	tayuan_task_5 = {
		icon = "task_diplomatic"
		requires = { tayuan_task_3 }

		allow = {

		}

		on_completion = {
			custom_tooltip = "great_ionians_tt"
				trigger_event = {
					id = me_tayuan.9
				}
			
		}
	}

	tayuan_task_6 = {
		icon = "task_diplomatic"
		requires = { tayuan_task_3 }

		allow = {
            hidden:p:6773 = {
                has_building = fortress_building
                is_state_capital = yes
            }
        }

		highlight = {
            scope:province = {
                    province_id = 6773
            }
        }    

		on_completion = {
			trigger_event = {
				id = me_tayuan.10
			}
		
		}
	}

	tayuan_task_7 = {
		icon = "task_diplomatic"
		requires = { tayuan_task_3 }

		allow = {

		}

		on_completion = {
			trigger_event = {
				id = me_tayuan.11
			}
		}
		
	}

	tayuan_task_8 = {
		icon = "task_diplomatic"
		requires = {  }

		allow = {

		}

		on_completion = {
			trigger_event = {
				id = me_tayuan.12
			}
		}
		
	}

	tayuan_task_ = {
		icon = "task_diplomatic"
		requires = { }

		allow = {

		}

		on_completion = {
			trigger_event = {
				id = me_tayuan.
			}
		}
		
	}
}