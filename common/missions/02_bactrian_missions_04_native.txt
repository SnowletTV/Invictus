bactrian_missions_04_native = {
    header = "mission_image_general"
    icon = "general_1"

    repeatable = no
    chance = 1000

    potential = {
        NOT = { has_variable = mission_cooldown_var }
        primary_culture = bactrian
    }

    abort = {}
    on_start = {
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = mission_cooldown_var
            days = 7300
        }
    }
    on_completion = {}
    bactrian_missions_04_native_missions_task_1 = {
        icon = "task_political"
        allow = {}
        on_completion = {
            trigger_event = me_native_bactria.1
            show_as_tooltip = {

            }
        }
    }
    bactrian_missions_04_native_missions_task_2 = {

        requires = { bactrian_missions_04_native_missions_task_1 }
        icon = "task_economical"

        highlight = {
            scope:province = {
                province_id = 6678
            }
        }

        allow = {
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:6678 = {
                    has_city_status = yes
                    has_building = forum_building
                    has_building = academy_building
                    custom_tooltip = {
                    text = bactria_mission_01_bactria_task_2_buildings_trigger_tt
                    num_of_used_building_slots >= bactria_mission_01_task2_bactria_buildings_total
                    has_construction = no
                    }
                }
            }
            trigger_else = { # AI fallback
                OR = {
                    p:6678 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
            }
        }

        on_completion = {
            trigger_event = me_native_bactria.2
            show_as_tooltip = {
                add_political_influence = 25
                p:6678 = {
                    if = {
                        limit = {
                            NOT = { has_province_modifier = bactrian_royal_city_modifier }
                        }
                        add_permanent_province_modifier = {
                            name = bactrian_royal_city_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_3 = {
        icon = "task_political"
        requires = { bactrian_missions_04_native_missions_task_2 }
        highlight = {
            scope:province = {
                OR = {
                    is_in_area = bactria_area
                    is_in_area = candara_area
                    is_in_area = transoxus_area
                    is_in_area = oxiana_area
                }
            }
        }
        allow = {
            owns_area = bactria_area
            owns_area = candara_area
            owns_area = transoxus_area
            owns_area = oxiana_area
            custom_tooltip = {
                text = bactria_mission_01_bactria_task_3_tt
                bactria_mission_01_bactria_task_3_current >= bactria_mission_01_bactria_task_3_total
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.3
            show_as_tooltip = {
                p:6648.state = {
                    add_state_modifier = {
                        name = grecobactrian_governance_bactria_modifier
                        duration = -1
                    }
                }
                p:6637.state = {
                    add_state_modifier = {
                        name = grecobactrian_governance_bactria_modifier
                        duration = -1
                    }
                }
                p:6694.state = {
                    add_state_modifier = {
                        name = grecobactrian_governance_bactria_modifier
                        duration = -1
                    }
                }
                p:7230.state = {
                    add_state_modifier = {
                        name = grecobactrian_governance_bactria_modifier
                        duration = -1
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_4 = {
        icon = "task_political"
        requires = { bactrian_missions_04_native_missions_task_3 }
        allow = {}
        on_completion = {
            trigger_event = me_native_bactria.4
            show_as_tooltip = {

            }
        }
    }
    bactrian_missions_04_native_missions_task_5 = {
        icon = "task_conquest"
        highlight = {
            scope:province = {
                province_id = 6688
            }
        }
        requires = { bactrian_missions_04_native_missions_task_4 }
        allow = {
           trigger_if = {
                limit = {
                    NOT = { owns = 6688 }
                }
                owns = 6688
            }
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:6688 = {
                    has_city_status = yes
                    has_building = library_building
                    has_building = court_building
                    custom_tooltip = {
                        text = seleukid_mission_05_assyria_buildings_tt
                        num_of_used_building_slots >= bactria_mission_01_bactria_task_5_buildings_total
                    }
                }
            }
            trigger_else = {
                OR = {
                    can_pay_price = price_found_city
                    p:6688 = { has_city_status = yes }
                }
            }
            hidden:p:6688 = {
                trigger_if = {
                    limit = {
                        has_construction = yes
                    }
                    custom_tooltip = {
                        text = ongoing_construction_trigger_tt
                        has_construction = no
                    }
                }
            }
        }
        on_completion = {
            ai_build_city_pay_price_effect = { CITY = p:6688 } # AI fallback.
            trigger_event = me_native_bactria.5
            show_as_tooltip = {
                p:6688 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = greco_bactrian_city_modifier
                            }
                        }
                        add_province_modifier = {
                            name = greco_bactrian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = {
                                has_variable = greco_bactrian_city_variable
                            }
                        }
                        set_variable = greco_bactrian_city_variable
                    }
                }
            }
        }

    }
    bactrian_missions_04_native_missions_task_6 = { #has to be changed / todo
        icon = "task_diplomatic"
        requires = { bactrian_missions_04_native_missions_task_5 }
        highlight = {
            scope:province = {
                OR = {
                    province_id = 6627
                    province_id = 6650
                    province_id = 6651
                    province_id = 6630
                    province_id = 6636
                    province_id = 6759
                }
            }
        }
         allow = {
            OR = {
                AND = {
                    owns = 6627
                    hidden:p:6627 = {
                        has_building = fortress_building
                    }
                }
                AND = {
                    owns = 6650
                    hidden:p:6650 = {
                        has_building = fortress_building
                    }
                }
                AND = {
                    owns = 6651
                    hidden:p:6651 = {
                        has_building = fortress_building
                    }
                }
                AND = {
                    owns = 6630
                    hidden:p:6630 = {
                        has_building = fortress_building
                    }
                }
                AND = {
                    owns = 6636
                    hidden:p:6636 = {
                        has_building = fortress_building
                    }
                }
                AND = {
                    owns = 6759
                    hidden:p:6759 = {
                        has_building = fortress_building
                    }
                }
            }  
        }
        on_completion = {
            trigger_event = me_native_bactria.6
            show_as_tooltip = {
                p:6648.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = fortified_bactria_modifier }
                        }
                        add_state_modifier = {
                            name = fortified_bactria_modifier
                            duration = -1
                        }
                    }
                }
                p:6637.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = fortified_bactria_modifier }
                        }
                        add_state_modifier = {
                            name = fortified_bactria_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_7 = { #redo / todo
        icon = "task_economical"
        requires = { bactrian_missions_04_native_missions_task_6 }
        allow = {
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:6686 = {
                    has_city_status = yes
                    custom_tooltip = {
                    text = seleukid_mission_02_syria_buildings_tt
                    num_of_used_building_slots >= bactria_mission_01_bactria_task_7_buildings_total
                    has_construction = no
                    }
                }
            }
            trigger_else = { # AI fallback
                OR = {
                    p:6686 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.7
            show_as_tooltip = {
                p:6686 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = greco_bactrian_city_modifier
                            }
                        }
                        add_province_modifier = {
                            name = greco_bactrian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                    limit = {
                        NOT = { has_variable = greco_bactrian_city_variable }
                    }
                    set_variable = greco_bactrian_city_variable
                    change_province_name = Demetrias_Baktriane
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_8 = {
        icon = "task_political"
        requires = { bactrian_missions_04_native_missions_task_7 }
        highlight = {
            scope:province = {
                has_city_status = no
                has_food_trade_good_trigger = yes
            OR = {
                    is_in_area = oxiana_area
            is_in_area = transoxus_area
                }
            }
        }
        allow = {
            trigger_if = {
                limit = { is_ai = no }
            owns_area = oxiana_area
                custom_tooltip = {
                    text = "bactria_mission_01_bactria_task_8_al.tt"
                    area:oxiana_area = {
                        any_area_province = {
                            count = all
                            filter = {
                                has_city_status = no
                                has_food_trade_good_trigger = yes
                            }
                            has_building = basic_settlement_infratructure_building
                        }
                    }
                }
                custom_tooltip = {
                    text = "bactria_mission_01_bactria_task_8_al_2.tt"
                    area:transoxus_area = {
                        any_area_province = {
                            count = all
                            filter = {
                                has_city_status = no
                                has_food_trade_good_trigger = yes
                            }
                            has_building = basic_settlement_infratructure_building
                        }
                    }
                }
            }
            trigger_else = {
                is_ai = yes
                owns_area = oxiana_area
                owns_area = transoxus_area
                treasury >= 300
            }
        }
        on_completion = {
            if = { # AI fallback.
                limit = { is_ai = yes }
                area:oxiana_area = {
                    every_area_province = {
                        limit = {
                            has_city_status = no
                            has_food_trade_good_trigger = yes
                            has_minable_trade_good_trigger = yes
                        }
                        if = {
                            limit = {
                                has_food_trade_good_trigger = yes
                                NOT = { has_building = basic_settlement_infratructure_building }
                            }
                            if = {
                                limit = { free_building_slots < 0 }
                                destroy_building_effect = yes
                            }
                            add_building_level = basic_settlement_infratructure_building
                        }
                    }
                }
                area:transoxus_area = {
                    every_area_province = {
                        limit = {
                            has_city_status = no
                            has_food_trade_good_trigger = yes
                            has_minable_trade_good_trigger = yes
                        }
                        if = {
                            limit = {
                                has_food_trade_good_trigger = yes
                                NOT = { has_building = basic_settlement_infratructure_building }
                            }
                            if = {
                                limit = { free_building_slots < 0 }
                                destroy_building_effect = yes
                            }
                            add_building_level = basic_settlement_infratructure_building
                        }
                    }
                }
            }
            trigger_event = me_native_bactria.8
            show_as_tooltip = {
                add_treasury = -150
                add_2_free_province_investments = yes
                p:6694.state = {
                    add_state_modifier = {
                        name = "breadbasket_of_bactria_modifier"
                        duration = -1
                    }
                }
                p:7235.state = {
                    add_state_modifier = {
                        name = "breadbasket_of_bactria_modifier"
                        duration = -1
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_9 = {
        icon = "task_economical"
        requires = { bactrian_missions_04_native_missions_task_1 }
        highlight = {
            scope:province = {
                province_id = 6682
            }
        }
        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 6682 }
                }
                owns = 6682
            }
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:6682 = {
                    has_city_status = yes
                    has_building = commerce_building
            has_building = town_hall_building
                }
            }
            trigger_else = {
                OR = {
                    can_pay_price = price_found_city
                    p:6682 = { has_city_status = yes }
                }
            }
            hidden:p:6682 = {
                trigger_if = {
                    limit = {
                        has_construction = yes
                    }
                    custom_tooltip = {
                        text = ongoing_construction_trigger_tt
                        has_construction = no
                    }
                }
            }
        }
        on_completion = {
            ai_build_city_pay_price_effect = { CITY = p:6682 } # AI fallback.
            trigger_event = me_native_bactria.9
            show_as_tooltip = {
                p:6682 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = flourishing_commerce_modifier
                            }
                        }
                        add_province_modifier = {
                            name = flourishing_commerce_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = {
                                has_variable = greco_bactrian_city_variable
                            }
                        }
                        set_variable = greco_bactrian_city_variable
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_10 = {
        icon = "task_political"
        requires = { bactrian_missions_04_native_missions_task_9 }
        highlight = {
            scope:province = {
                OR = {
                    province_id = 6719
                    province_id = 6700
                    province_id = 6701
                }
            }
        }
        allow = {
            OR = {
                hidden:p:6719 = {
                    AND = {
                        owned_or_subject_owned = root
                        has_building = fortress_building
                    }
                }
                hidden:p:6700 = {
                    AND = {
                        owned_or_subject_owned = root
                        has_building = fortress_building
                    }
                }
                hidden:p:6701 = {
                    AND = {
                        owned_or_subject_owned = root
                        has_building = fortress_building
                    }
                }
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.10
            show_as_tooltip = {
                p:6719.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = fortified_bactria_modifier }
                        }
                        add_state_modifier = {
                            name = fortified_bactria_modifier
                            duration = -1
                        }
                    }
                }
                p:6700.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = fortified_bactria_modifier }
                        }
                        add_state_modifier = {
                            name = fortified_bactria_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_11 = {
        icon = "task_economical"
        requires = { bactrian_missions_04_native_missions_task_10 }
        highlight = {
         scope:province = {
                OR = {
                    is_in_area = sogdiana_area
                    is_in_area = cyropolis_area
                    is_in_area = ferghana_area
                }
            }
        }
        allow = {
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:6715 = { has_city_status = yes }
                hidden:p:6682 = { has_city_status = yes }
                hidden:p:6703 = { has_city_status = yes }
                hidden:p:6704 = { has_city_status = yes }
                custom_tooltip = {
                    text = bactrian_mission_01_bactria_task_12.tt.a
                    area:sogdiana_area = {
                        any_area_province = {
                            count = all
                            filter = {
                                owner = ROOT
                                has_city_status = yes
                            }
                            has_building = commerce_building
                            has_building = town_hall_building
                        }
                    }
                }
                custom_tooltip = {
                    text = bactrian_mission_01_bactria_task_12.tt.b
                    area:ferghana_area = {
                        any_area_province = {
                            count = all
                            filter = {
                                owner = ROOT
                                has_city_status = yes
                            }
                            has_building = commerce_building
                            has_building = town_hall_building
                        }
                    }
                }
                custom_tooltip = {
                    text = bactrian_mission_01_bactria_task_12.tt.c
                    area:cyropolis_area = {
                        any_area_province = {
                            count = all
                            filter = {
                                owner = ROOT
                                has_city_status = yes
                            }
                            has_building = commerce_building
                            has_building = town_hall_building
                        }
                    }
                }
            }
            trigger_else = {
                p:6715 = {
                    OR = {
                        has_city_status = yes
                        ROOT = { can_pay_price = price_found_city }
                    }
                }
                p:6703 = {
                    OR = {
                        has_city_status = yes
                        ROOT = { can_pay_price = price_found_city }
                    }
                }
                p:6704 = {
                    OR = {
                        has_city_status = yes
                        ROOT = { can_pay_price = price_found_city }
                    }
                }
                p:6682 = {
                    OR = {
                        has_city_status = yes
                        ROOT = { can_pay_price = price_found_city }
                    }
                }
            }
            trigger_if = {
                limit = {
                    NOT = { owns = 6682 }
                }
                owns = 6682
            }
            hidden:p:6682.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            trigger_if = {
                limit = {
                    NOT = { owns = 6703 }
                }
                owns = 6703
            }
            hidden:p:6703.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            trigger_if = {
                limit = {
                    NOT = { owns = 6704 }
                }
                owns = 6704
            }
            hidden:p:6704.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.11
            show_as_tooltip = {
                add_political_influence = 25
                p:6682.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = sogdian_administration_modifier }
                        }
                        add_state_modifier = {
                            name = sogdian_administration_modifier
                            duration = -1
                        }
                    }
                }
                p:6703.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = sogdian_administration_modifier }
                        }
                        add_state_modifier = {
                            name = sogdian_administration_modifier
                            duration = -1
                        }
                    }
                }
                p:6704.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = sogdian_administration_modifier }
                        }
                        add_state_modifier = {
                            name = sogdian_administration_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_12 = {
        icon = "task_diplomatic"
        requires = { bactrian_missions_04_native_missions_task_11 }
        highlight = {
            scope:province = {
                province_id = 6703
            }
        }
        allow = {
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:6703 = {
                    has_city_status = yes
                    custom_tooltip = {
                    text = bactria_mission_01_bactria_task_12_buildings_trigger_tt
                    num_of_used_building_slots >= bactria_mission_01_bactria_task_12_buildings_total
                    has_construction = no
                    }
                }
            }
            trigger_else = { # AI fallback
                OR = {
                    p:6703 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.12
            show_as_tooltip = {
                p:6703 = {
                    if = {
                        limit = {
                            NOT = { has_province_modifier = greco_bactrian_city_modifier }
                        }
                        add_province_modifier = {
                            name = greco_bactrian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = { has_variable = greco_bactrian_city_variable }
                        }
                        set_variable = greco_bactrian_city_variable
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_13 = {
        icon = "task_political"
        requires = { bactrian_missions_04_native_missions_task_12 }
        allow = {}
        on_completion = {
            trigger_event = me_native_bactria.13
            show_as_tooltip = {

            }
        }
    }
    bactrian_missions_04_native_missions_task_14 = {
        icon = "task_political"
        requires = { bactrian_missions_04_native_missions_task_13 }
        allow = {}
        on_completion = {
            trigger_event = me_native_bactria.14
            show_as_tooltip = {

            }
        }
    }
    bactrian_missions_04_native_missions_task_15 = {
        icon = "task_expansion"
        duration = 120
        requires = { bactrian_missions_04_native_missions_task_14 }
        highlight = {
            scope:province = {
                province_id = 6731
            }
        }
        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 6731 }
                }
                owns = 6731
                treasury >= 200
            }
        }
        on_completion = {
            ai_build_city_pay_price_effect = { CITY = p:6731 } # AI fallback
            trigger_event = me_native_bactria.15
            show_as_tooltip = {
                p:6731 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = greco_bactrian_city_modifier
                            }
                        }
                        add_province_modifier = {
                            name = greco_bactrian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = { has_variable = greco_bactrian_city_variable }
                        }
                        set_variable = greco_bactrian_city_variable
                        change_province_name = Antiocheia_Skythias
                        capital_formable_medium_effect = yes
                        establish_city_effect = yes
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_16 = {
        icon = "task_expansion"
        requires = { bactrian_missions_04_native_missions_task_1 }
        highlight = {
            scope:province = {
                province_id = 6668
            }
        }
        allow = {
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:6668 = {
                    has_city_status = yes
                    custom_tooltip = {
                    text = bactria_mission_01_bactria_task_12_buildings_trigger_tt
                    num_of_used_building_slots >= bactria_mission_01_bactria_task_12_buildings_total
                    has_construction = no
                    }
                }
            }
            trigger_else = { # AI fallback
                OR = {
                    p:6668 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.16
            show_as_tooltip = {
                p:6668 = {
                    if = {
                        limit = {
                            NOT = { has_province_modifier = greco_bactrian_city_modifier }
                        }
                        add_province_modifier = {
                            name = greco_bactrian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = { has_variable = greco_bactrian_city_variable }
                        }
                        set_variable = greco_bactrian_city_variable
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_17 = {
        icon = "task_economical"
        requires = { bactrian_missions_04_native_missions_task_16 }
        highlight = {
            scope:province = {
                owner = root
                is_in_area = margiana_area
            }
        }
        bypass = {
            is_ai = yes
        }
        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 6668 }
                }
                owns = 6668
            }
            hidden:p:6668.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
        }
        on_bypass = {
            p:6668.state = {
                if = {
                    limit = {
                        NOT = { has_state_modifier = margianan_administration_modifier }
                    }
                    add_state_modifier = {
                        name = margianan_administration_modifier
                        duration = -1
                    }
                }
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.17
            show_as_tooltip = {
                p:6668.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = margianan_administration_modifier }
                        }
                        add_state_modifier = {
                            name = margianan_administration_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_18 = {
        icon = "task_expansion"
        requires = { bactrian_missions_04_native_missions_task_17 }
        highlight = {
            scope:province = {
                province_id = 6665
            }
        }
        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 6665 }
                }
                owns = 6665
                treasury >= 200
            }
        }
        on_completion = {
            ai_build_city_pay_price_effect = { CITY = p:6665 } # AI fallback
            trigger_event = me_native_bactria.18
            show_as_tooltip = {
                add_treasury = -200
                p:6665 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = greco_bactrian_city_modifier
                            }
                        }
                        add_province_modifier = {
                            name = greco_bactrian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = { has_variable = greco_bactrian_city_variable }
                        }
                        set_variable = greco_bactrian_city_variable
                        capital_formable_large_effect = yes
                        establish_city_effect = yes
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_19 = {
        icon = "task_expansion"
        duration = 180
        requires = { bactrian_missions_04_native_missions_task_18 }
        highlight = {
            scope:province = {
                OR = {
                    is_in_area = kharesmia_superior
                    is_in_area = kharesmia_area
                    is_in_area = oxiana_ultima_area
                }
            }
        }
        bypass = {
            owns_area = kharesmia_superior
            owns_area = kharesmia_area
            owns_area = oxiana_ultima_area
        }
        allow = {
            treasury >= 100
        }
        on_start = {
            trigger_event = me_bactria_01_bactria.20
            show_as_tooltip = {
                add_treasury = -100
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.19
            show_as_tooltip = {
                if = {
                    limit = {
                        NOT = { owns_area = kharesmia_superior }
                    }
                    p:6708 = {
                        custom_tooltip = seleukid_mission_02_syria_task_1_effect_tt
                        hidden_effect = {
                            area = {
                                every_area_province = {
                                    limit = {
                                        NOT = { owner = root }
                                    }
                                    add_claim = root
                                }
                            }
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { owns_area = kharesmia_area }
                    }
                    p:6803 = {
                        custom_tooltip = seleukid_mission_02_syria_task_1_effect_tt
                        hidden_effect = {
                            area = {
                                every_area_province = {
                                    limit = {
                                        NOT = { owner = root }
                                    }
                                    add_claim = root
                                }
                            }
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { owns_area = oxiana_ultima_area }
                    }
                    p:9241 = {
                        custom_tooltip = seleukid_mission_02_syria_task_1_effect_tt
                        hidden_effect = {
                            area = {
                                every_area_province = {
                                    limit = {
                                        NOT = { owner = root }
                                    }
                                    add_claim = root
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_20 = {
        icon = "task_expansion"
        requires = { bactrian_missions_04_native_missions_task_19 }
        highlight = {
            scope:province = {
                OR = {
                    is_in_area = kharesmia_superior
                    is_in_area = kharesmia_area
                    is_in_area = oxiana_ultima_area
                }
            }
        }
        allow = {
            owns_area = kharesmia_superior
            owns_area = kharesmia_area
            owns_area = oxiana_ultima_area
            custom_tooltip = {
                text = bactria_mission_01_bactria_task_20_tt
                bactria_mission_01_bactria_task_20_current >= bactria_mission_01_bactria_task_20_total
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.20
            show_as_tooltip = {
                p:6708.state = {
                    add_state_modifier = {
                        name = chorasmian_administration_modifier
                        duration = -1
                    }
                }
                p:6803.state = {
                    add_state_modifier = {
                        name = chorasmian_administration_modifier
                        duration = -1
                    }
                }
                p:9241.state = {
                    add_state_modifier = {
                        name = chorasmian_administration_modifier
                        duration = -1
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_21 = {
        icon = "task_expansion"
        requires = { bactrian_missions_04_native_missions_task_20 }
        highlight = {
            scope:province = {
                province_id = 6803
            }
        }
        allow = {
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:6803 = {
                    has_city_status = yes
                    custom_tooltip = {
                        text = seleukid_mission_02_syria_buildings_tt
                        num_of_used_building_slots >= bactria_mission_01_bactria_task_7_buildings_total
                        has_construction = no
                    }
                }
            }
            trigger_else = { # AI fallback
                OR = {
                    p:6803 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.20
            show_as_tooltip = {
                p:6803 = {
                    if = {
                        limit = {
                            NOT = { has_province_modifier = greco_bactrian_city_modifier }
                        }
                        add_province_modifier = {
                            name = greco_bactrian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = { has_variable = greco_bactrian_city_variable }
                        }
                        set_variable = greco_bactrian_city_variable
                    }
                }
            }
        }
    }
    bactrian_missions_04_native_missions_task_22 = {
        icon = "task_expansion"
        final = yes
        requires = { bactrian_missions_04_native_missions_task_21 }
        highlight = {
            scope:province = {
                OR = {
                    is_in_area = kharesmia_superior
                    is_in_area = kharesmia_area
            is_in_area = oxiana_ultima_area
                }
            }
        }
        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 6803 }
                }
                owns = 6803
            }
            hidden:p:6803.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            trigger_if = {
                limit = {
                    NOT = { owns = 7240 }
                }
                owns = 7240
            }
            hidden:p:7240.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            trigger_if = {
                limit = {
                    NOT = { owns = 9241 }
                }
                owns = 9241
            }
            hidden:p:9241.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
        }
        bypass = { is_ai = yes }
        on_bypass = {
            p:6803.state = {
                if = {
                    limit = {
                        NOT = { has_state_modifier = chorasmian_oasis_modifier }
                    }
                    add_state_modifier = {
                        name = chorasmian_oasis_modifier
                        duration = -1
                    }
                }
            }
            p:7240.state = {
                if = {
                    limit = {
                        NOT = { has_state_modifier = chorasmian_oasis_modifier }
                    }
                    add_state_modifier = {
                        name = chorasmian_oasis_modifier
                        duration = -1
                    }
                }
            }
            p:9241.state = {
                if = {
                    limit = {
                        NOT = { has_state_modifier = chorasmian_oasis_modifier }
                    }
                    add_state_modifier = {
                        name = chorasmian_oasis_modifier
                        duration = -1
                    }
                }
            }
        }
        on_completion = {
            trigger_event = me_native_bactria.20
            show_as_tooltip = {
                add_2_free_province_investments = yes
                p:6803.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = chorasmian_oasis_modifier }
                        }
                        add_state_modifier = {
                            name = chorasmian_oasis_modifier
                            duration = -1
                        }
                    }
                }
                p:7240.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = chorasmian_oasis_modifier }
                        }
                        add_state_modifier = {
                            name = chorasmian_oasis_modifier
                            duration = -1
                        }
                    }
                }
                p:9241.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = chorasmian_oasis_modifier }
                        }
                        add_state_modifier = {
                            name = chorasmian_oasis_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }
}