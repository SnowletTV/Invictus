indian_mission_01_gandara = {
    header = "mission_image_seleukid"
    icon = "seleukid_4"

    repeatable = no

    chance = {
        factor = 5
    }

    potential = {
        NOT = { has_variable = indian_mission_01_gandara }
	has_variable = formed_indo_greek_kingdom
	OR = {
		tag = BAC
		tag = IDC
		tag = SEL
		tag = PAR
		tag = ARS
	}
	country_culture_group = hellenic
        is_monarchy = yes
        has_civil_war = no
    }

    abort = {
        OR = {
            is_monarchy = no
            NOT = { country_culture_group = hellenic }
	    ai_mission_back_out_trigger = yes
        }
    }

    on_start = {
        start_mission_ai_effect = yes
		save_scope_as = me_india_scope
    }

    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = indian_mission_01_gandara
            days = 7300
        }
    }

    on_completion = {
        complete_mission_effect = yes
    }

    indian_mission_01_gandara_task_1 = { # Task 1  - The Rise of House Euthydemid

        icon = "task_diplomatic"

	duration = 180

        allow = {
	    	treasury >= 200
		    political_influence >= 25
        }

	on_start = {
        trigger_event = me_india_01_gandara.1
        custom_tooltip = india_mission_01_gandara_task_1_effect_tt
	    add_treasury = -200
	    add_political_influence = -25
	}

        on_completion = {
            custom_tooltip = india_mission_01_gandara_task_1_effect2_tt
        }
    }

    indian_mission_01_gandara_task_2 = { # Task 2 - An Indo-Greek Capital
    	requires = { indian_mission_01_gandara_task_1 }

        icon = "task_economical"

        highlight = {
            scope:province = {
                province_id = 4340
            }
        }

        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 4340 }
                }
                owns = 4340
            }
            trigger_if = {
                limit = {
                    is_ai = yes
                    p:4340 = { has_city_status = no }
                }
                can_pay_price = price_found_city
            }
        }

        on_completion = {
            if = { # AI fallback
                limit = {
                    is_ai = yes
                }
                ai_build_city_pay_price_effect = { CITY = p:4340 }
            }
            trigger_event = me_india_01_gandara.3
	    custom_tooltip = india_mission_01_gandara_task_2_tooltip
            show_as_tooltip = {
                p:4340 = {
                    if = {
                        limit = {
                            NOT = { has_province_modifier = indo_greek_capital_modifier }
                        }
                        add_province_modifier = {
                            name = indo_greek_capital_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = { is_capital = no }
                        custom_tooltip = india_mission_01_gandara_task_2_effect_tt
                    }
	            if = {
	        	limit = { has_variable = menander_is_leader_variable }
		    	change_province_name = "Euthymedeia"
	  	        capital_formable_huge_effect = yes
		        establish_city_effect = yes
	            }
	            if = {
	        	limit = {
	        		NOT = { has_variable = menander_is_leader_variable }
	        	}
	  	        capital_formable_huge_effect = yes
		        establish_city_effect = yes
	            }
                }
            }
        }
    }

    indian_mission_01_gandara_task_3 = { # Conquer Indus Valley
    	requires = { indian_mission_01_gandara_task_2 }

        icon = "task_economical"

	duration = 180

        highlight = {
            scope:province = {
		OR = {
                	is_in_area = north_sindhu_area
			is_in_area = south_sindhu_area
			is_in_area = sauvira_area
			is_in_area = patalene_area
			is_in_area = trigarta_area
			is_in_area = sivi_area
		}
            }
        }

        bypass = {
            owns_area = north_sindhu_area
            owns_area = south_sindhu_area
            owns_area = sauvira_area
            owns_area = patalene_area
            owns_area = trigata_area
            owns_area = sivi_area
        }

        allow = {
            treasury >= 200
            political_influence >= 25
        }

        on_start = {
            show_as_tooltip = {
           	add_treasury = -200
	    	add_political_influence = -25
	    }
            trigger_event = me_india_01_gandara.4
        }

        on_completion = {
            trigger_event = me_india_01_gandara.5
            show_as_tooltip = {
                if = {
                    limit = {
                        NOT = { owns_area = sivi_area }
                    }
                    p:4350 = {
                        custom_tooltip = seleukid_mission_02_syria_task_1_effect_tt
                        hidden_effect = {
                            area = {
                                every_area_province = {
                                    limit = {
                                        NOT = { owner = root }
                                    }
                                    add_claim = root
                                }
                            }
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { owns_area = trigarta_area }
                    }
                    p:4414 = {
                        custom_tooltip = seleukid_mission_02_syria_task_1_effect_tt
                        hidden_effect = {
                            area = {
                                every_area_province = {
                                    limit = {
                                        NOT = { owner = root }
                                    }
                                    add_claim = root
                                }
                            }
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { owns_area = north_sindhu_area }
                    }
                    p:4371 = {
                        custom_tooltip = seleukid_mission_02_syria_task_1_effect_tt
                        hidden_effect = {
                            area = {
                                every_area_province = {
                                    limit = {
                                        NOT = { owner = root }
                                    }
                                    add_claim = root
                                }
                            }
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { owns_area = patalene_area }
                    }
                    p:6815 = {
                        custom_tooltip = seleukid_mission_02_syria_task_1_effect_tt
                        hidden_effect = {
                            area = {
                                every_area_province = {
                                    limit = {
                                        NOT = { owner = root }
                                    }
                                    add_claim = root
                                }
                            }
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { owns_area = sauvira_area }
                    }
                    p:4359 = {
                        custom_tooltip = seleukid_mission_02_syria_task_1_effect_tt
                        hidden_effect = {
                            area = {
                                every_area_province = {
                                    limit = {
                                        NOT = { owner = root }
                                    }
                                    add_claim = root
                                }
                            }
                        }
                    }
                }
                if = {
                    limit = {
                        NOT = { owns_area = south_sindhu_area }
                    }
                    p:4376 = {
                        custom_tooltip = seleukid_mission_02_syria_task_1_effect_tt
                        hidden_effect = {
                            area = {
                                every_area_province = {
                                    limit = {
                                        NOT = { owner = root }
                                    }
                                    add_claim = root
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_4 = { # Pentapotamian Heartland
    	requires = { indian_mission_01_gandara_task_3 }

        icon = "task_diplomatic"

        highlight = {
            scope:province = {
		OR = {
                	is_in_area = panchanada_area
			is_in_area = madra_area
			is_in_area = trigarta_area
		}
            }
        }

        allow = {
            owns_or_subject_owns_area = panchanada_area
            owns_or_subject_owns_area = madra_area
            owns_or_subject_owns_area = trigarta_area
            custom_tooltip = {
                text = india_mission_01_gandara_task_4_tt
                india_mission_01_gandara_task_4_current >= india_mission_01_gandara_task_4_total
            }
        }

        on_completion = {
            trigger_event = me_india_01_gandara.6
            show_as_tooltip = {
                p:4340.state = {
                    add_state_modifier = {
                        name = grecoindian_governance_modifier
                        duration = -1
                    }
                }
                p:4380.state = {
                    add_state_modifier = {
                        name = grecoindian_governance_modifier
                        duration = -1
                    }
                }
                p:4414.state = {
                    add_state_modifier = {
                        name = grecoindian_governance_modifier
                        duration = -1
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_5 = { # Attracting Settlers to our Capital
    	requires = { indian_mission_01_gandara_task_4 }

        icon = "task_conquest"

        highlight = {
            scope:province = {
                province_id = 4340
            }
        }

        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 4340 }
                }
                owns = 4340
            }
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:4340 = {
                    has_city_status = yes
                }
            }
            trigger_else = {
                OR = {
                    can_pay_price = price_found_city
                    p:4340 = { has_city_status = yes }
                }
            }
            hidden:p:4340 = {
                custom_tooltip = {
                    text = india_mission_01_gandara_task_5_population_trigger_tt
                    india_mission_01_gandara_task_5_population_current >= india_mission_01_gandara_task_5_population_total
                }
                custom_tooltip = {
                    text = india_mission_01_gandara_task_5_buildings_trigger_tt
                    india_mission_01_gandara_task_5_buildings_current >= india_mission_01_gandara_task_5_buildings_total
                    has_construction = no
                }
            }
        }

	bypass = {
            NOT = {
                has_variable = greco_indian_capitalcity_variable
            }
	}

        on_completion = {
            ai_build_city_pay_price_effect = { CITY = p:4340 } # AI fallback.
            trigger_event = me_india_01_gandara.7
            show_as_tooltip = {
                p:4340 = {
                    custom_tooltip = india_mission_01_gandara_task_5_effect_tt
                    hidden_effect = {
                        while = {
                            count = 10
                            define_pop = {
                                type = citizen
                                culture = root.culture
                                religion = root.religion
                            }
                        }
                    }
                }
                p:4340 = {
                    custom_tooltip = india_mission_01_gandara_task_5_effect2_tt
                    hidden_effect = {
                        while = {
                            count = 5
                            define_pop = {
                                type = nobles
                                culture = root.culture
                                religion = root.religion
                            }
                        }
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_6 = { # The Royal Throne
    	requires = { indian_mission_01_gandara_task_5 }

        icon = "task_diplomatic"

        highlight = {
		scope:province = {
			province_id = 4340
		}
	}

        allow = {
        	trigger_if = {
                limit = {
                    NOT = { owns = 4340 }
                }
                owns = 4340
            }
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:4340 = { has_province_rank = city_metropolis }
            }
            trigger_else = {
                OR = {
                    can_pay_price = price_found_metropolis
                    p:4340 = { has_province_rank = city_metropolis }
                }
            }
        }

	bypass = {
            NOT = {
                has_variable = greco_indian_capitalcity_variable
            }
	}

        on_completion = {
            trigger_event = me_india_01_gandara.8
            show_as_tooltip = {
            	add_3_free_province_investments = yes
                p:4340 = {
                    if = {
                        limit = {
                            NOT = { has_province_modifier = indo_greek_throne_modifier }
                        }
                        add_province_modifier = {
                            name = indo_greek_throne_modifier
                            duration = -1
                        }
                    }
		}
                current_ruler = {
                    if = {
                        limit = {
                            is_minor_character = no
                        }
                        family = {
                            add_prestige = 200
                        }
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_7 = { # Approaching the Gandhari
    	requires = { indian_mission_01_gandara_task_6 }

        icon = "task_economical"

        allow = {
            treasury >= 100
	    political_influence >= 50
        }

        on_completion = {
            trigger_event = me_india_01_gandara.9
            show_as_tooltip = {
		add_treasury = -100
		add_political_influence = -50
                if = {
                    limit = {
                        any_country_culture = {
                            is_culture = gandhari
                        }
                    }
                    random_country_culture = {
                        limit = { is_culture = gandhari }
                        add_country_culture_modifier = {
			    name = gandaran_integration_modifier
                            duration = 10950
			}
			save_scope_as = gandhari_culture
                    }
                }
		current_ruler = { add_popularity = popularity_small }
		if = {
			limit = { legitimacy < 100 }
			add_legitimacy = legitimacy_medium
		}
            }
        }
    }

    indian_mission_01_gandara_task_8 = { # Alexandria on the Hyphasis
    	requires = { indian_mission_01_gandara_task_7 }

        icon = "task_political"


        highlight = {
            scope:province = {
                province_id = 7485
            }
        }

        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 7485 }
                }
                owns = 7485
            }
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:7485 = {
                    has_city_status = yes
                    custom_tooltip = {
            		text = bactria_mission_01_bactria_task_12_buildings_trigger_tt
            		num_of_used_building_slots >= bactria_mission_01_bactria_task_12_buildings_total
            		has_construction = no
                    }
                }
            }
            trigger_else = {
                OR = {
                    can_pay_price = price_found_city
                    p:7485 = { has_city_status = yes }
                }
            }
            hidden:p:7485 = {
                trigger_if = {
                    limit = {
                        has_construction = yes
                    }
                    custom_tooltip = {
                        text = ongoing_construction_trigger_tt
                        has_construction = no
                    }
                }
            }
        }

        on_completion = {
            ai_build_city_pay_price_effect = { CITY = p:7485 } # AI fallback.
            trigger_event = me_india_01_gandara.10
            show_as_tooltip = {
                p:7485 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = greco_indian_city_modifier
                            }
                        }
                        add_province_modifier = {
                            name = greco_indian_city_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_9 = { # City of the Mallians
    	requires = { indian_mission_01_gandara_task_7 }

        icon = "task_economical"


        highlight = {
            scope:province = {
                province_id = 4350
            }
        }

        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 4350 }
                }
                owns = 4350
            }
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:4350 = {
                    has_city_status = yes
                    custom_tooltip = {
            		text = bactria_mission_01_bactria_task_12_buildings_trigger_tt
            		num_of_used_building_slots >= bactria_mission_01_bactria_task_12_buildings_total
            		has_construction = no
                    }
                }
            }
            trigger_else = {
                OR = {
                    can_pay_price = price_found_city
                    p:4350 = { has_city_status = yes }
                }
            }
            hidden:p:4350 = {
                trigger_if = {
                    limit = {
                        has_construction = yes
                    }
                    custom_tooltip = {
                        text = ongoing_construction_trigger_tt
                        has_construction = no
                    }
                }
            }
        }

        on_completion = {
            ai_build_city_pay_price_effect = { CITY = p:4350 } # AI fallback.
            trigger_event = me_india_01_gandara.11
            show_as_tooltip = {
                p:4350 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = greco_indian_city_modifier
                            }
                        }
                        add_province_modifier = {
                            name = greco_indian_city_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }


    indian_mission_01_gandara_task_10 = { # Province of Panduorum
    	requires = { indian_mission_01_gandara_task_9 indian_mission_01_gandara_task_8 }

        icon = "task_political"

        highlight = {
            scope:province = {
		OR = {
		is_in_area = madra_area
		is_in_area = panchanada_area
		is_in_area = sivi_area
		is_in_area = trigarta_area
		}
            }
        }

        allow = {
            hidden:p:4346.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            hidden:p:4414.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            hidden:p:4350.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            hidden:p:4380.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
	}

        on_completion = {
            trigger_event = me_india_01_gandara.12
            show_as_tooltip = {
                p:4346.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
                p:4414.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
                p:4350.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
                p:4380.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_11 = { # Gandaran Passage
    	requires = { indian_mission_01_gandara_task_3 }

        icon = "task_economical"

        highlight = {
            scope:province = {
		OR = {
                	is_in_area = gandhara_area
			is_in_area = kasmira_area
			is_in_area = taxila_area
		}
            }
        }

        allow = {
            custom_tooltip = {
                text = india_mission_01_gandara_task_11_tt_trigger
                india_mission_01_gandara_task_11_current >= india_mission_01_gandara_task_11_total
                area:gandhara_area = {
                    NOT = {
                        any_area_province = {
                            owner = root
                            has_construction = yes
                        }
                    }
                }
                area:kasmira_area = {
                    NOT = {
                        any_area_province = {
                            owner = root
                            has_construction = yes
                        }
                    }
                }
                area:taxila_area = {
                    NOT = {
                        any_area_province = {
                            owner = root
                            has_construction = yes
                        }
                    }
                }
            }
            p:4334 = {
                num_of_fortress_building >= 1
            }
            p:6751 = {
                num_of_fortress_building >= 1
            }
        }

        on_completion = {
            trigger_event = me_india_01_gandara.13
            show_as_tooltip = {
            	add_3_free_province_investments = yes
            }
        }
    }

    indian_mission_01_gandara_task_12 = { # University of Taxila
        requires = { indian_mission_01_gandara_task_11 }

        icon = "task_diplomatic"

        highlight = {
        	scope:province = {
        		province_id = 7314
        	}
        }

        allow = {
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:7314 = {
                    has_city_status = yes
                    has_building = academy_building
                }
            }
            trigger_else = { # AI fallback
                OR = {
                    p:7314 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
            }
        }

        on_completion = {
            trigger_event = me_india_01_gandara.14
            show_as_tooltip = {
                p:7314 = {
                    if = {
                        limit = {
                             NOT = { has_province_modifier = expanded_campus_modifier }
                        }
                        add_province_modifier = {
                            name = expanded_campus_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_13 = { # The Indian Alexandrias
        requires = { indian_mission_01_gandara_task_12 }

        icon = "task_expansion"

        highlight = {
            scope:province = {
		OR = {
                	province_id = 4322
                	province_id = 4316
		}
            }
        }

        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 4322 }
                    NOT = { owns = 4316 }
                }
                owns = 4322
                owns = 4316
            }
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:4322 = {
                    has_city_status = yes
                    custom_tooltip = {
            		text = india_mission_01_gandara_task_13_buildings_trigger_tt
            		num_of_used_building_slots >= bactria_mission_01_bactria_task_7_buildings_total
                    }
                }
                hidden:p:4316 = {
                    has_city_status = yes
                    custom_tooltip = {
            		text = india_mission_01_gandara_task_13_buildings_trigger_tt
            		num_of_used_building_slots >= bactria_mission_01_bactria_task_7_buildings_total
                    }
                }
            }
            trigger_else = {
                OR = {
                    can_pay_price = price_found_city
                    p:4322= { has_city_status = yes }
                }
                OR = {
                    can_pay_price = price_found_city
                    p:4316= { has_city_status = yes }
                }
            }
            hidden:p:4316 = {
                trigger_if = {
                    limit = {
                        has_construction = yes
                    }
                    custom_tooltip = {
                        text = ongoing_construction_trigger_tt
                        has_construction = no
                    }
                }
            }
            hidden:p:4322 = {
                trigger_if = {
                    limit = {
                        has_construction = yes
                    }
                    custom_tooltip = {
                        text = ongoing_construction_trigger_tt
                        has_construction = no
                    }
                }
            }
        }

        on_completion = {
            ai_build_city_pay_price_effect = { CITY = p:4322 } # AI fallback.
            ai_build_city_pay_price_effect = { CITY = p:4316 } # AI fallback.
            trigger_event = me_india_01_gandara.15
            show_as_tooltip = {
                p:4322 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = greco_indian_city_modifier
                            }
                        }
                        add_province_modifier = {
                            name = greco_indian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = {
                                has_variable = greco_indian_city_variable
                            }
                        }
                        set_variable = greco_indian_city_variable
                    }
                }
                p:4316 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = greco_indian_city_modifier
                            }
                        }
                        add_province_modifier = {
                            name = greco_indian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = {
                                has_variable = greco_indian_city_variable
                            }
                        }
                        set_variable = greco_indian_city_variable
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_14 = { # The Gandharan Capital
        requires = { indian_mission_01_gandara_task_13 }

        icon = "task_expansion"

        highlight = {
        	scope:province = {
        		province_id = 4300
        	}
        }

        allow = {
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:4300 = {
                    has_city_status = yes
                    has_building = forum_building
                }
            }
            trigger_else = { # AI fallback
                OR = {
                    p:4300 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
            }
        }

        on_completion = {
            trigger_event = me_india_01_gandara.16
            show_as_tooltip = {
                p:4300 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = greco_indian_city_modifier
                            }
                        }
                        add_province_modifier = {
                            name = greco_indian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = {
                                has_variable = greco_indian_city_variable
                            }
                        }
                        set_variable = greco_indian_city_variable
                    }
                }
            }
        }
    }

   indian_mission_01_gandara_task_15 = { # Mountain Fortresses
        requires = { indian_mission_01_gandara_task_14 }

        icon = "task_expansion"

        highlight = {
        	scope:province = {
			OR = {
        			province_id = 4490
				province_id = 4367
			}
        	}
        }

        allow = {
            #TODO check
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:4490 = {
                    has_city_status = yes
                    fort_level >= 2
                }
                hidden:p:4367 = {
                    has_city_status = yes
                    fort_level >= 2
                }
            }
            trigger_else = { # AI fallback
                OR = {
                    p:4490 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
                OR = {
                    p:4367 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
            }
        }

        on_completion = {
            trigger_event = me_india_01_gandara.17
            show_as_tooltip = {
                p:4490.state = {
                    if = {
                        limit = {
                            NOT = {
                                has_state_modifier = gandharan_passage_modifier
                            }
                        }
                        add_state_modifier = {
                            name = gandharan_passage_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }


   indian_mission_01_gandara_task_16 = { # Province of Gandara
        requires = { indian_mission_01_gandara_task_15 }

        icon = "task_expansion"

        highlight = {
            scope:province = {
		OR = {
		is_in_area = taxila_area
		is_in_area = gandhara_area
		is_in_area = kasmira_area
		}
            }
        }

        allow = {
            hidden:p:7314.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            hidden:p:4300.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            hidden:p:4336.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
	}

        on_completion = {
            trigger_event = me_india_01_gandara.18
            show_as_tooltip = {
                p:7314.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
                p:4300.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
                p:4336.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_17 = { # Down the Indus
        requires = { indian_mission_01_gandara_task_3 }

        icon = "task_economical"

        highlight = {
            scope:province = {
        		OR = {
        			is_in_area = north_sindhu_area
        			is_in_area = south_sindhu_area
        			is_in_area = sauvira_area
        			is_in_area = patalene_area
        		}
            }
        }

        allow = {
            owns_or_subject_owns_area = north_sindhu_area
            owns_or_subject_owns_area = south_sindhu_area
            owns_or_subject_owns_area = sauvira_area
            owns_or_subject_owns_area = patalene_area 
            custom_tooltip = {
                text = india_mission_01_gandara_task_17_tt
                india_mission_01_gandara_task_17_current >= india_mission_01_gandara_task_17_total
            }
        }

        on_completion = {
            trigger_event = me_india_01_gandara.19
	    show_as_tooltip = {
		add_4_free_province_investments = yes
	    }
        }
    }

   indian_mission_01_gandara_task_18 = { # Alexandria on the Indus
        requires = { indian_mission_01_gandara_task_17 }

        icon = "task_expansion"

        highlight = {
            scope:province = {
                province_id = 4371
            }
        }

        allow = {
            trigger_if = {
                limit = {
                    NOT = { owns = 4371 }
                }
                owns = 4371
            }
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:4371 = {
                    has_city_status = yes
                    custom_tooltip = {
            		text = bactria_mission_01_bactria_task_12_buildings_trigger_tt
            		num_of_used_building_slots >= bactria_mission_01_bactria_task_12_buildings_total
            		has_construction = no
                    }
                }
            }
            trigger_else = {
                OR = {
                    can_pay_price = price_found_city
                    p:4371 = { has_city_status = yes }
                }
            }
            hidden:p:4371 = {
                trigger_if = {
                    limit = {
                        has_construction = yes
                    }
                    custom_tooltip = {
                        text = ongoing_construction_trigger_tt
                        has_construction = no
                    }
                }
            }
        }

        on_completion = {
            ai_build_city_pay_price_effect = { CITY = p:4371 } # AI fallback.
            trigger_event = me_india_01_gandara.20
            show_as_tooltip = {
                p:4371 = {
                    if = {
                        limit = {
                            NOT = {
                                has_province_modifier = greco_indian_city_modifier
                            }
                        }
                        add_province_modifier = {
                            name = greco_indian_city_modifier
                            duration = -1
                        }
                    }
                    if = {
                        limit = {
                            NOT = {
                                has_variable = greco_indian_city_variable
                            }
                        }
                        set_variable = greco_indian_city_variable
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_19 = { # Indus Trade
        requires = { indian_mission_01_gandara_task_18 }

        icon = "task_expansion"

        highlight = {
	     scope:province = {
                OR = {
                    is_in_area = north_sindhu_area
                    is_in_area = south_sindhu_area
		    is_in_area = sauvira_area
                }
            }
	}

        allow = {
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:4354 = { has_city_status = yes }
                hidden:p:6822 = { has_city_status = yes }
                hidden:p:4372 = { has_city_status = yes }
                custom_tooltip = {
                    text = india_mission_01_gandara_task_19.tt.a
                    area:north_sindhu_area = {
                        any_area_province = {
                            count = all
                            filter = {
                                owner = ROOT
                                has_city_status = yes
                            }
                            has_building = commerce_building
                        }
                    }
                }
                custom_tooltip = {
                    text = india_mission_01_gandara_task_19.tt.b
                    area:south_sindhu_area = {
                        any_area_province = {
                            count = all
                            filter = {
                                owner = ROOT
                                has_city_status = yes
                            }
                            has_building = commerce_building
                        }
                    }
                }
                custom_tooltip = {
                    text = india_mission_01_gandara_task_19.tt.c
                    area:sauvira_area = {
                        any_area_province = {
                            count = all
                            filter = {
                                owner = ROOT
                                has_city_status = yes
                            }
                            has_building = commerce_building
                        }
                    }
                }
            }
            trigger_else = {
                p:4354 = {
                    OR = {
                        has_city_status = yes
                        ROOT = { can_pay_price = price_found_city }
                    }
                }
                p:6822 = {
                    OR = {
                        has_city_status = yes
                        ROOT = { can_pay_price = price_found_city }
                    }
                }
                p:4372 = {
                    OR = {
                        has_city_status = yes
                        ROOT = { can_pay_price = price_found_city }
                    }
                }
            }
	}

        on_completion = {
            trigger_event = me_india_01_gandara.21
            show_as_tooltip = {
                p:4352.state = {
                    add_state_modifier = {
                        name = indus_commerce_agri_modifier
                        duration = 1825
                    }
                }
                p:4354.state = {
                    add_state_modifier = {
                        name = indus_commerce_agri_modifier
                        duration = 1825
                    }
                }
                p:4371.state = {
                    add_state_modifier = {
                        name = indus_commerce_agri_modifier
                        duration = 1825
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_20 = { # Indo-Greek Port
        requires = { indian_mission_01_gandara_task_19 }

        icon = "task_expansion"

        highlight = {
        	scope:province = {
        		province_id = 6821
        	}
        }

        allow = {
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:6821 = {
                    has_city_status = yes
                    custom_tooltip = {
                        text = bactria_mission_01_bactria_task_12_buildings_trigger_tt
                        num_of_used_building_slots >= bactria_mission_01_bactria_task_12_buildings_total
                        has_construction = no
                    }
                }
            }
            trigger_else = { # AI fallback
                OR = {
                    p:6821 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
            }
        }

        on_completion = {
            trigger_event = me_india_01_gandara.22
            show_as_tooltip = {
                p:6821.state = {
                    add_state_modifier = {
                        name = indo_greek_trade_modifier
                        duration = -1
                    }
                }
                p:6821 = {
                    if = {
                        limit = {
                            NOT = { has_province_modifier = greco_indian_city_modifier }
                        }
                        add_province_modifier = {
                            name = greco_indian_city_modifier
                            duration = -1
                        }
                    }
	            if = {
	        	limit = {
	        		NOT = { has_variable = greco_indian_city_variable }
	        	}
	        	set_variable = greco_indian_city_variable
	            }
                }
            }
        }
    }

   indian_mission_01_gandara_task_21 = { # Capital of Patalene
        requires = { indian_mission_01_gandara_task_20 }

        icon = "task_expansion"

	duration = 60

        highlight = {
        	scope:province = {
        		province_id = 6815
        	}
        }

        allow = {
	    treasury >= 50
            trigger_if = {
                limit = { is_ai = no }
                hidden:p:6815 = {
                    has_city_status = yes
                    custom_tooltip = {
            		text =  india_mission_01_gandara_task_13_buildings_trigger_tt
            		num_of_used_building_slots >= bactria_mission_01_bactria_task_7_buildings_total
            		has_construction = no
                    }
                }
            }
            trigger_else = { # AI fallback
                OR = {
                    p:6815 = {
                        has_city_status = yes
                    }
                    can_pay_price = price_found_city
                }
            }
        }

	on_start = {
	    trigger_event = me_india_01_gandara.35
	    show_as_tooltip = {
		add_treasury = -50
	    }
	}

        on_completion = {
            trigger_event = me_india_01_gandara.23
	    custom_tooltip = india_mission_01_gandara_task_21_effect_tt
            show_as_tooltip = {
                p:6815 = {
                    if = {
                        limit = {
                            NOT = { has_province_modifier = greco_indian_city_modifier }
                        }
                        add_province_modifier = {
                            name = greco_indian_city_modifier
                            duration = -1
                        }
                    }
	            if = {
	        	limit = {
	        		NOT = { has_variable = greco_indian_city_variable }
	        	}
	        	set_variable = greco_indian_city_variable
		    	change_province_name = "Demetrias Patalios"
	            }
                }
            }
        }
    }

   indian_mission_01_gandara_task_22 = { # The Indus Valley
        requires = { indian_mission_01_gandara_task_21 }

        icon = "task_expansion"

        highlight = {
            scope:province = {
		OR = {
			is_in_area = north_sindhu_area
			is_in_area = south_sindhu_area
			is_in_area = sauvira_area
			is_in_area = patalene_area
		}
            }
        }

        allow = {
            hidden:p:6821.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            hidden:p:4353.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            hidden:p:4352.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
            hidden:p:4371.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
	}

        on_completion = {
            trigger_event = me_india_01_gandara.24
            show_as_tooltip = {
                p:6821.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
                p:4353.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
                p:4371.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
                p:4352.state = {
                    if = {
                        limit = {
                            NOT = { has_state_modifier = indo_greek_administration_modifier }
                        }
                        add_state_modifier = {
                            name = indo_greek_administration_modifier
                            duration = -1
                        }
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_23 = { # Greek Settlers
        requires = { indian_mission_01_gandara_task_10 indian_mission_01_gandara_task_16 indian_mission_01_gandara_task_22 }

        icon = "task_expansion"

	duration = 180

        icon = "task_diplomatic"

        allow = {
            treasury >= 250
	    political_influence >= 50
	}

        on_start = {
	    trigger_event = me_india_01_gandara.25
            show_as_tooltip = {
                add_treasury = -250
                add_political_influence = -50
            }
        }

        on_completion = {
	    trigger_event = me_india_01_gandara.26
            custom_tooltip = india_mission_01_gandara_task_23_effect_tt
        }
    }

    indian_mission_01_gandara_task_24 = { # Embracing Buddhism
        requires = { indian_mission_01_gandara_task_23 }

        icon = "task_political"

        highlight = {
            scope:province = {
                province_id = 7314
            }
        }

        allow = {
	    political_influence >= 200
	    stability >= 50
	    tyranny <= 10
            legitimacy >= 70
        }

        on_completion = {
            custom_tooltip = religion_conversion_tooltip
            custom_tooltip = religion_conversion_family_tooltip
            trigger_event = me_india_01_gandara.29
            show_as_tooltip = {
		add_political_influence = -200
		add_stability = -20
		add_country_modifier = {
			name = "recent_convert_modifier"
			duration = 3650
		}
		set_country_religion = buddhism
		current_ruler = {
                    if = {
                        limit = {
                            NOT = { has_religion = buddhism }
                        }
                        set_character_religion = buddhism
                    }
                }
		current_ruler.family = {
                    every_family_member = {
                        limit = {
                            employer = ROOT
                            loyalty >= 50
                            NOT = { has_religion = buddhism }
                        }
                        set_character_religion = buddhism
                    }
                }
                ordered_character = {
                    limit = {
                        loyalty >= 60
                        NOT = { has_religion = buddhism }
                        is_ruler = no
                        from_ruler_family = no
                    }
                    max = 10
                    order_by = prominence
                    set_character_religion = buddhism
                }
                hidden_effect = {
                    every_character = {
                        limit = {
                            NOT = {
                                has_same_religion_as = employer.current_ruler
                            }
                        }
                        add_loyalty = wrong_religion_loyalty
                    }
                }
            }
        }
    }

    indian_mission_01_gandara_task_25 = { # Indo-Greek Culture
        requires = { indian_mission_01_gandara_task_24 }

        icon = "task_political"
        potential = {
            NOT = {
                primary_culture = greco_indian
            }
        }
        allow = {
            political_influence >= 100
	    }

        on_completion = {
            trigger_event = me_india_01_gandara.30
            show_as_tooltip = {
                add_political_influence = -100
                set_primary_culture_cleanup_effect = {
                    NEW_PRIMARY_CULTURE = greco_indian
                    MAKE_OLD_CULTURE_INTEGRATED = yes
                }
                current_ruler = {
                    if = {
                        limit = {
                            NOT = { has_culture = greco_indian }
                        }
                        set_culture = greco_indian
                    }
                }
                hidden_effect = {
                    current_ruler.family = {
                        every_family_member = {
                            limit = {
                                employer = ROOT
                                NOT = { has_culture = greco_indian }
                            }
                            set_culture = greco_indian
                        }
                    }
                }
                ordered_character = {
                    limit = {
                        loyalty >= 60
                        NOT = { has_culture = greco_indian }
                        is_ruler = no
                        from_ruler_family = no
                    }
                    max = 10
                    order_by = prominence
                    set_culture = greco_indian
                }
            }
        }
    }

   indian_mission_01_gandara_task_26 = { # Forging a New Bloodline
        requires = { indian_mission_01_gandara_task_23 }

	duration = 180

        icon = "task_diplomatic"

        allow = {
            treasury >= 250
	    political_influence >= 50
            trigger_if = {
                owns_area = north_sindhu_area
                owns_area = south_sindhu_area
                owns_area = sauvira_area
                owns_area = patalene_area
                owns_area = sivi_area
                owns_area = panchanada_area
                owns_area = madra_area
                owns_area = trigarta_area
                owns_area = taxila_area
                owns_area = kasmira_area
                owns_area = gandhara_area
            }
	}

	bypass = {
	       NOT = { has_variable = menander_is_leader_variable }
	}

        on_start = {
	    trigger_event = me_india_01_gandara.31
            show_as_tooltip = {
                add_treasury = -250
                add_political_influence = -50
            }
        }

        on_completion = {
	    trigger_event = me_india_01_gandara.32
	    show_as_tooltip = {
		current_ruler = {
			add_trait = blood_of_menander
		}
	    }
        }
    }

   indian_mission_01_gandara_task_final= { # Ragias of India
        requires = { indian_mission_01_gandara_task_26 }

        icon = "task_diplomatic"

	duration = 90

	final = yes

        allow = {
            treasury >= 200
	    military_experience >= 20
	}

        on_start = {
	    trigger_event = me_india_01_gandara.33
            show_as_tooltip = {
                add_treasury = -200
            }
        }

        on_completion = {
            trigger_event = me_india_01_gandara.34
            show_as_tooltip = {
		current_ruler = {
			add_popularity = popularity_medium
			add_nickname = NICKNAME_SOTER
		}
		add_country_modifier = {
			name = indo_greek_leg_modifier
			duration = 7300
		}
		add_stability_effect = yes
            }
        }
    }
}
