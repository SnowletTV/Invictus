kalinga_missions = {
	header = "indian_mission_header"
    icon = india_4

    repeatable = no

    chance = {
        factor = 50000
    }

    abort = {
        ai_mission_back_out_trigger = yes
    }

    potential = {
    	OR = {
    		tag = KAL
            AND = {
                root.capital_scope = {
                    is_in_area = kalinga_area
                }
                primary_culture = kalingan
            }
    	}
    	NOT = { has_variable = kalingan_mission_cooldown }
    }

    on_start = {
        start_mission_ai_effect = yes
		save_scope_as = mission_country
    }

    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = kalingan_mission_cooldown
            days = 7300
        }
        add_stability = -5
        current_ruler = {
            add_popularity = -25
        }
    }

    on_completion = {
        complete_mission_effect = yes
    }

    kalinga_missions_task_1 = { # Embrace Buddhist Ways
    	icon = "task_shiva"
        requires = { kalinga_missions_task_2 }

    	allow = {
            political_influence >= 200
            stability >= 50
        }

        on_completion = {
            custom_tooltip = kalinga_missions_task_1_c_tt
            trigger_event = {
                id = me_kalinga.12
            }           
        }
    }

    kalinga_missions_task_2 = { # flavor event
    	icon = "task_political"
        duration = 180

    	on_completion = {
    		root.current_ruler = {
    			add_martial = 2
    			add_popularity = 15
    		}
            custom_tooltip = me_kalinga_1_tt

    		trigger_event = {
    			id = me_kalinga.1
    		}
    	}
    }

    kalinga_missions_task_3 = { # capital state investment
    	icon = "task_atlas"
    	requires = { kalinga_missions_task_4 }

        highlight = {
            scope:province = {
                is_in_area = root.capital_scope
            }
        }

    	allow = {
            custom_tooltip = {
                text = kalinga_missions_task_3_A_tooltip
                capital_scope.state = {
                    calc_true_if = {
                        amount >= 2
                        state_improvement_military_trigger = yes
                        state_improvement_civic_trigger = yes
                        state_improvement_oratory_trigger = yes
                        state_improvement_religious_trigger = yes
                    }
                }
            }
    	}

    	on_completion = {
    		add_country_modifier = {
    			name = kalingan_investments
    			duration = 7300
    		}
    	}
    }

    kalinga_missions_task_4 = { # coastal capital
    	icon = "task_economical"
    	requires = { kalinga_missions_task_15 }
    	prevented_by = { kalinga_missions_task_7 }

    	allow = {
    		capital_scope = {
                is_coastal = yes
                OR = {
                    has_province_rank = city
                    has_province_rank = city_metropolis
                }
                is_in_area = kalinga_area
                num_of_used_building_slots >= 5
                has_construction = no
            }
    	}

    	on_completion = {
    		capital_scope = {
                add_province_modifier = {
                    name = coastal_capital
                    duration = -1
                }
            }
    	}
    }

    kalinga_missions_task_5 = { # food stores
    	icon = "task_economical"
    	requires = { kalinga_missions_task_3 }

    	highlight = {
    		scope:province = {
    			is_in_area = kalinga_area
    			OR = {
    				trade_goods = grain
    				trade_goods = vegetables
    			}
    		}
    	}

    	allow = {
    		custom_tooltip = {
    			text = kalinga_missions_task_5_A_tooltip
    			kalinga_missions_task_5_kalinga_grain_veggie_current >= kalinga_missions_task_5_kalinga_grain_veggie_total
    		}
    	}

    	on_completion = {
    		add_country_modifier = {
    			name = kalingan_agricultural_boost
    			duration = -1
    		}
    	}
    }

    kalinga_missions_task_6 = { # advanced elephantry
    	icon = "task_shiva"
    	requires = { kalinga_missions_task_5 }

        highlight = {
            scope:province = {
                owner = root
                trade_goods = elephants
            }
        }

    	allow = {
			political_influence >= 50
			any_owned_province = {
				trade_goods = elephants
				num_goods_produced = 3
			}
		}
		on_completion = { 
			add_political_influence = -50
			add_country_modifier = {
				name = advanced_elephantry
				duration = -1
			}
            current_ruler = {
				force_add_trait = mahout
			}
		}
    }

    kalinga_missions_task_7 = { # jungle capital
    	icon = "task_calm"
    	requires = { kalinga_missions_task_15 }
    	prevented_by = { kalinga_missions_task_4 }

        highlight = {
            scope:province = {
                terrain = jungle
                OR = {
                    is_in_area = mahendragiri_area
                    is_in_area = dakshina_kosala_area
                }
            }
        }

    	allow = {
            political_influence >= 50
    	}

    	on_completion = {
            custom_tooltip = kalinga_missions_task_7_c_tooltip
    		trigger_event = {
                id = me_kalinga.2
            }
    	}
    }

    kalinga_missions_task_8 = { # a new city
    	icon = "task_economical"
    	requires = { kalinga_missions_task_7 }
        duration = 365

        highlight = {
            scope:province = {
                is_capital = yes
                owner = root
            }
        }

    	allow = {
            OR = {
                capital_scope = {
                    has_city_status = no
                    OR = {
                        is_in_area = mahendragiri_area
                        is_in_area = dakshina_kosala_area
                    }
                    custom_tooltip = {
                        text = kalinga_missions_task_8_allow_tt
                        trigger_if = {
                            limit = { has_construction = yes }
                            has_construction = no
                        }
                        trigger_if = {
                            limit = { has_province_rank = city_metropolis }
                            NOT = { has_province_rank = city_metropolis }
                        }
                        trigger_if = {
                            limit = { has_city_status = yes }
                            has_city_status = no
                        }
                        trigger_if = {
                            limit = { has_province_modifier = revoked_city_status_modifier }
                            NOT = { has_province_modifier = revoked_city_status_modifier }
                        }
                        trigger_if = {
                            limit = { has_province_modifier = founding_city_in_progress }
                            NOT = { has_province_modifier = founding_city_in_progress }
                        }
                        trigger_if = {
                            limit = { has_province_modifier = urban_development_in_progress }
                            NOT = { has_province_modifier = urban_development_in_progress }
                        }
                    }
                }
                capital_scope = {
                    has_city_status = yes
                    OR = {
                        is_in_area = mahendragiri_area
                        is_in_area = dakshina_kosala_area
                    }
                }
            }
            treasury >= 100
        }

        on_start = {
            show_as_tooltip = { add_treasury = -100 }
        }

    	on_completion = {
            trigger_event = { id = me_kalinga.3 }
        }
    }

    kalinga_missions_task_9 = { # spice trade
    	icon = "task_expansion"
    	requires = { kalinga_missions_task_8 }

    	allow = {
            custom_tooltip = {
                text = kalinga_missions_task_9_tt
                any_owned_province = {
                    is_importing_trade_good = spices
                }
            }
        }

    	on_completion = {
            custom_tooltip = kalinga_missions_task_9_B_tt
            hidden_effect = {
                random_owned_province = {
                    limit = {
                        NOR = {
                            province_id = 7081
                            province_id = 7169
                            province_id = 7134
                        }
                        NOT = { trade_goods = elephants }
                        NOT = { trade_goods = grain }
                        NOT = { trade_goods = dye }
                        NOT = { trade_goods = vegetables }
                        NOT = { trade_goods = gems }
                        NOT = { trade_goods = amber }
                        NOT = { trade_goods = precious_metals }
                        NOT = { trade_goods = spices }
                        NOT = { num_of_used_building_slots > 1 }
                    }
                    set_trade_goods = spices
                }
            }
        }
    }

    kalinga_missions_task_10 = { # protect overseas trading routes
    	icon = "task_expansion"
    	requires = { kalinga_missions_task_9 }

    	allow = {
            custom_tooltip = {
                text = kalinga_missions_task_10_allow_tt_1
                num_of_unit_type = { type = trireme value >= 8 }
            }
            custom_tooltip = {
                text = kalinga_missions_task_10_allow_tt_2
                num_of_unit_type = { type = tetrere value >= 4 }
            }
            custom_tooltip = {
                text = kalinga_missions_task_10_allow_tt_3
                num_of_unit_type = { type = hexere value >= 2 }
            }
            custom_tooltip = {
                text = kalinga_missions_task_10_allow_tt_4
                num_of_ships >= 20
            }
        }

    	on_completion = {
    		add_country_modifier = {
                name = overseas_trading
                duration = -1
            }
    	}
    }

    kalinga_missions_task_11 = { # down the coast
    	icon = "task_happiness"
    	requires = { kalinga_missions_task_2 }

        highlight = {
            scope:province = {
                is_in_area = andhra_area
            }
        }

    	allow = {
            owns_area = andhra_area
    	}

    	on_completion = {
            custom_tooltip = kalinga_missions_task_11_c_tt
		    hidden_effect = {
                area:andhra_area = {
                    every_area_province = {
                        limit = {
                            total_population < population_cap
                            has_city_status = yes
                        }
                        random = {
                            chance = 50
                            while = {
                                count = 3
                                limit = {
                                total_population < population_cap
                                }
                                define_pop = {
                                    type = citizen
                                    culture = root.culture
                                    religion = root.religion
                                }
                            }
                        }
                        random = {
                            chance = 50
                            while = {
                                count = 4
                                limit = {
                                total_population < population_cap
                                }
                                define_pop = {
                                    type = freemen
                                    culture = root.culture
                                    religion = root.religion
                                }
                            }
                        }
                        random = {
                            chance = 10
                            while = {
                                count = 2
                                limit = {
                                total_population < population_cap
                                }
                                define_pop = {
                                    type = nobles
                                    culture = root.culture
                                    religion = root.religion
                                }
                            }
                        }
                    }
                }
            }
            custom_tooltip = kalinga_missions_task_11_c_tt2
            trigger_event = {
                id = me_kalinga.4
            }
            custom_tooltip = kalinga_missions_task_11_c_tt3
            hidden_effect = {
                area:sriparvata_area = {
                    every_area_province = {
                        add_claim = root
                    }
                }
                area:north_tondainadu_area = {
                    every_area_province = {
                        add_claim = root
                    }
                }
                area:south_tondainadu_area = {
                    every_area_province = {
                        add_claim = root
                    }
                }
            }
    	}
    }

    kalinga_missions_task_12 = { # tamil relations
    	icon = "task_diplomatic"
    	requires = { kalinga_missions_task_11 }

        highlight = {
            scope:province = {
                OR = {
                    owner = c:CHL
                    owner = c:CHR
                    owner = c:PND
                }
            }
        }

        bypass = {
            OR = {
                AND = {
                    c:CHL = {
                        OR = {
                            num_of_cities <= 5
                            has_land = no
                        }
                    }
                    c:CHR = {
                        OR = {
                            num_of_cities <= 5
                            has_land = no
                        }
                    }
                    c:PND = {
                        OR = {
                            num_of_cities <= 5
                            has_land = no
                        }
                    }
                }
                root = {
                    OR = {
                        alliance_with = c:CHL
                        alliance_with = c:CHR
                        alliance_with = c:PND
                    }
                }
            }
        }

    	allow = {
            custom_tooltip = {
                text = kalinga_missions_task_12_a_tt
                OR = {
                    c:CHL = {
                        opinion = { target = root value >= 25 }
                    }
                    c:CHR = {
                        opinion = { target = root value >= 25 }
                    }
                    c:PND = {
                        opinion = { target = root value >= 25 }
                    }
                }
            }
    	}

    	on_completion = {
            custom_tooltip = kalinga_missions_task_12_c_tt
            trigger_event = {
                id = me_kalinga.5
            }
    	}

        on_bypass = {
            add_country_modifier = {
                name = tamil_relations_kalinga_bypass
                duration = 3650
            }
        }
    }

    kalinga_missions_task_13 = { # tamil blood
    	icon = "task_conquest"
    	requires = { kalinga_missions_task_12 }

    	allow = {
            current_ruler = {
                OR = {
                    has_trait = chola
                    has_trait = chera
                    has_trait = pandya
                }
            }
    	}

    	on_completion = {
            show_as_tooltip = {
                add_country_modifier = {
                    name = tamil_blood_kalinga
                    duration = -1
                }
            }
    		trigger_event = {
                id = me_kalinga.8
            }
    	}
    }

    kalinga_missions_task_14 = { # strengthen tamil ties
    	icon = "task_shiva"
    	requires = { kalinga_missions_task_13 }

        highlight = {
            scope:province = {
                OR = {
                    owner = c:CHL
                    owner = c:CHR
                    owner = c:PND
                }
            }
        }

        bypass = {
            c:CHL = {
                OR = {
                    has_land = no
                    is_subject = yes
                }
            }
            c:CHR = {
                OR = {
                    has_land = no
                    is_subject = yes
                }
            }
            c:PND = {
                OR = {
                    has_land = no
                    is_subject = yes
                }
            }
        }

    	allow = {
            custom_tooltip = {
                text = kalinga_missions_task_14_a_tt
                OR = {
                    c:CHL = {
                        opinion = { target = root value >= 150 }
                        root = { num_of_cities >= kalinga_missions_task_14_chola_current }
                    }
                    c:CHR = {
                        opinion = { target = root value >= 150 }
                        root = { num_of_cities >= kalinga_missions_task_14_chera_current }
                    }
                    c:PND = {
                        opinion = { target = root value >= 150 }
                        root = { num_of_cities >= kalinga_missions_task_14_pandya_current }
                    }
                }
            }
            treasury >= 250
            legitimacy >= 100
    	}

        on_bypass = {
            add_stability = 5
        }

    	on_completion = {
            custom_tooltip = kalinga_missions_task_14_c_tt
            trigger_event = {
                id = me_kalinga.9
            }
    	}
    }

    kalinga_missions_task_15 = { # king of the jungle
    	icon = "task_diplomatic"
    	requires = { kalinga_missions_task_2 }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = mahendragiri_area
                    is_in_area = dakshina_kosala_area
                }
            }
        }

    	allow = {
            owns_area = mahendragiri_area
            owns_area = dakshina_kosala_area
    	}

    	on_completion = {
            custom_tooltip = kalinga_missions_task_15_c_tt
    		custom_tooltip = kalinga_missions_task_15_c_tt2
            hidden_effect = {
                c:ASM = {
                    every_owned_province = {
                        add_claim = root
                    }
                }
                c:ANH = {
                    every_owned_province = {
                        add_claim = root
                    }
                }
                c:KUN = {
                    every_owned_province = {
                        add_claim = root
                    }
                }
                area:mahendragiri_area = {
                    every_area_province = {
                        limit = {
                            total_population < population_cap
                            has_city_status = yes
                        }
                        random = {
                            chance = 50
                            while = {
                                count = 3
                                limit = {
                                total_population < population_cap
                                }
                                define_pop = {
                                    type = citizen
                                    culture = root.culture
                                    religion = root.religion
                                }
                            }
                        }
                        random = {
                            chance = 50
                            while = {
                                count = 4
                                limit = {
                                total_population < population_cap
                                }
                                define_pop = {
                                    type = freemen
                                    culture = root.culture
                                    religion = root.religion
                                }
                            }
                        }
                        random = {
                            chance = 10
                            while = {
                                count = 2
                                limit = {
                                total_population < population_cap
                                }
                                define_pop = {
                                    type = nobles
                                    culture = root.culture
                                    religion = root.religion
                                }
                            }
                        }
                    }
                }
                area:dakshina_kosala_area = {
                    every_area_province = {
                        limit = {
                            total_population < population_cap
                            has_city_status = yes
                        }
                        random = {
                            chance = 50
                            while = {
                                count = 5
                                limit = {
                                total_population < population_cap
                                }
                                define_pop = {
                                    type = citizen
                                    culture = root.culture
                                    religion = root.religion
                                }
                            }
                        }
                        random = {
                            chance = 50
                            while = {
                                count = 2
                                limit = {
                                total_population < population_cap
                                }
                                define_pop = {
                                    type = freemen
                                    culture = root.culture
                                    religion = root.religion
                                }
                            }
                        }
                        random = {
                            chance = 10
                            while = {
                                count = 2
                                limit = {
                                total_population < population_cap
                                }
                                define_pop = {
                                    type = nobles
                                    culture = root.culture
                                    religion = root.religion
                                }
                            }
                        }
                    }
                }
            }
    	}
    }

    kalinga_missions_task_16 = { # defeat southern rivals
    	icon = "task_battle"
    	requires = { kalinga_missions_task_23 kalinga_missions_task_24 kalinga_missions_task_25 }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = andhra_area
                    is_in_area = asmaka_area
                    is_in_area = kuntala_area
                    owner = c:ANH
                    owner = c:ASM
                    owner = c:KUN
                }
            }
        }

    	allow = {
            owns_or_subject_owns_area = andhra_area
            owns_or_subject_owns_area = asmaka_area
            owns_or_subject_owns_area = kuntala_area
            c:ANH = { has_land = no }
            c:ASM = { has_land = no }
            c:KUN = { has_land = no }
    	}

    	on_completion = {
            root.current_ruler = {
                add_trait = victorious
            }
    		add_country_modifier = {
                name = kalinga_defeat_south_rivals
                duration = -1
            }
            custom_tooltip = kalinga_missions_task_16_c_tt
            hidden_effect = {
                region:dravida_region = {
                    every_region_province = {
                        add_claim = root
                    }
                }
                region:karnata_region = {
                    every_region_province = {
                        add_claim = root
                    }
                }
            }
    	}
    }

    kalinga_missions_task_17 = { # own north of region of dravida
    	icon = "task_expansion"
    	requires = { kalinga_missions_task_16 }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = sriparvata_area
                    is_in_area = north_tondainadu_area
                    is_in_area = south_tondainadu_area
                    is_in_area = koda_area
                }
            }
        }

    	allow = {
            custom_tooltip = {
                text = kalinga_missions_task_17_a_tt
                owns_or_subject_owns_area = sriparvata_area
                owns_or_subject_owns_area = north_tondainadu_area
                owns_or_subject_owns_area = south_tondainadu_area
                owns_or_subject_owns_area = koda_area
            }
    	}

    	on_completion = {
            custom_tooltip = kalinga_missions_task_17_c_tt
            hidden_effect = {
                create_character = {
                    family_name = "Sahadeva"
                    culture = root.culture
                    religion = root.religion
                    age = 20
                    female = no
                    good_martial_effect = yes
                    good_charisma_effect = yes
                    add_trait = disciplined
                    add_trait = brave
                    add_trait = steadfast
                }
            }
    	}
    }

    kalinga_missions_task_18 = { # own south of region of dravida
    	icon = "task_political"
    	requires = { kalinga_missions_task_17 }

    	highlight = {
            scope:province = {
                OR = {
                    is_in_area = malayas_area
                    is_in_area = pandiya_area
                    is_in_area = north_tambapamni_area
                    is_in_area = south_tambapamni_area
                }
            }
        }

        allow = {
            custom_tooltip = {
                text = kalinga_missions_task_18_a_tt
                owns_or_subject_owns_area = malayas_area
                owns_or_subject_owns_area = pandiya_area
                owns_or_subject_owns_area = north_tambapamni_area
                owns_or_subject_owns_area = south_tambapamni_area
            }
        }

    	on_completion = {
    		custom_tooltip = kalinga_missions_task_18_c_tt
            ordered_owned_province = {
                limit = {
                    is_in_region = dravida_region
                    has_city_status = yes
                    NOT = { dominant_province_culture = kalingan }
                }
                order_by = total_population
                max = 5

                hidden_effect = {
                    ordered_pops_in_province = {
                        limit = {
                            NOT = {
                                OR = {
                                    pop_type = tribesmen
                                    pop_type = slaves
                                }
                                pop_culture = kalingan
                            }
                        }
                        order_by = pop_hapiness
                        max = 6
                        set_pop_culture = kalingan
                    }
                }
                add_province_modifier = {
                    name = kalingan_conquests_center
                    duration = -1
                }
            }
    	}
    }

    kalinga_missions_task_19 = { # own north of region of karnata
    	icon = "task_political"
    	requires = { kalinga_missions_task_16 }

    	highlight = {
            scope:province = {
                OR = {
                    is_in_area = north_mahishamandala_area
                    is_in_area = south_mahishamandala_area
                    is_in_area = vanavasi_area
                }
            }
        }

        allow = {
            custom_tooltip = {
                text = kalinga_missions_task_19_a_tt
                owns_or_subject_owns_area = north_mahishamandala_area
                owns_or_subject_owns_area = south_mahishamandala_area
                owns_or_subject_owns_area = vanavasi_area
            }
        }

    	on_completion = {
    		add_military_experience = 25
    	}
    }

    kalinga_missions_task_20 = { # own south of region of karnata
    	icon = "task_conquest"
    	requires = { kalinga_missions_task_19 }

    	highlight = {
            scope:province = {
                OR = {
                    is_in_area = north_satiyaputa_area
                    is_in_area = south_satiyaputa_area
                    is_in_area = keralaputa_area
                }
            }
        }

        allow = {
            custom_tooltip = {
                text = kalinga_missions_task_20_a_tt
                owns_or_subject_owns_area = north_satiyaputa_area
                owns_or_subject_owns_area = south_satiyaputa_area
                owns_or_subject_owns_area = keralaputa_area
            }
        }

    	on_completion = {
    		custom_tooltip = kalinga_missions_task_20_c_tt
            ordered_owned_province = {
                limit = {
                    is_in_region = karnata_region
                    has_city_status = yes
                    NOT = { dominant_province_culture = kalingan }
                }
                order_by = total_population
                max = 5

                hidden_effect = {
                    ordered_pops_in_province = {
                        limit = {
                            NOT = {
                                OR = {
                                    pop_type = tribesmen
                                    pop_type = slaves
                                }
                                pop_culture = kalingan
                            }
                        }
                        order_by = pop_hapiness
                        max = 6
                        set_pop_culture = kalingan
                    }
                }
                add_province_modifier = {
                    name = kalingan_conquests_center
                    duration = -1
                }
            }
    	}
    }

    kalinga_missions_task_21 = { # final task
    	icon = "task_durga"
    	requires = { kalinga_missions_task_18 kalinga_missions_task_20 }
    	final = yes

        highlight = {
            scope:province = {
                OR = {
                    is_in_region = karnata_region
                    is_in_region = dravida_region
                    is_in_area = mahendragiri_area
                    is_in_area = dakshina_kosala_area
                    is_in_area = asmaka_area
                    is_in_area = andhra_area
                    is_in_area = asika_area
                    is_in_area = kuntala_area
                    is_in_area = kalinga_area
                }
                NOT = { owner = root }
            }
        }

    	allow = {
            custom_tooltip = {
                text = kalinga_missions_task_21_a_tt
                owns_region = karnata_region
                owns_region = dravida_region
                owns_area = mahendragiri_area
                owns_area = dakshina_kosala_area
                owns_area = asmaka_area
                owns_area = andhra_area
                owns_area = asika_area
                owns_area = kuntala_area
                owns_area = kalinga_area
            }
    	}

    	on_completion = {
            change_country_name = "KALINGAN_EMPIRE"
            if = {
                limit = {
                    NOT = { government = imperium }
                }
                change_government = imperium
            }
    		add_country_modifier = {
                name = legendary_kalinga
                duration = -1
            }
            hidden_effect = {
                change_country_color = kalinga_empire_color
            }
    	}
    }

    kalinga_missions_task_22 = { # Embellish Andhrapura
        icon = "task_expansion"
        requires = { kalinga_missions_task_11 kalinga_missions_task_15 }

        highlight = {
            scope:province = {
                province_id = 7019
            }
        }

        allow = {
            p:7019 = {
                num_of_used_building_slots >= 7
                has_construction = no
                hidden:p:7019.state = {
                    calc_true_if = {
                        amount >= 2
                        state_improvement_civic_trigger = yes
                        state_improvement_oratory_trigger = yes
                        state_improvement_religious_trigger = yes
                    }
                }
            }
        }

        on_completion = {
            p:7019 = {
                add_permanent_province_modifier = {
                    name = thriving_capital
                }
            }
        }
    }

    kalinga_missions_task_23 = { # Dominate andhra
        icon = "task_expansion"
        requires = { kalinga_missions_task_22 }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = andhra_area
                    owner = c:ANH
                }
            }
        }

        allow = {
            owns_or_subject_owns_area = andhra_area
            c:ANH = { has_land = no }
        }

        on_completion = {
            add_stability = 5
            current_ruler = {
                add_popularity = 5
            }
        }
    }

    kalinga_missions_task_24 = { # Dominate asmaka
        icon = "task_political"
        requires = { kalinga_missions_task_22 }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = asmaka_area
                    owner = c:ASM
                }
            }
        }

        allow = {
            owns_or_subject_owns_area = asmaka_area
            c:ASM = { has_land = no }
        }

        on_completion = {
            add_treasury = 100
            add_political_influence = 75
        }
    }

    kalinga_missions_task_25 = { # Dominate kuntala
        icon = "task_battle"
        requires = { kalinga_missions_task_22 }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = kuntala_area
                    owner = c:KUN
                }
            }
        }

        allow = {
            owns_or_subject_owns_area = kuntala_area
            c:KUN = { has_land = no }
        }

        on_completion = {
            custom_tooltip = kalinga_missions_task_25_c_tt
            hidden_effect = {
                ordered_owned_province = {
                    limit = {
                        is_in_area = kuntala_area
                        NOT = { dominant_province_culture = kalingan }
                    }
                    order_by = total_population
                    max = 5

                    ordered_pops_in_province = {
                        limit = {
                            NOT = {
                                OR = {
                                    pop_type = tribesmen
                                    pop_type = slaves
                                }
                                pop_culture = kalingan
                            }
                        }
                        order_by = pop_hapiness
                        max = 5
                        set_pop_culture = kalingan
                    }
                }
            }
        }
    }

    kalinga_missions_task_26 = { # Deccan Gems
        icon = "task_economical"
        requires = { kalinga_missions_task_16 }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = andhra_area
                    is_in_area = sriparvata_area
                    is_in_area = asmaka_area
                    is_in_area = asika_area
                    is_in_area = kuntala_area
                    is_in_area = mulaka_area
                }
                trade_goods = gems
            }
        }

        allow = {
            custom_tooltip = {
                text = kalinga_missions_task_26_a_tt
                kalinga_missions_task_26_gems_current >= kalinga_missions_task_26_gems_total
            }
        }

        on_completion = {
            add_country_modifier = {
                name = thriving_gems_industry
                duration = -1
            }
            ordered_owned_province = {
                limit = {
                    OR = {
                        is_in_area = andhra_area
                        is_in_area = sriparvata_area
                        is_in_area = asmaka_area
                        is_in_area = asika_area
                        is_in_area = kuntala_area
                        is_in_area = mulaka_area
                    }
                    trade_goods = gems
                }
                order_by = total_population
                max = 3
                add_province_modifier = {
                    name = kalingan_trade_center
                    duration = -1
                }
            }
        }
    }

    kalinga_missions_task_27 = { # South Indian Agriculture
        icon = "task_happiness"
        requires = { kalinga_missions_task_16 }

        highlight = {
            scope:province = {
                OR = {
                    is_in_region = vindhyaprstha_region
                    is_in_region = aparanta_region
                    is_in_region = dravida_region
                    is_in_region = karnata_region
                }
                OR = {
                    trade_goods = grain
                    trade_goods = vegetables
                    trade_goods = cattle
                }
            }
        }

        allow = {
            custom_tooltip = {
                text = kalinga_missions_task_27_tooltip
                kalinga_missions_task_27_grain_veggie_cows_current >= kalinga_missions_task_27_grain_veggie_cows_total
            }
        }

        on_completion = {
            add_country_modifier = {
                name = kalinga_developed_agriculture
                duration = -1
            }
        }
    }

    kalinga_missions_task_28 = { # cultural fortitude
        icon = "task_economical"
        requires = { kalinga_missions_task_26 kalinga_missions_task_27 }

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = andhra_area
                    is_in_area = sriparvata_area
                    is_in_area = asmaka_area
                    is_in_area = asika_area
                    is_in_area = kuntala_area
                    is_in_area = mulaka_area
                }
                owner = root
                is_state_capital = yes
            }
        }

        allow = {
            custom_tooltip = {
                text = kalinga_missions_task_28_a_tt
                area:andhra_area = {
                    any_area_state = {
                        owner = root
                        capital_scope = {
                            save_temporary_scope_as = temp_scope_andhra
                        }
                    }
                }
                scope:temp_scope_andhra = {
                    is_state_capital = yes
                    has_city_status = yes
                    num_of_used_building_slots >= kalinga_missions_task_28_buildings_total
                    has_construction = no
                    OR = {
                        dominant_province_culture = kalingan
                        root = {
                            any_country_culture = {
                                is_culture = scope:temp_scope_andhra.dominant_province_culture
                                is_integrated = yes
                            }
                        }
                    }
                }
                area:sriparvata_area = {
                    any_area_state = {
                        owner = root
                        capital_scope = {
                            save_temporary_scope_as = temp_scope_sriparvata
                        }
                    }
                }
                scope:temp_scope_sriparvata.area = {
                    any_area_province = {
                        is_state_capital = yes
                        has_city_status = yes
                        num_of_used_building_slots >= kalinga_missions_task_28_buildings_total
                        has_construction = no
                        OR = {
                            dominant_province_culture = kalingan
                            root = {
                                any_country_culture = {
                                    is_culture = scope:temp_scope_sriparvata.dominant_province_culture
                                    is_integrated = yes
                                }
                            }
                        }
                    }
                }
                area:asmaka_area = {
                    any_area_state = {
                        owner = root
                        capital_scope = {
                            save_temporary_scope_as = temp_scope_asmaka
                        }
                    }
                }
                scope:temp_scope_asmaka.area = {
                    any_area_province = {
                        is_state_capital = yes
                        has_city_status = yes
                        num_of_used_building_slots >= kalinga_missions_task_28_buildings_total
                        has_construction = no
                        OR = {
                            dominant_province_culture = kalingan
                            root = {
                                any_country_culture = {
                                    is_culture = scope:temp_scope_asmaka.dominant_province_culture
                                    is_integrated = yes
                                }
                            }
                        }
                    }
                }
                area:asika_area = {
                    any_area_state = {
                        owner = root
                        capital_scope = {
                            save_temporary_scope_as = temp_scope_asika
                        }
                    }
                }
                scope:temp_scope_asika.area = {
                    any_area_province = {
                        is_state_capital = yes
                        has_city_status = yes
                        num_of_used_building_slots >= kalinga_missions_task_28_buildings_total
                        has_construction = no
                        OR = {
                            dominant_province_culture = kalingan
                            root = {
                                any_country_culture = {
                                    is_culture = scope:temp_scope_asika.dominant_province_culture
                                    is_integrated = yes
                                }
                            }
                        }
                    }
                }
                area:kuntala_area = {
                    any_area_state = {
                        owner = root
                        capital_scope = {
                            save_temporary_scope_as = temp_scope_kuntala
                        }
                    }
                }
                scope:temp_scope_kuntala.area = {
                    any_area_province = {
                        is_state_capital = yes
                        has_city_status = yes
                        num_of_used_building_slots >= kalinga_missions_task_28_buildings_total
                        has_construction = no
                        OR = {
                            dominant_province_culture = kalingan
                            root = {
                                any_country_culture = {
                                    is_culture = scope:temp_scope_kuntala.dominant_province_culture
                                    is_integrated = yes
                                }
                            }
                        }
                    }
                }
                area:mulaka_area = {
                    any_area_state = {
                        owner = root
                        capital_scope = {
                            save_temporary_scope_as = temp_scope_mulaka
                        }
                    }
                }
                scope:temp_scope_mulaka.area = {
                    any_area_province = {
                        is_state_capital = yes
                        has_city_status = yes
                        num_of_used_building_slots >= kalinga_missions_task_28_buildings_total
                        has_construction = no
                        OR = {
                            dominant_province_culture = kalingan
                            root = {
                                any_country_culture = {
                                    is_culture = scope:temp_scope_mulaka.dominant_province_culture
                                    is_integrated = yes
                                }
                            }
                        }
                    }
                }
            }
        }

        on_completion = {
            current_ruler = {
                add_nickname = NICKNAME_THE_MAGNANIMOUS
                add_finesse = 3
                add_popularity = 15
            }
            random_country_culture = {
                limit = {
                    is_culture = kalingan
                }
                add_country_culture_modifier = {
                    name = kalingan_cultural_fortitude
                    duration = 3650
                }
            }
            random_country_culture = {
                limit = {
                    is_culture = andhran
                    is_integrated = yes
                }
                add_country_culture_modifier = {
                    name = kalingan_cultural_fortitude
                    duration = 3650
                }
            }
            random_country_culture = {
                limit = {
                    is_culture = assaka
                    is_integrated = yes
                }
                add_country_culture_modifier = {
                    name = kalingan_cultural_fortitude
                    duration = 3650
                }
            }
            random_country_culture = {
                limit = {
                    is_culture = kuntalan
                    is_integrated = yes
                }
                add_country_culture_modifier = {
                    name = kalingan_cultural_fortitude
                    duration = 3650
                }
            }
            random_country_culture = {
                limit = {
                    is_culture = telugu
                    is_integrated = yes
                }
                add_country_culture_modifier = {
                    name = kalingan_cultural_fortitude
                    duration = 3650
                }
            }
            random_country_culture = {
                limit = {
                    is_culture = vidharban
                    is_integrated = yes
                }
                add_country_culture_modifier = {
                    name = kalingan_cultural_fortitude
                    duration = 3650
                }
            }
        }
    }

    kalinga_missions_task_29 = {
        icon = "task_conquest"
        prevented_by = { kalinga_missions_task_30 }

        allow = {
            hidden:c:MRY = { opinion = { target = root value >= 75 } }
            hidden:current_ruler = { is_friend = c:MRY.current_ruler }
        }

        on_completion = {
            add_political_influence = -50
            add_alliance = c:MRY
        }
    }

    kalinga_missions_task_30 = {
        icon = "task_diplomatic"
        prevented_by = { kalinga_missions_task_29 }

        allow = {
            OR = {
                hidden:c:MRY = { opinion = { target = root value >= 50 } }
                hidden:current_ruler = { is_friend = c:MRY.current_ruler }
            }
        }

        on_completion = {
            add_treasury = -100
            c:MRY = {
                add_truce = {
                    target = root
                    duration = 3650
                }
            }
        }
    }
}