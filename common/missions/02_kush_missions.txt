kush_missions = {
	header = "kush_mission_header"
	icon = "seleukid_3"
	chance = {
		factor= 50000
	}

	potential = {
		NOT = { has_variable = kush_missions_cooldown }
		tag = KSH
	}
	on_start = {
		save_scope_as = mission_country
	}
	on_abort = {
		custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = kush_missions_cooldown
            days = 7300
	 	}
	}
	abort = {
        ai_mission_back_out_trigger = yes
    }
	on_completion = {
		complete_mission_effect = yes
	}
	kush_missions_task_1 = {   ##Kushite Kingdom
		icon = "task_political"
		duration = 90

		allow = {
			treasury >= 25
			political_influence >= 15
		}
		on_completion = {
			add_treasury = -25
			add_political_influence = -15
			hidden_effect = {
            	area:alut_area = {
            		every_area_province = { 	
            			add_claim = ROOT 
            		}
            	}
        	}
			hidden_effect = {
            	area:gabgaba_area = {
            		every_area_province = { 	
            			add_claim = ROOT 
            		}
            	}
        	}        	
			hidden_effect = {
            	area:meroe_area = {
                	every_area_province = { 
                		add_claim = ROOT 
                	}
            	}
        	}
			hidden_effect = {
            	area:atbaras_area = {
                	every_area_province = { 
                		add_claim = ROOT 
                	}
            	}
        	}        	
			custom_tooltip = kush_mission_1_effect_tt
			trigger_event = { id = me_kush.1 }        			
		}
	}
	kush_missions_task_2 = {   ##Down the Nile
		requires = { kush_missions_task_1 }
		icon = "task_conquest"
		duration = 90
		highlight = {
            scope:province = {
            	OR = {
            	is_in_area = alut_area
            	is_in_area = muqaddam_area
            	is_in_area = gezira_area
            	}
            }
        }		
		allow = {
		owns_area = alut_area
		owns_area = muqaddam_area
		owns_area = gezira_area
		}
		on_completion = {
			add_treasury = 50
				p:3311 = {
                    while = {
                    count = 5
                    limit = {
                        total_population < population_cap
                    }
                        define_pop = {
                        type = freemen
                        culture = root.culture
                        religion = root.religion
                        }
                    }
				}
				p:8107 = {
				set_city_status = city
                    while = {
                    count = 5
                    limit = {
                        total_population < population_cap
                    }
                        define_pop = {
                        type = freemen
                        culture = root.culture
                        religion = root.religion
                        }
                    }
				}				
		}
	}
	kush_missions_task_3 = {   ##Consolidate Meroe
		requires = { kush_missions_task_1 }
		icon = "task_conquest"
		duration = 180

		highlight = {
            scope:province = {
            	OR = {
                    is_in_area = meroe_area
					province_id = 7588
					province_id = 3323
					province_id = 3328
					province_id = 7589
					province_id = 7590                    
            	}
            }
        }		
		allow = {
			owns_area = meroe_area
			owns = 7588
			owns = 3323
			owns = 3328
			owns = 7589
			owns = 7590
		}
		on_completion = {
			p:7589 = {
                    while = {
                    count = 5
                    limit = {
                        total_population < population_cap
                    }
                        define_pop = {
                        type = freemen
                        culture = root.culture
                        religion = root.religion
                        }
                    }
        	}
        	add_treasury = 50	
			custom_tooltip = kush_mission_3_effect_tt		
			hidden_effect = {
            	area:tana_area = {
            		every_area_province = { 	
            			add_claim = ROOT 
            		}
            	}
        	}
			hidden_effect = {
            	area:aksum_area = {
                	every_area_province = { 
                		add_claim = ROOT 
                	}
            	}
        	}	
		}
	}
	kush_missions_task_4 = {   ##Kushites of Aksum
		requires = { kush_missions_task_2 kush_missions_task_3 }	
		icon = "task_diplomatic"

		highlight = {
            scope:province = {
            	OR = {
					province_id = 7540
					province_id = 7508
					province_id = 7514
					province_id = 7511
					province_id = 7512
					province_id = 7537
					province_id = 7538
					province_id = 7536
					province_id = 7539
					#Aksum
					province_id = 7506		
					province_id = 7510
					province_id = 7505
					province_id = 7513
					province_id = 7504
					province_id = 7509
					province_id = 7515
					province_id = 7503
					province_id = 7507            		
            	}
            }
        }
		allow = {
			custom_tooltip = {
			text = kush_mission_4_effect2_tt
			owns = 7540
			owns = 7508
			owns = 7514
			owns = 7511
			owns = 7512
			owns = 7537
			owns = 7538
			owns = 7536
			owns = 7539
			#Aksum
			owns = 7506		
			owns = 7510
			owns = 7505
			owns = 7513
			owns = 7504
			owns = 7509
			owns = 7515
			owns = 7503
			owns = 7507
			}
		}
		on_completion = {
			add_country_modifier = {
				name = arabian_conversion
				duration = 1825
			}			
		}
	}
	kush_missions_task_5 = {   ##Aksumite Conversion
		requires = { kush_missions_task_4 }
		icon = "task_expansion"

		allow = {
			#At least 80% of the pops in the areas of Aksum and Tana are following the Kemetic religion
			#At least 5 provinces in the areas of aksum and tana fullfill the following conditions:
			#Have City status, Dominant religion is root.religion
			#Have at least 5 buildings and no ongoing consturction
			#Have at least 15 pops	
			#Ratio of Slave pops is less than 33%			
            custom_tooltip = {
                text = kush_missions_task_5_tooltip
                kush_missions_task_5_pops_current >= kush_missions_task_5_pops_total
            }
            custom_tooltip = {
            	text = kush_missions_task_5_B_tooltip
				any_owned_province = {
					count >= 5
					owner = root
					OR = {
						is_in_area = aksum_area
						is_in_area = tana_area
					}
					has_city_status = yes
					dominant_province_religion = egyptian_pantheon
					total_population >= 15
					num_of_used_building_slots >= 5
					has_construction = no
					any_pops_in_province = {
						percent <= 0.33
						pop_type = slaves
					}								
				}
			}            	
		}

		on_completion = {
			add_stability = 5
			random_country_culture = {
				limit = { this.culture = culture:aksumite }
				add_country_culture_modifier = {
					name = aksumite_integration
					duration = 10950 # 30 years
				}
			}
			ordered_owned_province = {
				limit = {
					OR = {
						is_in_area = aksum_area
						is_in_area = tana_area
					}
					owner = root
					dominant_province_religion = egyptian_pantheon
					total_population >= 15
					num_of_used_building_slots >= 5										
				}
				order_by = total_population
				max = 5
				add_province_modifier = {
					name = aksumite_ambitions
					duration = -1
				}
			}			
		}
	}		
	kush_missions_task_6 = {   ##Push for Punt (Colonize)
		requires = { kush_missions_task_4 }
		icon = "task_expansion"
		duration = 365
		allow = {
			treasury >= 200
		}
		on_start = {
			trigger_event = { id = me_kush.3 }			
		}
		on_completion = {
			custom_tooltip = kush_mission_6_effect_tt		
			hidden_effect = {
            	area:punt_area = {
            		every_area_province = { 	
            			add_claim = ROOT 
            		}
            	}
        	}
			hidden_effect = {
            	area:mosylon_area = {
                	every_area_province = { 
                		add_claim = ROOT 
                	}
            	}
        	}	
		}
	}
	kush_missions_task_7 = {   ##Down South (Only country with provinces in Mosylon)
		requires = { kush_missions_task_6 }
		icon = "task_conquest"
		highlight = {
            scope:province = {
            	OR = {
            	province_id = 7527
				province_id = 7524
				province_id = 7528
				}
            }
        }
		allow = {
			custom_tooltip = {
			text = kush_mission_7_effect_tt
			owns = 7527
			owns = 7524
			owns = 7528
			}			
		}
		on_completion = {
			add_treasury = 250
		}
	}
	kush_missions_task_8 = {   ##Kushites of Mosylon (Release Client)
		requires = { kush_missions_task_7 }
		icon = "task_diplomatic"
		highlight = {
            scope:province = {
                    is_in_area = mosylon_area
            }
        }		
		allow = {
			political_influence >= 25
		}
		on_completion = {
		add_political_influence = -25
			custom_tooltip = kush_mission_8_effect_tt
			trigger_event = { id = me_kush.6 }			
		}
	}
	kush_missions_task_10 = {   ##Dominate Punt
		requires = { kush_missions_task_6 }
		icon = "task_conquest"
		duration = 180
		highlight = {
            scope:province = {
            	OR = {
               	province_id = 7521
				province_id = 7520
				province_id = 7519
				province_id = 7518
				province_id = 7517
				province_id = 7516
            	}
            }
        }		
		allow = {
			custom_tooltip = {
			text = kush_mission_10_effect2_tt
			owns = 7521
			owns = 7520
			owns = 7519
			owns = 7518
			owns = 7517
			owns = 7516
			}
			political_influence >= 25
		}
		on_completion = {
			add_political_influence = -25
			custom_tooltip = kush_mission_10_effect_tt
			hidden_effect = {
            	region:arabia_felix_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
		}
	}
	kush_missions_task_11 = {   ##Into Arabia
		requires = { kush_missions_task_10 }
		icon = "task_conquest"
		highlight = {
            scope:province = {
            	OR = {
                    is_in_area = qataba_area
                    is_in_area = sheba_area
                    is_in_area = arabia_felix_occidentalis_area
                    is_in_area = arabia_felix_centralis_area
                    is_in_area = arabia_felix_orientalis_area
            	}
            }
        }		
		allow = {
			owns_or_subject_owns_area = qataba_area
			owns_or_subject_owns_area = sheba_area
			owns_or_subject_owns_area = arabia_felix_occidentalis_area
			owns_or_subject_owns_area = arabia_felix_centralis_area
			owns_or_subject_owns_area = arabia_felix_orientalis_area			
		}
		on_completion = {
			add_treasury = 200
				add_country_modifier = {
					name = conquered_arabia
					duration = 1825
				}						
		}
	}
	kush_missions_task_12 = {   ##The Matter of Hadhramut 
		requires = { kush_missions_task_10 }
		icon = "task_conquest"
		highlight = {
            scope:province = {
            	OR = {
                    is_in_area = hadramut_occidentalis_area
                   	province_id = 4703
                   	province_id = 4704
                   	province_id = 4705
            	}
            }
        }		
		allow = {
			owns_or_subject_owns_area = hadramut_occidentalis_area
			owns_or_subject_owns = 4703
            owns_or_subject_owns = 4704
            owns_or_subject_owns = 4705		
		}
		on_completion = {
			p:4685 = {
				set_city_status = city
			}
			custom_tooltip = kush_mission_12_effect_tt
			hidden_effect = {
            	area:east_omana_area = {
                	every_area_province = { 
                		add_claim = ROOT 
                	}
            	}
        	}			
		}
	}
	kush_missions_task_13 = {   ##Arabian Consolidation
		requires = { kush_missions_task_12 kush_missions_task_11 }
		icon = "task_conquest"
		highlight = {
            scope:province = {
            	OR = {
                    is_in_area = hadramut_occidentalis_area
					is_in_area = hadramut_orientalis_area
                    is_in_area = qataba_area
                    is_in_area = sheba_area
                    is_in_area = arabia_felix_occidentalis_area
                    is_in_area = arabia_felix_centralis_area
                    is_in_area = arabia_felix_orientalis_area					 
            	}
            }
        }	
		allow = {
			custom_tooltip = { 
			text = kush_mission_13_effect2_tt
			owns_or_subject_owns_area = qataba_area
			owns_or_subject_owns_area = sheba_area
			owns_or_subject_owns_area = arabia_felix_occidentalis_area
			owns_or_subject_owns_area = arabia_felix_centralis_area
			owns_or_subject_owns_area = arabia_felix_orientalis_area
			owns_or_subject_owns_area = hadramut_occidentalis_area
			any_owned_province = {
				is_in_area = hadramut_orientalis_area
				owner = root
			}
			}			 
		}
		on_completion = {
			add_country_modifier = {
				name = arabian_conversion
				duration = 3650
			}		
			custom_tooltip = kush_mission_13_effect_tt
			hidden_effect = {
            	region:arabia_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}		 
		}
	}
	kush_missions_task_14 = {   ##Kushite Arabia
		requires = { kush_missions_task_13 }
		icon = "task_conquest"
		highlight = {
            scope:province = {
            	is_in_region = arabia_region
            }
        }		
		allow = {
			custom_tooltip = { 
			text = kush_mission_14_effect_tt
			any_owned_province = {
				is_in_area = arabia_maritimae_area
				owner = root
			}		
			owns_or_subject_owns_area = taifa_area
			owns_or_subject_owns_area = arabia_ad_sinus_area
			owns_or_subject_owns_area = arabia_deserta_area
			owns_or_subject_owns_area = dedan_area
			owns_or_subject_owns_area = arabia_relicta_area
			}
		}
		on_completion = {
			add_treasury = 250
			add_country_modifier = {
				name = arabian_assimilation
				duration = 3650
			}			
		}
	}
	kush_missions_task_15 = {   ##The Northern Push
		requires = { kush_missions_task_3 }
		icon = "task_conquest"
		duration = 180
		allow = {
			political_influence >= 25
			treasury >=100
			manpower_percentage >= 0.5
		}
		on_start = {
			add_political_influence = -25 
			add_treasury = -100
		}
		on_completion = {
			add_country_modifier = {
				name = northern_push
				duration = 3650
			}
			custom_tooltip = kush_mission_15_effect_tt
			hidden_effect = {
            	region:nubia_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
        	trigger_event = {
        	id = me_kush.68
        	}		
		}
	}
	kush_missions_task_16 = {   ##The Kushites of Nubia
		requires = { kush_missions_task_15 }
		icon = "task_political"
		highlight = {
            scope:province = {
            	is_in_region = nubia_region
            }
        }		
		allow = {
			owns_or_subject_owns_region = nubia_region
		}
		on_completion = {
			add_country_modifier = {
				name = nubian_consolidation
				duration = 3650
			}			
			custom_tooltip = kush_mission_16_effect_tt
			hidden_effect = {
            	region:upper_egypt_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
			trigger_event = { id = me_kush.51 }        				
		}
	}
	kush_missions_task_17 = {   ##Into Egypt
		requires = { kush_missions_task_16 }
		icon = "task_conquest"
		highlight = {
            scope:province = {
            	is_in_region = upper_egypt_region
            }
        }		
		allow = {
			owns_or_subject_owns_region = upper_egypt_region
		}
		on_completion = {
			add_country_modifier = {
				name = rush_the_delta
				duration = 3650
			}
			custom_tooltip = kush_mission_17_effect_tt
			hidden_effect = {
            	region:lower_egypt_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
        	trigger_event = { id = me_kush.52 }		
		}
	}
	kush_missions_task_18 = {   ##Estabalish the 32nd Dynasty
		requires = { kush_missions_task_17 }
		icon = "task_political"
		highlight = {
            scope:province = {
            	is_in_region = lower_egypt_region
            }
        }		
		allow = {
			owns_or_subject_owns_region = lower_egypt_region
		}
		on_completion = {
			set_variable = {
            name = new_egyptian_dynasty    
            value = 1                               
        	}
			trigger_event = { id = me_kush.18 }
			custom_tooltip = kush_mission_18_effect_tt
			hidden_effect = {
            	region:cyrenaica_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
			hidden_effect = {
            	region:palestine_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
        	trigger_event = { 
        	id = me_kush.70 #Tjit the Tradesman
        	days = { 1825 3650 }
        	}       	        	
		}
	}
	kush_missions_task_19 = {   ##Into Cyranaica
		requires = { kush_missions_task_18 }
		icon = "task_conquest"
		highlight = {
            scope:province = {
            	is_in_region = cyrenaica_region
            }
        }		
		allow = {
			custom_tooltip = { 
			text = kush_mission_19_effect_tt
			owns_area = ammon_area
			owns_area = marmarica_orientalis_area
			owns_area = marmarica_occidentalis_area
			owns_area = cyrenaica_superioris_area
			owns_area = cyrenaica_inferioris_area
			any_owned_province = {
				is_in_area = tripolitania_orientalis_area
				owner = root
			}
			any_owned_province = {
				is_in_area = tripolitania_centralis_area
				owner = root
			}
			}						
		}
		on_completion = {
			add_treasury = 500
		}
	}
	kush_missions_task_20 = {   ##The Kushites of Cyrenaica (Client)
		requires = { kush_missions_task_19 }
		prevented_by = { kush_missions_task_21 }
		icon = "task_diplomatic"
		allow = {
			custom_tooltip = {
			text = kush_mission_19_effect_tt
			owns_area = ammon_area
			owns_area = marmarica_orientalis_area
			owns_area = marmarica_occidentalis_area
			owns_area = cyrenaica_superioris_area
			owns_area = cyrenaica_inferioris_area
			any_owned_province = {
				is_in_area = tripolitania_orientalis_area
				owner = root
			}
			any_owned_province = {
				is_in_area = tripolitania_centralis_area
				owner = root
			}
			}						
		}
		on_completion = {
			custom_tooltip = kush_mission_20_effect_tt
			trigger_event = { id = me_kush.10 }
		}
	}
	kush_missions_task_21 = {   ##Cyrenaica for Kush
		requires = { kush_missions_task_19 }
		prevented_by = { kush_missions_task_20 }
		icon = "task_expansion"
		allow = {
			custom_tooltip = {
			text = kush_mission_19_effect_tt
			owns_area = ammon_area
			owns_area = marmarica_orientalis_area
			owns_area = marmarica_occidentalis_area
			owns_area = cyrenaica_superioris_area
			owns_area = cyrenaica_inferioris_area
			any_owned_province = {
				is_in_area = tripolitania_orientalis_area
				owner = root
			}
			any_owned_province = {
				is_in_area = tripolitania_centralis_area
				owner = root
			}
			}						
		}
		on_completion = {
			add_treasury = 350
			p:3363 = {
				set_city_status = city
			}
			p:3348 = {
				set_city_status = city
			}			
		}
	}
	kush_missions_task_22 = {   ##Palestine
		requires = { kush_missions_task_18 }
		icon = "task_conquest"
		highlight = {
            scope:province = {
            	is_in_region = palestine_region
            }
        }		
		allow = {
			owns_or_subject_owns_region = palestine_region
		}
		on_completion = {
			trigger_event = { id = me_kush.49 }
			add_treasury = 500
			add_country_modifier = {
				name = leventine_conversion
				duration = -1
			}
			custom_tooltip = kush_mission_22_effect_tt
			custom_tooltip = kush_mission_22_A_effect_tt
			hidden_effect = {
            	region:syria_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
			hidden_effect = {
            	region:cilicia_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}        			
		}
	}
	kush_missions_task_23 = {   ##Syrian Kush
		requires = { kush_missions_task_22 }
		icon = "task_conquest"
		highlight = {
            scope:province = {
            	is_in_region = syria_region
            }
        }		
		allow = {
			owns_or_subject_owns_region = syria_region
		}
		on_completion = {
			custom_tooltip = kush_mission_23_effect_tt
			custom_tooltip = kush_mission_23_A_effect_tt
			trigger_event = { id = me_kush.11 }
			hidden_effect = {
            	region:assyria_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
			hidden_effect = {
            	region:mesopotamia_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
			hidden_effect = {
            	region:armenia_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}        			
		}
	}
	kush_missions_task_24 = {   ##A foothold in Asia Minor
		requires = { kush_missions_task_22 }
		icon = "task_conquest"
		highlight = {
            scope:province = {
            	is_in_region = cilicia_region
            }
        }		
		allow = {
			owns_or_subject_owns_region = cilicia_region
		}
		on_completion = {
		#Fires and event that gives the decision to release cyprus as a KUSHITE CLIENT. gain claims on all regions in Asia Minor and the region of Greece.
			custom_tooltip = kush_mission_24_effect_tt
			trigger_event = { id = me_kush.12 }
			hidden_effect = {
            	region:cappadocia_pontica_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
			hidden_effect = {
            	region:cappadocia_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
			hidden_effect = {
            	region:bithynia_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
			hidden_effect = {
            	region:asia_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
			hidden_effect = {
            	region:galatia_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}
			hidden_effect = {
            	region:greece_region = {
                every_region_province = { add_claim = ROOT }
            	}
        	}        	        	        			
		}
	}
	kush_missions_task_final = {   ##Greater Kush
		requires = { kush_missions_task_24 kush_missions_task_23 kush_missions_task_14 }
		icon = "task_political"
		final = yes
		highlight = {
            scope:province = {
            	OR = {
					is_in_region = cilicia_region
					is_in_region = cappadocia_pontica_region
					is_in_region = cappadocia_region
					is_in_region = bithynia_region
					is_in_region = asia_region
					is_in_region = galatia_region
					is_in_region = greece_region
					is_in_region = armenia_region
					is_in_region = mesopotamia_region
					is_in_region = assyria_region
            	}
            }
        }		
		allow = {
			custom_tooltip = {
				text = kush_mission_final_effect_tt
				owns_or_subject_owns_region = cilicia_region
				owns_or_subject_owns_region = cappadocia_pontica_region
				owns_or_subject_owns_region = cappadocia_region
				owns_or_subject_owns_region = bithynia_region
				owns_or_subject_owns_region = asia_region
				owns_or_subject_owns_region = galatia_region
				owns_or_subject_owns_region = greece_region
				owns_or_subject_owns_region = armenia_region
				owns_or_subject_owns_region = mesopotamia_region
				owns_or_subject_owns_region = assyria_region	
			}
		}
		on_completion = {
			add_country_modifier = {
				name = greater_kush
				duration = -1
			}
		}
	}
##DEVELOPMENT BRANCH
	kush_missions_task_25 = {   ##Develop Agriculture
		icon = "task_economical"
		highlight = {
			scope:province = {	
				owner = root
				trade_goods = vegetables
			}
		}	

		allow = {
            trigger_if = {
                limit = { is_ai = no }
                custom_tooltip = {
                    text = "kush_mission_25_effect_tt"
					any_owned_province = {
	                trade_goods = vegetables
	   				OR = {
					num_of_basic_settlement_infratructure_building = 1
					num_of_population_building >= 2
					}
	                has_construction = no
	                count >= 5
	                }
                }
		    }								
		}
		on_completion = {
			custom_tooltip = kush_mission_25_effect_2_tt
			trigger_event = {
				id = me_kush.74
			}
        	ordered_owned_province = {
            	limit = {
	                trade_goods = vegetables
	                has_building = basic_settlement_infratructure_building
            	}	
	            order_by = num_of_slaves
	            max = 5
	            add_province_modifier = { name = kushite_agriculture duration = 9125 }
        	}															
		}
	}
	kush_missions_task_26 = {   ##Nubian Architecture
		icon = "task_economical"
		requires = { kush_missions_task_16 }
		
		allow = {
			#Nubia Region has at least 60 buildings
            custom_tooltip = {
                text = kush_missions_task_26_A_tooltip
                kush_missions_task_26_buildings_current >= kush_missions_task_26_buildings_total
                    region:nubia_region = {
                        NOT = {
                        any_region_province = {
                            owner = root
                            has_construction = yes
                        }
                    }
                }                
            }															
		}
		on_completion = {
			add_2_free_province_investments = yes
			current_ruler = {
				add_popularity = 10
			}
			add_country_modifier = {
				name = building_spree
				duration = 730
			}	
		}
	}
	kush_missions_task_28 = {   ##Build Kushite Temples
		icon = "task_economical"
		requires = { kush_missions_task_25 }
		highlight = {
			scope:province = {		
				owner = root
				is_holy_site = yes
				dominant_province_religion = egyptian_pantheon
			}
		}		
		allow = {
			#At least 10 kemetic holy sites have a great temple building
            custom_tooltip = {
                text = kush_missions_task_28_tooltip
                kush_missions_task_28_temple_current >= kush_missions_task_28_temple_total
                any_owned_province = {
					is_holy_site = yes
					dominant_province_religion = egyptian_pantheon
					has_construction = no
                }
            }									
		}
		on_completion = {
			p:591 = {
				add_permanent_province_modifier = { name = kushite_temple } #Modifier from tamil modifiers
			}
			p:574 = {
				add_permanent_province_modifier = { name = kushite_temple }
			}
			p:569 = {
				add_permanent_province_modifier = { name = kushite_temple }
			}
			p:563 = {
				add_permanent_province_modifier = { name = kushite_temple }
			}									
		}
	}
	kush_missions_task_29 = {   ##Trade of Pottery
		icon = "task_economical"
		requires = { kush_missions_task_25 }
		highlight = {
			scope:province = {	
				owner = root
				is_in_region = nubia_region
				trade_goods = earthware
			}
		}		
		allow = {
			#The region of Nubia produces at least 15 earthware
            custom_tooltip = {
                text = kush_missions_task_29_tooltip
                kush_missions_task_29_earthware_current >= kush_missions_task_29_earthware_total
            }			
		}
		on_completion = {
			p:7580 = {
				add_permanent_province_modifier = {
					name = pottery_of_kush
				}
			}
			p:639 = {
				if = {
					limit = { num_goods_produced >= 3 }
						add_permanent_province_modifier = {
						name = pottery_of_kush
						}
				}				
			}
			p:638 = {
				if = {
					limit = { num_goods_produced >= 3 }
						add_permanent_province_modifier = {
						name = pottery_of_kush
						}
				}				
			}
			p:643 = {
				set_trade_goods = earthware
				add_permanent_province_modifier = {
				name = pottery_of_kush
				}				
			}			
		}
	}
	kush_missions_task_30 = {   ##Build a Grand Temple
		icon = "task_economical"
		requires = { kush_missions_task_28 kush_missions_task_40 kush_missions_task_32 }
		allow = {
			treasury >= 4000
		}
		on_completion = {
			trigger_event = { id = me_kush.34 }			
			custom_tooltip = tamilakam_missions_01_task_12_effect_tt		
		}
	}
	kush_missions_task_31 = {   ##Embellish Meroe
		icon = "task_economical"
		highlight = {
			scope:province = {
				province_id = 641
			}
		}		
		allow = {
			p:641 = {
				num_of_used_building_slots >= 10
				has_construction = no
			hidden:p:641.state = {
                calc_true_if = {
                    amount >= 2
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
			}		
		}
		on_completion = {
			p:641 = {
				add_permanent_province_modifier = {
					name = thriving_capital
				}
			}
		}
	}
	kush_missions_task_32 = {   ##Metropolis of Meroe
		icon = "task_economical"
		requires = { kush_missions_task_31 }
		duration = 365
		highlight = {
			scope:province = {
				province_id = 641
			}
		}		
		allow = {
			political_influence >= 25
			treasury >= 200
			p:641 = {
				total_population >= 70
			}
		}
		on_start = { 
			add_political_influence = -25
			add_treasury = -200 
		}
		on_completion = {
			add_1_free_province_investments = yes
			p:641 = {
				increase_province_rank_effect = yes
				add_permanent_province_modifier = {
				name = meroitic_metalworkers
				}
				set_trade_goods = iron
			}
		}
	}
	kush_missions_task_33 = {   ##Pounds of Kush
		icon = "task_economical"
		requires = { kush_missions_task_16 }
		highlight = {
			scope:province = {		
				province_id = 7589
			}
		}		
		allow = {
			p:7589 = {
				num_goods_produced >= 5
			}
		}
		on_completion = {
			add_treasury = 500
			p:7589 = {
				add_permanent_province_modifier = {
					name = pounds_of_kush
				}
			}
			p:3328 = {
				set_trade_goods = hemp
				add_permanent_province_modifier = {
					name = pounds_of_kush
				}
			}
			p:3323 = {
				set_trade_goods = hemp
				add_permanent_province_modifier = {
					name = pounds_of_kush
				}
			}
			p:7588 = {
				set_trade_goods = hemp
				add_permanent_province_modifier = {
					name = pounds_of_kush
				}
			}						
		}
	}
	kush_missions_task_34 = {   ##Nile Trade
		icon = "task_economical"
		requires = { kush_missions_task_18 }
	
		allow = {
			##At least 60 ports and marketplaces in the lower egypt province
            custom_tooltip = {
                text = kush_missions_task_34_A_tooltip
                kush_missions_task_34_buildings_current >= kush_missions_task_34_buildings_total
                    region:lower_egypt_region = {
                        NOT = {
                        any_region_province = {
                            owner = root
                            has_construction = yes
                        }
                    }
                }                
            }								
		}
		on_completion = {
			add_2_free_province_investments = yes
			p:521 = {
				add_permanent_province_modifier = {
					name = nile_ports
				}
			}
			p:519 = {
				add_permanent_province_modifier = {
					name = nile_ports
				}
			}
			p:516 = {
				add_permanent_province_modifier = {
					name = nile_ports
				}
			}
			p:536 = {
				add_permanent_province_modifier = {
					name = nile_ports
				}
			}
			p:509 = {
				add_permanent_province_modifier = {
					name = nile_ports
				}
			}												
		}
	}
	kush_missions_task_35 = {   ##Nile Agriculture
		icon = "task_economical"
		requires = { kush_missions_task_18 }
		highlight = {
			scope:province = {	
				is_in_region = lower_egypt_region
				OR = {	
					trade_goods = grain
					trade_goods = fish
					trade_goods = vegetables			
				}
			}
		}		
		allow = {
			#At least 60 Grain, Vegetables, and Fish are being produced in the region of lower egypt.
            custom_tooltip = {
                text = kush_missions_task_35_tooltip
                kush_missions_task_35_food_current >= kush_missions_task_35_food_total
            }														
		}
		on_completion = {
		add_2_free_province_investments = yes
			add_country_modifier = {
            	name = mac_developed_agriculture
                duration = -1
		    }
		}
	}
	kush_missions_task_36 = {   ##Ports of Punt
		icon = "task_economical"
		requires = { kush_missions_task_7 }
		
		allow = {
			#40 Ports and Marketplaces in Punt Region
            custom_tooltip = {
                text = kush_missions_task_36_tooltip
                kush_missions_task_36_ports_current >= kush_missions_task_36_ports_total
                region:punt_region = {
                   	NOT = {
                        any_region_province = {
                            owner = root
                            has_construction = yes
                        }
                    }
                }                
            }												
		}
		on_completion = {
			add_country_modifier = {
				name = elephants_and_incense
				duration = -1
			}
			p:7527 = {
				add_permanent_province_modifier = {
					name = mosylon_trade
				}
			}
			p:7524 = {
				add_permanent_province_modifier = {
					name = mosylon_trade
				}
			}
			p:7528 = {
				add_permanent_province_modifier = {
					name = mosylon_trade
				}
			}
			p:7525 = {
				add_permanent_province_modifier = {
					name = mosylon_trade
				}
			}									
		}
	}
	kush_missions_task_37 = {   ##Develop Southern Arabia
		icon = "task_economical"
		requires = { kush_missions_task_11 }
		highlight = {
			scope:province = {	
				owner = root
				is_uninhabitable = no
				is_in_region = arabia_felix_region
			}
		}		
		allow = {
			#75 building in the region of Arabia Felix
            custom_tooltip = {
                text = kush_missions_task_37_tooltip
                kush_missions_task_37_building_current >= kush_missions_task_37_building_total
                region:arabia_felix_region = {
                   	NOT = {
                        any_region_province = {
                            owner = root
                            has_construction = yes
                        }
                    }
                }                
            }									
		}
		on_completion = {
			##FIRE AN EVENT THAT GIVES OPTIONS OF A COLONY LIKE ROMAN MISSIONS
			add_1_free_province_investments = yes
			custom_tooltip = kush_mission_37_effect_tt
			trigger_event = { id = me_kush.13 }
		}
	}
	kush_missions_task_38 = {   ##Cities of Arabia
		icon = "task_economical"
		requires = { kush_missions_task_37 }
		
		allow = {
			#At least 10 cities in Arabia region
			custom_tooltip = {
			text = kush_mission_38_effect_2_tt
				any_owned_province = {
					is_in_region = arabia_region
					has_city_status = yes
					count >= 10
				}		
			}													
		}
		on_completion = {
			##FIRE AN EVENT THAT GIVES OPTIONS OF A COLONY LIKE ROMAN MISSIONS
			custom_tooltip = kush_mission_38_effect_tt
			trigger_event = { id = me_kush.14 }			
		}
	}				
	kush_missions_task_39 = {   ##Ports of Cyrenaica
		icon = "task_economical"
		requires = { kush_missions_task_21 }
				
		allow = {
			#Cyrenaica region has 25 ports and 25 commerce buildings
            custom_tooltip = {
                text = kush_missions_task_39_A_tooltip
                kush_missions_task_39_ports_current >= kush_missions_task_39_ports_total
                    region:cyrenaica_region = {
                        NOT = {
                        any_region_province = {
                            owner = root
                            has_construction = yes
                        }
                    }
                }                
            }						
		}
		on_completion = {
			##FIRE AN EVENT THAT GIVES OPTIONS OF A COLONY LIKE ROMAN MISSIONS
			custom_tooltip = kush_mission_39_effect_tt
			trigger_event = { id = me_kush.15 }	
			add_2_free_province_investments = yes			
		}
	}
	kush_missions_task_40 = {   ##Kushite Trade
		icon = "task_economical"
		requires = { kush_missions_task_29 }
		highlight = {
            scope:province = {
            	OR ={
            	is_in_area = napata_area
            	is_in_area = meroe_area
            	is_in_area = north_nubia_area
            	}
            }
        }		
		allow = {
			p:641.state = {
				incoming_trade_routes >= 10
				outgoing_trade_routes >= 5
			}
			p:626.state = {
				incoming_trade_routes >= 5
				outgoing_trade_routes >= 5				
			}
			p:600.state = {
				incoming_trade_routes >= 5
				outgoing_trade_routes >= 5
			}
		}
		on_completion = {
			add_2_free_province_investments = yes
			ordered_owned_province = {
				limit = {
	            	OR ={
	            	is_in_area = napata_area
	            	is_in_area = meroe_area
	            	is_in_area = north_nubia_area
	            	}
				}
				order_by = province_income
				max = 3
				add_province_modifier = {
					name = kushite_trade
					duration = 9125
				}
			}									
		}
	}
	kush_missions_task_43 = {   ##The Old Capital
		icon = "task_economical"
		requires = { kush_missions_task_16 }
		duration = 365
		highlight = {
			scope:province = {	
				province_id = 626								
			}
		}		
		allow = {
			p:626 = {
				total_population >= 60
				has_construction = no
				num_of_used_building_slots >= 10
			hidden:p:626.state = {
                calc_true_if = {
                    amount >= 2
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
			}						
		}
		on_completion = {
			p:626 = {
			increase_province_rank_effect = yes
				add_permanent_province_modifier = {
					name = great_city_of_napata
				}
			}
			trigger_event = { id = me_kush.63 }
		}
	}		
##GOVERNMENT
	kush_missions_task_41 = {   ##Imperial Cult (NEEDS EVENTS)
		icon = "task_political"
		requires = { kush_missions_task_48 }
		allow = {
			current_ruler = {
				has_trait = pharaoh
				zeal >= 10
			}
			stability > 60
			##All office holders have at least 60 loyalty (NEED TO TEST IF THIS WORKS, IT SHOULD BUT IDK FOR SURE)
			custom_tooltip = {
			text = kush_mission_41_effect_tt
        		any_character = {
	        		has_office = office_foreign_minister
	        		loyalty >= me_epi_1_3_loyalty_total
	        	}
        		any_character = {
	        		has_office = office_royal_tutor
	        		loyalty >= me_epi_1_3_loyalty_total
	        	}
        		any_character = {
	        		has_office = office_marshal
	        		loyalty >= me_epi_1_3_loyalty_total
	        	}
        		any_character = {
	        		has_office = office_master_of_the_guard
	        		loyalty >= me_epi_1_3_loyalty_total
	        	}	 
        		any_character = {
	        		has_office = office_high_priest_monarchy
	        		loyalty >= me_epi_1_3_loyalty_total
	        	}
        		any_character = {
	        		has_office = office_philosopher
	        		loyalty >= me_epi_1_3_loyalty_total
	        	}	
        		any_character = {
	        		has_office = office_steward
	        		loyalty >= me_epi_1_3_loyalty_total
	        	}
        		any_character = {
	        		has_office = office_physician
	        		loyalty >= me_epi_1_3_loyalty_total
	        	}
	        }
	        has_law = elevate_monarch_monarchy	        		        	        		        	       		        		        				
		}
		on_completion = {
			add_stability = -20
			republic_to_monarchy_law_variable_effect = yes # decide which legion law should be transferred
			change_government = imperial_cult
			republic_to_monarchy_law_change_effect = yes # change legion law based on variable if present
			add_4_free_province_investments = yes
			switch_government_type_event_clearup_effect = yes
		}
	}
##Pyramid Building 
	kush_missions_task_45 = {   ##Pyramid Building 
		icon = "task_economical"
		requires = { kush_missions_task_43 kush_missions_task_26 }
		highlight = {
			scope:province = {	
				OR = {
				province_id = 641
				province_id = 626	
				province_id = 613	
				province_id = 569		
				}						
			}
		}		
		allow = {
			p:641 = {
				any_great_work_in_province = {
				great_work_builder = root
				}
			}
			p:626 = {
				any_great_work_in_province = {
				great_work_builder = root
				}				
			}
			p:613 = {
				any_great_work_in_province = {
				great_work_builder = root
				}			
			}			
			p:569 = {
				any_great_work_in_province = {
				great_work_builder = root
				}				
			}						
		}
		on_completion = {
			custom_tooltip = kush_mission_45_effect_tt
            trigger_event = { id = me_kush.59 }
       		add_stability = 15
       		add_country_modifier = {
       			name = pyramids_of_kush
       			duration = -1
       		}

		}
	}
	kush_missions_task_46 = {   ##Dominate the Blemmyans
		icon = "task_political"
		requires = { kush_missions_task_1 }

		highlight = {
			scope:province = {	
				OR = {
				is_in_area = ptolemais_area
				is_in_area = allaqi_area
				is_in_area = eastern_desert_area
				is_in_area = troglodytica_area
				is_in_area = gabgaba_area
				}				
				is_uninhabitable = no		
			}
		}
		
		allow = {
			c:BMY = {
			has_land = no
			}
			owns_area = ptolemais_area
			owns_area = allaqi_area
			owns_area = eastern_desert_area
			owns_area = troglodytica_area
			owns_area = gabgaba_area
		}
		on_completion = {
			add_treasury = 100
				current_ruler = {
				add_trait = conqueror
				}		
		}
	}
	kush_missions_task_47 = {   ##Gold Mines of Blemmia
		icon = "task_economical"
		requires = { kush_missions_task_46 }

		highlight = {
			scope:province = {	
				OR = {
					is_in_area = gabgaba_area
					is_in_area = allaqi_area		
					is_in_area = eastern_desert_area
					is_in_area = troglodytica_area																				
				}
				owner = root
				trade_goods = precious_metals						
			}
		}
		
		allow = {
			##The areas of gabgaba_area, allaqi_area, eastern_desert_area, and troglodytica_area produce at least 30 precious metals.
            custom_tooltip = {
                text = kush_missions_task_47_A_tooltip
                kush_missions_task_47_gold_current >= kush_missions_task_47_gold_total
            }	
		}
		on_completion = {
			add_political_influence = 10		
			ordered_owned_province = {
				limit = {
					OR = {
						is_in_area = gabgaba_area
						is_in_area = allaqi_area		
						is_in_area = eastern_desert_area
						is_in_area = troglodytica_area			
					}				
					trade_goods = precious_metals
				}
				order_by = num_goods_produced
				max = 4
				add_province_modifier = {
					name = prospering_blemmian_gold_mine
					duration = -1
				}
			}
		}
	}
	kush_missions_task_48 = {   ##Embrace Egyptian Ways
		icon = "task_political"
		requires = { kush_missions_task_18 }
		
		allow = {
			invention = book_of_the_dead_inv
			invention = embalming_inv
			invention = god_king_inv			
		}
		on_completion = {
			current_ruler = {
				add_character_modifier = {
				name = egyptian_god_king
				duration = -1
				}
			}
		}
	}
	kush_missions_task_49 = {   ##Cattle Cultivation
		icon = "task_political"
		requires = { kush_missions_task_25 }
		
		highlight = {
			scope:province = {	
				owner = root
				is_in_region = nubia_region
				trade_goods = cattle						
			}
		}		

		allow = {
            custom_tooltip = {
                text = kush_missions_task_49_A_tooltip
                kush_missions_task_49_livestock_current >= kush_missions_task_49_livestock_total
            }			
		}
		on_completion = {
			ordered_owned_province = {
				limit = {
					trade_goods = cattle
					is_in_region = nubia_region
				}
				max = 3
				order_by = num_goods_produced
				add_province_modifier = {
					name = developed_livestock_systems
					duration = -1
				}
			}
		}
	}
	kush_missions_task_50 = {   ##Arabian Incense
		icon = "task_political"
		requires = { kush_missions_task_11 }
		
		highlight = {
			scope:province = {	
				owner = root
				is_in_region = arabia_felix_region
				trade_goods = incense						
			}
		}		

		allow = {
            custom_tooltip = {
                text = kush_missions_task_50_tooltip
                kush_missions_task_50_incense_current >= kush_missions_task_50_incense_total
            }			
		}
		on_completion = {
			add_treasury = 150
			ordered_owned_province = {
				limit = {
					trade_goods = incense
					is_in_region = arabia_felix_region
				}
				max = 3
				order_by = num_goods_produced
				add_province_modifier = {
					name = arabic_incense_center
					duration = -1
				}
			}
		}
	}
	kush_missions_task_51 = {   ##Kushite Builders
		icon = "task_economical"
		requires = { kush_missions_task_18 }
				
		allow = {
			#Lower Egypt region has at least 150 buildings
            custom_tooltip = {
                text = kush_missions_task_51_tooltip
                kush_missions_task_51_buildings_current >= kush_missions_task_51_buildings_total
                    region:lower_egypt_region = {
                        NOT = {
                        any_region_province = {
                            owner = root
                            has_construction = yes
                        }
                    }
                }                
            }						
		}
		on_completion = {
			add_political_influence = 25
			add_2_free_province_investments = yes
			ordered_owned_province = {
				limit = {
					is_in_region = lower_egypt_region
					owner = root
				}
				order_by = total_population
				max = 3
				add_province_modifier = {
					name = nile_prosperity
					duration = -1
				}
			}		
		}
	}
	kush_missions_task_52 = {   ##Exotic Arabian Goods
		icon = "task_economical"
		requires = { kush_missions_task_37 }
				
		allow = {
			#check for 30 produced Incense, Dates, Glass, Precious Metals, Spices and Wine in the Arabia region.
            custom_tooltip = {
                text = kush_missions_task_52_tooltip
                kush_missions_task_52_exotic_current >= kush_missions_task_52_exotic_total                
            }						
		}
		on_completion = {
			add_political_influence = 25
			add_4_free_province_investments = yes			
		}
	}
	kush_missions_task_53 = {   ##Richest Lands Known to Man
		icon = "task_economical"
		requires = { kush_missions_task_34 kush_missions_task_35 }
		
		highlight = {
			scope:province = {	
				owner = root
				OR = {
					is_in_area = memphis_area
					is_in_area = western_delta_area
					is_in_area = central_delta_area
					is_in_area = eastern_delta_area
				}					
			}
		}

		allow = {
			#20 total province income in the delta areas
            custom_tooltip = {
                text = kush_missions_task_53_tooltip
                kush_missions_task_53_money_current >= kush_missions_task_53_money_total                
            }						
		}
		on_completion = {
			add_country_modifier = {
				name = kushite_economic_hegemony
				duration = -1
			}			
		}
	}
	kush_missions_task_54 = {   ##Marble Mines
		icon = "task_economical"
		requires = { kush_missions_task_17 }

		highlight = {
			scope:province = {	
				owner = root
				trade_goods = marble
				is_in_region = upper_egypt_region				
			}
		}
			
		allow = {
			#check for 30 produced Incense, Dates, Glass, Precious Metals, Spices and Wine in the Arabia region.
            custom_tooltip = {
                text = kush_missions_task_54_tooltip
                kush_missions_task_54_marble_current >= kush_missions_task_54_marble_total                
            }						
		}
		on_completion = {
			add_treasury = 100
			ordered_owned_province = {
				limit = {
					is_in_region = upper_egypt_region
					trade_goods = marble
				}
				order_by = num_goods_produced
				max = 3
				add_province_modifier = {
					name = marble_mines
					duration = -1
				}
			}		
		}
	}
	kush_missions_task_55 = {   ##Nobles of the Nile
		icon = "task_economical"
		requires = { kush_missions_task_18 }
				
		allow = {
			#check for 200 nobles and 30 Academies in Lower Egypt. 
            custom_tooltip = {
                text = kush_missions_task_55_A_tooltip
                kush_missions_task_55_nobles_current >= kush_missions_task_55_nobles_total                
            }
            custom_tooltip = {
                text = kush_missions_task_55_B_tooltip
                kush_missions_task_55_academies_current >= kush_missions_task_55_academies_total
               	region:lower_egypt_region = {
                   	NOT = {
                        any_region_province = {
                            owner = root
                            has_construction = yes
                        }
                    }
                }                                
            }            						
		}
		on_completion = {
			add_innovation = 2
			ordered_owned_province = {
				limit = {
					is_in_region = lower_egypt_region
					owner = root
				}
				order_by = total_population
				max = 5
				add_province_modifier = {
					name = nile_nobility
					duration = -1
				}
			}			
		}
	}
						
}	