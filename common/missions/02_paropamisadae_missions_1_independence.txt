paropamisadae_missions_1_independence = {
    header = "mission_image_general"
    icon = "general_1"

    repeatable = no
    chance = 1000

    potential = {
        NOT = { has_variable = mission_cooldown_var }
        tag = PRM
    }

    abort = {}
    on_start = {
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = mission_cooldown_var
            days = 7300
        }
    }
    on_completion = {}
    paropamisadae_missions_1_independence_task_1 = { # Secure Succession
        icon = "task_political"
        allow = {
            OR = {
                AND = {
                    exists = current_ruler.spouse
                    current_ruler.spouse = { is_pregnant = yes }
                }
                has_primary_heir = yes
            }
        }
        on_completion = {
            trigger_event = me_paropamisadae_independence.1
            show_as_tooltip = {
                add_legitimacy = 5
                add_country_modifier = {
                    name = oxyartid_dynasty
                    duration = 3650
                }
            }
        }
    }
    paropamisadae_missions_1_independence_task_2 = { # Training the Next Generation
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_3 }
        allow = {
            treasury >= 100
            OR = {
                any_character = {
                    has_tech_office_of = military_tech
                    martial >= 10
                }
                any_character = {
                    has_tech_office_of = civic_tech
                    finesse >= 10
                }
                any_character = {
                    has_tech_office_of = oratory_tech
                    charisma >= 10
                }
                any_character = {
                    has_tech_office_of = religious_tech
                    zeal >= 10
                }
            }
            OR = {
                any_character = {
                    OR = {
                        has_office = office_high_priest_monarchy
                        has_office = office_augur
                        has_office = office_high_priest
                    }
                    zeal >= 7
                }
                any_character = {
                    OR = {
                        has_office = office_steward
                        has_office = office_tribune_of_the_treasury
                        has_office = office_magistrate
                    }
                    finesse >= 7
                }
                any_character = {
                    OR = {
                        has_office = office_master_of_the_guard
                        has_office = office_tribune_of_the_soldiers
                        has_office = office_bodyguard
                    }
                    martial >= 7
                }
                any_character = {
                    OR = {
                        has_office = office_foreign_minister
                        has_office = office_praetor
                        has_office = office_arbitrator
                    }
                    charisma >= 7
                }
            }
        }
        on_completion = {
            trigger_event = me_paropamisadae_independence.2
            show_as_tooltip = {
                every_character = {
                    limit = {
                        OR = {
                            is_child_of = char:291
                            AND = {
                                employer = ROOT
                                age <= 13
                            }
                        }
                    }
                    add_zeal = 2
                    add_martial = 2
                    add_charisma = 2
                    add_finesse = 2
                }
            }
        }
    }
    paropamisadae_missions_1_independence_task_3 = { # Fit for a King
        icon = "task_political"
        allow = {}
        requires = { paropamisadae_missions_1_independence_task_3 }
        on_completion = {
            trigger_event = me_paropamisadae_independence.3
            show_as_tooltip = {
                custom_tooltip = "fit_for_a_king_ct"
            }
        }
    }
    paropamisadae_missions_1_independence_task_4 = { # A Strong Dynasty
        icon = "task_political"
        allow = {}
        requires = { paropamisadae_missions_1_independence_task_3 }
        on_completion = {
            trigger_event = me_paropamisadae_independence.4
            show_as_tooltip = {
                every_character = {
                    limit = {
                        OR = {
                            is_child_of = char:291
                            is_spouse_of = char:291
                        }
                    }
                    add_prominence = 200
                    add_popularity = 20
                }
            }
        }
    }
    paropamisadae_missions_1_independence_task_5 = { # Distant Diadochi
        icon = "task_political"
        allow = {}
        requires = { paropamisadae_missions_1_independence_task_4 }
        on_completion = {
            trigger_event = me_paropamisadae_independence.5
            show_as_tooltip = {
                if = {
                    limit = {
                        is_subject_of = c:SEL
                    }
                    c:SEL = { release_subject = ROOT }
                }
            }
        }
    }
    paropamisadae_missions_1_independence_task_6 = { # Eastern Trade
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_4 }
        allow = {
            any_province = {
                owner = ROOT
                OR = {
                    is_importing_trade_good = jade
                    is_importing_trade_good = silk
                }
            }
        }
        on_completion = {
            trigger_event = me_paropamisadae_independence.6
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_7 = { # Southern Trade
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_4 }
        allow = {
            any_area_province = {
                calc_true_if = {
                    amount >= 3
                    is_importing_trade_good = grain
                    is_importing_trade_good = sugar
                    is_importing_trade_good = spices
                    is_importing_trade_good = elephants
                    is_importing_trade_good = dye
                }
            }
        }
        on_completion = {
            trigger_event = me_paropamisadae_independence.7
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_8 = { # Western Trade
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_4 }
        allow = {
            any_area_province = {
                calc_true_if = {
                    amount >= 4
                    is_importing_trade_good = camel
                    is_importing_trade_good = steppe_horses
                    is_importing_trade_good = horses
                    is_importing_trade_good = lapis
                    is_importing_trade_good = amber
                    is_importing_trade_good = silphium
                    is_importing_trade_good = cinnabar
                    is_importing_trade_good = incense
                    is_importing_trade_good = dates
                    is_importing_trade_good = papyrus
                }
            }
        }
        on_completion = {
            trigger_event = me_paropamisadae_independence.8
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_9 = { # The Next Step
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_8 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.9
            show_as_tooltip = {
                custom_tooltip = "choices_for_paropam_ct"
            }
            set_variable = prm_macedon_missions_unlocked
        }
    }
    paropamisadae_missions_1_independence_task_10 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_8 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.10
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_11 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_8 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.11
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_12 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_11 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.12
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_13 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_11 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.13
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_14 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_11 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.14
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_15 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_14 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.15
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_16 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_14 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.16
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_17 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_14 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.17
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_18 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_14 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.18
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_19 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_14 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.19
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_1_independence_task_20 = {
        icon = "task_political"
        requires = { paropamisadae_missions_1_independence_task_19 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_independence.20
            show_as_tooltip = {

            }
        }
        final = yes
    }
}