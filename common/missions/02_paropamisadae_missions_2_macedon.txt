paropamisadae_missions_2_macedon = {
    header = "mission_image_general"
    icon = "general_1"

    repeatable = no
    chance = 1000

    potential = {
        NOT = { has_variable = mission_cooldown_var }
        tag = PRM
    }

    abort = {}
    on_start = {
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = mission_cooldown_var
            days = 7300
        }
    }
    on_completion = {}
    paropamisadae_missions_2_macedon_task_1 = { # Claims on Cassander
        icon = "task_political"
        allow = {
            political_influence >= 30
        }
        on_completion = {
            trigger_event = me_paropamisadae_macedon.1
            show_as_tooltip = {
                if = {
                    limit = {
                        c:MAC = { has_land = yes }
                        c:MAC = {
                            every_owned_province = {
                                add_claim = ROOT
                            }
                        }
                    }
                }
                else_if = {
                    limit = {
                        c:PRY = { owns = 379 }
                    }
                    c:PRY = {
                        every_owned_province = {
                            limit = {
                                OR = {
                                    is_in_region = greece_region
                                    is_in_region = macedonia_region
                                    is_in_region = thrace_region
                                }
                            }
                            add_claim = ROOT
                        }
                    }
                }
                else_if = {
                    limit = {
                        c:TRE = {
                            owns = 379
                        }
                    }
                    c:TRE = {
                        every_owned_province = {
                            limit = {
                                OR = {
                                    is_in_region = greece_region
                                    is_in_region = macedonia_region
                                    is_in_region = thrace_region
                                    is_in_region = asia_region
                                    is_in_region = bithynia_region
                                    is_in_region = lycia_region
                                }
                            }
                            add_claim = ROOT
                        }
                    }
                }
                else = {
                    region:macedonia_region = {
                        every_region_province = {
                            add_claim = ROOT
                        }
                    }
                    area:thessaly_area = {
                        every_area_province = {
                            add_claim = ROOT
                        }
                    }
                }
            }
        }
    }
    paropamisadae_missions_2_macedon_task_2 = { # Training the Next Generation
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_3 }
        allow = {
            
        }
        on_completion = {
            trigger_event = me_paropamisadae_macedon.2
            show_as_tooltip = {
                every_character = {
                    every_child = {
                        limit = { age < 13 }
                        add_zeal = 2
                        add_martial = 2
                        add_charisma = 2
                        add_finesse = 2
                    }
                }
            }
        }
    }
    paropamisadae_missions_2_macedon_task_3 = { # Fit for a King
        icon = "task_political"
        allow = {}
        requires = { paropamisadae_missions_2_macedon_task_3 }
        on_completion = {
            trigger_event = me_paropamisadae_macedon.3
            show_as_tooltip = {
                custom_tooltip = "fit_for_a_king_ct"
            }
        }
    }
    paropamisadae_missions_2_macedon_task_4 = { # A Strong Dynasty
        icon = "task_political"
        allow = {}
        requires = { paropamisadae_missions_2_macedon_task_3 }
        on_completion = {
            trigger_event = me_paropamisadae_macedon.4
            show_as_tooltip = {
                every_character = {
                    limit = {
                        OR = {
                            is_child_of = char:291
                            is_spouse_of = char:291
                        }
                    }
                    add_prominence = 200
                    add_popularity = 20
                }
            }
        }
    }
    paropamisadae_missions_2_macedon_task_5 = { # Distant Diadochi
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_4 }
        highlight = {
            scope:province = {
                owner = c:SEL
            }
        }
        allow = {
            political_influence >= 25
            trigger_if = {
                limit = { is_ai = yes }
                current_date >= 455.1.1
            }
            war = no
        }
        bypass = {
            NOT = { is_subject_of = c:SEL }
        }
        on_completion = {
            trigger_event = me_paropamisadae_macedon.5
            show_as_tooltip = {
                add_political_influence = -25
                if = {
                    limit = {
                        is_subject_of = c:SEL
                    }
                    c:SEL = { release_subject = ROOT }
                }
                custom_tooltip = "if_opinion_low_gtfkd_ct"
                if = {
                    limit = {
                        OR = {
                            c:SEL = {
                                opinion = {
                                    target = ROOT
                                    value < 100
                                }
                            }
                            current_ruler = {
                                NOT = {
                                    is_friend = c:SEL.current_ruler
                                }
                            }
                        }
                    }
                    every_owned_province = {
                        limit = {
                            owner = ROOT
                        }
                        add_claim = c:SEL
                    }
                }
            }
        }
    }
    paropamisadae_missions_2_macedon_task_6 = { # Eastern Trade
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_4 }
        allow = {
            any_province = {
                owner = ROOT
                OR = {
                    is_importing_trade_good = jade
                    is_importing_trade_good = silk
                }
            }
        }
        on_completion = {
            trigger_event = me_paropamisadae_macedon.6
            show_as_tooltip = {
                add_country_modifier = noble_trade_goods_prm
            }
        }
    }
    paropamisadae_missions_2_macedon_task_7 = { # Southern Trade
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_4 }
        allow = {
            any_area_province = {
                calc_true_if = {
                    amount >= 3
                    is_importing_trade_good = grain
                    is_importing_trade_good = sugar
                    is_importing_trade_good = spices
                    is_importing_trade_good = elephants
                    is_importing_trade_good = dye
                }
            }
        }
        on_completion = {
            trigger_event = me_paropamisadae_macedon.7
            show_as_tooltip = {
                add_country_modifier = citizen_trade_goods_prm
            }
        }
    }
    paropamisadae_missions_2_macedon_task_8 = { # Western Trade
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_4 }
        allow = {
            any_area_province = {
                calc_true_if = {
                    amount >= 4
                    is_importing_trade_good = camel
                    is_importing_trade_good = steppe_horses
                    is_importing_trade_good = horses
                    is_importing_trade_good = lapis
                    is_importing_trade_good = amber
                    is_importing_trade_good = silphium
                    is_importing_trade_good = cinnabar
                    is_importing_trade_good = incense
                    is_importing_trade_good = dates
                    is_importing_trade_good = papyrus
                }
            }
        }
        on_completion = {
            trigger_event = me_paropamisadae_macedon.8
            show_as_tooltip = {
                add_country_modifier = freemen_trade_goods_prm
            }
        }
    }
    paropamisadae_missions_2_macedon_task_9 = { # The Next Step
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_8 }
        allow = {
            current_ruler = {
                age >= 13
            }
        }
        on_completion = {
            trigger_event = me_paropamisadae_macedon.9
            show_as_tooltip = {
                custom_tooltip = "choices_for_paropam_ct"
            }
            set_variable = prm_macedon_missions_unlocked
        }
    }
    paropamisadae_missions_2_macedon_task_10 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_8 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.10
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_2_macedon_task_11 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_8 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.11
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_2_macedon_task_12 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_11 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.12
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_2_macedon_task_13 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_11 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.13
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_2_macedon_task_14 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_11 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.14
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_2_macedon_task_15 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_14 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.15
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_2_macedon_task_16 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_14 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.16
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_2_macedon_task_17 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_14 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.17
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_2_macedon_task_18 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_14 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.18
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_2_macedon_task_19 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_14 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.19
            show_as_tooltip = {

            }
        }
    }
    paropamisadae_missions_2_macedon_task_20 = {
        icon = "task_political"
        requires = { paropamisadae_missions_2_macedon_task_19 }
        allow = {}
        on_completion = {
            trigger_event = me_paropamisadae_macedon.20
            show_as_tooltip = {

            }
        }
        final = yes
    }
}