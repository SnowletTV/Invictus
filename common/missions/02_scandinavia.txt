scandinavian_missions_01 = {
    header = "mssion_gaul"
    icon = cde_gallic_tribe_negotiation

    repeatable = no
    chance = {
		factor = 100
	}

    potential = {
        NOT = { has_variable = mission_cooldown_var }
        is_subject = no
        has_civil_war = no
        primary_culture = scandian
    }

    abort = {
        ai_mission_back_out_trigger = yes
    }
    on_start = {
        trigger_event = me_scandinavia.1
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = mission_cooldown_var
            days = 7300
        }
    }
    on_completion = {
        complete_mission_effect = yes
        add_2_free_province_investments = yes
        capital_scope = {
            capital_formable_small_effect = yes
        }
    }

    scandinavian_missions_task_1 = { 
        icon = "task_battle"

        allow = {
            num_of_ships >= 5
            owns_or_subject_owns = 6035
            owns_or_subject_owns = 6037
            owns_or_subject_owns = 6038
            owns_or_subject_owns = 6039
            treasury >= 100
            manpower >= 2
            hidden:p:6038 = {
                has_building = port_building
            }
            war = no
        }

        highlight = {
			scope:province = {
        		OR = {
        			province_id = 6035
        			province_id = 6037
        			province_id = 6038
                    province_id = 6039
        		}
        	}
		}

        on_completion = {
            custom_tooltip = scandinavian_missions_task_1_tt
            trigger_event = me_scandinavia.3
        }
    }

    scandinavian_missions_task_2 = { 
        icon = "task_conquest"
        duration = 45

        bypass = {
            owns_or_subject_owns_area = herulia_area
        }

        allow = {
            political_influence >= 20
            war = no
        }

        highlight = {
            scope:province = {
                is_in_area = herulia_area
            }
        }

        on_completion = {
            show_as_tooltip = {
                add_political_influence = -20
            }
            custom_tooltip = scandinavian_missions_task_2_tt
            trigger_event = me_scandinavia.2
        }
    }

    scandinavian_missions_task_3 = { 
        icon = "task_calm"
        duration = 45
        
        bypass = {
            owns_or_subject_owns_area = west_gothia_area
        }

        allow = {
            political_influence >= 20
            war = no
        }

        highlight = {
            scope:province = {
                is_in_area = west_gothia_area
            }
        }

        on_completion = {
            show_as_tooltip = {
                add_political_influence = -20
            }
            custom_tooltip = scandinavian_missions_task_3_tt
            trigger_event = me_scandinavia.4
        }
    }

    scandinavian_missions_task_4 = { 
        icon = "task_diplomatic"
        duration = 45

        bypass = {
            owns_or_subject_owns_area = east_gothia_area
        }

        allow = {
            political_influence >= 20
            war = no
        }

        highlight = {
            scope:province = {
                is_in_area = east_gothia_area
            }
        }
        
        on_completion = {
            show_as_tooltip = {
                add_political_influence = -20
            }
            custom_tooltip = scandinavian_missions_task_4_tt
            trigger_event = me_scandinavia.5
        }
    }

    scandinavian_missions_task_5 = { 
        icon = "task_expansion"
        requires = { scandinavian_missions_task_1 scandinavian_missions_task_2 }

        highlight = {
			scope:province = {
				OR = {
                    is_in_area = ultima_thule_area
                    is_in_area = herulia_area
                }
			}
        }

        allow = {
            owns_or_subject_owns_area = ultima_thule_area
            owns_or_subject_owns_area = herulia_area
        }

        on_completion = {
            add_innovation = 1
            capital_scope = {
                create_state_pop = slaves
                create_state_pop = slaves
                create_state_pop = slaves
                create_state_pop = slaves
            }
            trigger_event = me_scandinavia.6
        }
    }

    scandinavian_missions_task_6 = { 
        icon = "task_battle"

        requires = { scandinavian_missions_task_3 scandinavian_missions_task_4 }

        highlight = {
			scope:province = {
				OR = {
                    is_in_area = west_gothia_area
                    is_in_area = east_gothia_area
                }
			}
        }

        allow = {
            owns_or_subject_owns_area = west_gothia_area
            owns_or_subject_owns_area = east_gothia_area
        }

        on_completion = {
            add_2_free_province_investments = yes
            capital_scope = {
                create_state_pop = tribesmen
                create_state_pop = tribesmen
                create_state_pop = tribesmen
            }
            trigger_event = me_scandinavia.7
        }
    }

    scandinavian_missions_task_7 = { 
        icon = "task_expansion"
        requires = { scandinavian_missions_task_5 scandinavian_missions_task_6 }

        allow = {
            custom_tooltip = {
                text = you_need_to_form_scandinavia
                tag = SCN
            }
        }

        on_completion = {
            current_ruler.family = {
                add_prestige = 400
                if = {
                    limit = {
                        exists = head_of_family
                    }
                    head_of_family = {
                        add_finesse = 1
                        add_popularity = 25
                    }
                }
            }
            current_ruler = {
                add_trait = ambitious
            }
            capital_scope = {
                capital_formable_small_effect = yes
            }
            add_centralization = 10
            trigger_event = me_scandinavia.8
        }
    }

    scandinavian_missions_task_8 = { 
        icon = "task_conquest"

        requires = { scandinavian_missions_task_5 }

        allow = {
            custom_tooltip = {
				text = salluvians_must_raid_into_massalia
				current_ruler = {
                    has_variable = nomadic_raid_cooldown
                }
			}
            num_of_ships >= 25
            custom_tooltip = {
                text = we_need_fast_sea_raid_tt
                has_military_bonus =  germanic_sea_path_2
            }
        }

        on_completion = {
            custom_tooltip = scandian_pillage_bonus_var_tt
            set_variable = scandian_pillage_bonus_var
            trigger_event = me_scandinavia.9
        }
    }

    scandinavian_missions_task_9 = { # Caledonian Claims
        icon = "task_calm"
        duration = 200

        requires = { scandinavian_missions_task_6 }

        highlight = {
			scope:province = {
				OR = {
                    is_in_area = caledonia_occidentalis_area
                    is_in_area = caledonia_septentrionalis_area
                    is_in_area = caledonia_meridionalis_area
                }
			}
        }

        allow = {
            custom_tooltip = {
                text = you_need_to_form_scandinavia
                tag = SCN
            }
            num_of_ships >= 50
            political_influence >= 75
        }

        on_completion = {
            add_political_influence = -75
            area:caledonia_occidentalis_area = {
				add_provincial_claim_effect = yes
			}
            area:caledonia_septentrionalis_area = {
				add_provincial_claim_effect = yes
			}
            area:caledonia_meridionalis_area = {
				add_provincial_claim_effect = yes
			}
            trigger_event = me_scandinavia.10
        }
    }

    scandinavian_missions_task_10 = {
        icon = "task_atlas"
        final = yes
        requires = { scandinavian_missions_task_7 }

        allow = {
            political_influence >= 75
            treasury >= 100
        }

        on_completion = {
            trigger_event = me_scandinavia.11
        }
    }

    scandinavian_missions_task_11 = { 
        icon = "task_religion"

        requires = { scandinavian_missions_task_6 }

        highlight = {
			scope:province = {
				is_in_region = scandinavia_region
			}
        }

        allow = {
            custom_tooltip = {
                text = scandinavian_missions_task_11_tt
                any_owned_province = {
        		    count >= 5
                    OR = {
                        is_in_region = scandinavia_region
                    }
        		    num_of_basic_settlement_infratructure_building = 1
        	    }
            }
        }

        on_completion = {
            add_country_modifier = {
                name = scandinavian_food_mod
                duration = -1
            }
            trigger_event = me_scandinavia.12
        }
    }

    scandinavian_missions_task_12 = { 
        icon = "task_political"
        requires = { scandinavian_missions_task_5 }

        highlight = {
        	scope:province = {
        		province_id = 6024
        	}
        }

        allow = {
            p:6024 = {
                has_building = latifundia_building
                num_goods_produced >= 2
            }
        }

        on_completion = {
            add_centralization = 5
            add_country_modifier = {
                name = scandinavian_horseworks
                duration = -1
            }
            trigger_event = me_scandinavia.13
        }
    }
}