tartessia2 = {
    header = "mission_image_generic_greek"
    icon = thrace_3

    repeatable = no
    chance = {
        factor = 5
    }
    ai_chance = { factor = 3 }

    potential = {
        has_completed_mission = tartessia 
    	NOT = { has_variable = tartessia2_mission_cooldown_var }
    }

    abort = {
		ai_mission_back_out_trigger = yes
	}
    on_start = {
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = tartessia2_mission_cooldown_var
            days = 7300
        }
    }

    on_completion = {
        complete_mission_effect = yes
        add_2_free_province_investments = yes
    }

    tartessia2_mission_inv_1_task = { # An Iberian Metropolis
        icon = "task_happiness"
        duration = 180

        highlight = {
			scope:province = {
				owner = root
                is_capital = yes
			}
        }

        requires = {tartessia2_mission_inv_21_task tartessia2_mission_inv_30_task tartessia2_mission_inv_35_task}

        allow = {
            treasury >= 200
            political_influence >= 25
            hidden:capital_scope = {
				num_of_used_building_slots >= 10
                total_population >= 70
                has_no_ongoing_construction = yes
			}
		}

        on_start = {
            add_treasury = -200
            add_political_influence = -25
        }

        on_completion = {
            capital_scope = {
                set_city_status = city_metropolis
			}
            trigger_event = me_tartessia.66
        }
    }

    tartessia2_mission_inv_2_task = { #Safe Behind Wooden Walls
        icon = "task_expansion"
        duration = 60

        highlight = {
			scope:province = {
				OR = {
					is_in_area = couneia_area
                    is_in_area = baetica_cordubensis_area
					is_in_area = turdulia_orientalis_area
                    is_in_area = oretania_area
                    is_in_area = malacita_area
                    is_in_area = bastetania_area
                    is_in_area = turdulia_occidentalis_area
                    is_in_area = turdetania_occidentalis_area
                    is_in_area = baetica_hispalensis_area
                    is_in_area = gaditanus_area
			    }
		    }
        }

        allow = {
            political_influence >= 30
        }

        on_start = {
            add_political_influence = -30
        }

        on_completion = {
            area:couneia_area = {
				add_provincial_claim_effect = yes
			}
            area:baetica_cordubensis_area = {
				add_provincial_claim_effect = yes
			}
            area:baetica_hispalensis_area = {
				add_provincial_claim_effect = yes
			}
            area:turdulia_orientalis_area = {
				add_provincial_claim_effect = yes
			}
            area:baetica_cordubensis_area = {
				add_provincial_claim_effect = yes
			}
            area:oretania_area = {
				add_provincial_claim_effect = yes
			}
            area:malacita_area = {
				add_provincial_claim_effect = yes
			}
            area:gaditanus_area = {
				add_provincial_claim_effect = yes
			}
            area:bastetania_area = {
				add_provincial_claim_effect = yes
			}
            area:turdulia_occidentalis_area = {
				add_provincial_claim_effect = yes
			}
            area:turdetania_occidentalis_area = {
				add_provincial_claim_effect = yes
			}
            trigger_event = me_tartessia.30
            show_as_tooltip = {

            }
        }
    }
    tartessia2_mission_inv_3_task = { # Tartessian Mills
        icon = "task_calm"

        highlight = {
			scope:province = {
                owner = root
				is_capital = yes
			}
        }

        requires = {tartessia2_mission_inv_6_task }

        allow = {
            hidden:capital_scope = {
                num_of_workshop_building >= 2
                num_of_commerce_building >= 2
                has_no_ongoing_construction = yes
            }
        }

        on_completion = {
            add_political_influence = 15
            add_research = {
                technology = civic_tech
                value = 15
            }
            capital_scope = {
                add_building_level = aqueduct_building
            }
            trigger_event = me_tartessia.36
            show_as_tooltip = {

            }
        }
    }
    tartessia2_mission_inv_4_task = { # Lunging Towards Lusitania
        icon = "task_battle"
        requires = {tartessia2_mission_inv_2_task }
        duration = 60

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = couneia_area
                    is_in_area = turdulia_occidentalis_area
                    is_in_area = turdulia_orientalis_area
                    is_in_area = turdetania_occidentalis_area
                }
            }
        }

        allow = {
            owns_percent_of_area = {
                PROVINCE = "p:1337"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1420"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1449"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1415"
                PERCENT = "0.75"
            }
        }

        on_completion = {
            add_military_experience = 20
            custom_tooltip = tartessia_claims_lusitania_tt
            region:lusitania_region= {
                hidden_effect = {
                    every_region_province = {
                        add_claim = root
                    }
                }
            }
            trigger_event = me_tartessia.40
            show_as_tooltip = {

            }
        }
    }

    tartessia2_mission_inv_5_task = { # Inquiries Into The Iberic Faith
        icon = "task_religion"
        requires = {tartessia2_mission_inv_2_task}
        duration = 60

        highlight = {
			scope:province = {
                owner = root
				is_capital = yes
			}
        }

        potential = {
			current_ruler = {
                NOT = { has_religion = carthaginian_pantheon }
            }
		}

        allow = {
            political_influence >= 10
            stability >= 60
            custom_tooltip = {
                text = religious_piety_tt
                capital_scope.state = {
                    calc_true_if = {
                        amount >= 1   
                        state_improvement_religious_trigger = yes      
                    }
                }
            } 
        }

        on_completion = {
            add_political_influence = -10
            trigger_event = me_tartessia.68
        }
    }
    tartessia2_mission_inv_6_task = { #Restore The Mines Of Tharsis
        icon = "task_conquest"
        requires = {tartessia2_mission_inv_2_task}

        icon = task_economical

		requires = {}

		highlight = {
			scope:province = {
				owner = root
				OR = {
					trade_goods = precious_metals
					trade_goods = iron
					trade_goods = base_metals
					trade_goods = stone
				}
			}
		}

		allow = {
			custom_tooltip = {
				text = have_mine_tartessia_tt
				any_owned_province = {
					count >= 3
					has_building = slave_mine_building
                    has_construction = no
				}
			}
		}

		on_completion = {
			random_owned_province = {
                limit = { num_of_slave_mine_building >= 1 }
                add_permanent_province_modifier = {
                    name = mines_of_tharsis_turdetania_mod
                }
            }
			add_country_modifier = {
				name = tharsis_mines_iron_boom
				duration = 3650
			}
			trigger_event = me_tartessia.3
		}
    }

    tartessia2_mission_inv_7_task = { #Tartessian Foundry
        icon = "task_diplomatic"
        requires = {tartessia2_mission_inv_3_task}

        highlight = {
			scope:province = {
                owner = root
				is_capital = yes
			}
        }

        allow = {
            hidden:capital_scope = {
                has_building = foundry_building
                has_no_ongoing_construction = yes
            }
        }

        on_completion = {
            add_country_modifier = {
                name = tartessian_foundry_building_modifier
                duration = 3650
            }
            current_ruler = {
                add_finesse = 1
            }
            trigger_event = me_tartessia.38
        }
    }

    tartessia2_mission_inv_8_task = { #Tartessian Coinage
        icon = "task_battle"
        requires = {tartessia2_mission_inv_6_task }

        highlight = {
			scope:province ={
				owner = root
				is_capital = yes
			}
		}

		allow = {
            treasury >= 50
            invention = hold_triumph_cost_modifier_inv
			capital_scope = {
				is_importing_trade_good = precious_metals    
			}
		}

		on_completion = {
            add_treasury = -50
			add_2_free_province_investments = yes
			current_ruler = {
				add_trait = midas_touched
			}
			capital_scope = {
				add_province_modifier = {
					name = turdetanian_coin_mint_mod
					duration = -1
				}
			}
			trigger_event = me_tartessia.8	
		}
    }
    tartessia2_mission_inv_9_task = { #Greek Trading Connections
        icon = "task_political"
       
        requires = {tartessia2_mission_inv_3_task tartessia2_mission_inv_8_task}

        highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }
        
        allow = {
			hidden:capital_scope = {
				has_city_status = yes
				num_of_commerce_building >= 3 
                has_no_ongoing_construction = yes
			}
			capital_scope.state = {
				calc_true_if = {
					amount >= 2   
					state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes    
				}
			}
		}
        
		on_completion = {
			capital_scope = {
				add_permanent_province_modifier = {
					name = greek_trade_connection_turdetania_mod
				}
			}
			trigger_event = me_tartessia.7
		}
    }

    tartessia2_mission_inv_10_task = { # Cinnabar-Colored Cloth
        icon = "task_conquest"
        requires = {tartessia2_mission_inv_15_task}

        highlight = {
			scope:province = {
				OR = {
                    province_id = 1406
                    province_id = 1439
                    province_id = 1444
                }
			}
        }

        allow = {
            p:1439 = {
                num_of_slave_mine_building >= 1
                total_population >= 10  
                has_no_ongoing_construction = yes
            }
            p:1406 = {
                num_of_latifundia_building >= 1
                total_population >= 10 
                has_no_ongoing_construction = yes
            }
            p:1444 = {
                num_of_latifundia_building >= 1
                total_population >= 10 
                has_no_ongoing_construction = yes
            }
        }

        on_completion = {
            create_country_treasure = {
                key = tartessian_cinnabar_robe_treasure
                icon = treasure_it_golden_cape_of_deceangli
                modifier = {
                    local_country_civilization_value = 5
                    local_happiness_for_same_religion_modifier = 0.05
                }
            }
            p:1439 = {
                add_permanent_province_modifier = {
                    name = tartessian_cinnabar_textiles_mod
                }
            }
            p:1406 = {
                add_permanent_province_modifier = {
                    name = tartessian_cinnabar_textiles_mod
                }
            }
            p:1444 = {
                add_permanent_province_modifier = {
                    name = tartessian_cinnabar_textiles_mod
                }
            }
            p:1439 = {
				add_road_towards = 1406
			}
            p:1439 = {
				add_road_towards = 1444
			}
            trigger_event = me_tartessia.62 
        }
    }
    tartessia2_mission_inv_11_task = { #Tartessian Metalworks
        icon = "task_conquest"
        requires = {tartessia2_mission_inv_6_task }

        highlight = {
			scope:province = {
				owner = root
				OR = {
					trade_goods = iron
					trade_goods = base_metals
				}
			}
		}

        allow = {
            custom_tooltip = {
				text = tartessia2_onuba_iron_base_metals_svalue_tt
				tartessia_onuba_iron_base_metals_svalue >= 20
			}
        }

        on_completion = {
            add_country_modifier = {
                name = onuban_metal_production_boom_2
                duration = 7300
            }
            trigger_event = me_tartessia.37
        }
    }

    tartessia2_mission_inv_12_task = { #Carthaginian Contacts
        icon = "task_diplomatic"
        requires = {tartessia2_mission_inv_8_task}

        highlight = {
			scope:province = {
				province_id = 3061
			}
        }

        bypass = {
            c:CAR = {
                NOT = {	owns = 3061 }
            }
        }

		allow = {
			num_of_ships >= 25 
			hidden:p:3061.governor = {
				is_friend = root.current_ruler
			}
		}

		on_completion = {
			add_country_modifier = {
				name = carthaginian_turdetanian_connection_mod
				duration = 3650
			}
			trigger_event = me_tartessia.2

		}
    }
    tartessia2_mission_inv_13_task = { # A Cosmopolitan City
        icon = "task_apollo"

        requires = {tartessia2_mission_inv_9_task tartessia2_mission_inv_12_task}

        highlight = {
			scope:province = {
                owner = root
				is_capital = yes
			}
        }

        allow = {
            hidden:capital_scope = {
                has_building = forum_building
                has_no_ongoing_construction = yes
                civilization_value >= 40 
            }
            hidden:capital_scope.state = {
                incoming_trade_routes >= 10
                custom_tooltip = tartessian_incoming_trade_route_svalue_tt
            }
            
        }

        on_completion = {
            add_innovation = 2
            add_treasury = 100
            capital_scope = {
                while = {
					count = 1
					define_pop = {
						type = freemen
						culture = massalian
						religion = roman_pantheon
					}
				}
			}
            capital_scope = {
				while = {
					count = 1
					define_pop = {
						type = citizen
						culture = carthaginian
						religion = carthaginian_pantheon
					}
				}
                while = {
					count = 1
					define_pop = {
						type = freemen
						culture = nuragic
						religion = nuragic_pantheon
					}
				}
			}
            trigger_event = me_tartessia.60
            show_as_tooltip = {
            }
        }
    }

    tartessia2_mission_inv_14_task = { # Iberian Gods
        icon = "task_happiness"
        requires = {tartessia2_mission_inv_5_task}

        highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }

        potential = {
            current_ruler = {
                NOT = { has_religion = carthaginian_pantheon }
            }
        }

        allow = {
            invention = happiness_for_wrong_group_modifier_inv_1    
            current_ruler = {
                popularity >= 70
            }
        }

        on_completion = {
            trigger_event = me_tartessia.29
            show_as_tooltip = {
                change_religion_effect = { RELIGION = animism }
            }
            capital_scope = {
                if = {
                    limit = {
                        any_pops_in_province = {
                            OR = {
                                pop_type = citizen
                                pop_type = freemen
                                pop_type = tribesmen
                                pop_type = nobles
                                pop_type = slaves
                            }
                        }
                    }
                    while = {
                        count = 10
                        limit = {
                            any_pops_in_province = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                    pop_type = nobles
                                    pop_type = slaves
                                }
                            }
                        }
                        random_pops_in_province = {
                            limit = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                    pop_type = nobles
                                    pop_type = slaves
                                }
                            }
                            set_pop_religion = animism
                        }
                    }
                }
            }
        }
    }

    tartessia2_mission_inv_15_task = { #Turdetanian Armor
        icon = "task_expansion"
        
        requires = {tartessia2_mission_inv_11_task}

        highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }

        allow = {
            military_experience >= 10
            hidden:capital_scope.state = {
                trade_good_surplus = {
                    target = iron
                    value >= 3
                }
                trade_good_surplus = {
                    target = base_metals
                    value >= 3
                }
            }
        }

        on_completion = { 
            trigger_event = me_tartessia.15
            show_as_tooltip = {
                add_military_experience = -10
                add_country_modifier = {
                    name = turdetanian_warriors
                    duration = -1
                }
            }
        }
    }

    tartessia2_mission_inv_16_task = { # Contesting Contestania
        icon = "task_expansion"
        duration = 60
        requires = {tartessia2_mission_inv_2_task}

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = turdulia_orientalis_area
                    is_in_area = oretania_area
                    is_in_area = bastetania_area
                    is_in_area = baetica_cordubensis_area
                }
            }
        }

        allow = {    
            owns_percent_of_area = {
                PROVINCE = "p:1381"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1397"
                PERCENT = "0.75"
            }
        }
        
        on_completion = {
            add_military_experience = 20
            custom_tooltip = tartessia_claims_contestania_tt
                region:contestania_region= {
                    hidden_effect = {
                        every_region_province = {
                            add_claim = root
                        }
                    }
                }
            trigger_event = me_tartessia.31
        }
    }

    tartessia2_mission_inv_17_task = { #Obtaining Olisipo
        icon = "task_diplomatic"
        duration = 90
        requires = {tartessia2_mission_inv_19_task}

        highlight = {
			scope:province = {
				province_id = 1319
			}
        }

        allow = {
            owns_or_subject_owns = 1319
            hidden:p:1319 = {
                has_city_status = yes
                num_of_port_building >= 2
                free_building_slots >= 1
                has_no_ongoing_construction = yes 
            }
        }

        on_completion = {
            p:1319 = {
                add_building_level = port_building
                add_permanent_province_modifier = {
                    name = tartessia_olisipo_military_harbor_mod
                    duration = -1
                }
            }
            trigger_event = me_tartessia.42
        }
    }

    tartessia2_mission_inv_18_task = { # pirates of barbarion
        icon = "task_expansion"
        requires = {tartessia2_mission_inv_17_task}

        highlight = {
            scope:province = {
                province_id = 1319
            }
        }

        allow = {
            owns_or_subject_owns = 1319
            custom_tooltip = {
                text = we_need_raid_on_neighbors_tradition
                has_military_bonus = celt_iberian_path_c_3
            }
            treasury >= 35
        }

        on_completion = {
            add_treasury = -35
            p:1319 = {
                add_permanent_province_modifier = {
                    name = pirate_haven_modifier
                    duration = -1
                }
            }
            add_country_modifier = {
                name = tartessian_pirate_traditions_mod
                duration = -1
            }
            trigger_event = me_tartessia.43
        }
    }

    tartessia2_mission_inv_19_task = { # Red-Glazed Pottery
        icon = "task_economical"
        requires = {tartessia2_mission_inv_4_task}

        highlight = {
            scope:province = {
                OR = {
                    province_id = 1432
                    province_id = 1434
                }
            }
        }

        allow = {    
            p:1432 = {
                trigger_if = {
                    limit = {
                        has_province_rank = settlement
                    }
                    num_of_latifundia_building >= 1
                }
                trigger_else = {
                    num_of_workshop_building >= 2
                }
                num_goods_produced >= 2  
                has_no_ongoing_construction = yes
            }
            p:1434 = {
                trigger_if = {
                    limit = {
                        has_province_rank = settlement
                    }
                    num_of_latifundia_building >= 1
                }
                trigger_else = {
                    num_of_workshop_building >= 2
                }
                num_goods_produced >= 2  
                has_no_ongoing_construction = yes
            }
        }

        on_completion = {
            p:1432 = {
                add_permanent_province_modifier = {
                    name = tartessian_red_glazed_mod
                }
            }
            p:1434 = {
                add_permanent_province_modifier = {
                    name = tartessian_red_glazed_mod
                }
            }
            trigger_event = me_tartessia.41
        }
    }

    tartessia2_mission_inv_20_task = { #Tartessian Groves
        icon = "task_happiness"
        
        requires = {tartessia2_mission_inv_6_task}

        highlight = {
            scope:province = {
                OR = {
                    province_id = 1386
                    province_id = 1429
                }
            }
        }

        allow = {
            hidden:p:1386 = {
                has_building = basic_settlement_infratructure_building
                total_population >= 10  
                has_no_ongoing_construction = yes
            }
            hidden:p:1429 = {
                has_building = basic_settlement_infratructure_building
                total_population >= 10
                has_no_ongoing_construction = yes
            }
        }

        on_completion = { 
            p:1386 = {
                add_permanent_province_modifier = {
                    name = tartessian_fruit_groves_mod 
                }
            }
            p:1429 = {
                add_permanent_province_modifier = {
                    name = tartessian_fruit_groves_mod 
                }
            }
            trigger_event = me_tartessia.35
        }
    }

    tartessia2_mission_inv_21_task = { # Stone Faces And Friezes
        icon = "task_religion"
        requires = {tartessia2_mission_inv_13_task tartessia2_mission_inv_10_task}

        highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }

        allow = {
            religious_tech >= 4
            political_influence >= 25
            treasury >= 125     
            capital_scope = {
                is_importing_trade_good = marble
                has_building = temple_building
                has_no_ongoing_construction = yes
            }
            hidden:capital_scope.state = {
                trade_good_surplus = {
                    target = stone
                    value >= 3
                }
            }
            hidden:capital_scope.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_religious_trigger = yes
                }
            }
        }

        on_completion = {
            add_political_influence = -25
            add_treasury = -125
            capital_scope = {
                add_permanent_province_modifier = {
                    name = tartessian_stone_face_relief_mod
                }
            }
            trigger_event = me_tartessia.63
            show_as_tooltip = {

            }
        }
    }

    tartessia2_mission_inv_22_task = { # Contestanian Coast
        icon = "task_expansion"
        duration = 365
        requires = {tartessia2_mission_inv_16_task}

        highlight = {
            scope:province = {
                OR = {
                    province_id = 1029
                    province_id = 1033
                    province_id = 1036
                    province_id = 1031
                }
            }
        }

        allow = {
            owns_or_subject_owns = 1029
            owns_or_subject_owns = 1033
            owns_or_subject_owns = 1036
            owns_or_subject_owns = 1031
        }

        on_completion = {
            p:1036 = {
                add_road_towards = 1035
            }
            p:1035 = {
                add_road_towards = 1034
            }
            p:1034 = {
                add_road_towards = 1033
            }
            p:1033 = {
                add_road_towards = 1037
            }
            p:1037 = {
                add_road_towards = 1031
            }
            p:1031 = {
                add_road_towards = 1032
            }
            p:1032 = {
                add_road_towards = 1030
            }
            p:1030 = {
                add_road_towards = 1029
            }
            trigger_event = me_tartessia.32
        }
    }

    tartessia2_mission_inv_23_task = { # Gallaecia Is The Goal
        icon = "task_political"
        requires = {tartessia2_mission_inv_4_task}

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = aebocosia_area
                    is_in_area = vettonia_septentrionalis_area
                    is_in_area = vettonia_meridionalis_area
                    is_in_area = oppidania_area
                }
            }
        }

        allow = {
            owns_percent_of_area = {
                PROVINCE = "p:1050"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1179"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1462"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1293"
                PERCENT = "0.75"
            }
        }

        on_completion = {
            trigger_event = me_tartessia.46
            add_military_experience = 20
            custom_tooltip = tartessia_claims_gallaecia_tt
            region:gallaecia_region= {
                hidden_effect = {
                    every_region_province = {
                        add_claim = root
                    }
                }
            }
        }
    }

    tartessia2_mission_inv_24_task = { # Taking Tarraconensis
        icon = "task_political"
        requires = {tartessia2_mission_inv_16_task}

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = edetania_area
                    is_in_area = celtiberia_meridionalis_area
                    is_in_area = contestania_septentrionalis_area
                    is_in_area = contestania_meridionalis_area
                    is_in_area = mastiania_area
                }
            }
        }

        allow = {
            owns_percent_of_area = {
                PROVINCE = "p:1236"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1233"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1262"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1031"
                PERCENT = "0.75"
            }
            owns_percent_of_area = {
                PROVINCE = "p:1036"
                PERCENT = "0.75"
            }
        }

        on_completion = {
            trigger_event = me_tartessia.51
            add_military_experience = 20
            custom_tooltip = tartessia_claims_tarraconensis_tt
            region:tarraconensis_region= {
                hidden_effect = {
                    every_region_province = {
                        add_claim = root
                    }
                }
            }
        }
    }

    tartessia2_mission_inv_25_task = { #Rivers of Gold
        icon = "task_economical"
        requires = {tartessia2_mission_inv_7_task }

        highlight = {
            scope:province = {
                owner = root
                trade_goods = precious_metals
            }
        }

        allow = {
            custom_tooltip = {
                text = tartessia2_precious_metals_svalue_tt
                tartessia_precious_metals_svalue >= 20
            }
        }

        on_completion = {
            add_treasury = 500
            add_stability = 5
            add_country_modifier = {
                name = tartessian_rivers_of_gold_mod
                duration = 3650
            }
            current_ruler = {
                add_trait = silver_tongued
            }
            trigger_event = me_tartessia.50
        }
    }

    tartessia2_mission_inv_26_task = { # the broken tower
        icon = "task_battle"
        requires = {tartessia2_mission_inv_22_task }

        highlight = {
            scope:province = {
                province_id = 1031
            }
        }

        allow = {
            owns_or_subject_owns = 1031
            political_influence >= 25
        }

        on_completion = {
            p:1031 = {
                change_province_name = "Spasmenos Pyrgos"
            }
            hidden_effect = {
                p:1031 = {
                    create_country = {
                        name = {
                            name = DIANIUM_FEUDATORY_NAME
                            adjective = DIANIUM_FEUDATORY_ADJECTIVE
                        }
                        change_country_color = olympian_white
                        if = {
                            limit = {
                                NOT = {
                                    primary_culture = turdetanian
                                }
                            }
                            set_primary_culture_cleanup_effect = {
                                NEW_PRIMARY_CULTURE = turdetanian
                                MAKE_OLD_CULTURE_INTEGRATED = yes
                            }
                        }	
                        set_country_religion = roman_pantheon
                        change_government = oligarchic_republic
                        set_country_heritage = turdetanian_heritage
                        save_scope_as = dianium_country_scope
                    }
                }
                make_subject = {
                    target = scope:dianium_country_scope
                    type = feudatory
                }
                reverse_add_opinion = {
                    modifier = opinion_friendly_neighbor
                    target = scope:dianium_country_scope
                }
            }
            p:1031 = {
                add_province_modifier = {
                    name = tartessian_dianium_feudatory_mod
                    duration = -1
                }
            }
            trigger_event = me_tartessia.55 
        }
    }

    tartessia2_mission_inv_27_task = { # Contestanian Horses
        icon = "task_conquest"
        
        requires = {tartessia2_mission_inv_22_task}

        highlight = {
            scope:province = {
                OR = {
                    province_id = 1233
                    province_id = 1266
                    province_id = 1267
                }
            }
        }

        allow = {
            custom_tooltip = {
                text = we_need_superior_horses_tradition_tt
                has_military_bonus = celt_iberian_path_d_1
            }
            hidden:p:1233 = {
                trigger_if = {
                    limit = {
                        has_province_rank = settlement
                    }
                    num_of_latifundia_building >= 1
                }
                trigger_else = {
                    num_of_workshop_building >= 2
                }
                has_no_ongoing_construction = yes
                total_population >= 10   
            }
            hidden:p:1266 = {
                trigger_if = {
                    limit = {
                        has_province_rank = settlement
                    }
                    num_of_latifundia_building >= 1
                }
                trigger_else = {
                    num_of_workshop_building >= 2
                }
                has_no_ongoing_construction = yes
                total_population >= 10 
            }
            hidden:p:1267 = {
                trigger_if = {
                    limit = {
                        has_province_rank = settlement
                    }
                    num_of_latifundia_building >= 1
                }
                trigger_else = {
                    num_of_workshop_building >= 2
                }
                has_no_ongoing_construction = yes
                total_population >= 10 
            }
        }

        on_completion = { 
            add_country_modifier = {
                name = contestanian_stud_farms_tartessia_mod
                duration = -1
            }
            trigger_event = me_tartessia.33
        }
    }

    tartessia2_mission_inv_28_task = { # Uniting The Shrines
        icon = "task_artemis"
        requires = {tartessia2_mission_inv_14_task }

        highlight = {
            scope:province = {
                OR = {
                    province_id = 1287
                    province_id = 1254
                    province_id = 1068
                    province_id = 1332
                    province_id = 1428
                    province_id = 1051
                    province_id = 1102
                }
            }
        }

        allow = {
            owns_or_subject_owns = 1287
            owns_or_subject_owns = 1254
            owns_or_subject_owns = 1068
            owns_or_subject_owns = 1332
            owns_or_subject_owns = 1428
            owns_or_subject_owns = 1051
            owns_or_subject_owns = 1102
        }

        on_completion = {
            add_stability = 5
            capital_scope = {
                add_building_level = temple_building
            }
            add_country_modifier = {
                name = tartessian_restores_iberian_faith_mod
                duration = 7300
            }
            trigger_event = me_tartessia.69
        }
    }

    tartessia2_mission_inv_29_task = { # The Wandering Strategos
        icon = "task_zeus_cornucopia"
       
        requires = {tartessia2_mission_inv_9_task tartessia2_mission_inv_15_task}

        highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }
        
        potential = {
            exists = c:GLT
        }

        allow = {
            military_tech >= 3
            custom_tooltip = {
                text = we_need_all_gods_are_welcome_tradition_tt
                has_military_bonus = iberian_central_2_path_1
            }
			hidden:capital_scope = {
				has_building = military_building
                has_no_ongoing_construction = yes
			}
		}
        
		on_completion = {
			custom_tooltip = "wandering_hoplite_tartessia_tt"
			hidden_effect = {
				create_character = {
                    first_name = "Achaeus"
                    set_culture = macedonian
                    age = 33
					add_martial = 8
                    add_trait = aggressive
                    set_as_minor_character = this
                    save_scope_as = achaeus_wandering_greek_tartessian_chad
				}
			}
			trigger_event = me_tartessia.39
		}
    }

    tartessia2_mission_inv_30_task = { # the academy 
        icon = "task_calm"

        highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }

        requires = {tartessia2_mission_inv_13_task }

        allow = {
            oratory_tech >= 4
            hidden:capital_scope = {
                num_of_library_building >= 3 
                num_of_academy_building >= 3
                has_no_ongoing_construction = yes
            }
        }

        on_completion = {
            capital_scope = {
    			while = {
    				count = 2
    				define_pop = {
    					type = citizen
    					culture = athenian
    					religion = roman_pantheon
    				}
    				define_pop = {
    					type = freemen
    					culture = athenian
    					religion = roman_pantheon
    				}
    			}
                add_permanent_province_modifier = {
                    name = tartessian_greek_academy_mod
                }
            }
            trigger_event = me_tartessia.64
            show_as_tooltip = {

            }
        }
    }

    tartessia2_mission_inv_31_task = { #Tensions In The Mare Balearium
        icon = "task_expansion"
        requires = {tartessia2_mission_inv_26_task }

        highlight = {
            scope:province = {
                province_id = 1464
            }
        }

        allow = {
            political_influence >= 15
            num_of_ships >= 40
            war = no 
        }

        bypass = {
            owns_or_subject_owns = 1464
        }

        on_completion = {
            area:balearides_area = {
                add_provincial_claim_effect = yes
            }
            declare_war_with_wargoal = {
                war_goal = conquer_wargoal
                province = p:1464
                target = p:1464.owner
            }
            trigger_event = me_tartessia.56 
        }
    }

    tartessia2_mission_inv_32_task = { #A Tartessian Colony
        icon = "task_diplomatic"
        duration = 30
        requires = {tartessia2_mission_inv_31_task }

        highlight = {
            scope:province = {
                province_id = 1464
            }
        }

        allow = {
            owns_or_subject_owns = 1464
            war = no
        }

        on_completion = {
            custom_tooltip = we_will_get_to_choose_a_tartessian_colony_tt
            trigger_event = me_tartessia.57
        }
    }

    tartessia2_mission_inv_33_task = { #Restorers Of The Faith
        icon = "task_religion"
        duration = 90
        requires = {tartessia2_mission_inv_41_task }

        highlight = {
            scope:province = {
                OR = {
                    province_id = 1428
                    province_id = 1218
                    province_id = 1051
                    province_id = 1102
                    province_id = 1332
                    province_id = 1213
                    scope:province = {
                        owner = root
                        is_capital = yes
                    }
                }
            }
        }

        allow = {
            political_influence >= 75
            current_ruler = {
                zeal >= 7
            }
            hidden:capital_scope.state = {
                trade_good_surplus = {
                    target = incense
                    value >= 2
                }
            }
        }

        on_completion = {
            current_ruler = {
                force_add_trait = devout
                deify_character = {
                    deity = deity:omen_eacus
                    country = ROOT
                }
            }
            add_political_influence = -75
            p:1428 = {
                if = {
                    limit = {
                        any_pops_in_province = {
                            OR = {
                                pop_type = citizen
                                pop_type = freemen
                                pop_type = tribesmen
                            }
                        }
                    }
                    while = {
                        count = 10
                        limit = {
                            any_pops_in_province = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                        }
                        random_pops_in_province = {
                            limit = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                            set_pop_religion = animism
                        }
                    }
                }
            }
            p:1051 = {
                if = {
                    limit = {
                        any_pops_in_province = {
                            OR = {
                                pop_type = citizen
                                pop_type = freemen
                                pop_type = tribesmen
                            }
                        }
                    }
                    while = {
                        count = 10
                        limit = {
                            any_pops_in_province = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                        }
                        random_pops_in_province = {
                            limit = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                            set_pop_religion = animism
                        }
                    }
                }
            }
            p:1102 = {
                if = {
                    limit = {
                        any_pops_in_province = {
                            OR = {
                                pop_type = citizen
                                pop_type = freemen
                                pop_type = tribesmen
                            }
                        }
                    }
                    while = {
                        count = 10
                        limit = {
                            any_pops_in_province = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                        }
                        random_pops_in_province = {
                            limit = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                            set_pop_religion = animism
                        }
                    }
                }
            }
            p:1332 = {
                if = {
                    limit = {
                        any_pops_in_province = {
                            OR = {
                                pop_type = citizen
                                pop_type = freemen
                                pop_type = tribesmen
                            }
                        }
                    }
                    while = {
                        count = 10
                        limit = {
                            any_pops_in_province = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                        }
                        random_pops_in_province = {
                            limit = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                            set_pop_religion = animism
                        }
                    }
                }
            }
            p:1218 = {
                if = {
                    limit = {
                        any_pops_in_province = {
                            OR = {
                                pop_type = citizen
                                pop_type = freemen
                                pop_type = tribesmen
                            }
                        }
                    }
                    while = {
                        count = 10
                        limit = {
                            any_pops_in_province = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                        }
                        random_pops_in_province = {
                            limit = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                            set_pop_religion = animism
                        }
                    }
                }
            }
            p:1213 = {
                if = {
                    limit = {
                        any_pops_in_province = {
                            OR = {
                                pop_type = citizen
                                pop_type = freemen
                                pop_type = tribesmen
                            }
                        }
                    }
                    while = {
                        count = 10
                        limit = {
                            any_pops_in_province = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                        }
                        random_pops_in_province = {
                            limit = {
                                OR = {
                                    pop_type = citizen
                                    pop_type = freemen
                                    pop_type = tribesmen
                                }
                            }
                            set_pop_religion = animism
                        }
                    }
                }
            }
            trigger_event = me_tartessia.71
        }
    }

    tartessia2_mission_inv_34_task = { #Lusitanian Furs
        icon = "task_economical"
        requires = {tartessia2_mission_inv_17_task}

        highlight = {
			scope:province = {
				is_in_region = lusitania_region
				trade_goods = fur
			}
		}

        allow = {
            custom_tooltip = {
                text = tartessia2_lusitanian_furs_svalue_tt
                tartessia_lusitanian_furs_svalue >= 17
            }
        }

        on_completion = {
            add_country_modifier = {
                name = tartessian_lusitanian_furs_modifier
                duration = 3650
            }
            create_country_treasure = {
                key = "lusitanian_tartessian_fur_treasure"
                icon = "treasure_it_santones_ceremonial_helmet"
                modifier = {
					local_manpower = 2
	                local_food_capacity = 500
	                local_unrest = -1
                }
            }
            trigger_event = me_tartessia.44
        }
    }

    tartessia2_mission_inv_35_task = { # Punic Markets
        icon = "task_happiness"
        duration = 90
        requires = {tartessia2_mission_inv_12_task tartessia2_mission_inv_13_task}

        highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }
        
        allow = { 
            has_monthly_income >= 8
            civic_tech >= 5
            capital_scope = {
                state = {
                    outgoing_trade_routes >= 3
                    incoming_trade_routes >= 3
                }
            }
            hidden:capital_scope.state = {
                trade_good_surplus = {
                    target = marble
                    value >= 2
                }
            }
        }
        
        on_completion = {
            capital_scope = {
                add_permanent_province_modifier = {
                    name = tartessian_punic_market_mod
                }
            }
            capital_scope = {
                while = {
                    count = 1
                    define_pop = {
                        type = nobles
                        culture = carthaginian
                        religion = carthaginian_pantheon
                    }
                }
            }
            trigger_event = me_tartessia.61
        }
    }
    tartessia2_mission_inv_36_task = { #Gallaecian Fisheries
        icon = "task_expansion"
        
        requires = {tartessia2_mission_inv_23_task}

        highlight = {
            scope:province = {
                OR = {
                    province_id = 1118
                    province_id = 1107
                    province_id = 1099
                    province_id = 1133
                }
            }
        }

        allow = {
            owns_or_subject_owns = 1118
            owns_or_subject_owns = 1107
            owns_or_subject_owns = 1099
            owns_or_subject_owns = 1133
            hidden:p:1118 ={
                trigger_if = {
                    limit = {
                        has_province_rank = settlement
                    }
                    num_of_basic_settlement_infratructure_building >= 1
                }
                trigger_else = {
                    num_of_population_building >= 2
                }
                has_no_ongoing_construction = yes
            }
            hidden:p:1107 ={
                trigger_if = {
                    limit = {
                        has_province_rank = settlement
                    }
                    num_of_basic_settlement_infratructure_building >= 1
                }
                trigger_else = {
                    num_of_population_building >= 2
                }
                has_no_ongoing_construction = yes
            }
            hidden:p:1099 ={
                trigger_if = {
                    limit = {
                        has_province_rank = settlement
                    }
                    num_of_basic_settlement_infratructure_building >= 1
                }
                trigger_else = {
                    num_of_population_building >= 2
                }
                has_no_ongoing_construction = yes
            }
            hidden:p:1133 ={
                trigger_if = {
                    limit = {
                        has_province_rank = settlement
                    }
                    num_of_basic_settlement_infratructure_building >= 1
                }
                trigger_else = {
                    num_of_population_building >= 2
                }
                has_no_ongoing_construction = yes
            }
        }

        on_completion = {
            current_ruler = {
                force_add_trait = oarmaster
            }
            p:1118 ={
                add_permanent_province_modifier = {
                    name = tartessian_gallaecian_fisheries_mod
                }
            }
            p:1107 ={
                add_permanent_province_modifier = {
                    name = tartessian_gallaecian_fisheries_mod
                }
            } 
            p:1099 ={
                add_permanent_province_modifier = {
                    name = tartessian_gallaecian_fisheries_mod
                }
            }
            p:1133 ={
                add_permanent_province_modifier = {
                    name = tartessian_gallaecian_fisheries_mod
                }
            }  
            trigger_event = me_tartessia.47
        }
    }

    tartessia2_mission_inv_37_task = { #Soldiers From Segeda
        icon = "task_battle"
        requires = {tartessia2_mission_inv_24_task }

        highlight = {
            scope:province = {
                province_id = 1213
            }
        }

        allow = {
            p:1213 = {
                num_of_military_building >= 3
                num_of_freemen >= 7
                has_no_ongoing_construction = yes
            }
            custom_tooltip = {
                text = we_need_iberian_mercenaries_tradition_tt
                has_military_bonus = iberian_central_path_3
            }
        }

        on_completion = {
            add_military_experience = 10
            add_country_modifier = {
                name = tartessia_segeda_military_manpower_mod
                duration = 3650
            }
            trigger_event = me_tartessia.53
        }
    }

    tartessia2_mission_inv_38_task = { #The Wisest Man In All Tartessia
        icon = "task_athena"
        duration = 365
        requires = {tartessia2_mission_inv_30_task }

        highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }


        allow = {
            political_influence >= 100
            treasury >= 500
            current_ruler = {
                finesse >= 8
            }
        }

        on_completion = {
            add_political_influence = -100
            add_treasury = -500
            add_research = {
                technology = military_tech
                value = 50
            }
            add_research = {
                technology = civic_tech
                value = 50
            }
            add_research = {
                technology = oratory_tech
                value = 50
            }
            add_research = {
                technology = religious_tech
                value = 50
            }
            trigger_event = me_tartessia.65
        }
    }

    tartessia2_mission_inv_39_task = { # Gallaecian Cinnabar
        icon = "task_battle"
        duration = 180
        requires = {tartessia2_mission_inv_36_task }

        highlight = {
            scope:province = {
                OR = {
                    province_id = 1116
                    province_id = 1117
                }
            }
        }

        allow = {
            p:1116 = {
                trigger_if = {
                    limit = {
                        has_province_rank = settlement
                    }
                    num_of_slave_mine_building >= 1
                }
                trigger_else = {
                    num_of_workshop_building >= 2
                }
                total_population >= 10 
                has_no_ongoing_construction = yes
            }
        }

        on_completion = {
            p:1116 = {
                add_permanent_province_modifier = {
                    name = tartessian_gallaecian_cinnabar_textiles_mod
                }
            }
            p:1117 ={
                set_trade_goods = cinnabar 
            }
            trigger_event = me_tartessia.48
        }
    }

    tartessia2_mission_inv_40_task = { #Renowned Cinnabar Exporters
        icon = "task_economical"
        requires = {tartessia2_mission_inv_39_task}

        highlight = {
			scope:province = {
				is_in_region = lusitania_region
                is_in_region = baetica_region
				trade_goods = cinnabar
			}
		}

        allow = {
            custom_tooltip = {
                text = tartessia2_cinnabar_svalue_tt
                tartessia_cinnabar_svalue >= 10
            }
        }

        on_completion = {
            capital_scope = {
                add_civilization_value = 10
            }
            add_country_modifier = {
                name = prestigious_tartessian_cinnabar_mod
                duration = -1
            }
            trigger_event = me_tartessia.49
        }
    }

    tartessia2_mission_inv_41_task = { # Purifying The Land From Idols
        icon = "task_diplomatic"
        duration = 180
        requires = {tartessia2_mission_inv_28_task }
        
        highlight = {
            scope:province = {
                OR = {
                    province_id = 1149
                    province_id = 1199
                    province_id = 1016
                    province_id = 1099
                }
            }
        }
        
        allow = {
            owns_or_subject_owns = 1149
            owns_or_subject_owns = 1199
            owns_or_subject_owns = 1016
            owns_or_subject_owns = 1099
            hidden:p:1149 = {
                deity:omen_berobreo = { has_holy_site = no }
            }
            hidden:p:1199 = {
                deity:omen_vaelicus = { has_holy_site = no }
            }
            hidden:p:1016 = {
                deity:omen_lobegi = { has_holy_site = no } 
            }
            hidden:p:1099 = {
                deity:omen_mari = { has_holy_site = no }
            }
        }
        
        on_completion = {
            current_ruler = {
                force_add_trait = zealous
                add_nickname = "'The Faithful One'"
            }
            add_country_modifier = {
                name = tartessian_build_holy_shrines_mod
                duration = 3650
            }
            trigger_event = me_tartessia.70
        }
    }
    
    tartessia2_mission_inv_42_task = { # Emporion Glass
        icon = "task_economical"
        requires = {tartessia2_mission_inv_37_task}

        highlight = {
			scope:province = {
				OR = {
                    province_id = 1000
                    province_id = 1001
                }
			}
		}

        allow = {
            owns_or_subject_owns = 1000
            owns_or_subject_owns = 1001
            hidden:p:1000 = {
                num_goods_produced >= 3 
            }
        }

        on_completion = {
            add_2_free_province_investments = yes
            capital_scope = {
                add_permanent_province_modifier = {
                    name = tartessian_emporion_glass_mod
                }
            }
            p:1001 = {
                set_trade_goods = glass
            }
            trigger_event = me_tartessia.54
        }
    }

    tartessia2_mission_inv_43_task = { #The Barbarian's City
        icon = "task_conquest"
        requires = {tartessia2_mission_inv_18_task tartessia2_mission_inv_34_task}

        highlight = {
			scope:province = {
				province_id = 1318
			}
		}

        allow = {
            owns_or_subject_owns = 1318
        }

        bypass = {
            p:1318 ={
                has_city_status = yes
                total_population >= 15 
            }
        }

        on_completion = {
            p:1318 = {
                found_city_effect = yes
                add_building_level = commerce_building
                add_permanent_province_modifier = {
                    name = tartessia_olisipo_military_harbor_mod
                }
            }
            trigger_event = me_tartessia.45
        }
    }
    
    tartessia2_mission_inv_44_task = { #conquerors of Iberia
        icon = "task_heracles"
        final = yes

        requires = {tartessia2_mission_inv_43_task tartessia2_mission_inv_32_task}

        highlight = {
			scope:province = {
				OR = {
					province_id = 1036
					province_id = 1031
					province_id = 1278
					province_id = 1026
					province_id = 1017
					province_id = 1016
					province_id = 1011
					province_id = 1308
					province_id = 1000
					province_id = 1024
					province_id = 1213
					province_id = 1046
					is_in_area = callaecia_meridionalis_area
					is_in_area = callaecia_septentrionalis_area
					is_in_area = asturia_septentrionalis_area
					is_in_area = baetica_hispalensis_area
					is_in_area = gaditanus_area
				}
			}
		}

        allow = {
            custom_tooltip = {
                text = you_need_to_form_greater_iberia_tt
                tag = HBR
            }
        }

        on_completion = {
            add_military_experience = 40
            add_innovation = 3
            area:aquitania_occidentalis_area = {
				add_provincial_claim_effect = yes
            }
            area:aquitania_orientalis_area = {
				add_provincial_claim_effect = yes
            }
            area:biggeronia_area = {
				add_provincial_claim_effect = yes
            }
            area:mauretania_tingitana_septentrionalis_area = {
				add_provincial_claim_effect = yes
            }
            area:mauretania_tingitana_meridionalis_area = {
				add_provincial_claim_effect = yes
            }
            area:rif_area = {
				add_provincial_claim_effect = yes
            }
            trigger_event = me_tartessia.72
        }
    }
    
    tartessia2_mission_inv_45_task = { # Sogdian Refugees
        icon = "task_calm"
        requires = {tartessia2_mission_inv_35_task}

        highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }

        potential = {
            c:SOG = {
                has_land = no
            }
        }


        allow = {  
        }

        on_completion = {
            create_unit = {
                navy = no
                name = "Sogdian Horse Archers"
                location = capital_scope
                hidden_effect = {
                add_subunit = horse_archers
                add_subunit = horse_archers
                add_subunit = horse_archers
                add_subunit = horse_archers                                              
                add_subunit = horse_archers
                add_subunit = horse_archers   
                add_subunit = horse_archers   
                add_food = 100
                add_morale = 2
                }
            }
            capital_scope = {
                add_permanent_province_modifier = {
                    name = sogdian_emporium
                }
                while = {
                    count = 1
                    define_pop = {
                        type = nobles
                        culture = sogdian
                        religion = vaksh_religion
                    }
                }
                while = {
                    count = 2
                    define_pop = {
                        type = citizen
                        culture = sogdian
                        religion = vaksh_religion
                    }
                }
            }
            
            trigger_event = me_tartessia.73
            show_as_tooltip = {
                p:1364 = {
                    set_trade_goods = steppe_horses
                }
            }
        }
    } 

    tartessia2_mission_inv_46_task = { # The Northern Frontier
        icon = "task_expansion"
        requires = {tartessia2_mission_inv_24_task }

        highlight = {
            scope:province = {
                OR = {
                    province_id = 1078
                    province_id = 1076
                    province_id = 1060
                }
            }
        }

        allow = {
            owns_or_subject_owns = 1078
            owns_or_subject_owns = 1076
            owns_or_subject_owns = 1060
            p:1078 = {
                num_of_fortress_building >= 1
                governor_policy = borderlands  
                has_no_ongoing_construction = yes
            }
            p:1076 = {
                num_of_fortress_building >= 1
                governor_policy = borderlands  
                has_no_ongoing_construction = yes
            }
            p:1060 = {
                num_of_fortress_building >= 1
                governor_policy = borderlands  
                has_no_ongoing_construction = yes
            }
        }

        on_completion = {
            p:1078 = {
                add_permanent_province_modifier = {
                    name = tartessian_northern_frontier_fort_mod
                }
            }
            p:1076 = {
                add_permanent_province_modifier = {
                    name = tartessian_northern_frontier_fort_mod
                }
            }
            p:1060 = {
                add_permanent_province_modifier = {
                    name = tartessian_northern_frontier_fort_mod
                }
            }
            trigger_event = me_tartessia.52
        }
    }

    tartessia2_mission_inv_47_task = { #Iberian Ham
        icon = "task_calm"
        requires = {tartessia2_mission_inv_27_task}

        highlight = {
            OR = {
                scope:province = {
                    owner = root
                    is_capital = yes
                }
                scope:province = {
                    owner = root
                    trade_goods = cattle
                }
            }
        }

        allow = {
            invention = cured_ham_inv
            capital_scope = {
                num_of_population_building >= 2
                has_no_ongoing_construction = yes
            }
            custom_tooltip = {
                text = tartessia_cured_ham_svalue_tt
                tartessia_cured_ham_svalue >= 25
            }
        }


        on_completion = {
            add_country_modifier = {
                name = tartessian_iberian_ham_mod
                duration = -1
            }
            trigger_event = me_tartessia.34
            show_as_tooltip = {

            }
        }
    }

    tartessia2_mission_inv_48_task = { # Finding The Fortunate Isles
        icon = "task_expansion"
        duration = 365
        requires = {tartessia2_mission_inv_42_task tartessia2_mission_inv_47_task}

        highlight = {
            scope:province = {
                province_id = 1319
            }
        }

        allow = {
            custom_tooltip = {
                text = pillars_herc_tt
                invention = pirate_spawn_chance_inv_1
            } 
        }

        on_completion = {
            add_country_modifier = {
                name = tartessia_trading_with_canaries_mod
                duration = -1
            }
            trigger_event = me_tartessia.67
        }
    }

}