# scope is country being annexed
# scope:actor = country doing the annexing
on_military_annex = {
	effect = {
		every_country_treasure = {
			add_to_list = annexed_treasures
		}
		if = {
			limit = {
				any_character = { has_character_modifier = turdetanian_high_priestess_modifier }
			}
			random_character = {
				limit = { has_character_modifier = turdetanian_high_priestess_modifier }
				save_scope_as = astarte_turdetanian_high_priestess
			}
			scope:actor = { set_variable = host_of_astarte_priesthood_variable }
			scope:astarte_turdetanian_high_priestess = {
				move_country = scope:actor
				set_as_minor_character = THIS
				if = {
					limit = {
						is_married = yes
						spouse = {
							is_ruler = no
							prisoner = no
							employer = root
						}
					}
					spouse = {
						remove_all_positions = yes
						move_country = scope:actor
						set_as_minor_character = this
					}
				}
				if = {
					limit = {
						is_married = yes
						spouse = {
							is_ruler = yes
							employer = root
						}
					}
					spouse = { divorce_character = scope:astarte_turdetanian_high_priestess }
				}
				if = {
					limit = {
						num_of_children > 0
						any_child = {
							prisoner = no
							NOT = {
								is_child_of = root.current_ruler
							}
							employer = root
						}
					}
					every_child = {
						limit = {
							prisoner = no
							employer = root
						}
						remove_all_positions = yes
						move_country = scope:actor
						set_as_minor_character = THIS
					}
				}
			}
		}
		on_annexation_event_effect = yes
		if = {
			limit = {
				OR = {
					has_variable = me_syr_foreign_country_flag
					has_variable = me_syr_deal_with_devil_flag
				}
			}
			save_scope_as = me_syr_annexed_scope
			if = {
				limit = {
					any_country = { has_variable = death_to_tyrants_flag }
				}
				random_country = {
					limit = { has_variable = death_to_tyrants_flag }
					trigger_event = { id = me_syracuse_1_democracy.60 }
				}
			}
		}
	}
}