androphagia_increasing_centralisation_effect = {
	if = {
		limit = { has_variable = androphagia_centralisation_counter }
		if = {
			limit = { var:androphagia_centralisation_counter < 3 }
			change_variable = {
				name = androphagia_centralisation_counter
				add = 1
			}
			custom_tooltip = androphagia_centralisation_tt
		}
		else_if = {
			limit = { var:androphagia_centralisation_counter = 3 }
			change_variable = {
				name = androphagia_centralisation_counter
				add = 1
			}
			change_law = oppidi_law_tribal
		}
	}
	else = {
		set_variable = {
			name = androphagia_centralisation_counter
			value = 1
		}
		custom_tooltip = androphagia_centralisation_tt
	}
}

androphagia_clear_forest_effect = {
	hidden_effect = {
		if = {
			limit = { has_province_modifier = androphagia_part_cleared_mod }
			remove_province_modifier = androphagia_part_cleared_mod
			add_permanent_province_modifier = {
				name = androphagia_mostly_cleared_mod
				duration = -1
			}
		}
		else = {
			add_permanent_province_modifier = {
				name = androphagia_part_cleared_mod
				duration = -1
			}
		}
	}
	custom_tooltip = androphagia_clearing_forest_tt
}

androphagia_amber_to_med_effect = {
	state = { save_temporary_scope_as = amber_state }
	create_state_pop = slaves
	random_pops_in_province = {
		limit = {
			pop_religion = ROOT.religion
			pop_culture = ROOT.culture
			pop_type = slaves
		}
		kill_pop = yes #This is done so the goods produced get updated
	}
	random_region = {
		limit = { any_neighbor_region = { this = region:mediterranean_region } }
		if = {
			limit = { any_region_state = { unused_trade_routes >= 1 } }
			random_region_state = {
				limit = {
					unused_trade_routes >= 1
					owner = { is_tribal = no }
				}
				weight = {
					modifier = {
						factor = 50
						is_capital_state = yes
					}
				}
				add_trade_route = {
					target = scope:amber_state
					goods = amber
				}
			}
		}
		else = {
			random_region_state = {
				weight = {
					modifier = {
						factor = 50
						is_capital_state = yes
					}
				}
				add_state_modifier = {
					name = androphagia_exports
					duration = 1
				}
				add_trade_route = {
					target = scope:amber_state
					goods = amber
				}
				remove_state_modifier = androphagia_exports
			}
		}
	}
}

androphagia_move_capital_effect = {
	capital_scope = { save_temporary_scope_as = old_capital }
	set_capital = $NEW_CAPITAL_LOCATION$
	custom_tooltip = androphagia_move_capital_effect_tt
	hidden_effect = {
		scope:old_capital = {
			every_pops_in_province = {
				limit = {
					pop_type = nobles
					pop_type = citizen
				}
				move_pop = ROOT.capital_scope
			}
		}
		if = {
			limit = {
				capital_scope = {
					NOT = {
						any_pops_in_province = {
							count = 1
							pop_type = nobles
						}
					}
				}
			}
			capital_scope = {
				random_pops_in_province = {
					limit = {
						culture = ROOT.culture
						NOT = { pop_type = citizen }
						NOT = { pop_type = nobles }
					}
					set_pop_type = nobles
				}
			}
		}
		if = {
			limit = {
				capital_scope = {
					NOT = {
						any_pops_in_province = {
							count = 3
							pop_type = citizen
						}
					}
				}
			}
			capital_scope = {
				while = {
					count = 3
					random_pops_in_province = {
						limit = {
							culture = ROOT.culture
							NOT = { pop_type = citizen }
							NOT = { pop_type = nobles }
						}
						set_pop_type = citizen
					}
				}
			}
		}
	}
}