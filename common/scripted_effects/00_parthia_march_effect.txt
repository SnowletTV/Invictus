add_allowed_region_effect = {
	custom_tooltip = "add_allowed_region_effect.tt"
	if = {
		limit = {
			NOT = {
				has_variable = parthia_allowed_region_var
			}
		}
		set_variable = {
			name = parthia_allowed_region_var
			value = 1
		}
	}
	else = {
		change_variable = {
			name = parthia_allowed_region_var
			add = 1
		}
	}
}

subtract_allowed_region_effect = {
	custom_tooltip = "subtract_allowed_region_effect.tt"
	if = {
		limit = {
			NOT = {
				has_variable = parthia_allowed_region_var
			}
		}
		set_variable = {
			name = parthia_allowed_region_var
			value = 0
		}
	}
	else = {
		change_variable = {
			name = parthia_allowed_region_var
			add = -1
		}
	}
}

parthia_march_border_cleanup_eff = {
#	custom_tooltip = "dahae_peaceful_weight_up_tt"
	if = {
		limit = {
			any_owned_province = {
				province_id = 6720
				NOT = { has_variable = allowed_province }
			}
			any_subject = {
				is_subject_type = march
				capital_scope.region = region:sogdiana_region
			}
		}
		random_subject = {
			limit = {
				is_subject_type = march
				capital_scope.region = region:sogdiana_region
			}
			save_scope_as = sogdiana_march
		}
		p:6720 = {
			set_owned_by = scope:sogdiana_march
		}
	}
	if = {
		limit = {
			any_owned_province = {
				province_id = 944
				NOT = { has_variable = allowed_province }
			}
			any_subject = {
				is_subject_type = march
				capital_scope.area = area:meshan_area
			}
		}
		random_subject = {
			limit = {
				is_subject_type = march
				capital_scope.area = area:meshan_area
			}
			save_scope_as = characene_scope
		}
		p:944 = {
			set_owned_by = scope:characene_scope
		}
	}
	if = {
		limit = {
			any_owned_province = {
				OR = {
					province_id = 6531
					province_id = 6532
					province_id = 6536						
				}
				NOT = { has_variable = allowed_province }
			}
			any_subject = {
				is_subject_type = march
				capital_scope.region = region:ariana_region
			}
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 6531
					province_id = 6532
					province_id = 6536						
				}
				NOT = { has_variable = allowed_province }				
			}
			add_to_list = ariana_cleanup
		}
		random_subject = {
			limit = {
				is_subject_type = march
				capital_scope.region = region:ariana_region
			}
			save_scope_as = ariana_march
		}
		every_in_list = {
			list = ariana_cleanup
			set_owned_by = scope:ariana_march
		}
	}
	if = {
		limit = {
			any_owned_province = {
				OR = {
					province_id = 6683
					province_id = 7231
					province_id = 7240
					province_id = 7241
					province_id = 7242						
				}
				NOT = { has_variable = allowed_province }
			}
			any_subject = {
				is_subject_type = march
				capital_scope.region = region:bactriana_region
			}
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 6683
					province_id = 7231
					province_id = 7240
					province_id = 7241
					province_id = 7242						
				}				
			}
			add_to_list = bactriana_cleanup
		}
		random_subject = {
			limit = {
				is_subject_type = march
				capital_scope.region = region:bactriana_region
			}
			save_scope_as = bactriana_march
		}
		every_in_list = {
			list = bactriana_cleanup
			set_owned_by = scope:bactriana_march
		}
	}
}

parthia_allow_region_eff = {
	scope:parthia_region_$WHICH$ = {
#		set_variable = pth_allowed_region 
		every_region_province = {
			set_variable = allowed_province			
		}
	}
	every_subject = {
		limit = {
			is_subject_type = march
			capital_scope.region = scope:parthia_region_$WHICH$	
			NOT = { has_variable = pth_excepted_var }
		}
		every_owned_province = {
			set_owned_by = ROOT
		}
		every_character = {
			death = {
				death_reason = death_obscurity
			}
		}
		every_country_treasure = { transfer_treasure_to_country = ROOT }
	}
	if = {
		limit = {
			scope:parthia_region_$WHICH$ = region:parthia_region
		}
		every_province = {
			limit = {
				OR = {
					is_in_region = parthia_region
					is_in_area = namek_area
					is_in_area = aria_area
					is_in_area = sagartia_area 
					is_in_area = media_felix_area 
					is_in_area = ardashir_area 
				}
			}
			set_variable = allowed_province
		}
	}
}

pth_change_region_eff = {
	scope:parthia_region_$WHICH$ = {
#		remove_variable = pth_allowed_region 
		every_region_province = {
			remove_variable = allowed_province			
		}
	}
	if = {
		limit = {
			scope:parthia_region_$WHICH$ = region:parthia_region
		}
		every_province = {
			limit = {
				OR = {
					is_in_area = namek_area
					is_in_area = aria_area
					is_in_area = sagartia_area 
					is_in_area = media_felix_area 
					is_in_area = ardashir_area 
				}
			}
			remove_variable = allowed_province
		}
	}
	if = {
		limit = {
			region:ariana_region = {
				any_region_province = {
					has_variable = allowed_province	
				}
			}
		}
		every_province = {
			limit = {
				OR = {
					is_in_area = namek_area
					is_in_area = aria_area
					is_in_area = sagartia_area 
				}
			}
			set_variable = allowed_province
		}
	}
	if = {
		limit = {
			region:persis_region = {
				any_region_province = {
					has_variable = allowed_province	
				}
			}
		}
		every_province = {
			limit = {
				OR = {
					is_in_area = media_felix_area 
					is_in_area = ardashir_area  
				}
			}
			set_variable = allowed_province
		}
	}
	if = {
		limit = {
			region:parthia_region = {
				any_region_province = {
					has_variable = allowed_province	
				}
			}
		}
		every_province = {
			limit = {
				OR = {
					is_in_area = namek_area
					is_in_area = aria_area
					is_in_area = sagartia_area 
					is_in_area = media_felix_area 
					is_in_area = ardashir_area 
				}
			}
			set_variable = allowed_province
		}
	}
}

parthian_change_culture_march_effect = { #TODO whole world
	if = {
		limit = {
			capital_scope = {
				is_in_region = mesopotamia_region
			}
		}
		set_primary_culture_cleanup_effect = {
			NEW_PRIMARY_CULTURE = babylonian
			MAKE_OLD_CULTURE_INTEGRATED = yes
		}
	}
	if ={limit ={capital_scope = {is_in_region = ariana_region}} set_primary_culture_cleanup_effect = {NEW_PRIMARY_CULTURE = carmanian MAKE_OLD_CULTURE_INTEGRATED = yes}}
	if ={limit ={capital_scope = {is_in_region = bactriana_region}} set_primary_culture_cleanup_effect = {NEW_PRIMARY_CULTURE = bactrian MAKE_OLD_CULTURE_INTEGRATED = yes}}
}

parthian_culture_effect = { #TODO whole world;rn whole east up to sakia, lower egypt, both arabias, caucasus and anatolia
	if = { limit = { scope:parthia_region_$WHICH$ = region:mesopotamia_region } random_country_culture = { limit = { THIS.culture = culture:babylonian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:persis_region } random_country_culture = {limit = { THIS.culture = culture:pasargadi } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:media_region } random_country_culture = {limit = { THIS.culture = culture:median } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:ariana_region } random_country_culture = {limit = { THIS.culture = culture:carmanian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:assyria_region } random_country_culture = {limit = { THIS.culture = culture:assyrian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:arabia_region } random_country_culture = {limit = { THIS.culture = culture:gerrhan } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:arabia_felix_region } random_country_culture = {limit = { THIS.culture = culture:hadhrami } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:bactriana_region } random_country_culture = {limit = { THIS.culture = culture:bactrian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:sogdiana_region } random_country_culture = {limit = { THIS.culture = culture:sogdian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:gandhara_region } random_country_culture = {limit = { THIS.culture = culture:gandhari } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:maru_region } random_country_culture = {limit = { THIS.culture = culture:sindhi } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:madhyadesa_region } random_country_culture = {limit = { THIS.culture = culture:kosala } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:avanti_region } random_country_culture = {limit = { THIS.culture = culture:avanti } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:pracya_region } random_country_culture = {limit = { THIS.culture = culture:magadhi } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:vindhyaprstha_region } random_country_culture = {limit = { THIS.culture = culture:savara } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:aparanta_region } random_country_culture = {limit = { THIS.culture = culture:rathikan } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:karnata_region } random_country_culture = {limit = { THIS.culture = culture:alupan } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:dravida_region } random_country_culture = {limit = { THIS.culture = culture:cholan } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:burma_region } random_country_culture = {limit = { THIS.culture = culture:kamarupi } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:tibet_region } random_country_culture = {limit = { THIS.culture = culture:yarlung } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:himalayan_region } random_country_culture = {limit = { THIS.culture = culture:zhangzhung } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:sakia_region } random_country_culture = {limit = { THIS.culture = culture:kharesmian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:armenia_region } random_country_culture = {limit = { THIS.culture = culture:armenian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:albania_region } random_country_culture = {limit = { THIS.culture = culture:albanian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:colchis_region } random_country_culture = {limit = { THIS.culture = culture:ibero } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:syria_region } random_country_culture = {limit = { THIS.culture = culture:aramaic } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:palestine_region } random_country_culture = {limit = { THIS.culture = culture:phoenician } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:cilicia_region } random_country_culture = {limit = { THIS.culture = culture:cilician } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:cappadocia_region } random_country_culture = {limit = { THIS.culture = culture:cappadocian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:cappadocia_pontica_region } random_country_culture = {limit = { THIS.culture = culture:gandhari } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:galatia_region } random_country_culture = {limit = { THIS.culture = culture:phrygian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:bithynia_region } random_country_culture = {limit = { THIS.culture = culture:paphlagonian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:asia_region } random_country_culture = {limit = { THIS.culture = culture:lydian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:lower_egypt_region } random_country_culture = {limit = { THIS.culture = culture:egyptian } ROOT = { integrate_country_culture = PREV }}}
	if = { limit = { scope:parthia_region_$WHICH$ = region:upper_egypt_region } random_country_culture = {limit = { THIS.culture = culture:upper_egyptian } ROOT = { integrate_country_culture = PREV }}}
}

parthia_rename_march_effect = { #TODO whole world
	save_scope_as = march_namable
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = parthia_region } #Parthia
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = media_region } #Media
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = mesopotamia_region } #Mesopotamia
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = assyria_region } #Assyria
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = persis_region } #Persis
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = ariana_region } #Ariana
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = bactriana_region } #Bactriana
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = sakia_region } #Sakia
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = sogdiana_region } #Sogdiana
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = maru_region } #Maru
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = gandhara_region } #Gandhara
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = himalayan_region } #Himalayan
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = albania_region } #Albania
	parthia_rename_march_effect_2 = { OWNER = scope:march_namable WHAT = region WHICH = armenia_region } #Armenia
}

parthia_rename_march_effect_2 = {
	if = {
		limit = {
			NOT = { has_variable = march_name_$WHAT$ }
			march_namable_$WHAT$_trigger = {
				OWNER = $OWNER$
				WHICH = $WHICH$
			}
		}
		change_country_name = $WHICH$_march_N
		change_country_adjective = $WHICH$_march_A
		set_variable = { name = march_name_$WHAT$ }
#		set_variable = { name = march_name_$WHICH$ }
	}
}

new_march_colour_effect = {
	if = {
		limit = {
			OR = {
				has_variable = parthian_march1_hsv
				has_variable = parthian_march2_hsv
				has_variable = parthian_march3_hsv
				has_variable = parthian_march4_hsv
				has_variable = parthian_march5_hsv
				has_variable = parthian_march6_hsv
				has_variable = parthian_march6_hsv
				has_variable = parthian_march8_hsv
				has_variable = parthian_march9_hsv				
			}
		}
		remove_variable = parthian_march1_hsv
		remove_variable = parthian_march2_hsv
		remove_variable = parthian_march3_hsv
		remove_variable = parthian_march4_hsv
		remove_variable = parthian_march5_hsv
		remove_variable = parthian_march6_hsv
		remove_variable = parthian_march7_hsv
		remove_variable = parthian_march8_hsv
		remove_variable = parthian_march9_hsv		
	}
	random_list = {
		1 = {
			trigger = {
				NOT = { 
					any_neighbour_country = {
						has_variable = parthian_march1_hsv
					}
				}
			}					
			change_country_color = parthian_march1
			set_variable = parthian_march1_hsv
		}
		1 = {
			trigger = {
				NOT = { 
					any_neighbour_country = {
						has_variable = parthian_march2_hsv
					}
				}
			}				
			change_country_color = parthian_march2
			set_variable = parthian_march2_hsv
		}
		1 = {
			trigger = {
				NOT = { 
					any_neighbour_country = {
						has_variable = parthian_march3_hsv
					}
				}
			}					
			change_country_color = parthian_march3
			set_variable = parthian_march3_hsv
		}
		1 = {
			trigger = {
				NOT = { 
					any_neighbour_country = {
						has_variable = parthian_march4_hsv
					}
				}
			}					
			change_country_color = parthian_march4
			set_variable = parthian_march4_hsv
		}
		1 = {
			trigger = {
				NOT = { 
					any_neighbour_country = {
						has_variable = parthian_march5_hsv
					}
				}
			}						
			change_country_color = parthian_march5
			set_variable = parthian_march5_hsv
		}
		1 = {
			trigger = {
				NOT = { 
					any_neighbour_country = {
						has_variable = parthian_march6_hsv
					}
				}
			}					
			change_country_color = parthian_march6
			set_variable = parthian_march6_hsv
		}
		1 = {
			trigger = {
				NOT = { 
					any_neighbour_country = {
						has_variable = parthian_march7_hsv
					}
				}
			}				
			change_country_color = parthian_march7
			set_variable = parthian_march7_hsv
		}
		1 = {
			trigger = {
				NOT = { 
					any_neighbour_country = {
						has_variable = parthian_march8_hsv
					}
				}
			}						
			change_country_color = parthian_march8
			set_variable = parthian_march8_hsv
		}
		1 = {
			trigger = {
				NOT = { 
					any_neighbour_country = {
						has_variable = parthian_march9_hsv
					}
				}
			}
			change_country_color = parthian_march9
			set_variable = parthian_march9_hsv
		}					
	}
}

parthia_march_unintegrate = { #TODO potentially
	#ROOT = Country
	#scope:target = New target poptype, target_culture contains the current one
	#scope:target_culture = Country culture being degraded
	
	#Here we remove rights that can only be granted to Integrated or Primary culture if a culture drops to non-integrated

	
	if = {
		limit = {
			scope:target = { #Not Nobles, Not Citizens
				NOT = { is_pop_type_right = citizen }
				NOT = { is_pop_type_right = nobles }
			}
		}
	}
}

add_centralization_2_effect = {
	custom_tooltip = "add_centralization_2_effect_tt"
	if = {
		limit = {
			NOT = {
				has_variable = pth_centralization_progress
			}
		}
		set_variable = {
			name = pth_centralization_progress
			value = 2
		}
	}
	else = {
		change_variable = {
			name = pth_centralization_progress
			add = 2
		}
	}
}