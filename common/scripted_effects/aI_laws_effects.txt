ai_change_laws = {
    # Check if we can do it at all
    if = {
        limit = {
            OR = {
                is_tribal = yes
                is_monarchy = yes
            }
            can_pay_price = enact_law
            NOT = {
                has_variable = ai_recently_enacted_law
            }
        }

        # Pay price, then check what remains to decide if we are fine with it. If not, refund price
        pay_price = enact_law
        set_local_variable = {
            name = enacted_law
            value = 0
        }

        if = {
            limit = {
                is_tribal = yes
            }
            ai_change_laws_tribal = yes
        }
        else_if = {
            limit = {
                is_monarchy = yes
            }
            ai_change_laws_monarchy = yes
        }
        
        if = {
            limit = {
                local_var:enacted_law = 0
            }
            refund_price = enact_law
        }
        remove_local_variable = enacted_law
    }
}

ai_enact_law = {
    change_law = $name$

    if = {
        limit = {
            is_tribal = yes
        }
        set_variable = {
            name = ai_recently_enacted_law
            days = 9125 # 25 years
        }
    }

    change_local_variable = {
        name = enacted_law
        add = 1
    }

    if = {
        limit = {
            stability < 50
            NOT = {
                has_country_modifier = stability_investment
            }
            can_pay_price = stability
        }
        pay_price = stability
        add_country_modifier = {
            name = stability_investment
            duration = 1825
            mode = add
        }
    }
}

ai_change_laws_tribal = {
    if = {
        limit = {
            ai_should_enact_extreme_priority_law = yes
        }
        ai_change_laws_tribal_extreme_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_high_priority_law = yes
        }
        ai_change_laws_tribal_high_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_medium_priority_law = yes
        }
        ai_change_laws_tribal_medium_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_low_priority_law = yes
        }
        ai_change_laws_tribal_low_priority = yes
    }
}

ai_change_laws_tribal_extreme_priority = {
    if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = local_hierarchs # stability_monthly_change = 0.15
                has_law = follow_the_strong_law # clan_chief_loyalty = 10
            }
            # Conditions of the law itself
            centralization <= -30
        }
        ai_enact_law = {
            name = local_hierarchs
        }
    }
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = steppe_horde_levy_size_2
                has_law = steppe_horde_levy_size_3
                has_law = steppe_horde_levy_size_4
                has_law = steppe_horde_levy_size_5
            }
            # Conditions of the law itself
            government = steppe_horde
        }
        ai_enact_law = {
            name = steppe_horde_levy_size_4
        }
    }
}

ai_change_laws_tribal_high_priority = {
    # Required to codify state lands and removes found city price debuff
    if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = formalized_industry_law_tribal
                has_law = oppidi_law_tribal
            }
            # Conditions of the law itself
            centralization >= 30
        }
        ai_enact_law = {
            name = oppidi_law_tribal
        }
    }
    # High priority for countries with small negative centralization to force them in that direction
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = property_ownership_law_tribal # global_tribesmen_output = output_huge_svalue
                has_law = right_of_might_law_tribal # global_tax_modifier = 0.1
            }
            # Conditions of the law itself
            centralization <= -10
            # Specific conditions for this case
            centralization > -30
        }
        ai_enact_law = {
            name = right_of_might_law_tribal
        }
    }
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = barter_economy_law
                has_law = coin_minting_law
            }
            # Conditions of the law itself
            always = yes
        }
        ai_enact_law = {
            name = barter_economy_law
        }
    }
    # High priority for countries with small positive centralization to force them in that direction
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = increased_council_powers # monthly_tyranny = -0.05 => republic
                has_law = absolute_authority # ruler_popularity_gain = 0.15 => monarchy
            }
            # Conditions of the law itself
            centralization >= 10
            # Specific conditions for this case
            centralization < 30
        }
        ai_tribe_enact_authority_law = yes
    }
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = syncretization_law_tribal
                has_law = adopt_human_sacrifice_law_tribal
            }
            # Conditions of the law itself
            always = yes
            # Is it beneficial for this specific country
            ai_has_a_lot_of_unintegrated_pops = yes
        }
        ai_enact_law = {
            name = syncretization_law_tribal
        }
    }
}

ai_change_laws_tribal_medium_priority = {
    if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = tribal_decentralized_laws_2 # global_pop_assimilation_speed_modifier = 0.30
                has_law = tribal_decentralized_laws_3 # happiness_for_same_culture_modifier = 0.1
            }
            # Conditions of the law itself
            centralization <= -50
        }
        if = {
            limit = {
                ai_has_a_lot_of_unintegrated_pops = yes
            }
            ai_enact_law = {
                name = tribal_decentralized_laws_2
            }
        }
        else = {
            ai_enact_law = {
                name = tribal_decentralized_laws_3
            }
        }
    }
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = tribal_centralized_laws_2 # monthly_political_influence_modifier = 0.1
                has_law = tribal_centralized_laws_3 # global_pop_promotion_speed = 2
            }
            # Conditions of the law itself
            centralization >= 50
        }
        ai_enact_law = {
            name = tribal_centralized_laws_2
        }
    }
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = increased_council_powers # monthly_tyranny = -0.05 => republic
                has_law = absolute_authority # ruler_popularity_gain = 0.15 => monarchy
            }
            # Conditions of the law itself
            centralization >= 10
        }
        ai_tribe_enact_authority_law = yes
    }
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = property_ownership_law_tribal # global_tribesmen_output = output_huge_svalue
                has_law = right_of_might_law_tribal # global_tax_modifier = 0.1
            }
            # Conditions of the law itself
            centralization <= -10
        }
        ai_enact_law = {
            name = right_of_might_law_tribal
        }
    }
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = syncretization_law_tribal
                has_law = adopt_human_sacrifice_law_tribal
            }
            # Conditions of the law itself
            always = yes
            # Is it beneficial for this specific country
            ai_has_a_bit_of_unintegrated_pops = yes
        }
        ai_enact_law = {
            name = syncretization_law_tribal
        }
    }
}

ai_change_laws_tribal_low_priority = {
    if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = super_decentralized_law_two
                has_law = super_decentralized_law_three
            }
            # Conditions of the law itself
            centralization <= -80
        }
        ai_enact_law = {
            name = super_decentralized_law_three
        }
    }
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = super_centralized_law_two
                has_law = super_centralized_law_three
            }
            # Conditions of the law itself
            centralization >= 80
        }
        ai_enact_law = {
            name = super_centralized_law_three
        }
    }
    else_if = {
        limit = {
            # Has this particular law
            has_law = tribal_decentralized_laws_2 # global_pop_assimilation_speed_modifier = 0.30
            # The other law in the group would be more useful now
            ai_has_a_bit_of_unintegrated_pops = no
            # Conditions of the law itself
            centralization <= -50
        }
        ai_enact_law = {
            name = tribal_decentralized_laws_3
        }
    }
    else_if = {
        limit = {
            # Has this particular law
            has_law = tribal_decentralized_laws_3 # happiness_for_same_culture_modifier = 0.1
            # The other law in the group would be more useful now
            ai_has_a_lot_of_unintegrated_pops = yes
            # Conditions of the law itself
            centralization <= -50
        }
        ai_enact_law = {
            name = tribal_decentralized_laws_2
        }
    }
}

ai_tribe_enact_authority_law = {
    if = {
        limit = {
            any_neighbour_country = {
                is_republic = yes
            }
        }
        random_list = {
            70 = {
                ai_enact_law = {
                    name = absolute_authority
                }
            }
            30 = {
                ai_enact_law = {
                    name = increased_council_powers
                }
            }
        }
    }
    else = {
        random_list = {
            90 = {
                ai_enact_law = {
                    name = absolute_authority
                }
            }
            10 = {
                ai_enact_law = {
                    name = increased_council_powers
                }
            }
        }
    }
}

ai_change_laws_monarchy = {
    if = {
        limit = {
            ai_should_enact_extreme_priority_law = yes
        }
        ai_change_laws_monarchy_extreme_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_high_priority_law = yes
        }
        ai_change_laws_monarchy_high_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_medium_priority_law = yes
        }
        ai_change_laws_monarchy_medium_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_low_priority_law = yes
        }
        ai_change_laws_monarchy_low_priority = yes
    }
}

ai_change_laws_monarchy_extreme_priority = {
    if = {
        limit = {
            # The law is not enacted
            NOT = {
                has_law = standing_army_law # legions_in_any_region
            }
            # Conditions of the law itself
            invention = discipline_inv_5
            rank >= major_power
            # Is it beneficial for this specific country
            non_capital_regions_levy_population >= capital_region_levy_population
        }
        ai_enact_law = {
            name = standing_army_law
        }
    }
    else_if = {
        limit = {
            # The law is not enacted
            NOT = {
                has_law = work_for_the_best # legions_in_any_region
            }
            # Conditions of the law itself
            rank >= regional_power
            # Is it beneficial for this specific country
            rank >= major_power
            non_capital_regions_levy_population < capital_region_levy_population
        }
        ai_enact_law = {
            name = work_for_the_best
        }
    }
    else_if = {
        limit = {
            # Has a straight up bad military law
            OR = {
                has_law = relaxed_recruiting_standards
                has_law = mercenary_reliance
            }
        }
        ai_enact_law = {
            name = recruit_from_nobles
        }
    }
    else_if = {
        limit = {
            # The law is not enacted
            NOT = {
                has_law = monarchy_religious_mandate_military # assimilation speed
            }
            # Conditions of the law itself
            invention = omen_power_inv_4
            # Is it beneficial for this specific country
            ai_has_a_lot_of_unintegrated_pops = yes
        }
        ai_enact_law = {
            name = monarchy_religious_mandate_military
        }
    }
}

ai_change_laws_monarchy_high_priority = {
    if = {
        limit = {
            # The law is not enacted
            NOT = {
                has_law = monarchy_religious_mandate_military # assimilation speed
            }
            # Conditions of the law itself
            invention = omen_power_inv_4
            # Is it beneficial for this specific country
            ai_has_a_bit_of_unintegrated_pops = yes
        }
        ai_enact_law = {
            name = monarchy_religious_mandate_military
        }
    }
    else_if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = scholarly_pursuits_law # research_points_modifier, global_citizen_happyness
                has_law = royal_bureaucracy # monthly_legitimacy, global_nobles_happyness
            }
            # Conditions of the law itself
            invention = scientific_patronage_inv
        }
        ai_enact_law = {
            name = scholarly_pursuits_law
        }
    }
}

ai_change_laws_monarchy_medium_priority = {
    if = {
        limit = {
            # No law enacted in the group
            NOR = {
                has_law = increased_citizenship_quotas # global_citizen_city_desired_pop_ratio
                has_law = established_courts_for_landholders # global_freemen_city_desired_pop_ratio
            }
            # Conditions of the law itself
            invention = citizen_promotion_cost_modifier_inv
        }
        ai_enact_law = {
            name = increased_citizenship_quotas
        }
    }
}

ai_change_laws_monarchy_low_priority = {

}

ai_change_laws_republic = {
    if = {
        limit = {
            ai_should_enact_extreme_priority_law = yes
        }
        ai_change_laws_republic_extreme_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_high_priority_law = yes
        }
        ai_change_laws_republic_high_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_medium_priority_law = yes
        }
        ai_change_laws_republic_medium_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_low_priority_law = yes
        }
        ai_change_laws_republic_low_priority = yes
    }
}

ai_change_laws_republic_extreme_priority = {
    if = {
        limit = {
            # The law is not enacted
            NOT = {
                has_law = republican_recruitment_4 # legions_in_any_region
            }
            # Conditions of the law itself
            invention = discipline_inv_5
            OR = {
				rank >= major_power
				custom_tooltip = {
					text = marian_event_fired
					has_variable = had_military_reforms 
				}
			}
            # Is it beneficial for this specific country
            non_capital_regions_levy_population >= capital_region_levy_population
        }
        ai_enact_law = {
            name = republican_recruitment_4
        }
    }
    else_if = {
        limit = {
            # The law is not enacted
            NOT = {
                has_law = republican_recruitment_2 # legions_in_any_region
            }
            # Conditions of the law itself
            invention = global_cohort_recruit_speed_inv
			rank >= regional_power
            # Is it beneficial for this specific country
            rank >= major_power
            non_capital_regions_levy_population < capital_region_levy_population
        }
        ai_enact_law = {
            name = republican_recruitment_2
        }
    }
    else_if = {
        limit = {
            # Has a straight up bad military law
            has_law = republican_recruitment_1
        }
        ai_enact_law = {
            name = republican_recruitment_3
        }
    }
}

ai_change_laws_republic_high_priority = {
}

ai_change_laws_republic_medium_priority = {
}

ai_change_laws_republic_low_priority = {

}

ai_change_laws_republic_rome = {
    if = {
        limit = {
            ai_should_enact_extreme_priority_law = yes
        }
        ai_change_laws_republic_rome_extreme_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_high_priority_law = yes
        }
        ai_change_laws_republic_rome_high_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_medium_priority_law = yes
        }
        ai_change_laws_republic_rome_medium_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_low_priority_law = yes
        }
        ai_change_laws_republic_rome_low_priority = yes
    }
}

ai_change_laws_republic_rome_extreme_priority = {
    if = {
        limit = {
            # The law is not enacted
            NOT = {
                has_law = marian_reforms # legions_in_any_region
            }
            # Conditions of the law itself
            invention = discipline_inv_5
			OR = {
				rank >= great_power
				custom_tooltip = {
					text = marian_event_fired
					has_variable = had_military_reforms
				}
			}
            # Is it beneficial for this specific country
            non_capital_regions_levy_population >= capital_region_levy_population
        }
        ai_enact_law = {
            name = marian_reforms
        }
    }
    else_if = {
        limit = {
            # The law is not enacted
            NOT = {
                has_law = punic_reforms # legions_in_any_region
            }
            # Conditions of the law itself
            invention = global_cohort_recruit_speed_inv
			rank >= regional_power
            # Is it beneficial for this specific country
            rank >= major_power
            non_capital_regions_levy_population < capital_region_levy_population
        }
        ai_enact_law = {
            name = punic_reforms
        }
    }
    else_if = {
        limit = {
            # Has a straight up bad military law
            has_law = testamentum_militis
        }
        ai_enact_law = {
            name = lex_porcia
        }
    }
}

ai_change_laws_republic_rome_high_priority = {
}

ai_change_laws_republic_rome_medium_priority = {
}

ai_change_laws_republic_rome_low_priority = {

}

ai_change_laws_republic_carthage = {
    if = {
        limit = {
            ai_should_enact_extreme_priority_law = yes
        }
        ai_change_laws_republic_carthage_extreme_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_high_priority_law = yes
        }
        ai_change_laws_republic_carthage_high_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_medium_priority_law = yes
        }
        ai_change_laws_republic_carthage_medium_priority = yes
    }
    if = {
        limit = {
            local_var:enacted_law = 0
            ai_should_enact_low_priority_law = yes
        }
        ai_change_laws_republic_carthage_low_priority = yes
    }
}

ai_change_laws_republic_carthage_extreme_priority = {
    if = {
        limit = {
            # The law is not enacted
            NOT = {
                has_law = republic_military_recruitment_car_4 # legions_in_any_region
            }
            # Conditions of the law itself
            invention = discipline_inv_5
			rank >= great_power
            # Is it beneficial for this specific country
            non_capital_regions_levy_population >= capital_region_levy_population
        }
        ai_enact_law = {
            name = republic_military_recruitment_car_4
        }
    }
    else_if = {
        limit = {
            # The law is not enacted
            NOT = {
                has_law = republic_military_recruitment_car_2 # legions_in_any_region
            }
            # Conditions of the law itself
            invention = global_cohort_recruit_speed_inv
			rank >= regional_power
            # Is it beneficial for this specific country
            rank >= major_power
            non_capital_regions_levy_population < capital_region_levy_population
        }
        ai_enact_law = {
            name = republic_military_recruitment_car_2
        }
    }
    else_if = {
        limit = {
            # Has a straight up bad military law
            has_law = republic_military_recruitment_car_1
        }
        ai_enact_law = {
            name = republic_military_recruitment_car_3
        }
    }
}

ai_change_laws_republic_carthage_high_priority = {
}

ai_change_laws_republic_carthage_medium_priority = {
}

ai_change_laws_republic_carthage_low_priority = {

}