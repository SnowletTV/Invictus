mercenary_city_button = {
    scope = province
	saved_scopes = {
		player
	}
	confirm_title = "SYR_merc_state_title"
	confirm_text = "SYR_merc_state_desc"
    is_shown = { # Can be omitted as always true
		scope:player = {
			OR = {
				tag = SYR
				has_variable = syr_unique_mech
				government = tyrannic_monarchy
			}
			has_dlc = "Magna Graecia"
		}
		has_owner = yes
		controller = scope:player
		owner = scope:player
    }
	ai_is_valid = {
		always = no
	}
    is_valid = {
		trigger_if = {
			limit = {
				NOT = {
					has_city_status = yes
				}
			}
			has_city_status = yes
		}
		trigger_if = {
			limit = {
				is_capital = yes
			}
			is_capital = no
		}
		trigger_if = {
			limit = {
				scope:player = {
					num_active_relations >= max_diplomatic_relations
				}
			}
			scope:player = {
				num_active_relations < max_diplomatic_relations
			}
		}
		trigger_if = {
			limit = {
				scope:player = {
					war = yes
				}
			}
			scope:player = {
				war = no 
			}
		}
		hidden:scope:player = {
			trigger_if = {
				limit = {
					NOT = {
						can_pay_price = create_merc_state_price
					}
				}
				can_pay_price = create_merc_state_price
			}
		}
    }
	
    effect = {
		custom_tooltip = "MERC_CITY_STATE_EFFECT_TT"
		if = {
			limit = {
				scope:player = {
					is_monarchy = yes
				}
			}
			custom_tooltip = "MERC_CITY_MONARCHY_EFFECT"
		}
		scope:player = {
			pay_price = create_merc_state_price
		} 
		hidden_effect = {
			owner = {
				save_scope_as = pParent
			}
			create_country = {
				create_character = {
					culture = root.dominant_province_culture
					religion = root.dominant_province_religion
					age = 30
					save_scope_as = saved_merc_leader
				}
				set_as_ruler = scope:saved_merc_leader
				save_scope_as = pChild
				scope:saved_merc_leader = {
					add_martial = 5
				}
			}
			scope:pParent = {
				make_subject = {
					target = scope:pChild
					type = subject_mercenary_city_state
				}
			}
		}
	}
}
