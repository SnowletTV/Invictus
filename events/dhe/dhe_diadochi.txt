namespace = diadochi_flavor

diadochi_flavor.1 = { #Antigonid
	type = country_event
	title = "diadochi_flavor.1.t"
	desc = "diadochi_flavor.1.desc"
	
	left_portrait = root.current_ruler
	left_portrait = C:MAC.current_ruler #Phrygia has no friends but someone needs to go here
	right_portrait = C:SEL.current_ruler
	right_portrait = C:EGY.current_ruler
	right_portrait = C:TRE.current_ruler
	
	picture = successors
	
	goto_location = p:418 # Korinthos
	
	trigger = {
		tag = PRY
		NOR = {
			has_variable = war_of_the_diadochs
			has_variable = antigonus_death
		}
	}
	
	immediate = { #Does not check existance since this triggers too quickly for the tags to ever be gone.
		set_variable = {
			name = war_of_the_diadochs
			value = yes
		}
		custom_tooltip = diadochi_flavor.1.a.antigonus.death
		custom_tooltip = diadochi_flavor.1.a.tt
		hidden_effect = {
			diadochi_flavor_event_claim_effect = yes
			c:EGY = {
				trigger_event = {
					id = diadochi_flavor.20
					days = { 210 420 }
				}
			}
			c:SEL = {
				trigger_event = {
					id = diadochi_flavor.27
					days = { 420 480 }
				}
			}
			c:TRE = {
				trigger_event = {
					id = diadochi_flavor.40
					days = { 480 570 }
				}
			}
		}
	}
	
	option = {
		name = diadochi_flavor.1.a
		ai_chance = { factor = 9 }
	}

	option = {
		name = diadochi_flavor.1.b
		highlight = yes
		current_ruler = {
			add_nickname = NICKNAME_PEISMATIKOS
			add_character_modifier = {
				name = peismatikos_charmod
				duration = -1
			}
			custom_tooltip = diadochi_flavor.1.b.tt
			hidden_effect = {	
				add_martial = -5
				add_finesse = -3
				add_charisma = -1
				add_zeal = -1
			}
		}
		add_political_influence = subtract_influence_huge
		add_treasury = {
			value = has_monthly_income
			multiply = -2
		}
		ai_chance = { factor = 1 }
	}

	after = {
		trigger_event = {
			id = diadochi_flavor.15
			days = { 30 60 }
		}
	}
}

diadochi_flavor.2 = { #Macedonian
	type = country_event
	title = "diadochi_flavor.1.t"
	desc = "diadochi_flavor.2.desc"
	
	left_portrait = root.current_ruler
	left_portrait = C:TRE.current_ruler
	right_portrait = C:PRY.current_ruler
	right_portrait = C:SEL.current_ruler
	right_portrait = C:EGY.current_ruler
	
	picture = successors
	
	goto_location = p:407 # Chalkis
	
	trigger = {
		tag = MAC
		NOT = {
			has_variable = war_of_the_diadochs
		}
	}
	
	immediate = { #Does not check existance since this triggers too quickly for the tags to ever be gone.
		set_variable = {
			name = war_of_the_diadochs
			value = yes
		}
	}
	
	option = {
		name = diadochi_flavor.1.a
		custom_tooltip = diadochi_flavor.2.a.tt
		hidden_effect = {
			diadochi_flavor_event_claim_effect = yes
			where_in_the_world_is_polyperchon_effect = yes
		}
	}
}

diadochi_flavor.3 = { #Lysimachid
	type = country_event
	title = "diadochi_flavor.1.t"
	desc = "diadochi_flavor.3.desc"
	
	left_portrait = root.current_ruler
	left_portrait = C:MAC.current_ruler
	right_portrait = C:PRY.current_ruler
	right_portrait = C:SEL.current_ruler
	right_portrait = C:EGY.current_ruler
	
	picture = successors
	
	trigger = {
		tag = TRE
		NOT = {
			has_variable = war_of_the_diadochs
		}
	}
	
	immediate = { #Does not check existance since this triggers too quickly for the tags to ever be gone.
		set_variable = {
			name = war_of_the_diadochs
			value = yes
		}
	}
	
	option = {
		name = diadochi_flavor.1.a
		custom_tooltip = diadochi_flavor.2.a.tt
		hidden_effect = {
			diadochi_flavor_event_claim_effect = yes
		}
	}
}

diadochi_flavor.4 = { #Ptolemid
	type = country_event
	title = "diadochi_flavor.1.t"
	desc = "diadochi_flavor.4.desc"
	
	left_portrait = root.current_ruler
	left_portrait = C:SEL.current_ruler
	right_portrait = C:PRY.current_ruler
	right_portrait = C:MAC.current_ruler
	right_portrait = C:TRE.current_ruler
	
	picture = successors
	
	trigger = {
		tag = EGY
		NOT = {
			has_variable = war_of_the_diadochs
		}
	}
	
	immediate = { #Does not check existance since this triggers too quickly for the tags to ever be gone.
		set_variable = {
			name = war_of_the_diadochs
			value = yes
		}
	}
	
	option = {
		name = diadochi_flavor.1.a
		custom_tooltip = diadochi_flavor.2.a.tt
		hidden_effect = {
			diadochi_flavor_event_claim_effect = yes
		}
	}
}

diadochi_flavor.5  = { #Seleucid
	type = country_event
	title = "diadochi_flavor.1.t"
	desc = "diadochi_flavor.5.desc"
	
	left_portrait = root.current_ruler
	left_portrait = C:EGY.current_ruler
	right_portrait = C:PRY.current_ruler
	right_portrait = C:MAC.current_ruler
	right_portrait = C:TRE.current_ruler
	
	picture = successors
	
	goto_location = p:790 # Antigonia
	
	trigger = {
		tag = SEL
		NOT = {
			has_variable = war_of_the_diadochs
		}
	}
	
	immediate = { #Does not check existance since this triggers too quickly for the tags to ever be gone.
		set_variable = {
			name = war_of_the_diadochs
			value = yes
		}
	}
	
	option = {
		name = diadochi_flavor.1.a
		custom_tooltip = diadochi_flavor.2.a.tt
		hidden_effect = {
			diadochi_flavor_event_claim_effect = yes
		}
	}
}

diadochi_flavor.6 = { #Epigoni
	type = country_event
	title = "diadochi_flavor.6.t"
	desc = "diadochi_flavor.6.desc"
	
	left_portrait = root.current_ruler
	
	picture = throneroom
	
	trigger = {
		OR = {
			has_variable = war_of_the_diadochs
			tag = PRY #to not upset things.
		}
		NOR = { 
			has_variable = epigoni
			tag = ALX
			has_variable = formed_argead_empire
		}
		trigger_if = {
			limit = { tag = PRY }
			has_variable = antigonus_death
		}
	}
	
	immediate = {
		set_variable = {
			name = epigoni
			value = yes
		}
	}
	
	option = {
		name = diadochi_flavor.6.a
		custom_tooltip = diadochi_flavor.6.a.tt
		if = {
			limit = { is_ai = no } # AI retains claims for aggressiveness
			hidden_effect = {
				region:greece_region = { diadochi_flavor_lose_claim_effect = yes }
				region:thrace_region = { diadochi_flavor_lose_claim_effect = yes }
				region:macedonia_region = { diadochi_flavor_lose_claim_effect = yes }
				region:syria_region = { diadochi_flavor_lose_claim_effect = yes }
				region:asia_region = { diadochi_flavor_lose_claim_effect = yes }
				region:cilicia_region = { diadochi_flavor_lose_claim_effect = yes }
				region:galatia_region = { diadochi_flavor_lose_claim_effect = yes }
				region:assyria_region = { diadochi_flavor_lose_claim_effect = yes }
				region:persis_region = { diadochi_flavor_lose_claim_effect = yes }
				region:palestine_region = { diadochi_flavor_lose_claim_effect = yes }
				region:mesopotamia_region = { diadochi_flavor_lose_claim_effect = yes }
				region:lower_egypt_region = { diadochi_flavor_lose_claim_effect = yes }
				region:upper_egypt_region = { diadochi_flavor_lose_claim_effect = yes }
				region:cappadocia_region = { diadochi_flavor_lose_claim_effect = yes }
			}
		}
		if = {
			limit = {
				exists = c:SEL
				alliance_with = c:SEL
			}
			break_alliance = c:SEL
		}
		if = {
			limit = {
				exists = c:PRY
				alliance_with = c:PRY
			}
			break_alliance = c:PRY
		}
		if = {
			limit = {
				exists = c:EGY
				alliance_with = c:EGY
			}
			break_alliance = c:EGY
		}
		if = {
			limit = {
				exists = c:MAC
				alliance_with = c:MAC
			}
			break_alliance = c:MAC
		}
		if = {
			limit = {
				exists = c:TRE
				alliance_with = c:TRE
			}
			break_alliance = c:TRE
		}
	}
}

diadochi_flavor.7 = { #Capital for the Empire
	type = country_event
	title = "diadochi_flavor.7.t"
	desc = "diadochi_flavor.7.desc"
	
	left_portrait = root.current_ruler
	
	picture = great_city

	option = {
		name = diadochi_flavor.7.a #Pella
		trigger = {
			owns = 379
		}
		if = {
			limit = {
				p:379 = { is_capital = no }
			}
			set_capital = 379
			hidden_effect = { p:379.state = { set_state_capital = 379 } }
			capital_scope = {
				establish_city_effect = yes
			}
		}
		p:379 = {
			add_province_modifier = {
				name = "re_united_argead_empire_pella_capital_modifier"
				duration = -1
			}
		}
	}

	option = {
		name = diadochi_flavor.7.b #Alexandria on the Nile
		trigger = {
			owns = 516
		}
		if = {
			limit = {
				p:516 = { is_capital = no }
			}
			set_capital = 516
			hidden_effect = { p:516.state = { set_state_capital = 379 } }
			capital_scope = {
				establish_city_effect = yes
			}
		}
		p:516 = {
			add_province_modifier = {
				name = "re_united_argead_empire_egypt_capital_modifier"
				duration = -1
			}
		}
	}
	option = {
		name = diadochi_flavor.7.c #Babylon
		trigger = {
			owns = 918
		}
		if = {
			limit = {
				p:918 = { is_capital = no }
			}
			set_capital = 918
			hidden_effect = { p:918.state = { set_state_capital = 918 } }
			capital_scope = {
				establish_city_effect = yes
			}
		}
		p:918 = {
			add_province_modifier = {
				name = "re_united_argead_empire_babylon_capital_modifier"
				duration = -1
			}
		}
	}
	option = {
		name = diadochi_flavor.7.d #Alexandria on the Indus
		trigger = {
			owns = 4371
		}
		if = {
			limit = {
				p:4371 = { is_capital = no }
			}
			set_capital = 4371
			hidden_effect = { p:4371.state = { set_state_capital = 4371 } }
			capital_scope = {
				establish_city_effect = yes
			}
		}
		p:4371 = {
			add_province_modifier = {
				name = "re_united_argead_empire_indus_capital_modifier"
				duration = -1
			}
		}
		custom_tooltip = claims_on_trans_indus_tooltip
		hidden_effect = {
			region:madhyadesa_region = {
				every_region_province = {
					limit = {
						NOT = { owned_or_subject_owned = root }
					}
					add_claim = root
				}
			}
		}
	}
	option = {
		name = diadochi_flavor.7.e #Keep my own
		trigger = { #Forced to keep the one you already have if one of these is your capital
			p:516 = { is_capital = no } #Alexandria on the Nile
			p:379 = { is_capital = no } #Pella
			p:4371 = { is_capital = no } #Alexandria Indus
			p:918 = { is_capital = no } #Babylon
		}
		capital_scope = {
			add_province_modifier = {
				name = "re_united_argead_empire_dynastic_capital_modifier"
				duration = -1
			}
		}
	}
}

#The Antigonid Cause Wavers
diadochi_flavor.8 = { 
	type = country_event
	title = "diadochi_flavor.8.t"
	desc = "diadochi_flavor.8.desc"
	
	left_portrait = root.current_ruler
	left_portrait = char:37
	left_portrait= scope:attalid_head
	right_portrait = c:TRE.current_ruler
	right_portrait = c:EGY.current_ruler
	right_portrait = c:SEL.current_ruler
	picture = successors
	
	goto_location = capital_scope
	
	trigger = { #Won't Happen if the war of the successors is going well.
		tag = PRY
		NOT = { has_variable = antigonus_death }
		OR = {
			trigger_if = {
				limit = {
					NOT = { has_variable = ptolemaic_deal_flag }
				}
				NOT = { owns_or_subject_owns = 660 } #Ascalon
			}
			trigger_if = {
				limit = { 
					NOT = { has_variable = seleukid_deal_flag }
				}
				NOT = { owns_or_subject_owns = 790 } #Antigonia
			}
			trigger_if = {
				limit = { 
					NOT = { has_global_variable = phrygia_the_betrayer }
				}
				NOT = { owns_or_subject_owns = 407 } #Chalcis
			}
			trigger_if = {
				limit = { 
					NOT = { has_global_variable = phrygia_the_betrayer }
				}
				NOT = { owns_or_subject_owns = 418 } #Korinth
			}
			NOT = { owns_or_subject_owns = 331 } #Salamis
			NOT = { owns_or_subject_owns = 1936 } #Kelainai
			NOT = { has_variable = secure_phrygian_position_flag }
		}
		NAND = {
			has_variable = lysimachid_deal_flag
			has_variable = ptolemaic_deal_flag
			has_variable = seleukid_deal_flag
			NOT = {
				any_owned_province = {
					is_in_region = cilicia_region
					NOT = { is_in_area = cyprus_area }
				}
			}
		}
	}
	
	immediate = {
		set_variable = antigonus_death
		if = {
			limit = {
				is_ai = no
				owns = 278
			}
			set_variable = {
				name = ant_manpower
				value = ROOT.manpower
			}
			set_variable = {
				name = ant_treasury
				value = ROOT.manpower
			}
			set_variable = {
				name = per_manpower
				value = 10
			}
			set_variable = {
				name = per_treasury
				value = 100
			}
			if = { # Attalid Scopes
				limit = {
					OR = {
						char:67 = { eligible_for_country_move = yes } # Attalos
						char:385 = { eligible_for_country_move = yes } # Philetairos
						char:386 = { eligible_for_country_move = yes } # Eumenes
						char:390 = { eligible_for_country_move = yes } # Attalos
						char:389 = { eligible_for_country_move = yes } # Eumenes I
					}
				}
				if = {
					limit = {
						char:67 = { eligible_for_country_move = yes } # Attalos
					}
					char:67 = {
						save_scope_as = attalos_scope
						if = {
							limit = {
								char:385 = { eligible_for_country_move = no } # Philetairos
								char:386 = { eligible_for_country_move = no } # Eumenes
								char:385 = { eligible_for_country_move = no } # Attalos
							}
							save_scope_as = attalid_head
						}
						add_to_list = attalid_list
					}
				}
				if = {
					limit = {
						char:385 = { eligible_for_country_move = yes } # Philetairos
					}
					char:385 = {
						if = {
							limit = {
								NOT = { exists = scope:attalid_head }
							}
							save_scope_as = attalid_head
						}
						add_to_list = attalid_list
					}
				}
				if = {
					limit = {
						char:386 = { eligible_for_country_move = yes } # Eumenes
					}
					char:386 = {
						if = {
							limit = {
								NOT = { exists = scope:attalid_head }
							}
							save_scope_as = attalid_head
						}
						add_to_list = attalid_list
					}
				}
				if = {
					limit = {
						char:390 = { eligible_for_country_move = yes } # Attalos
					}
					char:390 = {
						save_scope_as = attalos_2_scope
						if = {
							limit = {
								NOT = { exists = scope:attalid_head }
							}
							save_scope_as = attalid_head
						}
						add_to_list = attalid_list
					}
				}
				if = {
					limit = {
						char:389 = { eligible_for_country_move = yes } # Eumenes
					}
					char:389 = {
						save_scope_as = eumenes_2_scope
						if = {
							limit = {
								NOT = { exists = scope:attalid_head }
							}
							save_scope_as = attalid_head
						}
						add_to_list = attalid_list
					}
				}
				if = {
					limit = {
						NOT = { exists = scope:attalid_head }
					}
					ordered_character = {
						limit = {
							is_head_of_family = yes
							is_ruler = no
						}
						order_by = {
							value = 0
							subtract = loyalty
						}
						save_scope_as = attalid_head
					}
				}
			}
		}
	}

	option = {
		name = diadochi_flavor.8.a #
		save_scope_as = antigonids_scope
		set_global_variable = antigonus_the_failure
		custom_tooltip = diadochi_flavor.8.at
		if = {
			limit = { has_dlc = "Heirs of Alexander" }
			custom_tooltip = antigonid_01_vision_wavers_abort_tt
			custom_tooltip = antigonid_02_aspiration_wavers_tt
		}
		if = {
			limit = { owns = 407 }
			p:407 = { save_scope_as = antigonid_capital }
		}
		ordered_owned_province = {
			limit = { is_in_region = greece_region }
			alternative_limit = {
				OR = {
					is_in_area = cyprus_area
					province_id = 743 
				}
			}
			alternative_limit = { always = yes }
			order_by = total_population
			save_scope_as = antigonid_capital
		}
		set_capital = scope:antigonid_capital
		add_country_modifier = {
			name = sea_king_cmod
			duration = 7300 # 20 years
		}
		if = {
			limit = {
				is_ai = yes
				num_of_ships > 30
			}
			while = {
				limit = { num_of_ships > 30 }
				random_navy = {
					random_sub_unit = {
						weight = {
							 modifier = {
							 	factor = 0.2
							 	ship_category = heavy
							 }
						}
						random = {
							chance = 50
							destroy_subunit = yes
						}
					}
				}
			}
		}
		southern_release_effect = yes
		ai_chance = { factor = 8 }
	}

	option = {
		name = diadochi_flavor.8.b #
		save_scope_as = antigonids_scope
		custom_tooltip = diadochi_flavor.8.bt
		set_variable = antigonid_stubbornness
		remove_stability_effect = yes
		add_legitimacy = -30
		add_country_modifier = {
			name = "lapse_of_authority"
			duration = 3650
		}
		ai_chance = { factor = 2 }
	}

	option = {
		name = diadochi_flavor.8.c #
		trigger = {
			is_ai = no
			owns = 278
		}
		set_global_variable = antigonus_the_failure
		hidden_effect = { change_country_name = PERGAMON_NAME } # Pergamon
		custom_tooltip = diadochi_flavor.8.ct
		save_scope_as = pergamon_scope
		remove_variable = me_ant_start_flag
		set_variable = player_attalids_flag
		hidden_effect = { 
			every_allied_country = {
				add_to_list = ant_ally_list
				break_alliance = ROOT
			}			
			pergamon_setup_effect = yes
			if = { # Antigonid Leader
				limit = {
					char:38 = { eligible_for_country_move = yes }
				}
				char:38 = { save_scope_as = antigonid_head }
			}
			else_if = {
				limit = {
					char:190 = { eligible_for_country_move = yes }
				}
				char:190 = { save_scope_as = antigonid_head }
			}
			else = {
				ordered_character = {
					limit = {
						has_trait = antigonids
						trigger_if = {
							limit = {
								employer = { gender_equality = no }
							}
							is_female = no
						}
					}
					order_by = age
					save_scope_as = antigonid_head
				}
			}
			if = { # Attalid Leader
				limit = {
					scope:attalid_head = {
						OR = {
							is_minor_character = yes
							family = scope:antigonid_head.family
						}
					}
				}
				create_family = scope:attalid_head
				every_in_list = {
					list = attalid_list
					set_family = scope:attalid_head.family
				}
			}
			set_as_ruler = scope:attalid_head
			ordered_owned_province = { # Create Antigonids
				limit = {
					NOR = {
						is_in_area = mysia_abrettene_area
						is_in_area = aeolia_area
					}
				}
				order_by = total_population
				save_scope_as = antigonid_capital
				hidden_effect = {
					create_country = {
						save_scope_as = antigonids_scope
					}
					scope:antigonids_scope = {
						change_country_color = antigonid_yellow
						change_country_name = PRY
						change_country_adjective = PRY_ADJ
						change_country_flag = PRY
						set_country_heritage = antigonid_heritage
						set_variable = me_ant_start_flag
						if = {
							limit = {
								NOT = {
									primary_culture = macedonian
								}
							}
							set_primary_culture_cleanup_effect = {
								NEW_PRIMARY_CULTURE = macedonian
								MAKE_OLD_CULTURE_INTEGRATED = yes
							}
						}
					}
				}
			}
			if = { # retaining legion laws
				limit = { has_law = work_for_the_best }
				scope:antigonids_scope = {
					set_variable = {
						name = gov_change_legion_law
						value = 1
					}
				}
			}
			else_if = {
				limit = { has_law = standing_army_law }
				scope:antigonids_scope = {
					set_variable = {
						name = gov_change_legion_law
						value = 2
					}
				}
			}
			scope:antigonid_head.family = { move_family = scope:antigonids_scope } # Move Antigonids
			scope:antigonid_head = {
				move_country_with_entire_family_effect = { COUNTRY = scope:antigonids_scope }
			}
			every_family = { # Move old Antigonid families
				limit = {
					NOT = { THIS = scope:attalid_head.family }
				}
				move_family = scope:antigonids_scope
				head_of_family = {
					move_country_with_entire_family_effect = { COUNTRY = scope:antigonids_scope }
				}
			}
			every_character = {
				limit = {
					is_minor_character = yes
					NOR = {
						is_close_relative = scope:attalid_head
						trigger_if = {
							limit = { is_married = yes }
							spouse.family = scope:attalid_head.family
						}
					}
				}
				move_country_with_close_family_effect = { COUNTRY = scope:antigonids_scope }
			}
			every_owned_province = { # Only keep Pergamon
				limit = {
					NOR = {
						province_id = 337
						province_id = 276
						province_id = 278
						province_id = 281
						province_id = 282
						province_id = 279
					}
				}
				set_owned_by = scope:antigonids_scope
				add_claim = c:SEL
				add_claim = c:EGY
				add_claim = c:TRE
				add_claim = c:MAC
			}
			scope:antigonids_scope = {
				if = {
					limit = { owns = 407 }
					p:407 = { save_scope_as = antigonid_capital }
				}
				else_if = {
					limit = {
						any_owned_province = { is_in_region = greece_region }
					}
					ordered_owned_province = {
						limit = { is_in_region = greece_region }
						save_scope_as = antigonid_capital
					}
				}
				else = {
					ordered_owned_province = {
						limit = {
							OR = {
								is_in_area = cyprus_area
								province_id = 743
							}
						}
						save_scope_as = antigonid_capital
					}
				}
				set_capital = scope:antigonid_capital
				set_as_ruler = scope:antigonid_head
				add_manpower = ROOT.var:ant_manpower
				add_treasury = ROOT.var:ant_treasury
				if = { # updating laws
					limit = { has_variable = gov_change_legion_law }
					if = {
						limit = { var:gov_change_legion_law = 1 }
						change_law = work_for_the_best
					}
					else_if = {
						limit = { var:gov_change_legion_law = 2 }
						change_law = standing_army_law
					}
					remove_variable = gov_change_legion_law
				}
			}
			add_manpower = per_manpower_svalue
			add_treasury = per_treasury_svalue
			add_manpower = ROOT.var:per_manpower
			add_treasury = ROOT.var:per_treasury
			every_legion = {
				save_scope_as = legion_scope
				every_legion_commander = {
					save_scope_as = legion_commander_scope
					scope:legion_scope = { remove_commander = scope:legion_commander_scope }
				}
				move_legion = scope:antigonids_scope.capital_scope.governorship
			}
			every_navy = { add_to_list = ant_army_list }
			every_in_list = { # Move Antigonid armies
				list = ant_army_list
				if = {
					limit = { exists = commander }
					commander = { remove_all_positions = yes }
				}
				change_unit_owner = scope:antigonids_scope
			}
			every_in_list = { # Recreate alliances
				list = ant_ally_list
				add_alliance = scope:antigonids_scope
			}
			every_subject = { # Transfer subjects
				ROOT = {
					release_subject = PREV
				}
				scope:antigonids_scope = {
					make_subject = {
						target = PREV
						type = feudatory
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { has_variable = lysimachid_deal_flag }
				c:TRE = {
					has_land = yes
				}
			}
			custom_tooltip = diadochi_flavor.8.ct2
			c:TRE = {
				hidden_effect = {
					make_subject = {
						target = ROOT
						type = satrapy
					}
				}
				trigger_event = {
					id = diadochi_flavor.58
					days = 5
				}
			}
		}
		remove_variable = ant_manpower
		remove_variable = ant_treasury
		remove_variable = per_manpower
		remove_variable = per_treasury
		hidden_effect = {
			change_country_name = PERGAMON_NAME # Pergamon
			change_country_adjective = PERGAMON_ADJECTIVE
			change_country_tag = PGM
			scope:antigonids_scope = { change_country_tag = PRY }
		}
		c:IOA = {
			if = {
				limit = { is_subject_of = scope:antigonids_scope }
				every_owned_province = {
					limit = {
						OR = {
							province_id = 281
							province_id = 282
							province_id = 279
						}
					}
					set_owned_by = scope:pergamon_scope
				}
			}
		}
		hidden_effect = {
			region:greece_region = { diadochi_flavor_lose_claim_effect = yes }
			region:thrace_region = { diadochi_flavor_lose_claim_effect = yes }
			region:macedonia_region = { diadochi_flavor_lose_claim_effect = yes }
			region:syria_region = { diadochi_flavor_lose_claim_effect = yes }
			region:asia_region = { diadochi_flavor_lose_claim_effect = yes }
			region:cilicia_region = { diadochi_flavor_lose_claim_effect = yes }
			region:galatia_region = { diadochi_flavor_lose_claim_effect = yes }
			region:assyria_region = { diadochi_flavor_lose_claim_effect = yes }
			region:persis_region = { diadochi_flavor_lose_claim_effect = yes }
			region:palestine_region = { diadochi_flavor_lose_claim_effect = yes }
			region:mesopotamia_region = { diadochi_flavor_lose_claim_effect = yes }
			region:lower_egypt_region = { diadochi_flavor_lose_claim_effect = yes }
			region:upper_egypt_region = { diadochi_flavor_lose_claim_effect = yes }
			region:bithynia_region = { diadochi_flavor_lose_claim_effect = yes }
			region:cappadocia_region = { diadochi_flavor_lose_claim_effect = yes }
		}
		ai_chance = { factor = 0 }
	}

	after = {
		actual_releases_effect = yes
		if = {
			limit = {
				NOT = { has_variable = player_attalids_flag }
			}
			trigger_event = {
				id = diadochi_flavor.56 # Attalids defect
				days = { 80 180 }
			}
		}
		else = {
			pergamon_foundation_ping_effect = yes
			hidden_effect = {
				change_country_name = PERGAMON_NAME # Pergamon
				change_country_adjective = PERGAMON_ADJECTIVE
			}
		}
		if = {
			limit = {
				NOT = { has_variable = ptolemaic_deal_flag }
				c:EGY = {
					has_land = yes
					exists = scope:antigonids_scope
					NOT = { alliance_with = scope:antigonids_scope }
				}
			}
			c:EGY = {
				trigger_event = {
					id = diadochi_flavor.49
					days = 2
				} # Egypt division
			}
		}
		if = {
			limit = {
				NOT = { has_variable = lysimachid_deal_flag }
				c:TRE = {
					has_land = yes
					exists = scope:antigonids_scope
					NOT = { alliance_with = scope:antigonids_scope }
				}
			}
			c:TRE = {
				trigger_event = {
					id = diadochi_flavor.50
				} # Thrace division
			}
		}
		else = { # because .52 otherwise is triggered by .50
			if = {
				limit = {
					c:MAC = {
						has_land = yes
						exists = scope:antigonids_scope
						NOT = { alliance_with = scope:antigonids_scope }
					}
				}
				c:MAC = {
					trigger_event = {
						id = diadochi_flavor.52
						days = 2
					} # Macedon division
				}
			}
			c:KIO = {
				trigger_event = { id = dhe_mithridates.9 }
			}
		}
		if = {
			limit = {
				c:SEL = {
					has_land = yes
					exists = scope:antigonids_scope
					NOT = { alliance_with = scope:antigonids_scope }
				}
				NOT = { has_variable = seleukid_deal_flag }
			}
			c:SEL = {
				trigger_event = {
					id = diadochi_flavor.51
					days = 2
				} # Seleukid division
			}
		}
		if = {
			limit = {
				c:IOA = {
					has_land = yes
					exists = scope:antigonids_scope
					is_subject_of = scope:antigonids_scope
				}
				c:TRE = { has_land = yes }
			}
			c:IOA = {
				trigger_event = {
					id = diadochi_flavor.48
					days = 2
				} # Notification of loss of territory
			}
		}
		char:70 = {
			if = {
				limit = {
					is_alive = yes
					is_ruler = no
					employer = ROOT
				}
				employer = {
					trigger_event = {
						id = dhe_dde_pyrrhus.3
						days = 10
					}
				}
			}
		}
		every_country = {
			limit = {
				NOR = {
					tag = EGY
					tag = TRE
					tag = SEL
					tag = MAC
					tag = PRY
				}
				is_ai = no
			}
			trigger_event = {
				id = diadochi_flavor.53 # Ping
				days = 5
			}
		}
		southern_release_effect = yes
		hidden_effect = {
			if = {
				limit = { exists = scope:antigonids_scope }
				scope:antigonids_scope = { diadochi_flavor_event_claim_effect = yes }
			}
		}
	}

}

#The Antigonid Cause is Strong
diadochi_flavor.9 = { 
	type = country_event
	title = "diadochi_flavor.9.t"
	desc = "diadochi_flavor.9.desc"
	
	left_portrait = root.current_ruler
	
	picture = successors
	
	trigger = { #Won't Happen if the war of the successors is going well.
		tag = PRY
		NOT = { has_variable = antigonus_death }
		owns_or_subject_owns = 418 #Korinth
		owns_or_subject_owns = 660 #Ascalon
		owns_or_subject_owns = 790 #Antigonia
		owns_or_subject_owns = 407 #Chalcis
		owns_or_subject_owns = 331 #Salamis
	}
	
	immediate = {
		set_variable = antigonus_death
	}

	option = {
		name = diadochi_flavor.9.a #
		ai_chance = {
			factor = 100
		}
		add_country_modifier = {
			name = "antigonid_resurgence"
			duration = 3650
		}
	}
}

#Coronation of Antigonos and Demetrios
diadochi_flavor.10 = { 
    type = country_event
    title = diadochi_flavor.10.t
    desc = diadochi_flavor.10.desc
    picture = throneroom
    
    left_portrait = current_ruler
    right_portrait = current_heir

    trigger = {
    	tag = PRY
    	NOT = { has_variable = antigonus_death }
    }

    immediate = {
    	current_ruler = {
    		add_popularity = popularity_medium
    	}
    	current_heir = {
    		add_popularity = popularity_large
    	}
    }

    option = {      
        name = diadochi_flavor.10.a
        ai_chance = {
			factor = 90
		}
        add_country_modifier = {
        	name = dhe_antigonid_coronation_country_modifier
        	duration = 3650
        }
        C:EGY = {
        	add_opinion = {
        		modifier = dhe_diadochi_insulted
        		target = PRY
        	}
        }
        C:SYR = {
        	add_opinion = {
        		modifier = dhe_diadochi_insulted
        		target = PRY
        	}
        }
        C:SEL = {
            add_opinion = {
        		modifier = dhe_diadochi_insulted
        		target = PRY
        	}
        }
        C:TRE = {
        	add_opinion = {
				modifier = dhe_diadochi_insulted
				target = PRY
			}
        }
        hidden_effect = {
        	C:EGY = { 
	        	trigger_event = {
	        		id = diadochi_flavor.11
	        		days = { 10 20 }
	        	}
	        }
	        C:SYR = { 
	        	trigger_event = {
	        		id = diadochi_flavor.12
	        		days = { 10 20 }
	        	}
	        }
	        C:SEL = { 
	        	trigger_event = {
	        		id = diadochi_flavor.13
	        		days = { 10 20 }
	        	}
	        }
	        C:TRE = { 
	        	trigger_event = {
	        		id = diadochi_flavor.14
	        		days = { 10 20}
	        	}
	        }
        }
    }

    option = {      
        name = diadochi_flavor.10.b
        ai_chance = {
			factor = 10
		}
        add_country_modifier = {
        	name = dhe_salamis_victory_country_modifier
        	duration = 3650
        }
        current_heir = {
        	add_loyalty = loyalty_disapproved_joke
        }
		C:EGY = {
        	add_opinion = {
        		modifier = dhe_diadochi_appeased
        		target = PRY
        	}
        }
        C:MAC = {
        	add_opinion = {
        		modifier = dhe_diadochi_appeased
        		target = PRY
        	}
        }
        C:SEL = {
            add_opinion = {
        		modifier = dhe_diadochi_appeased
        		target = PRY
        	}
        }
        C:TRE = {
        	add_opinion = {
				modifier = dhe_diadochi_appeased
				target = PRY
			}
        }
    }

    after = {
    	c:EGY = {
    		trigger_event = {
    			id = flavor_egy.20
    			days = { 180 7300 }
    		}
    	}
    }
}

#Egypt Coronation
diadochi_flavor.11 = {
    type = country_event
    title = diadochi_flavor.11.t
    desc = diadochi_flavor.11.desc
    picture = greek_court
    
    left_portrait = current_ruler
    right_portrait = C:PRY.current_ruler
    right_portrait = C:PRY.current_heir

    trigger = {
    	tag = EGY
    }

    immediate = {
    	current_ruler = {
    		add_popularity = popularity_medium
    	}
    }

    option = {      
        name = diadochi_flavor.11.a
        ai_chance = {
			factor = 90
		}
        add_country_modifier = {
        	name = dhe_king_of_egypt_country_modifier
        	duration = 3650
        }
        current_ruler = {
        	add_trait = pharaoh
        }
        set_variable = hellenic_line_of_pharaohs_started
    }
    option = {      
        name = diadochi_flavor.11.b
        ai_chance = {
			factor = 10
		}
        current_ruler = {
			add_nickname = NICKNAME_NAUTARCHOS
		}
        add_country_modifier = {
        	name = dhe_nautarchos_country_modifier
        	duration = 3650
        }
    }
}

diadochi_flavor.111 = {
    type = country_event
    hidden = yes
    trigger = {
    	has_variable = hellenic_line_of_pharaohs_started
    	OR = {
    		owns_or_subject_owns_region = upper_egypt_region
    		owns_or_subject_owns_region = lower_egypt_region
    	}
    }

    immediate = {
	    current_ruler = {
	    	add_trait = pharaoh
	    }
    }
}

#Syracuse Nickname
diadochi_flavor.12 = {
    type = country_event
    title = diadochi_flavor.12.t
    desc = diadochi_flavor.12.desc
    picture = greek_court
    
    left_portrait = current_ruler
    right_portrait = C:PRY.current_ruler
    right_portrait = C:PRY.current_heir

    trigger = {
    	tag = SYR
    }

    immediate = {
    	current_ruler = {
    		add_popularity = popularity_medium
    	}
    }

    option = {      
        name = diadochi_flavor.12.a
        ai_chance = {
			factor = 90
		}
        add_country_modifier = {
        	name = dhe_king_of_sicily_country_modifier
        	duration = 3650
        }
    }
    option = {      
        name = diadochi_flavor.12.b
        ai_chance = {
			factor = 10
		}
        current_ruler = {
			add_nickname = NICKNAME_NESIARCHOS
		}
        add_country_modifier = {
        	name = dhe_nesiarchos_country_modifier
        	duration = 3650
        }
    }
}

#Seleukid Coronation
diadochi_flavor.13 = {
    type = country_event
    title = diadochi_flavor.13.t
    desc = diadochi_flavor.13.desc
    picture = greek_court
    
    left_portrait = current_ruler
    right_portrait = C:PRY.current_ruler
    right_portrait = C:PRY.current_heir

    trigger = {
    	tag = SEL
    }

    immediate = {
    	current_ruler = {
    		add_popularity = popularity_medium
    	}
    }

    option = {      
        name = diadochi_flavor.13.a
        ai_chance = {
			factor = 90
		}
        add_country_modifier = {
        	name = dhe_king_of_persia_country_modifier
        	duration = 3650
        }
    }
    option = {      
        name = diadochi_flavor.13.b
        ai_chance = {
			factor = 10
		}
        current_ruler = {
			add_nickname = NICKNAME_ELEPHANTARCHOS
		}
        add_country_modifier = {
        	name = dhe_elephantarchos_country_modifier
        	duration = 3650
        }
    }
}

#Thrace Coronation
diadochi_flavor.14 = {
    type = country_event
    title = diadochi_flavor.14.t
    desc = diadochi_flavor.14.desc
    picture = greek_court
    
    left_portrait = current_ruler
    right_portrait = C:PRY.current_ruler
    right_portrait = C:PRY.current_heir

    trigger = {
    	tag = TRE
    }

    option = {      
        name = diadochi_flavor.14.a
        ai_chance = {
			factor = 90
		}
        add_country_modifier = {
        	name = dhe_king_of_thrace_country_modifier
        	duration = 3650
        }
        current_ruler = {
    		add_popularity = subtract_popularity_medium
    	}
    }
    option = {      
        name = diadochi_flavor.14.b
        ai_chance = {
			factor = 10
		}
        add_country_modifier = {
        	name = dhe_gazophylax_modifier
        	duration = 3650
        }
        current_ruler = {
    		add_popularity = popularity_medium
    		add_nickname = NICKNAME_GAZOPHYLAX
    	}
    }
}

#Fourth war of the diadochi
diadochi_flavor.15 = {
    type = country_event
    title = diadochi_flavor.15.t
    desc = diadochi_flavor.15.desc
   
	picture = greek_city
	
	left_portrait = current_ruler
	left_portrait = primary_heir
    right_portrait = c:MAC.current_ruler

	trigger = {
		has_variable = me_ant_start_flag
		c:MAC = {
			has_land = yes
			NOT = { war_with = ROOT }
		}
		NOR = {
			has_global_variable = fourth_war_triggered
			has_variable = antigonus_death
		}
	}
	
	immediate = {
		save_scope_as = antigonids_scope
		set_global_variable = {
			name = fourth_war_triggered
		}
	}
	
	option = {
		name = "diadochi_flavor.15.a"
		c:MAC = {
			trigger_event = {
				id = diadochi_flavor.16
				days = 5
			}
			custom_tooltip = "macedon_war_choice"
		}
		ai_chance = {
			modifier = {
				factor = 100
			}
		}
	}
	
	option = {
		name = "diadochi_flavor.15.b" 
		custom_tooltip = "diadochi_flavor.15.b.tooltip"
		ai_chance = {
			modifier = {
				factor = 0
			}
		}
		p:7902 = { #Salamis
			set_owned_by = c:ATH
		}
		p:442 = { #Aigina
			create_country = {
				name = {
					name = AIGINA_NAME
					adjective = AIGINA_ADJECTIVE
				}
				hidden_effect = {
					if = {
						limit = {
							NOT = {
								primary_culture = argolian
							}
						}
						set_primary_culture_cleanup_effect = {
							NEW_PRIMARY_CULTURE = argolian
							MAKE_OLD_CULTURE_INTEGRATED = yes
						}
					}
					set_country_religion = roman_pantheon
					change_government = plutocratic_republic
					change_country_color = mid_grey
					change_country_flag = AIGINA_FLAG
				}
			}
		}
		p:407 = { #Chalcis
			create_country = {
				name = {
					name = CHALKIS_NAME
					adjective = CHALKIS_ADJECTIVE
				}
				hidden_effect = {
					if = {
						limit = {
							NOT = {
								primary_culture = euboean
							}
						}
						set_primary_culture_cleanup_effect = {
							NEW_PRIMARY_CULTURE = euboean
							MAKE_OLD_CULTURE_INTEGRATED = yes
						}
					}
					set_country_religion = roman_pantheon
					change_government = oligarchic_republic
					change_country_color = samnite_green
					change_country_flag = CHALCIS_FLAG
				}
			}
		}
		every_subject = {
			limit = {
				capital_scope = {
					OR = {
						is_in_region = greece_region
						is_in_region = macedonia_region
					}
				}
			}
			hidden_effect = {
				add_truce = {
					target = PREV
					duration = 1825
				}
			}
			trigger_event = { id = diadochi_flavor.55 }
			scope:antigonids_scope = {
				hidden_effect = {
					add_truce = {
						target = PREV
						duration = 1825
					}
				}
			}
		}
		scope:antigonids_scope = {
			add_truce = {
				target = c:MAC
				duration = 1825
			}
			hidden_effect = {
				every_subject = {
					c:MAC = {
						add_truce = {
							target = PREV
							duration = 1825
						}
					}
				}
			}
		}
		c:MAC = {
			add_truce = {
				target = scope:antigonids_scope
				duration = 1825
			}
			trigger_event = {
				id = diadochi_flavor.17
				days = 5
			}
			hidden_effect = {
				every_subject = {
					scope:antigonids_scope = {
						add_truce = {
							target = PREV
							duration = 1825
						}
					}
				}
			}
		}
		custom_tooltip = "no_longer_champion_of_free_greeks"
		hidden_effect = {
			set_global_variable = phrygia_the_betrayer
			every_owned_province = { #If any remains
				limit = { is_in_region = greece_region }
				set_owned_by = c:ATH
			}
		}
	}
}

diadochi_flavor.16 = { #Macedon War Choice
    type = country_event
    title = diadochi_flavor.16.t
    desc = diadochi_flavor.16.desc
    
	picture = greek_political_discussion
	
	left_portrait = current_ruler
	right_portrait = scope:antigonids_scope.current_ruler
	
	trigger = {
		scope:antigonids_scope = {
			has_land = yes
		}
		NOR = {
			war_with = scope:antigonids_scope
			any_current_war = {
				any_war_attacker = { THIS = scope:antigonids_scope }
				any_war_attacker = { THIS = c:MAC }
			}
			any_current_war = {
				any_war_defender = { THIS = scope:antigonids_scope }
				any_war_defender = { THIS = c:MAC }
			}
		}
	}
	
	option = {
		name = "diadochi_flavor.16.a"
		add_stability = 8
		scope:antigonids_scope = {
			declare_war_with_wargoal = {
				war_goal = diadochi_wargoal
				#province = p:418
				target = c:MAC
			}
			trigger_event = diadochi_flavor.25 #Macedon declares war.
		}
		hidden_effect = {
			every_country = {
				limit = {
					country_culture_group = hellenic
					NOR = {
						tag = MAC
						THIS = scope:antigonids_scope
						war_with = c:MAC
						war_with = scope:antigonids_scope
					}
				}
				trigger_event = diadochi_flavor.19
			}
		}
		ai_chance = { factor = 100 }
	}
	
	option = {
		name = "diadochi_flavor.16.b"
		current_ruler = {
			add_popularity = subtract_popularity_large
		}
		if = {
			limit = {
				p:418 = {
					owner = root
				}
			}
			p:418 = {
				set_owned_by = scope:antigonids_scope
			}
		}
		scope:antigonids_scope = {
			add_truce = {
				target = c:MAC
				duration = 1825
			}
			hidden_effect = {
				every_subject = {
					c:MAC = {
						add_truce = {
							target = PREV
							duration = 1825
						}
					}
				}
			}
			trigger_event = {
				id = diadochi_flavor.18
			}
		}
		add_truce = {
			target = scope:antigonids_scope
			duration = 1825
		}
		hidden_effect = {
			every_subject = {
				scope:antigonids_scope = {
					add_truce = {
						target = PREV
						duration = 1825
					}
				}
			}
		}
		ai_chance = { factor = 0 }
	}
}

diadochi_flavor.17 = { #Phrygia Backs Down.
    type = country_event
    title = diadochi_flavor.17.t
    desc = diadochi_flavor.17.desc
    
	picture = senator_conversing
	
	trigger = {
		scope:antigonids_scope = {
			has_land = yes
		}
		c:MAC = {
			NOT = {
				war_with = scope:antigonids_scope
			}
		}
	}
	
	option = {
		name = "diadochi_flavor.17.a"
		custom_tooltip = diadochi_flavor.17.a.tt
		show_as_tooltip = {
			scope:antigonids_scope = {
				add_truce = {
					target = c:MAC
					duration = 1825
				}
			}
			add_truce = {
				target = scope:antigonids_scope
				duration = 1825
			}
		}
	}
}

diadochi_flavor.18 = { #Macedon Backs down
    type = country_event
    title = diadochi_flavor.18.t
    desc = diadochi_flavor.18.desc
    
	picture = greek_city

	left_portrait = current_ruler
	right_portrait = c:MAC.current_ruler
	
	trigger = {
		c:PRY = {
			has_land = yes
		}
		c:MAC = {
			NOT = {
				war_with = c:PRY
			}
		}
	}
	
	immediate = {
		
	}
	
	option = {
		name = "diadochi_flavor.18.a"
		show_as_tooltip = {
			p:418 = {
				set_owned_by = c:PRY
			}
			add_truce = {
				target = c:MAC
				duration = 1825
			}
			c:MAC = {
				add_truce = {
					target = c:PRY
					duration = 1825
				}
			}
		}
	}
}

diadochi_flavor.19 = { #Phrygia and Macedon are fighting.
    type = country_event
    title = diadochi_flavor.19.t
    desc = diadochi_flavor.19.desc
    
	picture = greek_court
	
	trigger = {
		
	}
	
	immediate = {
		
	}
	
	option = {
		name = "diadochi_flavor.19.a"
		custom_tooltip = diadochi_flavor.25.at
	}
}

diadochi_flavor.20 = { #In defence of Cassander
    type = country_event
    title = diadochi_flavor.20.t
    desc = diadochi_flavor.20.desc
    
	picture = elephant_battle
	
	left_portrait = current_ruler
	left_portrait = c:MAC.current_ruler
	right_portrait = c:PRY.current_ruler
	
	trigger = {
		tag = EGY
		has_global_variable = fourth_war_triggered
		NOR = {
			war_with = c:MAC
			war_with = c:PRY
			has_truce_with = c:PRY
			has_global_variable = antigonus_the_failure
		}
	}
	
	option = {
		name = "diadochi_flavor.20.a"
		declare_war_with_wargoal = {
			war_goal = diadochi_wargoal
			target = c:PRY
		}
		every_country = {
			limit = {
				country_culture_group = hellenic
				NOR = {
					tag = PRY
					tag = EGY
				}
			}
			trigger_event = {
				id = diadochi_flavor.21
			}
		}
		c:PRY = {
			trigger_event = {
				id = diadochi_flavor.31
			}
		}
		ai_chance = {
			modifier = {
				factor = 20
			}
		}
	}
	
	option = {
		name = "diadochi_flavor.20.b"
		custom_tooltip = "offer_will_be_sent_egy"
		show_as_tooltip = {
			declare_war_with_wargoal = {
				war_goal = diadochi_wargoal
				target = c:PRY
			}
		}
		c:PRY = {
			trigger_event = {
				id = diadochi_flavor.22
				days = 5
			}
		}
		ai_chance = {
			factor = 80
		}
	}
	
	option = {
		name = "diadochi_flavor.20.c"
		custom_tooltip = "passive_egypt_tt"
		ai_chance = {
			factor = 0
		}
	}
}

diadochi_flavor.21 = { #Ptolemy Stirs
    type = country_event
    title = diadochi_flavor.21.t
    desc = diadochi_flavor.21.desc
    
	picture = elephant_battle
	
	left_portrait = c:EGY.current_ruler
	right_portrait = c:PRY.current_ruler
	
	option = {
		name = "diadochi_flavor.21.a"
		custom_tooltip = diadochi_flavor_31.at
	}
}

diadochi_flavor.22 = { #Ptolemaic Ultimatum
	type = country_event
    title = diadochi_flavor.22.t
    desc = diadochi_flavor.22.desc
    
	picture = elephant_battle
	
	left_portrait = current_ruler
	right_portrait = c:EGY.current_ruler
	right_portrait = c:MAC.current_ruler
	
	trigger = {
		NOT = {
			war_with = c:EGY
		}
	}
	
	option = {
		name = "diadochi_flavor.22.a"
		custom_tooltip = transfer_phrygian_lands_egy_tt
		show_as_tooltip = {
			c:EGY = {
				add_truce = {
					target = c:MAC
					duration = 1825
				}
				add_truce = {
					target = c:PRY
					duration = 1825
				}
			}
		}
		c:EGY = {
			trigger_event = {
				id = diadochi_flavor.23
			}
		}
		set_variable = ptolemaic_deal_flag
		add_stability = -10
		ai_chance = {
			modifier = {
				factor = 2
			}
			modifier = {
				factor = 3
				has_war_exhaustion >= 8
			}
			modifier = {
				factor = 3
				manpower <= 20
			}
		}
	}
	
	option = {
		name = "diadochi_flavor.22.b"
		add_stability = 20
		add_manpower = 10
		c:EGY = {
			declare_war_with_wargoal = {
				war_goal = diadochi_wargoal
				target = c:PRY
			}
			trigger_event = {
				id = diadochi_flavor.26
			}
		}
		every_country = {
			limit = {
				country_culture_group = hellenic
				NOR = {
					tag = PRY
					tag = EGY
				}
			}
			trigger_event = {
				id = diadochi_flavor.21
			}
		}
		ai_chance = {
			modifier = {
				factor = 4
			}
		}
	}
}

diadochi_flavor.23 = { #Antigonids agree
	type = country_event
    title = diadochi_flavor.23.t
    desc = diadochi_flavor.23.desc
    
	picture = elephant_battle
	
	left_portrait = current_ruler
	right_portrait = c:PRY.current_ruler
	
	trigger = {
		NOT = {
			war_with = c:PRY
		}
	}
	
	immediate = {
		c:PRY = { save_scope_as = antigonids_scope }
	}
	
	option = {
		name = "diadochi_flavor.23.a"
		custom_tooltip = "transfer_phrygian_lands_egy_tt"
		hidden_effect = {
			add_truce = {
				target = c:MAC
				duration = 1825
			}
			add_truce = {
				target = c:PRY
				duration = 1825
			}
			c:PRY = {
				every_owned_province = {
					limit = {
						OR = {
							is_in_area = south_phoenicia_area
							is_in_area = syria_coele_area
							is_in_area = cyprus_area
							is_in_region = palestine_region
						}
					}
					set_owned_by = c:EGY
				}
				add_truce = {
					target = c:EGY
					duration = 1825
				}
				every_subject = {
					limit = {
						capital_scope = {
							OR = {
								is_in_area = south_phoenicia_area
								is_in_area = syria_coele_area
								is_in_region = palestine_region
							}
						}
					}
					c:PRY = {
						release_subject = PREV
					}
					trigger_event = {
						id = diadochi_flavor.35
					}
				}
				every_subject = {
					c:EGY = {
						add_truce = {
							target = PREV
							duration = 1825
						}
					}
				}
				trigger_event = {
					id = fix_holdings.1
					days = { 1 2 }
				}
			}
			every_subject = {
				c:PRY = {
					add_truce = {
						target = PREV
						duration = 1825
					}
				}
			}
		}
		every_country = {
			limit = {   
				country_culture_group = hellenic
				NOR = {
					tag = PRY
					tag = EGY
				}
			}
			trigger_event = {
				id = diadochi_flavor.24
			}
		}
	}
}

diadochi_flavor.24 = { #Antigonids bend
	type = country_event
    title = diadochi_flavor.24.t
    desc = diadochi_flavor.24.desc
    
	picture = army_desert
	
	left_portrait = c:EGY.current_ruler
	right_portrait = c:PRY.current_ruler
	
	option = {
		name = "diadochi_flavor.24.a"
		custom_tooltip = transfer_phrygian_lands_egy_tt
	}
}

diadochi_flavor.25 = { #War with Macedon
	type = country_event
    title = diadochi_flavor.25.t
    desc = diadochi_flavor.25.desc
	picture = greek_court
	left_portrait = c:PRY.current_ruler
	right_portrait = c:MAC.current_ruler

	immediate = {
		hidden_effect = {
			random_current_war = {
				limit = {
					any_war_participant = { tag = MAC }
					is_war_leader = c:MAC
				}
				save_scope_as = antigonid_diadochi_war_scope
			}
			every_subject = {
				limit = {
					OR = {
						is_subject_type = feudatory
						is_subject_type = satrapy
						is_subject_type = client_state
					}
					has_subject_loyalty >= 33
					save_temporary_scope_as = temp_subject_war_scope
					scope:antigonid_diadochi_war_scope = {
						NOR = {
							any_war_attacker = { this = scope:temp_subject_war_scope }
							any_war_defender = { this = scope:temp_subject_war_scope }
						}
					}
				}
				add_to_war = {
					target = scope:antigonid_diadochi_war_scope
					attacker = yes
					leader = no
				}
			}
		}
	}

	option = {
		name = "diadochi_flavor.25.a"
		custom_tooltip = diadochi_flavor.25.at
	}
}

diadochi_flavor.26 = { #War with Phrygia
	type = country_event
    title = diadochi_flavor.26.t
    desc = diadochi_flavor.26.desc
    
	picture = army_desert
	
	left_portrait = current_ruler
	right_portrait = c:PRY.current_ruler
	
	immediate = {
		hidden_effect = {
			random_current_war = {
				limit = {
					any_war_participant = { tag = PRY }
					is_war_leader = c:PRY
				}
				save_scope_as = ptolemaic_diadochi_war_scope
			}
			every_subject = {
				limit = {
					OR = {
						is_subject_type = feudatory
						is_subject_type = satrapy
						is_subject_type = client_state
					}
					has_subject_loyalty >= 33
					save_temporary_scope_as = temp_subject_war_scope
					scope:ptolemaic_diadochi_war_scope = {
						NOR = {
							any_war_attacker = { this = scope:temp_subject_war_scope }
							any_war_defender = { this = scope:temp_subject_war_scope }
						}
					}
				}
				add_to_war = {
					target = scope:ptolemaic_diadochi_war_scope
					attacker = yes
					leader = no
				}
			}
		}
	}

	option = {
		name = "diadochi_flavor.26.a"
		custom_tooltip = diadochi_flavor_31.at
	}
}

diadochi_flavor.27 = { #A time to strike
    type = country_event
    title = diadochi_flavor.27.t
    desc = diadochi_flavor.27.desc
    
	picture = elephant_battle
	
	left_portrait = current_ruler
	right_portrait = c:PRY.current_ruler
	
	trigger = {
		tag = SEL
		has_global_variable = fourth_war_triggered
		NOR = {
			war_with = c:MAC
			war_with = c:PRY
			has_truce_with = c:PRY
			has_global_variable = antigonus_the_failure
		}
	}

	immediate = {
		random_country = {
			limit = { has_variable = me_ant_start_flag }
			save_scope_as = antigonids_scope
		}
	}
	
	option = {
		name = "diadochi_flavor.27.a" #Time for war
		declare_war_with_wargoal = {
			war_goal = diadochi_wargoal
			target = scope:antigonids_scope
		}
		every_country = {
			limit = {
				country_culture_group = hellenic
				NOR = {
					THIS = scope:antigonids_scope
					tag = SEL
				}
			}
			trigger_event = {
				id = diadochi_flavor.29
			}
		}
		scope:antigonids_scope = {
			trigger_event = {
				id = diadochi_flavor.30
			}
		}
		ai_chance = {
			factor = 60
			modifier = {
				war_with = MRY
				factor = 0
			}
		}
	}
	
	option = {
		name = "diadochi_flavor.27.b" #Send Demand To Phrygia
		custom_tooltip = "offer_will_be_sent_to_pry"
		show_as_tooltip = {
			declare_war_with_wargoal = {
				war_goal = diadochi_wargoal
				target = scope:antigonids_scope
			}
		}
		scope:antigonids_scope = {
			trigger_event = {
				id = diadochi_flavor.28
				days = 5
			}
		}
		ai_chance = {
			factor = 40
		}
	}
}

diadochi_flavor.28 = { #Seleucid demands
	type = country_event
    title = diadochi_flavor.28.t
    desc = diadochi_flavor.28.desc
    
	picture = elephant_battle
	
	left_portrait = current_ruler
	right_portrait = c:SEL.current_ruler
	
	trigger = {
		NOT = {
			war_with = c:SEL
		}
	}
	
	option = {
		name = "diadochi_flavor.28.a" #Surrender the land
		trigger = { #We cannot surrender if we have no land left to give up.
			any_owned_province = {
				NOT = { is_in_area = osroene_area }
				NOT = { is_in_area = palmyra_area }
				NOT = { is_in_area = syria_cyrrestice_area }
				NOT = { is_in_area = syria_area }
				NOT = { is_in_area = north_phoenicia_area }
				NOT = { is_in_area = apamene_area }
				NOT = { is_in_area = south_phoenicia_area }
				NOT = { is_in_area = syria_coele_area }
				NOT = { is_in_region = palestine_region }
				NOT = { is_in_region = greece_region }
			}
		}
		custom_tooltip = transfer_phrygian_lands_sel_tt
		show_as_tooltip = {
			c:SEL = {
				add_truce = {
					target = c:PRY
					duration = 1825
				}
			}
			c:PRY = {
				add_truce = {
					target = c:SEL
					duration = 1825
				}
			}
		}
		hidden_effect = { #Capital must move.
			if = {
				limit = {
					p:1936 = {
						owner = c:PRY
						controller = C:PRY
					}
				}
				set_capital = p:1936 #Celenae
			}
			else_if = {
				limit = {
					any_owned_province = {
						is_state_capital = yes
						controller = owner
						NOT = { is_in_area = osroene_area }
						NOT = { is_in_area = palmyra_area }
						NOT = { is_in_area = syria_cyrrestice_area }
						NOT = { is_in_area = syria_area }
						NOT = { is_in_area = north_phoenicia_area }
						NOT = { is_in_area = apamene_area }
						NOT = { is_in_area = cyprus_area }
						NOT = { is_in_area = south_phoenicia_area }
						NOT = { is_in_area = syria_coele_area }
						NOT = { is_in_region = palestine_region }
						NOT = { is_in_region = greece_region }
					}
				}
				ordered_owned_province = {
					order_by = total_population
					limit = {
						is_state_capital = yes
						controller = owner
						NOT = { is_in_area = osroene_area }
						NOT = { is_in_area = palmyra_area }
						NOT = { is_in_area = syria_cyrrestice_area }
						NOT = { is_in_area = syria_area }
						NOT = { is_in_area = north_phoenicia_area }
						NOT = { is_in_area = apamene_area }
						NOT = { is_in_area = south_phoenicia_area }
						NOT = { is_in_area = syria_coele_area }
						NOT = { is_in_area = cyprus_area }
						NOT = { is_in_region = palestine_region }
						NOT = { is_in_region = greece_region }
					}
					ROOT = {
						set_capital = PREV
					}
				}
			}
			else_if = {
				limit = {
					any_owned_province = {
						NOT = { is_in_area = osroene_area }
						NOT = { is_in_area = palmyra_area }
						NOT = { is_in_area = syria_cyrrestice_area }
						NOT = { is_in_area = syria_area }
						NOT = { is_in_area = north_phoenicia_area }
						NOT = { is_in_area = apamene_area }
						NOT = { is_in_area = cyprus_area }
						NOT = { is_in_area = south_phoenicia_area }
						NOT = { is_in_area = syria_coele_area }
						NOT = { is_in_region = palestine_region }
						NOT = { is_in_region = greece_region }
						controller = owner
					}
				}
				ordered_owned_province = {
					order_by = total_population
					limit = {
						NOT = { is_in_area = osroene_area }
						NOT = { is_in_area = palmyra_area }
						NOT = { is_in_area = syria_cyrrestice_area }
						NOT = { is_in_area = syria_area }
						NOT = { is_in_area = north_phoenicia_area }
						NOT = { is_in_area = apamene_area }
						NOT = { is_in_area = south_phoenicia_area }
						NOT = { is_in_area = syria_coele_area }
						NOT = { is_in_area = cyprus_area }
						NOT = { is_in_region = palestine_region }
						NOT = { is_in_region = greece_region }
						controller = owner
					}
					ROOT = {
						set_capital = PREV
					}
				}
			}
			else = {
				ordered_owned_province = {
					order_by = total_population
					limit = {
						NOT = { is_in_area = osroene_area }
						NOT = { is_in_area = palmyra_area }
						NOT = { is_in_area = syria_cyrrestice_area }
						NOT = { is_in_area = syria_area }
						NOT = { is_in_area = north_phoenicia_area }
						NOT = { is_in_area = apamene_area }
						NOT = { is_in_area = south_phoenicia_area }
						NOT = { is_in_area = syria_coele_area }
						NOT = { is_in_area = cyprus_area }
						NOT = { is_in_region = palestine_region }
						NOT = { is_in_region = greece_region }
					}
					ROOT = {
						set_capital = PREV
					}
				}
			}
		}
		set_variable = seleukid_deal_flag
		c:SEL = {
			trigger_event = {
				id = diadochi_flavor.33
			}
		}
		add_stability = -10
		ai_chance = {
			modifier = {
				factor = 2
			}
			modifier = {
				factor = 3
				has_war_exhaustion >= 8
			}
			modifier = {
				factor = 3
				manpower <= 20
			}
		}
	}
	
	option = {
		name = "diadochi_flavor.28.b" #War on the other hand we can always choose.
		add_stability = 20
		add_manpower = 10
		c:SEL = {
			declare_war_with_wargoal = {
				war_goal = diadochi_wargoal
				target = c:PRY
			}
			trigger_event = {
				id = diadochi_flavor.32
			}
		}
		every_country = {
			limit = {
				country_culture_group = hellenic
				NOR = {
					tag = PRY
					tag = SEL
				}
			}
			trigger_event = {
				id = diadochi_flavor.29
			}
		}
		ai_chance = {
			modifier = {
				factor = 4
			}
		}
	}
}

diadochi_flavor.29 = { #Antigonid-Seleucid War
	type = country_event
    title = diadochi_flavor.29.t
    desc = diadochi_flavor.29.desc
    
	picture = elephant_battle
	
	left_portrait = c:SEL.current_ruler
	right_portrait = c:PRY.current_ruler

	option = {
		name = "diadochi_flavor.29.a"
		custom_tooltip = diadochi_flavor_30.at
	}
}

diadochi_flavor.30 = { # War with Seleucids
    type = country_event
    title = diadochi_flavor.30.t
    desc = diadochi_flavor_30.desc
    picture = elephant_battle
    
    left_portrait = c:SEL.current_ruler
    right_portrait = c:PRY.current_ruler

    immediate = {
    	hidden_effect = {
			c:SEL = {
				random_current_war = {
					limit = {
						any_war_participant = { tag = PRY }
						is_war_leader = c:PRY
					}
					save_scope_as = seleukid_diadochi_war_scope
				}
				every_subject = {
					limit = {
						OR = {
							is_subject_type = feudatory
							is_subject_type = satrapy
							is_subject_type = client_state
						}
						has_subject_loyalty >= 33
						save_temporary_scope_as = temp_subject_war_scope
						scope:seleukid_diadochi_war_scope = {
							NOR = {
								any_war_attacker = { this = scope:temp_subject_war_scope }
								any_war_defender = { this = scope:temp_subject_war_scope }
							}
						}
					}
					add_to_war = {
						target = scope:seleukid_diadochi_war_scope
						attacker = yes
						leader = no
					}
				}
			}
		}
    }

    option = {      
        name = diadochi_flavor_30.a
        custom_tooltip = diadochi_flavor_30.at
    }
}

diadochi_flavor.31 = { #War with Egypt
	type = country_event
    title = diadochi_flavor.31.t
    desc = diadochi_flavor.31.desc
    
	picture = army_desert
	
	left_portrait = c:EGY.current_ruler
	right_portrait = c:PRY.current_ruler
	
	immediate = {
		hidden_effect = {
			c:EGY = {
				random_current_war = {
					limit = {
						any_war_participant = { tag = PRY }
						is_war_leader = c:PRY
					}
					save_scope_as = ptolemaic_diadochi_war_scope
				}
				every_subject = {
					limit = {
						OR = {
							is_subject_type = feudatory
							is_subject_type = satrapy
							is_subject_type = client_state
						}
						has_subject_loyalty >= 33
						save_temporary_scope_as = temp_subject_war_scope
						scope:ptolemaic_diadochi_war_scope = {
							NOR = {
								any_war_attacker = { this = scope:temp_subject_war_scope }
								any_war_defender = { this = scope:temp_subject_war_scope }
							}
						}
					}
					add_to_war = {
						target = scope:ptolemaic_diadochi_war_scope
						attacker = yes
						leader = no
					}
				}
			}
		}
	}

	option = {
		name = "diadochi_flavor.31.a"
		custom_tooltip = diadochi_flavor_31.at
	}
}

diadochi_flavor.32 = { #Seleucids Attack
	type = country_event
    title = diadochi_flavor.32.t
    desc = diadochi_flavor.32.desc
    
	picture = elephant_battle
	
	left_portrait = c:SEL.current_ruler
	right_portrait = c:PRY.current_ruler
	
	immediate = {
		hidden_effect = {
			c:SEL = {
				random_current_war = {
					limit = {
						any_war_participant = { tag = PRY }
						is_war_leader = c:PRY
					}
					save_scope_as = seleukid_diadochi_war_scope
				}
				every_subject = {
					limit = {
						OR = {
							is_subject_type = feudatory
							is_subject_type = satrapy
							is_subject_type = client_state
						}
						has_subject_loyalty >= 33
						save_temporary_scope_as = temp_subject_war_scope
						scope:seleukid_diadochi_war_scope = {
							NOR = {
								any_war_attacker = { this = scope:temp_subject_war_scope }
								any_war_defender = { this = scope:temp_subject_war_scope }
							}
						}
					}
					add_to_war = {
						target = scope:seleukid_diadochi_war_scope
						attacker = yes
						leader = no
					}
				}
			}
		}
	}

	option = {
		name = "diadochi_flavor.32.a"
	}
}

diadochi_flavor.33 = { #Antigonids Concede Syria
	type = country_event
    title = diadochi_flavor.33.t
    desc = diadochi_flavor.33.desc
    
	picture = elephant_battle
	
	left_portrait = current_ruler
	right_portrait = c:PRY.current_ruler
	
	trigger = {
		NOT = {
			war_with = c:PRY
		}
	}
	
	immediate = {
		c:PRY = { save_scope_as = antigonids_scope }
	}
	
	option = {
		name = "diadochi_flavor.33.a"
		custom_tooltip = "transfer_phrygian_lands_sel_tt"
		hidden_effect = {
			c:PRY = {
				every_owned_province = {
					limit = {
						OR = {
							is_in_area = osroene_area
							is_in_area = palmyra_area
							is_in_area = syria_cyrrestice_area
							is_in_area = syria_area
							is_in_area = north_phoenicia_area
							is_in_area = apamene_area
							is_in_region = mesopotamia_region
							is_in_region = assyria_region
						}
					}
					set_owned_by = c:SEL
				}
        trigger_event = {
          id = fix_holdings.1
          days = {1 2}
        }
				every_country = {
					limit = {   
						country_culture_group = hellenic
						NOR = {
							tag = PRY
							tag = SEL
							AND = {
								is_subject_of = c:PRY
								is_subject_type = tributary
								capital_scope = {
									OR = {
										is_in_area = osroene_area
										is_in_area = palmyra_area
										is_in_area = syria_cyrrestice_area
										is_in_area = syria_area
										is_in_area = north_phoenicia_area
										is_in_area = apamene_area
										is_in_region = mesopotamia_region
										is_in_region = assyria_region
									}
								}
							}
						}
					}
					trigger_event = {
						id = diadochi_flavor.34
					}
				}
				every_subject = {
					limit = {
						is_subject_type = tributary
						capital_scope = {
							OR = {
								is_in_area = osroene_area
								is_in_area = palmyra_area
								is_in_area = syria_cyrrestice_area
								is_in_area = syria_area
								is_in_area = north_phoenicia_area
								is_in_area = apamene_area
								is_in_region = mesopotamia_region
								is_in_region = assyria_region
							}
						}
					}
					c:PRY = {
						release_subject = PREV
					}
					trigger_event = {
						id = diadochi_flavor.35
					}
				}
				c:SEL = {
					add_truce = {
						target = c:PRY
						duration = 1825
					}
					every_subject = {
						c:PRY = {
							add_truce = {
								target = PREV
								duration = 1825
							}
						}
					}
				}
				add_truce = {
					target = c:SEL
					duration = 1825
				}
				every_subject = {
					c:SEL = {
						add_truce = {
							target = PREV
							duration = 1825
						}
					}
				}
			}
		}
	}
}

diadochi_flavor.34 = { #Antigonids bow to Seleukid demands
	type = country_event
    title = diadochi_flavor.34.t
    desc = diadochi_flavor.34.desc
    
	picture = army_desert
	
	left_portrait = c:SEL.current_ruler
	right_portrait = c:PRY.current_ruler
	
	option = {
		name = "diadochi_flavor.34.a"
		custom_tooltip = transfer_phrygian_lands_sel_tt
	}
}

diadochi_flavor.35 = { #Freedom?
	type = country_event
    title = diadochi_flavor.35.t
    desc = diadochi_flavor.35.desc
    
	picture = army_desert
	
	left_portrait = scope:antigonids_scope.current_ruler
	right_portrait = current_ruler
	
	option = {
		name = "diadochi_flavor.35.a"
		custom_tooltip = transfer_phrygian_lands_sel_tt
	}

	after = {
		trigger_event = {
			id = diadochi_flavor.34
			days = 5
		}
	}
}

diadochi_flavor.36 = { #Phrygia - The protector of the Greeks?
	type = country_event
    title = diadochi_flavor.36.t
    desc = diadochi_flavor.36.desc
    
	picture = greek_city
	
	left_portrait = current_ruler
	right_portrait = c:PRY.current_ruler
	
	trigger = {
		has_global_variable = phrygia_the_betrayer
		NOT = { has_variable = reacted_to_phrygian_betrayal }
		country_culture_group = hellenic
		war = no
		is_subject_of = c:PRY
		c:PRY = {
			NOT = { has_variable = epigoni }
			NOT = {
				any_owned_province = {
					is_in_region = greece_region
				}
			}
			NOT = {
				any_owned_province = {
					is_in_region = macedonia_region
				}
			}
		}
	}
	
	immediate = {
		save_scope_as = freedom_tag
		set_variable = reacted_to_phrygian_betrayal
		capital_scope = { save_scope_as = freedom_city }
	}
	
	option = {
		name = "diadochi_flavor.36.a"	
		custom_tooltip = diadochi_flavor.36.a.tt
		ai_chance = {
			factor = 50
			modifier = {
				factor = 10
				opinion = {
					target = c:PRY
					value > 150
				}
			}
		}
	}
	option = {
		name = "diadochi_flavor.36.b"
		custom_tooltip = diadochi_flavor.36.b.tt
		ai_chance = {
			factor = 50
			modifier = {
				factor = 10
				opinion = {
					target = c:PRY
					value < 50
				}
			}
		}
		show_as_tooltip = {
			c:PRY = { release_subject = ROOT }
		}
		hidden_effect = {
			c:PRY = {
				trigger_event = {
					id = diadochi_flavor.37
				}
			}
		}
	}
}

diadochi_flavor.37 = { #Phrygian response
	type = country_event
    title = diadochi_flavor.37.t
    desc = diadochi_flavor.37.desc
    
	picture = greek_city
	
	left_portrait = current_ruler
	right_portrait = scope:freedom_tag.current_ruler
	
	immediate = {
		
	}
	
	option = {
		name = "diadochi_flavor.37.a"
		ai_chance = {
			modifier = {
				factor = 80
			}
		}
		c:PRY = { release_subject = scope:freedom_tag }
		declare_war_with_wargoal = {
			war_goal = conquer_wargoal
			province = scope:freedom_city
			target = scope:freedom_tag
		}
		every_subject = {
			limit = {
				country_culture_group = hellenic
			}
			show_as_tooltip = {
				add_opinion = {
					modifier = opinion_phrygia_despotic
					target = PRY
				}
				trigger_event = {
					id = diadochi_flavor.39
				}
			}
		}
		hidden_effect = {
			scope:freedom_tag = {
				trigger_event = {
					id = diadochi_flavor.38
				}
			}
		}
	}
	option = {
		name = "diadochi_flavor.37.b"
		c:PRY = { release_subject = scope:freedom_tag }
		add_stability = -2.5
		ai_chance = {
			modifier = {
				factor = 20
			}
		}
	}
}

diadochi_flavor.38 = { #Phrygian Attacks
	type = country_event
    title = diadochi_flavor.38.t
    desc = diadochi_flavor.38.desc
    
	picture = greek_city
	
	left_portrait = c:PRY.current_ruler
	right_portrait = current_ruler

	immediate = {
		hidden_effect = {
			c:PRY = {
				random_current_war = {
					limit = {
						any_war_participant = { this = root }
						is_war_leader = root
					}
					save_scope_as = freedom_diadochi_war_scope
				}
				every_subject = {
					limit = {
						OR = {
							is_subject_type = feudatory
							is_subject_type = satrapy
							is_subject_type = client_state
						}
						has_subject_loyalty >= 33
						NOT = { country_culture_group = hellenic }
						save_temporary_scope_as = temp_subject_war_scope
						scope:freedom_diadochi_war_scope = {
							NOR = {
								any_war_attacker = { this = scope:temp_subject_war_scope }
								any_war_defender = { this = scope:temp_subject_war_scope }
							}
						}
					}
					add_to_war = {
						target = scope:freedom_diadochi_war_scope
						attacker = yes
						leader = no
					}
				}
			}
		}
	}

	option = {
		name = "diadochi_flavor.38.a"
		show_as_tooltip = {
			c:PRY = {
				declare_war_with_wargoal = {
					war_goal = conquer_wargoal
					province = scope:freedom_city
					target = ROOT
				}
			}
		}
	}
}

diadochi_flavor.39 = { #Phrygian Attacks a subject
	type = country_event
    title = diadochi_flavor.39.t
    desc = diadochi_flavor.39.desc
    
	picture = greek_city
	
	left_portrait = c:PRY.current_ruler
	right_portrait = current_ruler

	option = {
		name = "diadochi_flavor.39.a"
		add_opinion = {
			modifier = opinion_phrygia_despotic
			target = PRY
		}
	}
}

diadochi_flavor.40 = { #In defence of Cassander
    type = country_event
    title = diadochi_flavor.40.t
    desc = diadochi_flavor.40.desc
    
	picture = city_siege
	
	left_portrait = current_ruler
	left_portrait = c:MAC.current_ruler
	right_portrait = c:PRY.current_ruler
	
	trigger = {
		tag = TRE
		has_global_variable = fourth_war_triggered
		NOR = {
			war_with = c:MAC
			war_with = c:PRY
			has_truce_with = c:PRY
			has_global_variable = antigonus_the_failure
		}
	}
	
	option = {
		name = "diadochi_flavor.40.a"
		declare_war_with_wargoal = {
			war_goal = diadochi_wargoal
			target = c:PRY
		}
		every_country = {
			limit = {
				country_culture_group = hellenic
				NOR = {
					tag = PRY
					tag = TRE
				}
			}
			trigger_event = {
				id = diadochi_flavor.41
			}
		}
		c:PRY = {
			trigger_event = {
				id = diadochi_flavor.42
			}
		}
		ai_chance = {
			modifier = {
				factor = 20
			}
		}
	}
	
	option = {
		name = "diadochi_flavor.40.b"
		custom_tooltip = "offer_will_be_sent_tre"
		show_as_tooltip = {
			declare_war_with_wargoal = {
				war_goal = diadochi_wargoal
				target = c:PRY
			}
		}
		c:PRY = {
			trigger_event = {
				id = diadochi_flavor.43
				days = 5
			}
		}
		ai_chance = {
			factor = 40
		}
	}

	option = {
		name = "diadochi_flavor.40.c"
		if = {
			limit = {
				current_ruler = {
					NOT = { has_trait = content }
				}
			}
			current_ruler = { add_trait = content }
		}
		ai_chance = {
			factor = 0
		}
	}
}

diadochi_flavor.41 = { #Lysimachus Makes a Move
    type = country_event
    title = diadochi_flavor.41.t
    desc = diadochi_flavor.41.desc
    
	picture = city_siege
	
	left_portrait = c:TRE.current_ruler
	right_portrait = c:PRY.current_ruler
	
	option = {
		name = "diadochi_flavor.41.a"
		custom_tooltip = diadochi_flavor.42.at
	}
}

diadochi_flavor.42 = { #War with Thrace
	type = country_event
    title = diadochi_flavor.42.t
    desc = diadochi_flavor.42.desc
    
	picture = city_siege
	
	left_portrait = c:TRE.current_ruler
	right_portrait = c:PRY.current_ruler
	
	immediate = {
		hidden_effect = {
			random_current_war = {
				limit = {
					any_war_participant = { tag = PRY }
					is_war_leader = c:PRY
				}
				save_scope_as = lysimachid_diadochi_war_scope
			}
			every_subject = {
				limit = {
					OR = {
						is_subject_type = feudatory
						is_subject_type = satrapy
						is_subject_type = client_state
					}
					has_subject_loyalty >= 33
					save_temporary_scope_as = temp_subject_war_scope
					scope:lysimachid_diadochi_war_scope = {
						NOR = {
							any_war_attacker = { this = scope:temp_subject_war_scope }
							any_war_defender = { this = scope:temp_subject_war_scope }
						}
					}
				}
				add_to_war = {
					target = scope:lysimachid_diadochi_war_scope
					attacker = yes
					leader = no
				}
			}
		}
	}

	option = {
		name = "diadochi_flavor.42.a"
		custom_tooltip = diadochi_flavor.42.at
	}
}

diadochi_flavor.43 = { #Thracian Ultimatum
	type = country_event
    title = diadochi_flavor.43.t
    desc = diadochi_flavor.43.desc
    
	picture = city_siege
	
	left_portrait = current_ruler
	right_portrait = c:TRE.current_ruler
	
	trigger = {
		NOT = {
			war_with = c:TRE
		}
	}
	
	option = {
		name = "diadochi_flavor.43.a"
		custom_tooltip = transfer_phrygian_lands_tre_tt
		show_as_tooltip = {
			c:TRE = {
				add_truce = {
					target = c:MAC
					duration = 1825
				}
				add_truce = {
					target = c:PRY
					duration = 1825
				}
			}
		}
		c:TRE = {
			trigger_event = {
				id = diadochi_flavor.44
			}
		}
		set_variable = lysimachid_deal_flag
		add_stability = -10
		ai_chance = {
			modifier = {
				factor = 2
			}
			modifier = {
				factor = 3
				has_war_exhaustion >= 8
			}
			modifier = {
				factor = 3
				manpower <= 20
			}
		}
	}
	
	option = {
		name = "diadochi_flavor.43.b"
		add_stability = 10
		add_manpower = 5
		c:TRE = {
			declare_war_with_wargoal = {
				war_goal = diadochi_wargoal
				target = c:PRY
			}
			trigger_event = {
				id = diadochi_flavor.45
			}
		}
		every_country = {
			limit = {
				country_culture_group = hellenic
				NOR = {
					tag = PRY
					tag = TRE
				}
			}
			trigger_event = {
				id = diadochi_flavor.41
			}
		}
		ai_chance = {
			modifier = {
				factor = 4
			}
		}
	}
}

diadochi_flavor.44 = { #Antigonids agree
	type = country_event
    title = diadochi_flavor.44.t
    desc = diadochi_flavor.44.desc
    
	picture = elephant_battle
	
	left_portrait = current_ruler
	right_portrait = c:PRY.current_ruler
	
	trigger = {
		NOT = {
			war_with = c:PRY
		}
	}
	
	immediate = {
		
	}
	
	option = {
		name = "diadochi_flavor.44.a"
		custom_tooltip = "transfer_phrygian_lands_tre_tt"
		hidden_effect = {
			c:PRY = {
				every_owned_province = {
					limit = {
						OR = {
							is_in_area = aeolia_area
							is_in_area = mysia_area
							is_in_area = lydia_area
							is_in_area = mysia_abrettene_area
							is_in_area = bithynia_inferior_area
							is_in_area = bithynia_superior_area
							is_in_area = heracleotis_area
						}
					}
					set_owned_by = c:TRE
				}
				add_truce = {
					target = c:TRE
					duration = 1825
				}
				every_country = {
					limit = {   
						country_culture_group = hellenic
						NOR = {
							tag = PRY
							tag = TRE
							AND = {
								tag = IOA
								has_land = yes
								is_subject_of = c:PRY
								any_owned_province = {
									NOT = { is_in_area = aeolia_area }
								}
							}
							AND = {
								is_subject_of = c:PRY
								NOR = {
									tag = IOA
									tag = ION
								}
								capital_scope = {
									OR = {
										is_in_area = aeolia_area
										is_in_area = mysia_area
										is_in_area = lydia_area
										is_in_area = mysia_abrettene_area
										is_in_area = bithynia_inferior_area
										is_in_area = bithynia_superior_area
										is_in_area = heracleotis_area
									}
								}
							}
						}
					}
					trigger_event = {
						id = diadochi_flavor.47
					}
				}
				if = {
					limit = {
						c:IOA = {
							has_land = yes
							is_subject_of = c:PRY
							any_owned_province = {
								NOT = { is_in_area = aeolia_area }
							}
						}
					}
					c:IOA = { 
						trigger_event = { id = diadochi_flavor.48 }
					}
				}
				every_subject = {
					limit = {
						is_subject_type = tributary
						capital_scope = {
							OR = {
								is_in_area = aeolia_area
								is_in_area = mysia_area
								is_in_area = lydia_area
								is_in_area = mysia_abrettene_area
								is_in_area = bithynia_inferior_area
								is_in_area = bithynia_superior_area
								is_in_area = heracleotis_area
							}
						}
					}
					c:PRY = {
						release_subject = PREV
					}
					c:TRE = {
						make_subject = {
							type = tributary
							target = PREV
						}
					}
					trigger_event = {
						id = diadochi_flavor.46
					}
				}
				c:TRE = {
					add_truce = {
						target = c:PRY
						duration = 1825
					}
					every_subject = {
						c:PRY = {
							add_truce = {
								target = PREV
								duration = 1825
							}
						}
					}
				}
				add_truce = {
					target = c:TRE
					duration = 1825
				}
				every_subject = {
					c:TRE = {
						add_truce = {
							target = PREV
							duration = 1825
						}
					}
				}
			}
		}
	}
}

diadochi_flavor.45 = { #War with Phrygia
	type = country_event
    title = diadochi_flavor.45.t
    desc = diadochi_flavor.45.desc
    
	picture = city_siege
	
	left_portrait = c:PRY.current_ruler
	right_portrait = c:TRE.current_ruler

	immediate = {
		hidden_effect = {
			random_current_war = {
				limit = {
					any_war_participant = { tag = PRY }
					is_war_leader = c:PRY
				}
				save_scope_as = lysimachid_diadochi_war_scope
			}
			every_subject = {
				limit = {
					OR = {
						is_subject_type = feudatory
						is_subject_type = satrapy
						is_subject_type = client_state
					}
					has_subject_loyalty >= 33
					save_temporary_scope_as = temp_subject_war_scope
					scope:lysimachid_diadochi_war_scope = {
						NOR = {
							any_war_attacker = { this = scope:temp_subject_war_scope }
							any_war_defender = { this = scope:temp_subject_war_scope }
						}
					}
				}
				add_to_war = {
					target = scope:lysimachid_diadochi_war_scope
					attacker = yes
					leader = no
				}
			}
		}
	}

	option = {
		name = "diadochi_flavor.45.a"
		custom_tooltip = diadochi_flavor.42.at
	}
}

diadochi_flavor.46 = { #Freedom?
	type = country_event
    title = diadochi_flavor.35.t
    desc = diadochi_flavor.35.desc
    
	picture = city_siege
	
	left_portrait = c:PRY.current_ruler
	right_portrait = current_ruler
	
	option = {
		name = "diadochi_flavor.35.a"
		custom_tooltip = transfer_phrygian_lands_tre_tt
	}

	after = {
		trigger_event = {
			id = diadochi_flavor.47
			days = 5
		}
	}
}

diadochi_flavor.47 = { #Antigonids bend
	type = country_event
    title = diadochi_flavor.47.t
    desc = diadochi_flavor.47.desc
    
	picture = city_siege
	
	left_portrait = c:TRE.current_ruler
	right_portrait = scope:antigonids_scope.current_ruler
	
	option = {
		name = "diadochi_flavor.47.a"
		custom_tooltip = transfer_phrygian_lands_tre_tt
	}
}

diadochi_flavor.48 = { #Aiolia ping
	type = country_event
    title = diadochi_flavor.48.t
    desc = {
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:antigonids_scope = { has_variable = lysimachid_deal_flag }
    			}
    			desc = diadochi_flavor.48.desc
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.48.desc_1
    		}
    	}
    }
	picture = city_siege
	left_portrait = current_ruler
	right_portrait = scope:antigonids_scope.current_ruler
	right_portrait = c:TRE.current_ruler
	
	trigger = {
		any_owned_province = {
			OR = {
				province_id = 259
				province_id = 258
				province_id = 257
				province_id = 260
				province_id = 283
				province_id = 284
			}
		}
	}

	option = {
		name = "diadochi_flavor.48.a"
		every_owned_province = {
			limit = {
				NOR = {
					province_id = 259
					province_id = 258
					province_id = 257
					province_id = 260
					province_id = 283
					province_id = 284
				}
			}
			if = {
				limit = {
					p:292 = {
						has_owner = yes
						owner = { is_subject_of = c:TRE }
					}
					province_id = 285
				}
				set_owned_by = p:292.owner
			}
			else_if = {
				limit = {
					exists = scope:pergamon_scope
					OR = {
						province_id = 281
						province_id = 282
						province_id = 279
					}
				}
				set_owned_by = scope:pergamon_scope
			}
			else = { set_owned_by = c:TRE }
			hidden_effect = { add_claim = ROOT }
		}
	}

	after = {
		if = {
			limit = {
				scope:antigonids_scope = { has_variable = lysimachid_deal_flag }
			}
			trigger_event = {
				id = diadochi_flavor.47
				days = 5
			}
		}
	}
}

diadochi_flavor.49 = { # Egypt post Ipsos
	type = country_event
    title = diadochi_flavor.8.t
    desc = {
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:antigonids_scope = { has_variable = antigonid_stubbornness }
    			}
    			desc = diadochi_flavor.49.desc_1
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.49.desc_2
    		}
    	}
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:antigonids_scope = { has_variable = antigonid_stubbornness }
    			}
    			desc = diadochi_flavor.49.desc_3
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.49.desc_4
    		}
    	}
    }
	picture = successors
	left_portrait = current_ruler
	right_portrait = char:37
	right_portrait = scope:antigonids_scope.current_ruler

	trigger = {
		scope:antigonids_scope = {
			trigger_if = {
				limit = {
					any_owned_province = {
						OR = {
							is_in_region = palestine_region
							province_id = 740
							province_id = 742
						}
					}
				}
			}
			trigger_else = {
				has_variable = antigonid_stubbornness
				any_owned_province = { is_in_area = cyprus_area }
			}
		}
	}

	immediate = {
		if = {
			limit = { has_variable = antigonid_stubbornness }
			custom_tooltip = diadochi_flavor.8.bt
		}
		else = { custom_tooltip = diadochi_flavor.8.at }
	}

	option = {
		name = "diadochi_flavor.49.a"
		scope:antigonids_scope = {
			region:palestine_region = { # Palestine
				every_region_area = {
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			region:upper_egypt_region = { # Upper Egypt
				every_region_area = {
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			region:lower_egypt_region = { # Lower Egypt
				every_region_area = {
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			if = { # Cyprus
				limit = { has_variable = antigonid_stubbornness }
				antigonid_split_area_effect = {
					COUNTRY = ROOT
					AREA = area:cyprus_area
				}
			}
			else = {
				if = {
					limit = {
						any_subject = { 
							capital_scope = { is_in_region = palestine_region }
						}
					}
					hidden_effect = {
						every_subject = {
							limit = {
								capital_scope = { is_in_region = palestine_region }
							}
							trigger_event = { id = diadochi_flavor.55 }
						}
					}
					custom_tooltip = diadochi_flavor.49.tt3
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				war_with = scope:antigonids_scope
				any_current_war = {
					is_war_leader = ROOT
					is_war_leader = scope:antigonids_scope
				}
			}
			every_current_war = {
				limit = {
					is_war_leader = ROOT
					is_war_leader = scope:antigonids_scope
				}
				force_white_peace = THIS
			}
		}
	}
}

diadochi_flavor.50 = { # Thrace post Ipsos
	type = country_event
    title = diadochi_flavor.8.t
    desc = {
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:antigonids_scope = { has_variable = antigonid_stubbornness }
    			}
    			desc = diadochi_flavor.49.desc_1
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.49.desc_2
    		}
    	}
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:antigonids_scope = { has_variable = antigonid_stubbornness }
    			}
    			desc = diadochi_flavor.50.desc_3
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.50.desc_4
    		}
    	}
    }
	picture = successors
	left_portrait = current_ruler
	right_portrait = char:37
	right_portrait = scope:antigonids_scope.current_ruler
	goto_location = p:292

	trigger = {
		scope:antigonids_scope = {
			trigger_if = {
				limit = {
					any_owned_province = {
						OR = {
							is_in_region = asia_region
							is_in_region = galatia_region
							is_in_area = isauria_area
							is_in_region = bithynia_region
							is_in_region = cappadocia_region
						}
					}
				}
			}
			trigger_else = {
				NOT = { has_variable = antigonid_stubbornness }
				OR = {
					any_owned_province = {
						OR = {
							is_in_region = bithynia_region
							is_in_region = cappadocia_region
							AND = {
								is_in_region = cilicia_region
								NOR = {
									is_in_area = cyprus_area
									is_in_area = cilicia_trachea_area
									is_in_area = cilicia_pedias_area
									is_in_area = milyas_area
									is_in_area = lycia_area
								}
							}
						}
					}
					any_subject = { 
						capital_scope = {
							OR = {
								is_in_region = bithynia_region
								is_in_area = mysia_area
								is_in_region = cappadocia_region
							}
						}
						NOT = { tag = IOA }
					}
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			if = { # Phoenix
				limit = {
					char:104 = {
						is_alive = yes
						employer = scope:antigonids_scope
						prisoner = no
					}
				}
				char:104 = { save_scope_as = phoenix_scope }
			}
			else_if = {
				limit = {
					scope:antigonids_scope = {
						any_character = {
							is_alive = yes
							prisoner = no
							has_culture = macedonian
							from_ruler_family = no
							loyalty < 50
							trigger_if = {
								limit = {
									employer = { gender_equality = no }
								}
								is_male = yes
							}
							NOR = { 
								this = char:78
								this = char:68
								this = char:367
								this = char:368
							}
						}
					}
				}
				scope:antigonids_scope = {
					ordered_character = {
						limit = {
							is_alive = yes
							prisoner = no
							has_culture = macedonian
							from_ruler_family = no
							loyalty < 50
							trigger_if = {
								limit = {
									employer = { gender_equality = no }
								}
								is_male = yes
							}
							NOR = { 
								this = char:78
								this = char:68
								this = char:367
								this = char:368
							}
						}
						order_by = power_base
						save_scope_as = phoenix_scope
					}
				}
			}
			else = {
				create_character = {
					age = 56
					culture = macedonian
					religion = roman_pantheon
					save_scope_as = phoenix_scope
				}
			}
			if = { # Dokimos
				limit = {
					char:78 = {
						is_alive = yes
						employer = scope:antigonids_scope
						prisoner = no
					}
				}
				char:78 = { save_scope_as = dokimos_scope }
			}
			else_if = {
				limit = {
					scope:antigonids_scope = {
						any_character = {
							is_alive = yes
							prisoner = no
							has_culture = macedonian
							from_ruler_family = no
							loyalty < 50
							trigger_if = {
								limit = {
									employer = { gender_equality = no }
								}
								is_male = yes
							}
							NOR = { 
								this = char:104
								this = char:68
								this = char:367
								this = char:368
							}
						}
					}
				}
				scope:antigonids_scope = {
					ordered_character = {
						limit = {
							is_alive = yes
							prisoner = no
							has_culture = macedonian
							from_ruler_family = no
							loyalty < 50
							trigger_if = {
								limit = {
									employer = { gender_equality = no }
								}
								is_male = yes
							}
							NOR = { 
								this = char:104
								this = char:68
								this = char:367
								this = char:368
							}
						}
						order_by = power_base
						save_scope_as = dokimos_scope
					}
				}
			}
			else = {
				create_character = {
					age = 52
					culture = macedonian
					religion = roman_pantheon
					save_scope_as = dokimos_scope
				}
			}
		}
		scope:antigonids_scope = {
			if = {
				limit = { has_variable = antigonid_stubbornness }
				custom_tooltip = diadochi_flavor.8.bt
			}
			else = { custom_tooltip = diadochi_flavor.8.at }
		}
	}

	option = {
		name = "diadochi_flavor.50.a"
		galatia_phrgyia_satrapy_creation_effect = yes
		antigonids_asia_transfer_effect = yes
		antigonids_galatia_transfer_effect = yes
		scope:antigonids_scope = {
			region:bithynia_region = { # Bithynia
				every_region_area = {
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			region:asia_region = { # Asia
				every_region_area = {
					limit = {
						NOR = {
							THIS = area:inland_caria_area
							THIS = area:coastal_caria_area
							THIS = area:ionia_area
						}
					}
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			region:thrace_region = { # Thrace
				every_region_area = {
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			if = { # Release Cappadocian
				limit = {
					any_subject = { 
						capital_scope = { is_in_region = cappadocia_region }
					}
				}
				hidden_effect = {
					every_subject = {
						limit = {
							capital_scope = { is_in_region = cappadocia_region }
						}
						trigger_event = { id = diadochi_flavor.55 }
					}
				}
			}
			if = {
				limit = {
					NOT = { has_variable = antigonid_stubbornness }
				}
				if = { # Cappadocia takeback
					limit = {
						any_owned_province = { is_in_region = cappadocia_region }
					}				
					hidden_effect = {
						if = {
							limit = {
								c:CAP = { has_land = no }
							}
							set_variable = cap_ruler_flag
							create_character = {
								culture = cappadocian
								save_scope_as = cap_ruler
							}
						}
						every_owned_province = {
							limit = {is_in_region = cappadocia_region }
							set_conquered_by = c:CAP
						}
						if = {
							limit = { has_variable = cap_ruler_flag }
							c:CAP = { set_as_ruler = scope:cap_ruler }
							remove_variable = cap_ruler_flag
						}
					}
				}
				if = { # Pisidia
					limit = {
						area:pisidia_area = { antigonids_release_trigger = yes }
					}
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = area:pisidia_area
					}
				}
				if = { # Isauria
					limit = {
						area:isauria_area = { antigonids_release_trigger = yes }
					}
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = area:isauria_area
					}
				}
				if = { # Pamphylia
					limit = {
						area:pamphylia_area = { antigonids_release_trigger = yes }
					}
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = area:pamphylia_area
					}
				}
				region:galatia_region = { # Phrygia
					every_region_area = {
						limit = {
							NOT = { THIS = area:isauria_area }
						}
						antigonid_split_area_effect = {
							COUNTRY = ROOT
							AREA = THIS
						}
					}
				}
			}
		}
	}

	after = {
		scope:antigonids_scope = {
			if = { # Subject transfers
				limit = {
					any_subject = { 
						capital_scope = {
							OR = {
								is_in_region = bithynia_region
								is_in_area = mysia_area
							}
						}
						NOT = { tag = IOA }
					}
				}
				hidden_effect = {
					every_subject = {
						limit = {
							capital_scope = {
								OR = {
									is_in_region = bithynia_region
									is_in_area = mysia_area
								}
							}
							NOT = { tag = IOA }
						}
						trigger_event = diadochi_flavor.55
					}
				}
				#custom_tooltip = diadochi_flavor.50.tt6
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = scope:pergamon_scope }
				scope:pergamon_scope = {
					change_country_name = PERGAMON_NAME
					change_country_adjective = PERGAMON_ADJECTIVE
				}
			}
		}
		if = {
			limit = {
				c:MAC = {
					has_land = yes
					NOT = { alliance_with = scope:antigonids_scope }
				}
			}
			c:MAC = {
				trigger_event = { id = diadochi_flavor.52 } # Macedon division
			}
		}
		if = {
			limit = {
				war_with = scope:antigonids_scope
				any_current_war = {
					is_war_leader = ROOT
					is_war_leader = scope:antigonids_scope
				}
			}
			every_current_war = {
				limit = {
					is_war_leader = ROOT
					is_war_leader = scope:antigonids_scope
				}
				force_white_peace = THIS
			}
		}
	}
}

diadochi_flavor.51 = { # Seleukids post Ipsos
	type = country_event
    title = diadochi_flavor.8.t
    desc = {
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:antigonids_scope = { has_variable = antigonid_stubbornness }
    			}
    			desc = diadochi_flavor.49.desc_1
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.49.desc_2
    		}
    	}
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:antigonids_scope = { has_variable = antigonid_stubbornness }
    			}
    			desc = diadochi_flavor.51.desc_3
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.51.desc_4
    		}
    	}
    }
	picture = successors
	left_portrait = current_ruler
	right_portrait = char:37
	right_portrait = scope:antigonids_scope.current_ruler
	goto_location = p:790

	trigger = {
		scope:antigonids_scope = {
			trigger_if = {
				limit = {
					OR = {
						any_owned_province = {
							OR = {
								is_in_region = mesopotamia_region
								is_in_region = assyria_region
							}
						}
						any_subject = { 
							capital_scope = {
								OR = {
									is_in_region = assyria_region
									is_in_region = mesopotamia_region
								}
							}
						}
					}
				}
			}
			trigger_else = {
				NOT = { has_variable = antigonid_stubbornness }
				OR = {
					any_owned_province = {
						AND = {
							is_in_region = syria_region
							NOR = {  # Tyre
								province_id = 743
								province_id = 744
								province_id = 745
								province_id = 746
								province_id = 741
								province_id = 742
							}
						}
					}
					any_subject = { 
						capital_scope = {
							OR = {
								is_in_region = cappadocia_region
								is_in_region = assyria_region
								is_in_region = syria_region
								is_in_region = mesopotamia_region
								NOR = {
									is_in_area = north_phoenicia_area
									is_in_area = south_phoenicia_area
								}
							}
						}
					}
				}
			}
		}
	}

	immediate = {
		if = {
			limit = { has_variable = antigonid_stubbornness }
			custom_tooltip = diadochi_flavor.8.bt
		}
		else = { custom_tooltip = diadochi_flavor.8.at }
	}

	option = {
		name = "diadochi_flavor.51.a"
		scope:antigonids_scope = {
			if = {
				limit = { has_variable = antigonid_stubbornness }
				if = { # Euphrates
					limit = {
						any_owned_province = {
							OR = {
								province_id = 806
								province_id = 804
								province_id = 847
								province_id = 814
								province_id = 805
							}
						}
					}
					hidden_effect = {
						every_owned_province = {
							limit = {
								OR = {
									province_id = 806
									province_id = 804
									province_id = 847
									province_id = 814
									province_id = 805
								}
							}
							set_conquered_by = root
						}
					}
				}
				if = { # Transfer Mesopotamians/Assyrians
					limit = {
						any_subject = { 
							capital_scope = {
								OR = {
									is_in_region = assyria_region
									is_in_region = mesopotamia_region
								}
							}
						}
					}
					hidden_effect = {
						every_subject = {
							limit = {
								capital_scope = {
									OR = {
										is_in_region = assyria_region
										is_in_region = mesopotamia_region
									}
								}
							}
							trigger_event = { id = diadochi_flavor.55 }
						}
					}
					custom_tooltip = diadochi_flavor.51.tt3
				}
			}
			else = {
				region:syria_region = { # Syria
					every_region_area = {
						antigonid_split_area_effect = {
							COUNTRY = ROOT
							AREA = THIS
						}
					}
				}
			}
			region:mesopotamia_region = { # Mesopotamia
				every_region_area = {
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			region:assyria_region = { # Assyria
				every_region_area = {
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			region:armenia_region = { # Armenia
				every_region_area = {
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			region:persis_region = { # Persis
				every_region_area = {
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			region:media_region = { # Media
				every_region_area = {
					antigonid_split_area_effect = {
						COUNTRY = ROOT
						AREA = THIS
					}
				}
			}
			if = {
				limit = {
					NOT = { has_variable = antigonid_stubbornness }
				}
				if = { # Transfer Phoenicians/Assyrians
					limit = {
						any_subject = { 
							capital_scope = {
								OR = {
									is_in_region = cappadocia_region
									is_in_region = assyria_region
									is_in_region = syria_region
									is_in_region = mesopotamia_region
									NOR = {
										is_in_area = north_phoenicia_area
										is_in_area = south_phoenicia_area
									}
								}
							}
						}
					}
					hidden_effect = {
						every_subject = {
							limit = {
								capital_scope = {
									OR = {
										is_in_region = cappadocia_region
										is_in_region = assyria_region
										AND = {
											is_in_region = syria_region
											NOR = {
												is_in_area = north_phoenicia_area
												is_in_area = south_phoenicia_area
											}
										}
										is_in_region = mesopotamia_region
									}
								}
							}
							trigger_event = { id = diadochi_flavor.55 }
						}
					}
					custom_tooltip = diadochi_flavor.51.tt5
				}
			}
		}
	}

	after = {
		hidden_effect = {
			if = {
				limit = { exists = scope:pergamon_scope }
				scope:pergamon_scope = {
					change_country_name = PERGAMON_NAME
					change_country_adjective = PERGAMON_ADJECTIVE
				}
			}
		}
		if = {
			limit = {
				war_with = scope:antigonids_scope
				any_current_war = {
					is_war_leader = ROOT
					is_war_leader = scope:antigonids_scope
				}
			}
			every_current_war = {
				limit = {
					is_war_leader = ROOT
					is_war_leader = scope:antigonids_scope
				}
				force_white_peace = THIS
			}
		}
	}
}

diadochi_flavor.52 = { # Macedon post Ipsos
	type = country_event
    title = diadochi_flavor.8.t
    desc = {
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:antigonids_scope = { has_variable = antigonid_stubbornness }
    			}
    			desc = diadochi_flavor.49.desc_1
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.49.desc_2
    		}
    	}
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:antigonids_scope = { has_variable = antigonid_stubbornness }
    			}
    			desc = diadochi_flavor.52.desc_3
    		}
    		triggered_desc = {
    			trigger = { exists = scope:pleistarchus_scope }
    			desc = diadochi_flavor.52.desc_4
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.52.desc_5
    		}
    	}
    }
	picture = successors
	left_portrait = current_ruler
	left_portrait = scope:pleistarchus_scope
	right_portrait = char:37
	right_portrait = scope:antigonids_scope.current_ruler
	goto_location = scope:pleistarchus_city

	trigger = {
		scope:antigonids_scope = {
			trigger_if = {
				limit = { has_variable = antigonid_stubbornness }
				OR = {
					any_owned_province = { is_in_region = greece_region }
					any_subject = {
						capital_scope = {
							is_in_region = greece_region
							NOT = { is_in_area = aegean_islands_area }
						}
					}
				}
			}
			trigger_else = {
				any_owned_province = {
					OR = {
						is_in_area = milyas_area
						is_in_area = inland_caria_area
						is_in_area = coastal_caria_area
						is_in_area = ionia_area
						is_in_area = lycia_area
						province_id = 1945
						province_id = 1946
						is_in_region = cilicia_region
					}
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = {
					char:213 = {
						is_alive = yes
						is_ruler = no
						employer = root
						prisoner = no
					}
				}
			}
			random_character = {
				limit = {
					is_ruler = no
					is_adult = yes
					prisoner = no
					trigger_if = {
						limit = {
							employer = { gender_equality = no }
						}
						is_female = no
					}
				}
				weight = {
					modifier = {
						factor = 10
						from_ruler_family = yes
					}
					modifier = {
						factor = 20
						OR = {
							is_sibling_of = char:213
							is_close_relative = char:213
						}
					}
					modifier = {
						factor = 5
						age >= 40
					}
				}
				save_scope_as = pleistarchus_scope
			}
		}
		else = {
			char:213 = { save_scope_as = pleistarchus_scope }
		}
		p:1883 = { save_scope_as = pleistarchus_city }
		scope:antigonids_scope = {
			if = {
				limit = { has_variable = antigonid_stubbornness }
				region:greece_region = { # Greece
					every_region_area = {
						antigonid_split_area_effect = {
							COUNTRY = ROOT
							AREA = THIS
						}
					}
				}
				if = {
					limit = {
						any_subject = {
							capital_scope = { is_in_region = greece_region }
						}
					}
					hidden_effect = {
						every_subject = {
							limit = {
								capital_scope = { is_in_region = greece_region }
							}
							if = {
								limit = {
									capital_scope = {
										NOT = { is_in_area = aegean_islands_area }
									}
								}
								trigger_event = { id = diadochi_flavor.55 }
							}
						}
					}
				}
			}
		}
		if = {
			limit = { has_variable = antigonid_stubbornness }
			custom_tooltip = diadochi_flavor.8.bt
		}
		else = { custom_tooltip = diadochi_flavor.8.at }
	}

	option = { # Pleistarchus satrapy
		name = "diadochi_flavor.52.b"
		trigger = {
			exists = scope:pleistarchus_scope
			scope:antigonids_scope = {
				any_owned_province = {
					OR = {
						is_in_area = milyas_area
						is_in_area = inland_caria_area
						is_in_area = coastal_caria_area
						is_in_area = ionia_area
						is_in_area = lycia_area
					}
					area = {
						any_area_province = {
							count > 3
							has_owner = yes
							owner = scope:antigonids_scope
						}
						any_area_province = {
							count < antigonids_area_transfer_min_value
							has_owner = yes
							NOR = {
								owner = c:EGY
								owner = c:TRE
								owner = c:SEL
							}
						}
					}
				}
			}
		}
		custom_tooltip = diadochi_flavor.52.bt
		set_variable = pleistarchus_transfer_flag
		hidden_effect = {
			scope:antigonids_scope = {
				ordered_owned_province = {
					limit = {
						OR = {
							is_in_area = milyas_area
							is_in_area = inland_caria_area
							is_in_area = coastal_caria_area
							is_in_area = ionia_area
							is_in_area = lycia_area
						}
						area = {
							any_area_province = {
								count > 3
								has_owner = yes
								owner = scope:antigonids_scope
							}
							any_area_province = {
								count < antigonids_area_transfer_min_value
								has_owner = yes
								NOR = {
									owner = c:EGY
									owner = c:TRE
									owner = c:SEL
								}
							}
						}
					}
					order_by = total_population
					create_country = { save_scope_as = pleistarchus_satrapy }
				}
			}
			scope:pleistarchus_scope = {
				remove_all_positions = yes
				move_country = scope:pleistarchus_satrapy
				remove_character_modifier = foreign_citizen
				set_home_country = scope:pleistarchus_satrapy
			}
			scope:pleistarchus_satrapy = {
				set_variable = formed_caria
				set_variable = pleistarchus_satrapy_flag
				set_as_ruler = scope:pleistarchus_scope
				change_country_name = CIA
				change_country_adjective = CIA_ADJ
				change_country_color = navy_blue
				change_country_flag = CARIA_SATRAPY_FLAG
				if = {
					limit = {
						NOT = {
							primary_culture = macedonian
						}
					}
					set_primary_culture_cleanup_effect = {
						NEW_PRIMARY_CULTURE = macedonian
						MAKE_OLD_CULTURE_INTEGRATED = yes
					}
				}
				set_country_religion = roman_pantheon
				add_treasury = 300
				add_manpower = 8
				add_truce = {
					target = c:MAC
					duration = 9125 # 25 years
				}
				add_political_influence = 100
				create_unit = {
					navy = yes
					location = p:2588
					add_subunit = liburnian
					add_subunit = liburnian
					add_subunit = liburnian
					add_subunit = liburnian
					add_subunit = liburnian
					add_subunit = trireme
					add_subunit = trireme
					add_subunit = trireme
					add_subunit = trireme
				}
				every_owned_province = {
					add_claim = c:SEL
					add_claim = c:EGY
					add_claim = c:TRE
					add_claim = c:MAC
				}
				create_family = scope:pleistarchus_scope
			}
			scope:pleistarchus_scope = {
				if = {
					limit = {
						is_married = yes
						spouse = {
							employer = root
							prisoner = no
						}
					}
					spouse = {
						remove_all_positions = yes
						move_country = scope:pleistarchus_satrapy
						remove_character_modifier = foreign_citizen
						set_home_country = scope:pleistarchus_satrapy
					}
				}
				if = {
					limit = {
						num_of_children > 0
						any_child = {
							employer = root
							prisoner = no
						}
					}
					every_child = {
						limit = {
							employer = root
							prisoner = no
						}
						remove_all_positions = yes
						move_country = scope:pleistarchus_satrapy
						remove_character_modifier = foreign_citizen
						set_home_country = scope:pleistarchus_satrapy
						set_family = scope:pleistarchus_scope.family
					}
				}
			}
			add_alliance = scope:pleistarchus_satrapy
			add_opinion = { target = scope:pleistarchus_satrapy modifier = pleistarchus_opmod }
			reverse_add_opinion = { target = scope:pleistarchus_satrapy modifier = pleistarchus_opmod }
			add_truce = {
				target = scope:pleistarchus_satrapy
				duration = 9125 # 25 years
			}
		}
		if = {
			limit = {
				scope:pleistarchus_scope = { can_get_friends = yes }
				current_ruler = { can_get_friends = yes }
			}
			scope:pleistarchus_scope = { add_friend = root.current_ruler }
		}
		every_country = {
			limit = {
				OR = {
					tag = PRY
					tag = TRE
					tag = SEL
					tag = EGY
				}
			}
			trigger_event = {
				id = diadochi_flavor.54
				days = 5
			}
		}
		ai_chance = { factor = 10 }
	}

	option = { # Retain satrapy
		name = "diadochi_flavor.52.c"
		scope:pleistarchus_scope = { add_loyalty = spurned_family }
		show_as_tooltip = {
			antigonid_split_area_effect = { # Milyas
				COUNTRY = ROOT
				AREA = area:milyas_area
			}
			antigonid_split_area_effect = { # Caria Superioris
				COUNTRY = ROOT
				AREA = area:inland_caria_area
			}
			antigonid_split_area_effect = { # Caria Inferioris
				COUNTRY = ROOT
				AREA = area:coastal_caria_area
			}
			antigonid_split_area_effect = { # Ionia
				COUNTRY = ROOT
				AREA = area:ionia_area
			}
			antigonid_split_area_effect = { # Lycia
				COUNTRY = ROOT
				AREA = area:lycia_area
			}
			if = {
				limit = {
					NOT = {
						scope:antigonids_scope = { has_variable = antigonid_stubbornness }
					}
				}
				antigonid_split_area_effect = { # Cilicia Trachea
					COUNTRY = ROOT
					AREA = area:cilicia_trachea_area
				}
				antigonid_split_area_effect = { # Cilicia Pedias
					COUNTRY = ROOT
					AREA = area:cilicia_pedias_area
				}
			}
		}
		ai_chance = { factor = 2 }
	}

	after = {
		hidden_effect = {
			scope:antigonids_scope = {
				if = {
					limit = {
						area:milyas_area = {
							any_area_province = {
								count >= 3
								has_owner = yes
								owner = ROOT
							}
						}
					}
					antigonid_split_area_effect = { # Milyas
						COUNTRY = ROOT
						AREA = area:milyas_area
					}
				}
				if = {
					limit = {
						area:lycia_area = {
							any_area_province = {
								count >= 3
								has_owner = yes
								owner = ROOT
							}
						}
					}
					antigonid_split_area_effect = { # Lycia
						COUNTRY = ROOT
						AREA = area:lycia_area
					}
				}
				antigonid_split_area_effect = { # Caria Superioris
					COUNTRY = ROOT
					AREA = area:inland_caria_area
				}
				antigonid_split_area_effect = { # Caria Inferioris
					COUNTRY = ROOT
					AREA = area:coastal_caria_area
				}
				antigonid_split_area_effect = { # Ionia
					COUNTRY = ROOT
					AREA = area:ionia_area
				}
				if = {
					limit = {
						NOT = {
							scope:antigonids_scope = { has_variable = antigonid_stubbornness }
						}
					}
					antigonid_split_area_effect = { # Cilicia Trachea
						COUNTRY = ROOT
						AREA = area:cilicia_trachea_area
					}
					antigonid_split_area_effect = { # Cilicia Pedias
						COUNTRY = ROOT
						AREA = area:cilicia_pedias_area
					}
				}
			}
			if = {
				limit = { exists = scope:pergamon_scope }
				scope:pergamon_scope = {
					change_country_name = PERGAMON_NAME
					change_country_adjective = PERGAMON_ADJECTIVE
				}
			}
		}
		remove_variable = pleistarchus_transfer_flag
		if = {
			limit = {
				war_with = scope:antigonids_scope
				any_current_war = {
					is_war_leader = ROOT
					is_war_leader = scope:antigonids_scope
				}
			}
			every_current_war = {
				limit = {
					is_war_leader = ROOT
					is_war_leader = scope:antigonids_scope
				}
				force_white_peace = THIS
			}
		}
	}
}

diadochi_flavor.53 = { # Post-Ipsos ping
	type = country_event
    title = diadochi_flavor.8.t
    desc = {
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:antigonids_scope = { has_variable = antigonid_stubbornness }
    			}
    			desc = diadochi_flavor.49.desc_1
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.49.desc_2
    		}
    	}
    }
	picture = successors
	left_portrait = scope:antigonids_scope.current_ruler
	right_portrait = char:37
	goto_location = p:790

	trigger = {
		has_land = yes
	}

	option = {
		name = "diadochi_flavor.53.a"
		custom_tooltip = diadochi_flavor.53.at
	}

	after = {
		hidden_effect = {
			if = {
				limit = { exists = scope:pergamon_scope }
				scope:pergamon_scope = {
					change_country_name = PERGAMON_NAME
					change_country_adjective = PERGAMON_ADJECTIVE
				}
			}
		}
	}
}

diadochi_flavor.54 = { # Pleistarchus ping
	type = country_event
    title = diadochi_flavor.54.t
    desc = {
    	desc = diadochi_flavor.54.desc
    	first_valid = {
    		triggered_desc = {
    			trigger = { 
    				scope:pleistarchus_scope = char:213
    				c:MAC.current_ruler = char:32
    			}
    			desc = diadochi_flavor.54.desc_1
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.54.desc_2
    		}
    	}
    }
	picture = successors
	left_portrait = c:MAC.current_ruler
	right_portrait = scope:pleistarchus_scope
	goto_location = scope:pleistarchus_satrapy.capital_scope

	trigger = {
		has_land = yes
	}

	immediate = {
		c:MAC = { save_scope_as = macedon_scope }
	}

	option = {
		name = "diadochi_flavor.54.a"
		custom_tooltip = diadochi_flavor.54.at
	}
}

diadochi_flavor.55 = { # Transferred ping
	type = country_event
    title = diadochi_flavor.55.t
    desc = {
    	desc = diadochi_flavor.55.desc
    	first_valid = {
    		triggered_desc = {
    			trigger = { is_subject = yes }
    			desc = diadochi_flavor.55.desc_1
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.55.desc_2
    		}
    	}
    }
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:antigonids_scope.current_ruler
	right_portrait = overlord.current_ruler

	trigger = {
		has_land = yes
		is_subject_of = scope:antigonids_scope
	}

	immediate = {
		save_scope_as = transferred_subject
		hidden_effect = {
			scope:antigonids_scope = { release_subject = root }
		}
		if = {
			limit = {
				capital_scope = { is_in_region = greece_region }
				scope:antigonids_scope = { has_variable = antigonus_death }
			}
			c:MAC = {
				make_subject = {
					target = root
					type = feudatory
				}
			}
		}
		else_if = {
			limit = {
				capital_scope = {
					OR = {
						is_in_region = cappadocia_region
						is_in_region = assyria_region
						AND = {
							is_in_region = syria_region
							NOR = {
								is_in_area = north_phoenicia_area
								is_in_area = south_phoenicia_area
							}
						}
					}
				}
				NOT = { tag = CAP }
			}
			c:SEL = {
				make_subject = {
					target = root
					type = tributary
				}
			}
		}
		else_if = {
			limit = {
				capital_scope = {
					OR = {
						is_in_region = bithynia_region
						is_in_area = mysia_area
					}
				}
				NOR = { 
					tag = CDD
					tag = BIT
					tag = HCP
					tag = AST
					tag = KIO
					tag = SMS
					tag = TIE
					tag = MYD
				}
			}
			c:TRE = {
				make_subject = {
					target = root
					type = tributary
				}
			}
		}
		else_if = {
			limit = {
				capital_scope = { is_in_region = palestine_region }
			}
			c:EGY = {
				make_subject = {
					target = root
					type = tributary
				}
			}
		}
	}

	option = {
		name = "diadochi_flavor.55.a"
		if = {
			limit = { is_subject = no }
			custom_tooltip = diadochi_flavor.55.at
		}
		if = {
			limit = { tag = KIO }
			c:KIO = {
				trigger_event = {
					id = dhe_mithridates.9
					days = 10
				}
			}
		}
	}
}

diadochi_flavor.56 = { # Attalids defect PRY
	type = country_event
    title = diadochi_flavor.56.t
    desc = {
    	desc = diadochi_flavor.56.desc
    	first_valid = {
    		triggered_desc = {
    			trigger = {
					exists = scope:attalid_head
					scope:attalid_head = {
						OR = {
							this = char:67 # Attalos
							this = char:385 # Philetairos
							this = char:386 # Eumenes
							this = char:389 # Eumenes I
							this = char:390 # Attalos
						}
    				}
    				p:278 = {
						has_owner = yes
						OR = {
							owner = c:TRE
							owner = { is_subject_of = c:TRE }
						}
					}
    			}
    			desc = diadochi_flavor.56.desc_1 # Attalids
    		}
    		triggered_desc = {
    			trigger = { 
    				exists = scope:attalid_head
					scope:attalid_head = {
						NOR = {
							this = char:67 # Attalos
							this = char:385 # Philetairos
							this = char:386 # Eumenes
							this = char:389 # Eumenes I
							this = char:390 # Attalos
						}
					}
					p:278 = {
						has_owner = yes
						OR = {
							owner = c:TRE
							owner = { is_subject_of = c:TRE }
						}
					}
    			}
    			desc = diadochi_flavor.56.desc_2 # Fallback fam
    		}
    		triggered_desc = {
    			trigger = { always = yes }
    			desc = diadochi_flavor.56.desc_3 # Fallback
    		}
    	}
    }
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:attalid_head
	right_portrait = scope:thrace_scope.current_ruler

	trigger = {
		has_land = yes
		OR = {
			AND = {
				c:TRE = { has_land = yes }
				p:278 = {
					has_owner = yes
					OR = {
						owner = c:TRE
						owner = { is_subject_of = c:TRE }
					}
				}
			}
			AND = {
				p:278 = {
					has_owner = yes
					OR = {
						owner = ROOT
						owner = { is_subject_of = ROOT }
					}
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					OR = {
						char:67 = { eligible_for_country_move = yes } # Attalos
						char:385 = { eligible_for_country_move = yes } # Philetairos
						char:386 = { eligible_for_country_move = yes } # Eumenes
						char:390 = { eligible_for_country_move = yes } # Attalos
						char:389 = { eligible_for_country_move = yes } # Eumenes I
					}
				}
				if = {
					limit = {
						char:67 = { eligible_for_country_move = yes } # Attalos
					}
					char:67 = {
						save_scope_as = attalos_scope
						if = {
							limit = {
								char:385 = { eligible_for_country_move = no } # Philetairos
								char:386 = { eligible_for_country_move = no } # Eumenes
								char:385 = { eligible_for_country_move = no } # Attalos
							}
							save_scope_as = attalid_head
						}
					}
				}
				if = {
					limit = {
						char:385 = { eligible_for_country_move = yes } # Philetairos
					}
					char:385 = {
						save_scope_as = philetairos_scope
						if = {
							limit = {
								NOT = { exists = scope:attalid_head }
							}
							save_scope_as = attalid_head
						}
					}
				}
				if = {
					limit = {
						char:386 = { eligible_for_country_move = yes } # Eumenes
					}
					char:386 = {
						save_scope_as = eumenes_scope
						if = {
							limit = {
								NOT = { exists = scope:attalid_head }
							}
							save_scope_as = attalid_head
						}
					}
				}
				if = {
					limit = {
						char:390 = { eligible_for_country_move = yes } # Attalos
					}
					char:390 = {
						save_scope_as = attalos_2_scope
						if = {
							limit = {
								NOT = { exists = scope:attalid_head }
							}
							save_scope_as = attalid_head
						}
					}
				}
				if = {
					limit = {
						char:389 = { eligible_for_country_move = yes } # Eumenes
					}
					char:389 = {
						save_scope_as = eumenes_2_scope
						if = {
							limit = {
								NOT = { exists = scope:attalid_head }
							}
							save_scope_as = attalid_head
						}
					}
				}
				if = {
					limit = {
						NOT = { exists = scope:attalid_head }
					}
					ordered_character = {
						limit = {
							is_head_of_family = yes
							is_ruler = no
						}
						order_by = {
							value = 0
							subtract = loyalty
						}
						save_scope_as = attalid_head
					}
				}
			}
			if = {
				limit = { 
					c:TRE = { has_land = yes }
					p:278 = {
						has_owner = yes
						OR = {
							owner = c:TRE
							owner = { is_subject_of = c:TRE }
						}
					}
				}
				if = {
					limit = { 
						exists = scope:attalos_scope
						scope:attalos_scope = { eligible_for_country_move = yes }
					}
					scope:attalos_scope = { attalids_move_thrace_effect = yes }
				}
				if = {
					limit = { 
						exists = scope:philetairos_scope
						scope:philetairos_scope = { eligible_for_country_move = yes }
					}
					scope:philetairos_scope = { attalids_move_thrace_effect = yes }
				}
				if = {
					limit = { 
						exists = scope:eumenes_scope
						scope:eumenes_scope = { eligible_for_country_move = yes }
					}
					scope:eumenes_scope = { attalids_move_thrace_effect = yes }
				}
				if = {
					limit = { 
						exists = scope:attalos_2_scope
						scope:attalos_2_scope = { eligible_for_country_move = yes }
					}
					scope:attalos_2_scope = { attalids_move_thrace_effect = yes }
				}
				if = {
					limit = { 
						exists = scope:eumenes_2_scope
						scope:eumenes_2_scope = { eligible_for_country_move = yes }
					}
					scope:eumenes_2_scope = { attalids_move_thrace_effect = yes }
				}
				c:TRE = {
					trigger_event = { id = diadochi_flavor.57 }
				}
			}
			else = {
				p:278 = {
					create_country = { save_scope_as = pergamon_scope }
				}
				every_owned_province = {
					limit = { area = scope:pergamon_scope.capital_scope.area }
					set_owned_by = scope:pergamon_scope
					add_claim = ROOT
				}
				if = {
					limit = {
						any_subject = {
							any_owned_province = { is_in_region = asia_region }
							NOR = {
								tag = IOA
								tag = ION
								tag = KNI
								tag = MLO
								tag = HKS
								tag = RHO
								tag = KZK
							}
						}
					}
					every_subject = {
						limit = {
							any_owned_province = { is_in_region = asia_region }
							NOR = {
								tag = IOA
								tag = ION
								tag = KNI
								tag = MLO
								tag = HKS
								tag = RHO
								tag = KZK
							}
						}
						every_owned_province = {
							limit = { is_in_region = asia_region }
							set_owned_by = scope:pergamon_scope
							add_claim = ROOT
						}
					}
				}
				every_owned_province = {
					limit = { is_in_region = asia_region }
					set_owned_by = scope:pergamon_scope
					add_claim = ROOT
				}
				scope:pergamon_scope = {
					add_truce = {
						target = root
						duration = 3650
					}
					pergamon_setup_effect = yes
				}
				add_truce = {
					target = scope:pergamon_scope
					duration = 3650
				}
				reset_scoring = scope:pergamon_scope
				if = {
					limit = { 
						exists = scope:attalos_scope
						scope:attalos_scope = { eligible_for_country_move = yes }
					}
					scope:attalos_scope = { attalids_move_pergamon_effect = yes }
				}
				if = {
					limit = { 
						exists = scope:philetairos_scope
						scope:philetairos_scope = { eligible_for_country_move = yes }
					}
					scope:philetairos_scope = { attalids_move_pergamon_effect = yes }
				}
				if = {
					limit = { 
						exists = scope:eumenes_scope
						scope:eumenes_scope = { eligible_for_country_move = yes }
					}
					scope:eumenes_scope = { attalids_move_pergamon_effect = yes }
				}
				if = {
					limit = { 
						exists = scope:attalos_2_scope
						scope:attalos_2_scope = { eligible_for_country_move = yes }
					}
					scope:attalos_2_scope = { attalids_move_pergamon_effect = yes }
				}
				if = {
					limit = { 
						exists = scope:eumenes_2_scope
						scope:eumenes_2_scope = { eligible_for_country_move = yes }
					}
					scope:eumenes_2_scope = { attalids_move_pergamon_effect = yes }
				}
				scope:pergamon_scope = {
					pergamon_setup_effect = yes
					set_as_ruler = scope:attalid_head
				}
				pergamon_foundation_ping_effect = yes
			}
		}
	}

	option = {
		name = "diadochi_flavor.56.a"
		if = {
			limit = { 
				c:TRE = { has_land = yes }
				p:278 = {
					has_owner = yes
					OR = {
						owner = c:TRE
						owner = { is_subject_of = c:TRE }
					}
				}
			}
			custom_tooltip = diadochi_flavor.56.at1 	
		}
		else = { custom_tooltip = diadochi_flavor.56.at2 }
	}
}

diadochi_flavor.57 = { # Attalids defect TRE
	type = country_event
    title = diadochi_flavor.56.t
    desc = diadochi_flavor.57.desc
	picture = successors
	left_portrait = current_ruler
	left_portrait = scope:sardis_scope.current_ruler
	right_portrait = scope:attalid_head
	right_portrait = scope:antigonids_scope.current_ruler

	trigger = { has_land = yes }

	immediate = {
		custom_tooltip = diadochi_flavor.57.tt
		if = {
			limit = {
				p:278 = {
					has_owner = yes
					owner = { is_subject_of = ROOT }
				}
			}
			p:278.owner = { save_scope_as = sardis_scope }
		}
	}

	option = {
		name = "diadochi_flavor.57.a"
		custom_tooltip = diadochi_flavor.57.at
		if = { # Ruler of Sardis is replaced
			limit = { exists = scope:sardis_scope }
			custom_tooltip = diadochi_flavor.57.sardis_tt
			scope:sardis_scope.current_ruler = { add_loyalty = me_gre_1_upset_family_loyalty }
		}
		hidden_effect = {
			p:278 = {
				create_country = { save_scope_as = pergamon_scope }
			}
			every_owned_province = { # Transfer territory near Pergamon
				limit = {
					OR = {
						province_id = 276
						province_id = 337
						province_id = 281
						province_id = 282
						province_id = 279
					}
				}
				set_owned_by = scope:pergamon_scope
				add_claim = c:SEL
				add_claim = c:EGY
				add_claim = c:TRE
				add_claim = c:MAC
			}
			if = {
				limit = { exists = scope:sardis_scope }
				scope:sardis_scope = {
					current_ruler = {
						hidden_effect = {
							remove_all_positions = yes
							move_country = ROOT
							remove_character_modifier = foreign_citizen
							set_home_country = ROOT
						}
						hidden_effect = {
							if = {
								limit = {
									is_married = yes
									spouse = {
										employer = scope:sardis_scope 
										prisoner = no
									}
								}
								spouse = {
									remove_all_positions = yes
									move_country = ROOT
									remove_character_modifier = foreign_citizen
									set_home_country = ROOT
									add_loyalty = me_gre_1_upset_family_loyalty
								}
							}
							if = {
								limit = {
									num_of_children > 0
									any_child = {
										employer = scope:sardis_scope 
										prisoner = no
									}
								}
								every_child = {
									limit = {
										employer = scope:sardis_scope 
										prisoner = no
									}
									remove_all_positions = yes
									move_country = ROOT
									remove_character_modifier = foreign_citizen
									set_home_country = ROOT
									add_loyalty = me_gre_1_upset_family_loyalty
								}
							}
						}
					}
					every_owned_province = {
						set_owned_by = scope:pergamon_scope
						add_claim = ROOT
					}
				}
			}
			scope:pergamon_scope = {
				add_manpower = 5
				add_stability_effect = yes
				add_treasury = 600
				monarchy_formable_government_change_effect = yes
				add_truce = {
					target = root
					duration = 3650
				}
			}
			add_truce = {
				target = scope:pergamon_scope
				duration = 3650
			}
			reset_scoring = scope:pergamon_scope
			if = {
				limit = { 
					exists = scope:attalos_scope
					scope:attalos_scope = { eligible_for_country_move = yes }
				}
				scope:attalos_scope = { attalids_move_pergamon_effect = yes }
			}
			if = {
				limit = { 
					exists = scope:philetairos_scope
					scope:philetairos_scope = { eligible_for_country_move = yes }
				}
				scope:philetairos_scope = { attalids_move_pergamon_effect = yes }
			}
			if = {
				limit = { 
					exists = scope:eumenes_scope
					scope:eumenes_scope = { eligible_for_country_move = yes }
				}
				scope:eumenes_scope = { attalids_move_pergamon_effect = yes }
			}
			if = {
				limit = { 
					exists = scope:attalos_2_scope
					scope:attalos_2_scope = { eligible_for_country_move = yes }
				}
				scope:attalos_2_scope = { attalids_move_pergamon_effect = yes }
			}
			if = {
				limit = { 
					exists = scope:eumenes_2_scope
					scope:eumenes_2_scope = { eligible_for_country_move = yes }
				}
				scope:eumenes_2_scope = { attalids_move_pergamon_effect = yes }
			}
			scope:pergamon_scope = {
				pergamon_setup_effect = yes
				set_as_ruler = scope:attalid_head
			}
			make_subject = {
				target = scope:pergamon_scope
				type = satrapy
			}
		}
		pergamon_foundation_ping_effect = yes
		ai_chance = { factor = 10 }
	}

	option = {
		name = "diadochi_flavor.57.b"
		custom_tooltip = diadochi_flavor.57.bt
		ai_chance = { factor = 0 }
	}
}

diadochi_flavor.58 = { # Pergamon ping
	type = country_event
    title = diadochi_flavor.58.t
    desc = diadochi_flavor.58.desc
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:pergamon_scope.current_ruler
	goto_location  = scope:pergamon_scope.capital_scope

	trigger = { has_land = yes }

	option = {
		name = "diadochi_flavor.58.a"
		show_as_tooltip = {
			make_subject = {
				type = satrapy
				target = scope:pergamon_scope
			}
		}
	}
}

diadochi_flavor.59 = { # Pergamon ping
	type = country_event
    title = diadochi_flavor.59.t
    desc = {
    	desc = diadochi_flavor.59.desc
    	triggered_desc = {
    		desc = diadochi_flavor.59.desc_subject
    		trigger = { exists = scope:pergamon_scope.overlord }
    	}
    }
	picture = successors
	left_portrait = scope:attalid_head
	right_portrait = scope:attalid_head.employer.overlord.current_ruler
	goto_location  = scope:attalid_head.employer.capital_scope

	trigger = {
		has_land = yes
		exists = scope:attalid_head
	}

	option = {
		name = "diadochi_flavor.59.a"
		custom_tooltip = diadochi_flavor.59.at
	}
}

diadochi_flavor.100 = {#NS
	type = country_event
	title = "diadochi_flavor.100.t"
	desc = "diadochi_flavor.100.desc"
	
	picture = steppe_cavalry
	
	left_portrait = root.current_ruler
	right_portrait = scope:origin.current_ruler
	
	trigger = {
		NOT = {
			has_global_variable = triggered_parthian_horde
		}
		OR = {
			has_variable = horde_invasion_origin
			AND = {
				country_culture_group = scythia
				is_ai = no
				num_of_cities >= 50
			}
		}
		war = no
		exists = c:SEL
		any_neighbour_country = {
			OR = {
				this = c:SEL
				AND = {
					exists = c:PAR
					this = c:PAR
				}
			}
		}
		c:SEL = {
			num_of_cities >= 60
		}
	}
	
	fire_only_once = yes
	
	immediate = {
		#Added a medium sized army and give money to pay for it
		set_global_variable = triggered_parthian_horde
		hidden_effect = {
			add_country_modifier = {
				name = parthian_death_lasers
				duration = 3650
			}
		}
        add_treasury = 750
        add_manpower = 20
        create_unit = {
            navy = no
            location = p:6657
            while = {
	            count = 6
	            add_subunit = light_infantry
            }
            while = {
                count = 15
                add_subunit = horse_archers
            }
            while = {
                count = 5
                add_subunit = light_cavalry
            }                                                    
            add_food = 100
            add_morale = 2
        }
        create_unit = {
            navy = no
            location = p:6812
            while = {
	            count = 6
	            add_subunit = light_infantry
            }
            while = {
                count = 10
                add_subunit = horse_archers
            }
            while = {
                count = 3
                add_subunit = light_cavalry
            }                                                    
            add_food = 100
            add_morale = 2
        }
		c:SEL = {
			save_scope_as = origin
			current_ruler = {
				save_scope_as = sel_rul
			}
		}
		save_scope_as = target
	}
	
	option = {
		name = "diadochi_flavor.100.a"
		declare_war_with_wargoal = {
			war_goal = horde_conquest
			target = scope:origin
		}
		add_manpower = 20
		scope:origin = {
			scope:sel_rul = {
				death = {
					death_reason = death_battle
					killer = scope:target.current_ruler
				}
			}
			if = {
				limit = {
					is_ai = yes
				}
				add_manpower = -15
				add_stability = -10
				add_country_modifier = {
					name = parthian_attack_lasers
					duration = 3650
				}
				every_subject = { 
					limit = { is_ai = yes }
					add_stability = -10
					add_manpower = -10
					add_country_modifier = {
						name = parthian_attack_lasers
						duration = 3650
					}
				}
			}
		}
		if = {
			limit = {
				scope:origin = {
					is_ai = yes
				}
				exists = c:PAR
				c:PAR = {
					is_ai = yes
					is_subject_of = scope:origin
				}
			}
			c:PAR = {
				every_owned_province = {
					set_owned_by = root
				}
			}
		}
		every_country = {
			limit = {
				NOT = {
					this = root
				}
			}
			trigger_event = {
				id = diadochi_flavor.101
			}
		}
	}
	
	option = {
		name = "diadochi_flavor.100.b"
		current_ruler = {
			add_popularity = -25
		}
		
		ai_chance = {
			factor = 0
		}
	}
	after = {
		c:SEL = {
			trigger_event = diadochi_flavor.999
		}	
	}
}

diadochi_flavor.101 = {#NS
	type = country_event
	title = "diadochi_flavor.101.t"
	desc = "diadochi_flavor.101.desc"
	
	picture = steppe_cavalry 
	
	left_portrait = scope:target.current_ruler
	right_portrait = scope:sel_rul
	
	option = {
		name = "diadochi_flavor.101.a"
		custom_tooltip = diadochi_flavor_101_tooltip
		show_as_tooltip = {
			scope:target = {
				scope:sel_rul = { 
					death = {
						death_reason = death_battle
						killer = scope:target.current_ruler
					}
				}
			}
			if = {
				limit = {
					NOT = {
						this = scope:origin
					}
				}
				scope:origin = {
					add_country_modifier = {
						name = seleucid_struggles
						duration = 3650
					}
				}
			}
		}
		if = {
			limit = {
				this = scope:origin
			}
			add_country_modifier = {
				name = seleucid_struggles 
				duration = 3650
			}
		}
	}
	
}

diadochi_flavor.999 = {#NS
	type = country_event
	title = "diadochi_flavor.999.t"
	desc = "diadochi_flavor.999.desc"
	picture = steppe_cavalry

	trigger = {
		c:BAC = {
			exists = yes
		}
	}

	fire_only_once = yes
	
	immediate = {
		random_current_war = {
			limit = {
				any_war_participant = {
					this = c:SEL #Selucids
				}
				any_war_participant = {
					this = scope:target #Parthia
				}
				any_war_participant = {
					this = c:BAC #Bactria
				}
				is_war_leader = c:SEL
			}
			remove_from_war = c:BAC
		}
		c:BAC = {
			add_truce = {
				target = scope:target
				duration = 3650	#10 years
			}
		}
	}

	option = {	#Leave them be...for now
		name = "diadochi_flavor.999.a"
		add_political_influence = -25
	}
	option = {	#We'll fight them too!
		name = "diadochi_flavor.999.b"
        declare_war_with_wargoal = {
            war_goal = conquer_wargoal
            province = c:BAC.capital_scope
            target = c:BAC
        }
		ai_chance = {
			factor = 0
		}
	}	
}
