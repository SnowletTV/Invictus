namespace = diadochi_liberation

#Master List
diadochi_liberation.1001 = {
    type = province_event
    hidden = yes

	trigger = {
		owner = { 
			primary_culture = macedonian
		}
	}

    immediate = {
		if = {
			limit = {
				province_id = 418
				owner = { 
					NOT = { tag = MAC } 
				}
			}
			p:418.owner = {
			    trigger_event = {
			        id = diadochi_liberation.1 #Corinth
			        days = { 5 15 }
			    }
			}
		}
		if = {
			limit = {
				province_id = 407
				owner = { 
					NOT = { tag = PRY } 
				}
			}
			p:407.owner = {
			    trigger_event = {
			        id = diadochi_liberation.2 #Chalkis
			        days = { 5 15 }
			    }
			}
		}
		if = {
			limit = {
				province_id = 7902
				owner = { 
					NOT = { tag = PRY } 
				}
			}
			p:7902.owner = {
			    trigger_event = {
			        id = diadochi_liberation.3 #Salamis
			        days = { 5 15 }
			    }
			}
		}
    }
}

# Corinth
diadochi_liberation.1 = {
	type = country_event
	title = "diadochi_liberation.1.t"
	desc = "diadochi_liberation.1.desc"
	picture = greek_siege
	
	left_portrait = current_ruler
	right_portrait = char:9

	goto_location = p:418

	fire_only_once = yes

	option = { # keep the city "[GetProvince('(int32)418').GetName] is an important strategic garrison.
		name = "diadochi_liberation.1.a"
        show_as_tooltip = {
	 		p:418 = { #Corinth
				set_owned_by = ROOT
			}
        }
        custom_tooltip = diadochi_liberation.1.a.t
        hidden_effect = {
            every_country = {
                limit = {
                    capital_scope = {
                        is_in_region = greece_region
                        NOR = {
                            is_in_area = crete_area
                            is_in_area = epirus_area
                        }
                    }
                    NOT = { primary_culture = macedonian }
                }
                add_opinion = { target = ROOT modifier = macedonian_garrisons_bad } #Macedonian Garrisons
            }
        }
		ai_chance = {
			modifier = {
				factor = 20
			}
		}
	}

	option = { # feudatory - "We will restore the Acrocorinth to glory!"
		name = "diadochi_liberation.1.b"
        custom_tooltip = diadochi_liberation.1.bt
        hidden_effect = {
            p:418 = {
                create_country = {
                    save_scope_as = corinth_scope
                    name = {
                        name = "CORINTH_NAME"
                        adjective = "CORINTH_ADJECTIVE"
                    }
                    change_country_tag = KOR
                    change_country_flag = CORINTH_FLAG
                    change_country_color = ocean_blue
                    set_country_religion = roman_pantheon
                    set_country_heritage = corinthian_heritage
                    change_government = democratic_republic
                }
            }
            make_subject = {
                type = feudatory
                target = scope:corinth_scope
            }
        }
		ai_chance = {
			modifier = {
				factor = 15
			}
		}
	}

	option = { # Tributary - The Corinthians have suffered occupation too long.
		name = "diadochi_liberation.1.c"
        custom_tooltip = diadochi_liberation.1.ct
        custom_tooltip = diadochi_liberation.1.c.t2
        hidden_effect = {
            every_country = {
                limit = {
                    capital_scope = {
                        is_in_region = greece_region
                        NOR = {
                            is_in_area = crete_area
                            is_in_area = epirus_area
                        }
                    }
                    NOT = { primary_culture = macedonian }
                }
                add_opinion = { target = ROOT modifier = macedonian_garrisons_good } #Macedonian Garrisons Removed
	            }
	        p:418 = {
	            create_country = {
	                save_scope_as = corinth_scope
	                name = {
	                    name = "CORINTH_NAME"
	                    adjective = "CORINTH_ADJECTIVE"
	                }
	                change_country_tag = KOR
	                change_country_flag = CORINTH_FLAG
	                change_country_color = ocean_blue
	                set_country_religion = roman_pantheon
	                set_country_heritage = corinthian_heritage
	                change_government = democratic_republic
	            }
	        }
            make_subject = {
                type = tributary
                target = scope:corinth_scope
            }
		}
		ai_chance = {
			modifier = {
				factor = 10
			}
		}
	}

	option = { # Tag switch
		name = "diadochi_liberation.1.d"
        custom_tooltip = diadochi_liberation.1.dt
		highlight = yes
		trigger = {
			is_ai = no
		}
        hidden_effect = {
	        p:418 = {
	            create_country = {
	                save_scope_as = corinth_scope
	                name = {
	                    name = "CORINTH_NAME"
	                    adjective = "CORINTH_ADJECTIVE"
	                }
	                change_country_tag = KOR
	                change_country_flag = CORINTH_FLAG
	                change_country_color = ocean_blue
	                set_country_religion = roman_pantheon
	                set_country_heritage = corinthian_heritage
	                change_government = democratic_republic
	            }
	        }
            make_subject = {
                type = tributary
                target = scope:corinth_scope
            }
            set_player_country = scope:corinth_scope
		}
		ai_chance = {
			modifier = {
				factor = 0
			}
		}
	}

}

# Chalkis
diadochi_liberation.2 = {
	type = country_event
	title = "diadochi_liberation.2.t"
	desc = "diadochi_liberation.2.desc"
	picture = greek_siege
	
	left_portrait = current_ruler
	right_portrait = char:37

	goto_location = p:407

	fire_only_once = yes

	option = {
		name = "diadochi_liberation.2.a"
        show_as_tooltip = {
	 		p:407 = { #Chalkis
				set_owned_by = ROOT
			}
        }
        custom_tooltip = diadochi_liberation.2.a.t
        hidden_effect = {
            every_country = {
                limit = {
                    capital_scope = {
                        is_in_region = greece_region
                        NOR = {
                            is_in_area = crete_area
                            is_in_area = epirus_area
                        }
                    }
                    NOT = { primary_culture = macedonian }
                }
                add_opinion = { target = ROOT modifier = macedonian_garrisons_bad } #Macedonian Garrisons
            }
        }
		ai_chance = {
			modifier = {
				factor = 20
			}
		}
	}

	option = { # feudatory 
		name = "diadochi_liberation.2.b"
        custom_tooltip = diadochi_liberation.2.bt
        hidden_effect = {
            p:407 = { #Chalkis
                create_country = {
                    save_scope_as = chalkis_scope
					name = {
						name = CHALKIS_NAME
						adjective = CHALKIS_ADJECTIVE
					}
					if = {
						limit = {
							NOT = {
								primary_culture = euboean
							}
						}
						set_primary_culture_cleanup_effect = {
							NEW_PRIMARY_CULTURE = euboean
							MAKE_OLD_CULTURE_INTEGRATED = yes
						}
					}
					set_country_religion = roman_pantheon
					change_government = oligarchic_republic
					change_country_color = samnite_green
					change_country_flag = CHALCIS_FLAG
                    change_country_tag = CH2
                }
            }
            make_subject = {
                type = feudatory
                target = scope:chalkis_scope
            }
        }
		ai_chance = {
			modifier = {
				factor = 15
			}
		}
	}

	option = { # Tributary
		name = "diadochi_liberation.2.c"
        custom_tooltip = diadochi_liberation.2.ct
        custom_tooltip = diadochi_liberation.2.c.t2
        hidden_effect = {
            every_country = {
                limit = {
                    capital_scope = {
                        is_in_region = greece_region
                        NOR = {
                            is_in_area = crete_area
                            is_in_area = epirus_area
                        }
                    }
                    NOT = { primary_culture = macedonian }
                }
                add_opinion = { target = ROOT modifier = macedonian_garrisons_good } #Macedonian Garrisons Removed
	            }
            p:407 = { #Chalkis
                create_country = {
                    save_scope_as = chalkis_scope
					name = {
						name = CHALKIS_NAME
						adjective = CHALKIS_ADJECTIVE
					}
					if = {
						limit = {
							NOT = {
								primary_culture = euboean
							}
						}
						set_primary_culture_cleanup_effect = {
							NEW_PRIMARY_CULTURE = euboean
							MAKE_OLD_CULTURE_INTEGRATED = yes
						}
					}
					set_country_religion = roman_pantheon
					change_government = oligarchic_republic
					change_country_color = samnite_green
					change_country_flag = CHALCIS_FLAG
                    change_country_tag = CH2
                }
            }
            make_subject = {
                type = tributary
                target = scope:chalkis_scope
            }
		}
		ai_chance = {
			modifier = {
				factor = 10
			}
		}
	}
	option = { # Tag switch
		name = "diadochi_liberation.2.d"
        custom_tooltip = diadochi_liberation.2.dt
		highlight = yes
		trigger = {
			is_ai = no
		}
        hidden_effect = {
            p:407 = { #Chalkis
                create_country = {
                    save_scope_as = chalkis_scope
					name = {
						name = CHALKIS_NAME
						adjective = CHALKIS_ADJECTIVE
					}
					if = {
						limit = {
							NOT = {
								primary_culture = euboean
							}
						}
						set_primary_culture_cleanup_effect = {
							NEW_PRIMARY_CULTURE = euboean
							MAKE_OLD_CULTURE_INTEGRATED = yes
						}
					}
					set_country_religion = roman_pantheon
					change_government = oligarchic_republic
					change_country_color = samnite_green
					change_country_flag = SALAMIS_FLAG
                    change_country_tag = CH2
                }
            }
            make_subject = {
                type = tributary
                target = scope:chalkis_scope
            }
            set_player_country = scope:chalkis_scope
		}
		ai_chance = {
			modifier = {
				factor = 0
			}
		}
	}
}

# Salamis
diadochi_liberation.3 = {
	type = country_event
	title = "diadochi_liberation.3.t"
	desc = "diadochi_liberation.3.desc"
	picture = greek_siege
	
	left_portrait = current_ruler
	left_portrait = char:373
	right_portrait = char:37
	right_portrait = char:38

	goto_location = p:7902

	fire_only_once = yes

	option = {
		name = "diadochi_liberation.3.a"
        show_as_tooltip = {
	 		p:7902 = { #Salamis
				set_owned_by = ROOT
			}
        }
        custom_tooltip = diadochi_liberation.3.a.t
        hidden_effect = {
            every_country = {
                limit = {
                    capital_scope = {
                        is_in_region = greece_region
                        NOR = {
                            is_in_area = crete_area
                            is_in_area = epirus_area
                        }
                    }
                    NOT = { primary_culture = macedonian }
                }
                add_opinion = { target = ROOT modifier = macedonian_garrisons_bad } #Macedonian Garrisons
            }
        }
		ai_chance = {
			modifier = {
				factor = 20
			}
		}
	}

	option = { # feudatory 
		name = "diadochi_liberation.3.b"
        custom_tooltip = diadochi_liberation.3.bt
        hidden_effect = {
            p:7902 = { #Salamis
                create_country = {
                    save_scope_as = salamis_scope
					name = {
						name = SALAMIS_NAME
						adjective = SALAMIS_ADJECTIVE
					}
					set_country_religion = roman_pantheon
					change_government = oligarchic_republic
					change_country_color = salamis_green
					change_country_flag = SALAMIS_FLAG
                    change_country_tag = SAL
                }
            }
            make_subject = {
                type = feudatory
                target = scope:salamis_scope
            }
        }
		ai_chance = {
			modifier = {
				factor = 15
			}
		}
	}

	option = { # Tributary
		name = "diadochi_liberation.3.c"
        custom_tooltip = diadochi_liberation.3.ct
        custom_tooltip = diadochi_liberation.3.c.t2
        hidden_effect = {
            every_country = {
                limit = {
                    capital_scope = {
                        is_in_region = greece_region
                        NOR = {
                            is_in_area = crete_area
                            is_in_area = epirus_area
                        }
                    }
                    NOT = { primary_culture = macedonian }
                }
                add_opinion = { target = ROOT modifier = macedonian_garrisons_good } #Macedonian Garrisons Removed
	            }
	            p:7902 = { #Salamis
	                create_country = {
	                    save_scope_as = salamis_scope
						name = {
							name = SALAMIS_NAME
							adjective = SALAMIS_ADJECTIVE
						}
						set_country_religion = roman_pantheon
						change_government = oligarchic_republic
						change_country_color = salamis_green
						change_country_flag = SALAMIS_FLAG
	                    change_country_tag = SAL
	                }
	            }
	            make_subject = {
	                type = tributary
	                target = scope:chalkis_scope
	            }
			}
		ai_chance = {
			modifier = {
				factor = 10
			}
		}
	}
	option = { # Tag switch
		name = "diadochi_liberation.3.d"
        custom_tooltip = diadochi_liberation.3.c.t2
		trigger = {
			is_ai = no
		}
        hidden_effect = {
            every_country = {
                limit = {
                    capital_scope = {
                        is_in_region = greece_region
                        NOR = {
                            is_in_area = crete_area
                            is_in_area = epirus_area
                        }
                    }
                    NOT = { primary_culture = macedonian }
                }
                add_opinion = { target = ROOT modifier = macedonian_garrisons_good } #Macedonian Garrisons Removed
	            }
	        }
		if = {
			limit = {
				c:ATH = {
					num_of_cities >= 1
					NOT = { is_subject_of = c:PRY }
				}
			}
			p:7902 = {
				set_owned_by = c:ATH
			}
		}
		else_if = {
			limit = {
				c:MGA = {
					num_of_cities >= 1
				}
			}
			p:7902 = {
				set_owned_by = c:ATH
			}
		}
		else_if = {
			limit = {
				c:MGA = {
					num_of_cities >= 1
				}
			}
			p:7902 = {
				set_owned_by = c:ATH
			}
		}		
		else = {
	        custom_tooltip = diadochi_liberation.3.ct
	        hidden_effect = {
	            p:7902 = { #Salamis
	                create_country = {
	                    save_scope_as = salamis_scope
						name = {
							name = SALAMIS_NAME
							adjective = SALAMIS_ADJECTIVE
						}
						set_country_religion = roman_pantheon
						change_government = oligarchic_republic
						change_country_color = salamis_green
						change_country_flag = SALAMIS_FLAG
	                    change_country_tag = SAL
	                }
	            }
	            make_subject = {
	                type = tributary
	                target = scope:salamis_scope
	            }
			}
		}	

		ai_chance = {
			modifier = {
				factor = 0
			}
		}
	}
}