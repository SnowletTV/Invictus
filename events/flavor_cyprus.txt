namespace = flavor_cyprus
    

flavor_cyprus.1 = {                   # Cypriot Kings
    type = country_event
    title = "flavor_cyprus.1.t"
    desc = "flavor_cyprus.1.desc"
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:menelaos_lagid
    right_portrait = scope:eunostos_of_soloi
    
    goto_location = p:331

    immediate = {
        hidden_effect = {
            if = {#Eunostos
                limit = {
                    char:430 = {
                        is_alive = yes 
                    }
                }
                char:430 = { save_scope_as = eunostos_of_soloi }
            }
            else = {#Eunostos backup
                create_character = {
                    female = no
                    family_name = "Pasikratid"
                    culture = cypriot
                    religion = roman_pantheon
                    no_stats = yes
                    good_martial_effect = yes
                    average_charisma_effect = yes
                    good_finesse_effect = yes
                    average_zeal_effect = yes
                    save_scope_as = eunostos_of_soloi
                }
            }
            if = {#Menelaos
                limit = {
                    char:47 = {
                        is_alive = yes 
                    }
                }
                char:47 = { save_scope_as = menelaos_lagid }
            }
            else = {#Menelaos backup
                create_character = {
                    female = no
                    family = c:EGY.fam:Lagid
                    father=char:47                    
                    culture = cypriot
                    religion = roman_pantheon
                    force_add_trait="lagids"
                    no_stats = yes
                    average_martial_effect = yes
                    average_charisma_effect = yes
                    good_finesse_effect = yes
                    good_zeal_effect = yes
                    save_scope_as = menelaos_lagid
                }
            }
            p:331 = { #Salamis
                create_country = {
                    save_scope_as = cyprus_country
                    change_government = despotic_monarchy
                }
            }
            scope:menelaos_lagid = {
                move_country_with_close_family_effect = { COUNTRY = scope:cyprus_country }
            }
            scope:cyprus_country = {
                set_as_ruler = scope:menelaos_lagid 
                change_country_name = CYP
                change_country_adjective = CYP_ADJ
                change_country_tag = CYP
                change_country_flag = CYPRUS_RUST
                change_country_color = spartan_rust                   
            }
            every_owned_province = {
                limit = { is_in_area = cyprus_area }
                set_conquered_by = scope:cyprus_country
            }
        }
    }


    option = { # Eunostos shall have his kingdom returned to him
        name = "flavor_cyprus.1.a"
        custom_tooltip = flavor_cyprus.1.at
        hidden_effect = {
            p:333 = {
                create_country = {
                    save_scope_as = soloi_country
                    change_government = despotic_monarchy
                }
            }
            scope:eunostos_of_soloi = {
                move_country_with_entire_family_effect = { COUNTRY = scope:soloi_country }
            }
            scope:soloi_country = {
                set_as_ruler = scope:eunostos_of_soloi 
                change_country_name = SOLOI_NAME
                change_country_adjective = SOLOI_ADJECTIVE
                change_country_flag = SOLOI_FLAG
                change_country_color = soloi_color      
            }           
        }
        make_subject = {
            target = scope:cyprus_country
            type = satrapy
        }
        custom_tooltip = flavor_cyprus_soloi_feudatory_1.tt
        hidden_effect = {
            make_subject = {
                target = scope:soloi_country
                type = feudatory
            } 
        }      
        add_treasury = {
            value = has_monthly_income
            multiply = 2
        }              
        ai_chance = { factor = 45 }
    }


    option = {
        name = "flavor_cyprus.1.b" # Divide Cyprus - Eunostos shall be rewarded for his fidelity
        custom_tooltip = flavor_cyprus.1.bt
        hidden_effect = {
            p:333 = {
                create_country = {
                    save_scope_as = soloi_country
                    change_government = despotic_monarchy
                }
            }
            scope:eunostos_of_soloi = {
                move_country_with_entire_family_effect = { COUNTRY = scope:soloi_country }
            }
            hidden_effect = {
                scope:soloi_country = {
                    set_as_ruler = scope:eunostos_of_soloi 
                    change_country_name = SOLOI_NAME
                    change_country_adjective = SOLOI_ADJECTIVE
                    change_country_flag = SOLOI_FLAG
                    change_country_color = soloi_color   
                    p:6431 = { add_to_list = soloi_cyprus_list }
                    p:333 = { add_to_list = soloi_cyprus_list }
                    p:334 = { add_to_list = soloi_cyprus_list }
                    p:7990 = { add_to_list = soloi_cyprus_list }
                    p:338 = { add_to_list = soloi_cyprus_list }
 #                   p:336 = { add_to_list = soloi_cyprus_list }   
                }      
                every_in_list = {
                    list = soloi_cyprus_list
                    set_conquered_by = scope:soloi_country
                }
            }  
        }
        custom_tooltip = flavor_cyprus_salamis_feudatory_1.tt
        hidden_effect = {
            scope:cyprus_country = {
                change_country_name = SALAMIS_CYPRUS_NAME
                change_country_adjective = SALAMIS_CYPRUS_ADJECTIVE                
            }
            make_subject = {
                target = scope:cyprus_country
                type = feudatory
            } 
        }
        custom_tooltip = flavor_cyprus_soloi_feudatory_1.tt
        hidden_effect = {
            make_subject = {
                target = scope:soloi_country
                type = feudatory
            } 
        }
        add_treasury = {
            value = has_monthly_income
            multiply = 6
        }
        ai_chance = { factor = 20 } 
    }

    option = {
        name = "flavor_cyprus.1.c" # We must recall [menelaos_lagid.GetPraenomen] at once
        hidden_effect = {
            scope:menelaos_lagid = {
                move_country_with_close_family_effect = { COUNTRY = ROOT }
            }
            scope:eunostos_of_soloi = {
                move_country_with_entire_family_effect = { COUNTRY = scope:cyprus_country }
            }  
        }
        scope:cyprus_country = {
            set_as_ruler = scope:eunostos_of_soloi  
            set_capital = p:333
            hidden_effect = {
                change_country_flag = CYPRUS_SOLOI
                change_country_color = soloi_color     
            }
        }   
        make_subject = {
            target = scope:cyprus_country
            type = satrapy
        }
        scope:cyprus_country = {
            add_country_modifier = {
                name = cyprus_satrapy_modifier
                duration = -1
            }
        }
        scope:menelaos_lagid = { add_loyalty = scorned_claimant_loyalty }
        ai_chance = { factor = 20 } 
    }   

    option = {
        name = "flavor_cyprus.1.d" # Give all of Cyprus to Menalaos as a satrapy
 #       custom_tooltip = flavor_cyprus.1.dt
        make_subject = {
            target = scope:cyprus_country
            type = satrapy
        }  
        scope:cyprus_country = {
            add_country_modifier = {
                name = cyprus_satrapy_modifier
                duration = -1
            }
        }             
        scope:eunostos_of_soloi = { add_loyalty = scorned_claimant_loyalty }
        ai_chance = { factor = 15 } 
    }  

    option = {
        name = "flavor_cyprus.1.e" # Neither man is fit to govern
        highlight = yes
        custom_tooltip = flavor_cyprus.1.et
        add_tyranny = 20
        add_political_influence = -50
        hidden_effect = { 
            scope:menelaos_lagid = {
                move_country_with_close_family_effect = { COUNTRY = ROOT }
            }
            scope:cyprus_country = {
                every_owned_province = {
                    limit = { is_in_area = cyprus_area }
                    set_conquered_by = ROOT
                }
            }    
        }    
        scope:menelaos_lagid = { add_loyalty = scorned_claimant_loyalty }
        scope:eunostos_of_soloi = { add_loyalty = scorned_claimant_loyalty }
        ai_chance = { factor = 0 } 
    } 

    after = {
        if = {
            limit = {
                scope:cyprus_country = {
                    has_land = yes
                }
            }
            scope:cyprus_country = {
                hidden_effect = {
                    if = {
                        limit = {
                            NOT = {
                                primary_culture = cypriot
                            }
                        }
                        set_primary_culture_cleanup_effect = {
                            NEW_PRIMARY_CULTURE = cypriot
                            MAKE_OLD_CULTURE_INTEGRATED = yes
                        }
                    }
                    create_character = {
                        female = no
                        family_name = "Teucrid"                    
                        #family_name = "Pnytagorid"
                        culture = cypriot
                        religion = roman_pantheon
                        add_trait = teucer
                        save_scope_as = salamis_guy
                    }
                    create_character = {
                        female = no
                        family_name = "Poumyathonid"
                        culture = phoenician
                        religion = carthaginian_pantheon
                        save_scope_as = kition_guy
                    }
                    new_family_generation_effect = { FAMILY_CANDIDATE = kition_guy } #Scripted Effect that passes on the saved scope.
                    new_family_generation_effect = { FAMILY_CANDIDATE = salamis_guy } #Scripted Effect that passes on the saved scope.
                    scope:kition_guy.family = {
                        add_prestige = 100
                    }
                    scope:salamis_guy.family = {
                        add_prestige = 100
                    }
                }
            }
            every_country = {
                limit = {
                    OR = {
                        primary_culture = macedonian
                        capital_scope = {
                            OR = {
                                is_in_region = cilicia_region
                                is_in_region = asia_region
                                is_in_region = greece_region
                                is_in_region = macedonia_region
                                is_in_region = syria_region
                            }
                        }
                    }
                }
                trigger_event = {
                    id = flavor_cyprus.2
                    days = { 180 360 }
                }
            }
            scope:cyprus_country = {
                trigger_event = {
                    id = flavor_cyprus.9
                    days = { 361 400 }
                }
            }
        }

    }

}

flavor_cyprus.2 = {                   # Cyprus Tag Switch
    type = country_event
    title = "flavor_cyprus.2.t"
    desc = "flavor_cyprus.2.desc"
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:cyprus_country.current_ruler
    goto_location = scope:cyprus_country.capital_scope


    trigger = {
        NOT = { tag = CYP }
        scope:cyprus_country = {
            has_land = yes
        }
    }    


    option = {
        name = "flavor_cyprus.2.a" # 
        custom_tooltip = flavor_cyprus.2.at
    }  

    option = {
        name = "flavor_cyprus.2.b" # 
        highlight = yes
        trigger = { 
            is_ai = no
            scope:cyprus_country = { is_ai = yes }
        }
        custom_tooltip = flavor_cyprus.2.bt
        hidden_effect = {
            set_player_country = scope:cyprus_country
        }
        scope:cyprus_country = {
            trigger_event = {
                id = flavor_cyprus.9
                days = { 5 15 }
            }
        }
        ai_chance = { factor = 0 } 
    }  
}


flavor_cyprus.3 = {                 # Sidon
    type = country_event
    title = "flavor_cyprus.3.t"
    desc = "flavor_cyprus.3.desc"
    picture = tyre_city
    left_portrait = current_ruler
    right_portrait = scope:philokles_baalshillemi
    goto_location = p:743


    immediate = {
        hidden_effect = {
            save_scope_as = new_overlord
            if = {#philokles
                limit = {
                    char:253 = {
                        is_alive = yes 
                    }
                }
                char:253 = { save_scope_as = philokles_baalshillemi }
            }
            else = {#philokles backup
                create_character = {
                    female = no
                    family_name = "Baalshillemi"
                    culture = phoenician
                    religion = roman_pantheon
                    no_stats = yes
                    good_martial_effect = yes
                    average_charisma_effect = yes
                    good_finesse_effect = yes
                    average_zeal_effect = yes
                    save_scope_as = philokles_baalshillemi
                }
            }

            if = {
                limit = {
                    OR = {
                        owns = p:747
                        p:747.owner = {
                            is_subject_of = ROOT
                            is_ai = yes
                            NOT = { tag = SID }
                            c:SID = { has_land = no }
                        }
                    }
                }
                p:747 = { set_owned_by = c:SID }                
            }
            scope:philokles_baalshillemi = {
                move_country_with_close_family_effect = { COUNTRY = c:SID }
            }
        }
        c:SID = {
            add_country_modifier = { #Diadochi Deal
                name = ant_01_3_sid_cmod
                duration = 7300 # 20 years
            }
            set_as_ruler = scope:philokles_baalshillemi
        }
        if = {
            limit = {
                c:SID = {
                    is_subject = no }
            }
            make_subject = {
                target = c:SID
                type = feudatory
            }   
        }
    }
 

    option = {
        name = "flavor_cyprus.3.a" # Long may he reign
        add_country_modifier = {
            name = ant_01_3_ant_cmod #Worse version (reason to give land)
            duration = 7300 # 20 years
        }        
        ai_chance = { factor = 1 } 
    }

   option = {
        name = "flavor_cyprus.3.b" # Ancestral holdings in the plain of sharron shall be restored
        highlight = yes
        trigger = {
            OR = { 
                owns = 663
                owns = 664 
                owns = 665 
                owns = 667
                owns = 668 
            }
            c:SID = {
                not = { 
                    owns = 663
                    owns = 664 
                    owns = 665 
                    owns = 667
                    owns = 668 
                }
            }
        }
        c:SID = {
            add_opinion = {
                target = ROOT
                modifier = restored_plain_sharron
            }
            set_variable = sharron_restored
        }
        add_country_modifier = {
            name = ant_01_3_egy_cmod
            duration = 14600 # 40 years
        }
        every_country = {
            limit = {   
                OR = {
                    THIS = ROOT
                    is_subject_of = ROOT
                }
              
            }
            every_owned_province = {
                limit = {
                    OR = {
                        province_id = 663
                        province_id = 664
                        province_id = 665
                        province_id = 667
                        province_id = 668
                    }
                }
                set_owned_by = c:SID
                hidden_effect = {
                    add_claim = PREV
                }
            }
        }
        if = {
            limit = {
                c:TYE = {
                    is_subject_of = root
                    NOT = { owns = p:666 }
                }
                owns_or_subject_owns = p:666
            }
            p:666 = {
                set_owned_by = c:TYE
            }
        }

        ai_chance = { factor = 100 }            
    } 

    after = {
        c:SID = {
            trigger_event = {
                id = flavor_cyprus.8
            }
        }
    }

}


flavor_cyprus.4 = {                  # Antigonid Ping
    type = country_event
    title = "flavor_cyprus.4.t"
    desc = "flavor_cyprus.4.desc"
    picture = throneroom
    left_portrait = current_ruler
    left_portrait = scope:salamis_guy
    left_portrait = scope:paphos_guy
    right_portrait = scope:kition_guy #Right portrait cities stayed loyal
    right_portrait = scope:lapethos_guy
    right_portrait = scope:marion_guy
    goto_location = p:331

    immediate = {
        hidden_effect = {
            create_character = {
                female = no
                family_name = "Teucrid"                    
                #family_name = "Pnytagorid"
                culture = cypriot
                religion = roman_pantheon
                add_trait = teucer
                save_scope_as = salamis_guy
            }
            create_character = {
                female = no
                family_name = "Sidqmelekid"
                culture = phoenician
                religion = carthaginian_pantheon
                save_scope_as = lapethos_guy
            }
            create_character = {
                female = no
                family_name = "Poumyathonid"
                culture = phoenician
                religion = carthaginian_pantheon
                save_scope_as = kition_guy
            }
            create_character = {
                female = no
                family_name = "Nikoklid"
                culture = cypriot
                religion = roman_pantheon
                save_scope_as = paphos_guy
            }
            create_character = {
                female = no
                family_name = "Stasioikid"
                culture = cypriot
                religion = roman_pantheon
                save_scope_as = marion_guy
            }
        }
    }

    option = {
        name = "flavor_cyprus.4.a" 
        custom_tooltip = flavor_cyprus.4.at
        trigger_event = {
            id = flavor_cyprus.5
            days = { 7 28 }
        }           
        ai_chance = { factor = 10 } 
    }

    option = {
        name = "flavor_cyprus.4.b"
        highlight = yes
        #custom_tooltip = flavor_cyprus.4.b1t
        custom_tooltip = flavor_cyprus.4.b2t
        hidden_effect = {
            scope:salamis_guy = { add_loyalty = scorned_claimant_loyalty }
            scope:lapethos_guy = { add_loyalty = scorned_claimant_loyalty }
            scope:kition_guy = { add_loyalty = scorned_claimant_loyalty }
            scope:paphos_guy = { add_loyalty = scorned_claimant_loyalty }
            scope:marion_guy = { add_loyalty = scorned_claimant_loyalty }
        }

        hidden_effect = {
            random_list = {
                40 = {
                    trigger_event = {
                        id = flavor_cyprus.6
                        days = { 180 900 }
                    }
                }
                60 = {
                    #nothing happens
                }
            }  
        }
        ai_chance = { factor = 10 } 
    }
}

flavor_cyprus.5 = {                   # Antigonid Event
    type = country_event
    title = "flavor_cyprus.5.t"
    desc = "flavor_cyprus.5.desc"
    picture = throneroom
    left_portrait = current_ruler
    left_portrait = scope:salamis_guy
    left_portrait = scope:paphos_guy
    right_portrait = scope:kition_guy #Right portrait cities stayed loyal
    right_portrait = scope:lapethos_guy
    right_portrait = scope:marion_guy
    goto_location = capital_scope

    option = {
        name = "flavor_cyprus.5.a" # 
        custom_tooltip = flavor_cyprus_salamis_feudatory.tt
        custom_tooltip = flavor_cyprus_paphos_feudatory.tt
        custom_tooltip = flavor_cyprus_marion_feudatory.tt
        add_treasury = -100
        add_manpower = 6
        hidden_effect = {
            p:6431 = {# Marion
                change_province_name = Nea_Marion
                create_state_pop = citizen
                create_state_pop = citizen           
                if = {
                    limit = {
                        has_city_status = no
                        NOT = { has_province_modifier = founding_city_in_progress }
                    }
                    found_city_effect = yes
                }
            }
        }
        custom_tooltip = flavor_cyprus_kition_tributary.tt
        custom_tooltip = flavor_cyprus_lapethos_tributary.tt
        hidden_effect = {
            p:331 = {#    Salamis
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = SALAMIS_CYPRUS_NAME
                    change_country_adjective = SALAMIS_CYPRUS_ADJECTIVE       
                    change_country_flag = CYPRUS_RUST
                    change_country_color = spartan_rust
                    save_scope_as = salamis_country
                }
            }
            p:330 = { set_owned_by = scope:salamis_country }     
            p:335 = {# Lapethos
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = LAPETHOS_NAME
                    change_country_adjective = LAPETHOS_ADJECTIVE       
                    change_country_flag = LAPETHOS_FLAG
                    change_country_color = lapethos_blue
                    save_scope_as = lapethos_country                
                }
                change_province_name = "Lafeth"
            }
            p:6433 = { set_owned_by = scope:lapethos_country } 
            p:332 = {# Kition 
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = KITION_NAME
                    change_country_adjective = KITION_ADJECTIVE       
                    change_country_flag = ALASHIYA
                    change_country_color = alashiya_color    
                    save_scope_as = kition_country                 
                }
            }
            p:7991 = { set_owned_by = scope:kition_country }          
            p:336 = { set_owned_by = scope:kition_country } 
            p:334 = {# Paphos 
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = PAPHOS_NAME
                    change_country_adjective = PAPHOS_ADJECTIVE       
                    change_country_flag = PAPHOS_FLAG
                    change_country_color = paphos_color    
                    save_scope_as = paphos_country                
                }
            }
            p:7990 = { set_owned_by = scope:paphos_country }          
            p:338 = { set_owned_by = scope:paphos_country } 
            p:6431 = {# Marion
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = MARION_NAME
                    change_country_adjective = MARION_ADJECTIVE       
                    change_country_flag = MARION_FLAG
                    change_country_color = marion_color    
                    save_scope_as = marion_country                
                }
                change_province_name = Nea_Marion
                if = {
                    limit = {
                        has_city_status = no
                        NOT = { has_province_modifier = founding_city_in_progress }
                    }
                    found_city_effect = yes
                }
            }
            p:333 = { set_owned_by = scope:marion_country }
            make_subject = {#####
                target = scope:salamis_country
                type = feudatory
            }
            make_subject = {
                target = scope:paphos_country
                type = feudatory
            }
            make_subject = {
                target = scope:marion_country
                type = feudatory
            }
            make_subject = {
                target = scope:kition_country
                type = tributary
            }
            make_subject = {
                target = scope:lapethos_country
                type = tributary
            }
            scope:salamis_guy = {
                move_country = scope:salamis_country
            }
            scope:paphos_guy = {
                move_country = scope:paphos_country
            }
            scope:kition_guy = {
                move_country = scope:kition_country
            }
            scope:lapethos_guy = {
                move_country = scope:lapethos_country
            }
            scope:marion_guy = {
                move_country = scope:marion_country
            }
            every_country = {
                limit = {
                    capital_scope = {
                        is_in_area = cyprus_area
                    }
                }
                if = {
                    limit = {
                        capital_scope = { fort_level < 1 }
                    }
                    capital_scope = { add_building_level = fortress_building }
                }
                add_military_access = scope:salamis_country
                add_military_access = scope:paphos_country                
                add_military_access = scope:marion_country                
                add_military_access = scope:kition_country                
                add_military_access = scope:lapethos_country          
            }
            scope:kition_country = { add_alliance = scope:lapethos_country }
            scope:salamis_country = { set_as_ruler = scope:salamis_guy }
            scope:paphos_country = { set_as_ruler = scope:paphos_guy }
            scope:marion_country = { set_as_ruler = scope:marion_guy }
            scope:kition_country = { 
                set_as_ruler = scope:kition_guy
                if = {
                    limit = {
                        NOT = {
                            primary_culture = phoenician
                        }
                    }
                    set_primary_culture_cleanup_effect = {
                        NEW_PRIMARY_CULTURE = phoenician
                        MAKE_OLD_CULTURE_INTEGRATED = yes
                    }
                }
                set_country_religion = carthaginian_pantheon     
                every_character = {
                    limit = {
                        from_ruler_family = yes
                    }
                    set_culture = phoenician
                    set_character_religion = carthaginian_pantheon
                }
            }
            scope:lapethos_country = { 
                set_as_ruler = scope:lapethos_guy
                capital_scope = { change_province_name = "Lapethos" }
                if = {
                    limit = {
                        NOT = {
                            primary_culture = phoenician
                        }
                    }
                    set_primary_culture_cleanup_effect = {
                        NEW_PRIMARY_CULTURE = phoenician
                        MAKE_OLD_CULTURE_INTEGRATED = yes
                    }
                }
                set_country_religion = carthaginian_pantheon     
                every_character = {
                    limit = {
                        from_ruler_family = yes
                    }
                    set_culture = phoenician
                    set_character_religion = carthaginian_pantheon
                }
            }
        }
        ai_chance = {
            modifier = {
                factor = 10
            }
            modifier = {
                factor = 3
                has_war_exhaustion >= 8
            }
            modifier = {
                factor = 3
                manpower <= 20
            }
        }
    }

    option = {
        name = "flavor_cyprus.5.b"
        custom_tooltip = flavor_cyprus.5.bt
        custom_tooltip = cyprus_satrapy_modifier.tt
        add_manpower = 6
        current_ruler = { add_corruption = 20 }
        add_treasury = {
            value = has_monthly_income
            multiply = 6
        }         
        hidden_effect = {
            p:334 = { #paphos
                create_country = {
                    save_scope_as = cyprus_country
                    change_government = despotic_monarchy
                }
            }
            scope:salamis_guy = {
                move_country = scope:cyprus_country
            }
            scope:paphos_guy = {
                move_country = scope:cyprus_country
            }
            scope:kition_guy = {
                move_country = scope:cyprus_country
            }
            scope:lapethos_guy = {
                move_country = scope:cyprus_country
            }
            scope:marion_guy = {
                move_country = scope:cyprus_country
            }
            scope:cyprus_country = {
                set_as_ruler = scope:paphos_guy 
                change_country_name = CYP
                change_country_adjective = CYP_ADJ
                change_country_tag = CYP
                change_country_flag = CYPRUS_RUST
                change_country_color = spartan_rust                   
                add_country_modifier = {
                    name = cyprus_satrapy_modifier
                    duration = -1
                }
            }
            every_owned_province = {
                limit = { is_in_area = cyprus_area }
                set_conquered_by = scope:cyprus_country
            }
            make_subject = {
                target = scope:cyprus_country
                type = satrapy
            }
        }
        every_country = {
            limit = {
                OR = {
                    primary_culture = macedonian
                    PREV.overlord = { primary_culture = macedonian }
                    capital_scope = {
                        OR = {
                            is_in_region = cilicia_region
                            is_in_region = asia_region
                            is_in_region = greece_region
                            is_in_region = macedonia_region
                            is_in_region = syria_region
                        }
                    }
                }
            }
            trigger_event = {
                id = flavor_cyprus.7
                days = { 5 180 }
            }
        }
        ai_chance = {
            modifier = {
                factor = 5
            }
            modifier = {
                factor = 3
                has_war_exhaustion >= 8
            }
            modifier = {
                factor = 3
                manpower <= 20
            }
        }
    }

    option = {
        name = "flavor_cyprus.5.c"
        highlight = yes
        #custom_tooltip = flavor_cyprus.5.ct
        scope:salamis_guy = { add_loyalty = scorned_claimant_loyalty }
        scope:lapethos_guy = { add_loyalty = scorned_claimant_loyalty }
        scope:kition_guy = { add_loyalty = scorned_claimant_loyalty }
        scope:paphos_guy = { add_loyalty = scorned_claimant_loyalty }
        scope:marion_guy = { add_loyalty = scorned_claimant_loyalty }
        hidden_effect = {
            random_list = {
                25 = {
                    trigger_event = {
                        id = flavor_cyprus.6
                        days = { 180 900 }
                    }
                }
                75 = {
                    #nothing happens
                }
            }  
        }
        ai_chance = { factor = 15 } 
    }   
}

flavor_cyprus.6 = {                # Cypriot Independence War
    type = country_event
    title = "flavor_cyprus.6.t"
    desc = "flavor_cyprus.6.desc"
    picture = throneroom
    left_portrait = current_ruler
    left_portrait = scope:salamis_guy
    left_portrait = scope:paphos_guy
    right_portrait = scope:kition_guy 
    right_portrait = scope:lapethos_guy
    right_portrait = scope:marion_guy
    goto_location = capital_scope
    
    immediate = {
        hidden_effect = {
            p:331 = {#    Salamis
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = SALAMIS_CYPRUS_NAME
                    change_country_adjective = SALAMIS_CYPRUS_ADJECTIVE       
                    change_country_flag = CYPRUS_RUST
                    change_country_color = spartan_rust
                    save_scope_as = salamis_country
                }
                if = {
                    limit = {
                        has_city_status = no
                        NOT = { has_province_modifier = founding_city_in_progress }
                    }
                    found_city_effect = yes
                }
            }
            p:330 = { set_owned_by = scope:salamis_country }     
            p:335 = {# Lapethos
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = LAPETHOS_NAME
                    change_country_adjective = LAPETHOS_ADJECTIVE       
                    change_country_flag = LAPETHOS_FLAG
                    change_country_color = lapethos_blue   
                    save_scope_as = lapethos_country                
                }
                #change_province_name = "Lafeth"                
                if = {
                    limit = {
                        has_city_status = no
                        NOT = { has_province_modifier = founding_city_in_progress }
                    }
                    found_city_effect = yes
                }
            }
            p:6433 = { set_owned_by = scope:lapethos_country } 
            p:332 = {# Kition 
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = KITION_NAME
                    change_country_adjective = KITION_ADJECTIVE       
                    change_country_flag = ALASHIYA
                    change_country_color = alashiya_color    
                    save_scope_as = kition_country                 
                }
                if = {
                    limit = {
                        has_city_status = no
                        NOT = { has_province_modifier = founding_city_in_progress }
                    }
                    found_city_effect = yes
                }
            }
            p:7991 = { set_owned_by = scope:kition_country }          
            p:336 = { set_owned_by = scope:kition_country } 
            p:334 = {# Paphos 
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = PAPHOS_NAME
                    change_country_adjective = PAPHOS_ADJECTIVE       
                    change_country_flag = PAPHOS_FLAG
                    change_country_color = paphos_color    
                    save_scope_as = paphos_country                
                }
                if = {
                    limit = {
                        has_city_status = no
                        NOT = { has_province_modifier = founding_city_in_progress }
                    }
                    found_city_effect = yes
                }
            }
            p:7990 = { set_owned_by = scope:paphos_country }          
            p:338 = { set_owned_by = scope:paphos_country } 
            p:6431 = {# Marion
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = MARION_NAME
                    change_country_adjective = MARION_ADJECTIVE       
                    change_country_flag = MARION_FLAG
                    change_country_color = marion_color    
                    save_scope_as = marion_country                
                }
                change_province_name = Nea_Marion
                if = {
                    limit = {
                        has_city_status = no
                        NOT = { has_province_modifier = founding_city_in_progress }
                    }
                    found_city_effect = yes
                }
            }
            p:333 = { set_owned_by = scope:marion_country }
            scope:salamis_guy = {
                move_country = scope:salamis_country
            }
            scope:paphos_guy = {
                move_country = scope:paphos_country
            }
            scope:kition_guy = {
                move_country = scope:kition_country
            }
            scope:lapethos_guy = {
                move_country = scope:lapethos_country
            }
            scope:marion_guy = {
                move_country = scope:marion_country
            }
            scope:salamis_country = { set_as_ruler = scope:salamis_guy }
            scope:paphos_country = { set_as_ruler = scope:paphos_guy }
            scope:marion_country = { set_as_ruler = scope:marion_guy }
            scope:kition_country = { 
                set_as_ruler = scope:kition_guy
                if = {
                    limit = {
                        NOT = {
                            primary_culture = phoenician
                        }
                    }
                    set_primary_culture_cleanup_effect = {
                        NEW_PRIMARY_CULTURE = phoenician
                        MAKE_OLD_CULTURE_INTEGRATED = yes
                    }
                }
                set_country_religion = carthaginian_pantheon     
                every_character = {
                    limit = {
                        from_ruler_family = yes
                    }
                    set_culture = phoenician
                    set_character_religion = carthaginian_pantheon
                }
            }
            scope:lapethos_country = { 
                set_as_ruler = scope:lapethos_guy
                capital_scope = { change_province_name = "Lafeth" }
                if = {
                    limit = {
                        NOT = {
                            primary_culture = phoenician
                        }
                    }
                    set_primary_culture_cleanup_effect = {
                        NEW_PRIMARY_CULTURE = phoenician
                        MAKE_OLD_CULTURE_INTEGRATED = yes
                    }
                }
                set_country_religion = carthaginian_pantheon     
                every_character = {
                    limit = {
                        from_ruler_family = yes
                    }
                    set_culture = phoenician
                    set_character_religion = carthaginian_pantheon
                }
            }
        }
    }


    option = {
        name = "flavor_cyprus.6.a" # 
        custom_tooltip = flavor_cyprus_salamis_feudatory.tt
        custom_tooltip = flavor_cyprus_paphos_feudatory.tt
        custom_tooltip = flavor_cyprus_marion_feudatory.tt
        custom_tooltip = flavor_cyprus_kition_tributary.tt
        custom_tooltip = flavor_cyprus_lapethos_tributary.tt
        add_manpower = 8
        hidden_effect = {
            make_subject = {
                target = scope:salamis_country
                type = feudatory
            }
            make_subject = {
                target = scope:paphos_country
                type = feudatory
            }
            make_subject = {
                target = scope:marion_country
                type = feudatory
            }
            make_subject = {
                target = scope:kition_country
                type = tributary
            }
            make_subject = {
                target = scope:lapethos_country
                type = tributary
            }
        }
        ai_chance = {
            modifier = {
                factor = 5
            }
            modifier = {
                factor = 3
                has_war_exhaustion >= 8
            }
            modifier = {
                factor = 3
                manpower <= 20
            }
        }
    }
    option = {
        name = "flavor_cyprus.6.b"
        custom_tooltip = flavor_cyprus.6.bt
        add_legitimacy = 10
        add_stability = 10 
        hidden_effect = {
            scope:salamis_country = {
                declare_war_with_wargoal = {
                    war_goal = independence_wargoal
                    province = scope:salamis_country.capital_scope
                    target = c:PRY
                }
            }
            random_current_war = {
                limit = {
                    any_war_participant = {
                        this = scope:paphos_country
                    }
                }
                save_scope_as = cyprus_rebellion_scope
            }
            every_country = {
                limit = {
                    NOT = { THIS = scope:salamis_country }
                    capital_scope = {
                        is_in_area = cyprus_area
                    }
                }
                add_to_war = {
                    target = scope:cyprus_rebellion_scope
                    attacker = yes
                    leader = no
                }
            }
        }
        ai_chance = { factor = 10 } 
    }
}


flavor_cyprus.7 = {                   # Cyprus Tag Switch
    type = country_event
    title = "flavor_cyprus.7.t"
    desc = "flavor_cyprus.7.desc"
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:cyprus_country.current_ruler
    goto_location = scope:cyprus_country.capital_scope


    trigger = {
        scope:cyprus_country = {
            has_land = yes
        }
    }    


    option = {
        name = "flavor_cyprus.7.a" # 
        custom_tooltip = flavor_cyprus.7.at
    }  

    option = {
        name = "flavor_cyprus.7.b" # 
        highlight = yes
        trigger = { 
            is_ai = no
            scope:cyprus_country = { is_ai = yes }
        }
        custom_tooltip = flavor_cyprus.7.bt
        hidden_effect = {
            set_player_country = scope:cyprus_country
        }
        scope:cyprus_country = {
            trigger_event = {
                id = flavor_cyprus.9
                days = { 5 15 }
            }
        }
        ai_chance = { factor = 0 } 
    }  
}

flavor_cyprus.8 = {                   #A New King
    type = country_event
    title = "flavor_cyprus.8.t"
    desc = {
        first_valid = {
            triggered_desc = {
                trigger = { 
                    has_variable = sharron_restored
                }
                desc = flavor_cyprus.8.desc_2
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = flavor_cyprus.8.desc_1
            }
        }
    }
    picture = tyre_city
    left_portrait = current_ruler
    right_portrait = scope:new_overlord.current_ruler
    goto_location = p:743

    option = {
        name = "flavor_cyprus.8.a" # 
        show_as_tooltip = {
            add_country_modifier = {
                name = ant_01_3_sid_cmod
                duration = 7300 # 20 years
            }
            set_as_ruler = scope:philokles_baalshillemi
            if = {
                limit = {
                    has_variable = sharron_restored
                }
                ordered_owned_province = {
                    limit = {
                        OR = {
                            province_id = 663
                            province_id = 664
                            province_id = 665
                            province_id = 667
                            province_id = 668
                        }
                    }
                    order_by = total_population
                    add_province_modifier = {
                        name = land_of_dagon
                        duration = -1
                    }
                }
                every_owned_province = {
                    limit = {
                        OR = {
                            province_id = 663
                            province_id = 664
                            province_id = 665
                            province_id = 667
                            province_id = 668
                        }
                    }
                    set_owned_by = c:SID
                }
            }
        }
    }
}

flavor_cyprus.9 = {                   # Cypriot Elite
    type = country_event
    title = "flavor_cyprus.9.t"
    desc = "flavor_cyprus.9.desc"
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:kition_guy
    right_portrait = scope:salamis_guy

    goto_location = capital_scope
    fire_only_once = yes  

    immediate = {
        hidden_effect = {
            scope:salamis_guy = {
                if = {
                    limit = {
                        num_of_children > 0
                        any_child = {
                            is_alive = yes
                            NOT = { has_trait = teucer }
                        }
                    }
                    every_child = {
                        limit = {
                            is_alive = yes
                            NOT = { has_trait = teucer }
                        }
                        add_trait = teucer
                        if = {
                            limit = {
                                num_of_children > 0
                                any_child = {
                                    is_alive = yes
                                    NOT = { has_trait = teucer }
                                }
                            }
                            every_child = { 
                                limit = {
                                    is_alive = yes
                                    NOT = { has_trait = teucer }
                                }
                                add_trait = teucer
                            }
                        }
                    }
                }
            }    
            scope:kition_guy.family = {
                add_prestige = 75
            }
            scope:salamis_guy.family = {
                add_prestige = 75
            }
            create_character = {
                culture = root.culture
                religion = root.religion
                family = root.current_ruler.family
                age = 16
                female = yes
                save_scope_as = kition_wife
            }
            create_character = {
                culture = root.culture
                religion = root.religion
                family = root.current_ruler.family
                age = 16
                female = yes
                save_scope_as = salamis_wife
            }
        }
    }

    option = {
        name = "flavor_cyprus.9.a"
        custom_tooltip = flavor_cyprus.9.at
        add_stability = 10
        hidden_effect = {
            scope:kition_guy = {
                if = {
                    limit = { is_married = yes }
                        divorce_character = spouse
                    }
                marry_character = scope:kition_wife
            } 
            scope:salamis_guy = {
                if = {
                    limit = { is_married = yes }
                        divorce_character = spouse
                }
                marry_character = scope:salamis_wife
            }                
        }
        ai_chance = { factor = 100 } 
    }

    option = {
        name = "flavor_cyprus.9.b" # 
        add_stability = -5
        add_political_influence = 150
        scope:kition_guy = { add_loyalty = scorned_claimant_loyalty }
        scope:salamis_guy = { add_loyalty = scorned_claimant_loyalty }
        ai_chance = { factor = 0 } 
    }  
}

flavor_cyprus.10 = {                   # the Cypriot Question
    type = country_event
    title = "flavor_cyprus.10.t"
    desc = "flavor_cyprus.10.desc"
    picture = throneroom
    left_portrait = current_ruler
    left_portrait = scope:eunostos_of_soloi
    left_portrait = scope:menelaos_lagid
    right_portrait = scope:kition_guy 
    right_portrait = scope:lapethos_guy
    right_portrait = scope:paphos_guy
    goto_location = scope:salamis_country.capital_scope
    fire_only_once = yes


    immediate = {
        set_variable = cypriot_question
        hidden_effect = {
            if = {#Eunostos
                limit = {
                    char:430 = {
                        is_alive = yes 
                    }
                }
                char:430 = { save_scope_as = eunostos_of_soloi }
            }
            else = {#Eunostos backup
                create_character = {
                    female = no
                    family_name = "Pasikratid"
                    culture = cypriot
                    religion = roman_pantheon
                    no_stats = yes
                    good_martial_effect = yes
                    average_charisma_effect = yes
                    good_finesse_effect = yes
                    average_zeal_effect = yes
                    save_scope_as = eunostos_of_soloi
                }
            }
            if = {#Menelaos
                limit = {
                    char:47 = {
                        is_alive = yes 
                    }
                }
                char:47 = { save_scope_as = menelaos_lagid }
            }
            else = {#Menelaos backup
                create_character = {
                    female = no
                    family = c:EGY.fam:Lagid
                    father=char:47                    
                    culture = cypriot
                    religion = roman_pantheon
                    force_add_trait="lagids"
                    no_stats = yes
                    average_martial_effect = yes
                    average_charisma_effect = yes
                    good_finesse_effect = yes
                    good_zeal_effect = yes
                    save_scope_as = menelaos_lagid
                }
            }

            create_character = {
                female = no
                family_name = "Sidqmelekid"
                culture = phoenician
                religion = carthaginian_pantheon
                save_scope_as = lapethos_guy
            }
            create_character = {
                female = no
                family_name = "Poumyathonid"
                culture = phoenician
                religion = carthaginian_pantheon
                save_scope_as = kition_guy
            }
            create_character = {
                female = no
                family_name = "Nikoklid"
                culture = cypriot
                religion = roman_pantheon
                save_scope_as = paphos_guy
            }

            p:331 = {#    Salamis
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = SALAMIS_CYPRUS_NAME
                    change_country_adjective = SALAMIS_CYPRUS_ADJECTIVE       
                    change_country_flag = CYPRUS_RUST
                    change_country_color = spartan_rust
                    save_scope_as = salamis_country
                }
            }
            p:330 = { set_owned_by = scope:salamis_country }     
            p:335 = {# Lapethos
                add_building_level = fortress_building
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = LAPETHOS_NAME
                    change_country_adjective = LAPETHOS_ADJECTIVE       
                    change_country_flag = LAPETHOS_FLAG
                    change_country_color = lapethos_blue   
                    save_scope_as = lapethos_country                
                }
            }
            p:6433 = { set_owned_by = scope:lapethos_country } 
            p:332 = {# Kition 
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = KITION_NAME
                    change_country_adjective = KITION_ADJECTIVE       
                    change_country_flag = ALASHIYA
                    change_country_color = alashiya_color    
                    save_scope_as = kition_country                 
                }
            }
            p:7991 = { set_owned_by = scope:kition_country }          
            p:336 = { set_owned_by = scope:kition_country } 
            p:334 = {# Paphos 
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = PAPHOS_NAME
                    change_country_adjective = PAPHOS_ADJECTIVE       
                    change_country_flag = PAPHOS_FLAG
                    change_country_color = paphos_color    
                    save_scope_as = paphos_country                
                }
            }
            p:7990 = { set_owned_by = scope:paphos_country }          
            p:338 = { set_owned_by = scope:paphos_country } 
            p:333 = {# Soloi
                create_country = {
                    change_government = despotic_monarchy
                    change_country_name = SOLOI_NAME
                    change_country_adjective = SOLOI_ADJECTIVE
                    change_country_flag = SOLOI_FLAG
                    change_country_color = soloi_color    
                    save_scope_as = soloi_country                
                }
                if = {
                    limit = {
                        has_city_status = no
                        NOT = { has_province_modifier = founding_city_in_progress }
                    }
                    found_city_effect = yes
                }
            }
            p:6431 = { set_owned_by = scope:soloi_country }

            every_country = {
                limit = {
                    capital_scope = {
                        is_in_area = cyprus_area
                    }
                }
                if = {
                    limit = {
                        capital_scope = { fort_level < 1 }
                    }
                    capital_scope = { add_building_level = fortress_building }
                }
            }

            scope:menelaos_lagid = {
                move_country_with_close_family_effect = { COUNTRY = scope:salamis_country }
            }
            scope:salamis_country = { set_as_ruler = scope:menelaos_lagid }

            scope:eunostos_of_soloi = {
                move_country_with_entire_family_effect = { COUNTRY = scope:soloi_country }
            }
            scope:soloi_country = { set_as_ruler = scope:eunostos_of_soloi }

            scope:paphos_guy = {
                move_country = scope:paphos_country
            }
            scope:paphos_country = { set_as_ruler = scope:paphos_guy }

            scope:kition_guy = {
                move_country = scope:kition_country
            }
            scope:kition_country = { 
                set_as_ruler = scope:kition_guy
                if = {
                    limit = {
                        NOT = {
                            primary_culture = phoenician
                        }
                    }
                    set_primary_culture_cleanup_effect = {
                        NEW_PRIMARY_CULTURE = phoenician
                        MAKE_OLD_CULTURE_INTEGRATED = yes
                    }
                }
                set_country_religion = carthaginian_pantheon     
                every_character = {
                    limit = {
                        from_ruler_family = yes
                    }
                    set_culture = phoenician
                    set_character_religion = carthaginian_pantheon
                }
            }
            scope:lapethos_guy = {
                move_country = scope:lapethos_country
            }
            scope:lapethos_country = { 
                set_as_ruler = scope:lapethos_guy
                if = {
                    limit = {
                        NOT = {
                            primary_culture = phoenician
                        }
                    }
                    set_primary_culture_cleanup_effect = {
                        NEW_PRIMARY_CULTURE = phoenician
                        MAKE_OLD_CULTURE_INTEGRATED = yes
                    }
                }
                set_country_religion = carthaginian_pantheon     
                every_character = {
                    limit = {
                        from_ruler_family = yes
                    }
                    set_culture = phoenician
                    set_character_religion = carthaginian_pantheon
                }
            }
            every_country = {
                limit = {
                    capital_scope = {
                        is_in_area = cyprus_area
                    }
                }
                if = {
                    limit = {
                        capital_scope = { fort_level < 1 }
                    }
                    capital_scope = { add_building_level = fortress_building }
                }
            }
        }
        hidden_effect = {
            make_subject = {
                target = scope:salamis_country
                type = feudatory
            }
            make_subject = {
                target = scope:soloi_country
                type = feudatory
            }
        }
        custom_tooltip = flavor_cyprus_salamis_feudatory.tt
        custom_tooltip = flavor_cyprus_soloi_feudatory.tt
    }

    option = {
        name = "flavor_cyprus.10.a"
        set_global_variable = { name = cypriot_kings_variable_pry } 
        make_subject = {
            target = scope:paphos_country
            type = feudatory
        }
        make_subject = {
            target = scope:kition_country
            type = tributary
        }
        make_subject = {
            target = scope:lapethos_country
            type = tributary
        }
        ai_chance = { factor = 15 } 
    }   

    option = {
        name = "flavor_cyprus.10.b"
        set_global_variable = { name = cypriot_kings_variable_pry } 
        add_political_influence = -50
        make_subject = {
            target = scope:paphos_country
            type = feudatory
        }
        scope:paphos_country = {
            add_country_modifier = {
                name = cypriot_hostages_modifier
                duration = 7300 # 20 years
            }
        }
        make_subject = {
            target = scope:kition_country
            type = tributary
        }
        scope:kition_country = {
            add_country_modifier = {
                name = cypriot_hostages_modifier
                duration = 7300 # 20 years
            }
        }
        make_subject = {
            target = scope:lapethos_country
            type = tributary
        }
        scope:lapethos_country = {
            add_country_modifier = {
                name = cypriot_hostages_modifier
                duration = 7300 # 20 years
            }
        }
        ai_chance = { factor = 15 } 
    }   

    option = {
        name = "flavor_cyprus.10.c"
        set_global_variable = { name = cypriot_kings_variable_pry } 
        set_variable = cyprus_rebellion_egy
        custom_tooltip = flavor_cyprus.10.ct
        add_political_influence = 50
        hidden_effect = {
            scope:paphos_country = {
                declare_war_with_wargoal = {
                    war_goal = independence_wargoal
                    province = prev.capital_scope
                    target = c:EGY
                }
            }
            random_current_war = {
                limit = {
                    any_war_participant = {
                        this = scope:paphos_country
                    }
                }
                save_scope_as = cyprus_rebellion_scope
            }
            every_country = {
                limit = {
                    NOR = {
                        THIS = scope:paphos_country
                        THIS = scope:salamis_country
                        THIS = scope:soloi_country
                        is_subject_of = root
                    }
                    capital_scope = {
                        is_in_area = cyprus_area
                    }
                }
                add_to_war = {
                    target = scope:cyprus_rebellion_scope
                    attacker = yes
                    leader = no
                }
            }
        }
        ai_chance = { factor = 15 } 
    } 
}

flavor_cyprus.11 = {                   # Cypriot Kings
    type = country_event
    title = "flavor_cyprus.11.t"
    desc = "flavor_cyprus.11.desc"
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:menelaos_lagid
    right_portrait = scope:eunostos_of_soloi
    
    goto_location = p:331

    immediate = {
        hidden_effect = {
            if = {
                limit = {
                    any_country = {
                        is_subject_of = root
                        capital_scope = {
                            province_id = 333
                        }
                    }
                }
                random_country = {
                    limit = {
                        is_subject_of = root
                        capital_scope = {
                            province_id = 333
                        }
                    }
                    save_scope_as = soloi_country
                }
            }
            else = {
                p:333 = {# Soloi
                    create_country = {
                        change_government = despotic_monarchy
                        change_country_name = SOLOI_NAME
                        change_country_adjective = SOLOI_ADJECTIVE
                        change_country_flag = SOLOI_FLAG
                        change_country_color = soloi_color    
                        save_scope_as = soloi_country                
                    }
                    if = {
                        limit = {
                            has_city_status = no
                            NOT = { has_province_modifier = founding_city_in_progress }
                        }
                        found_city_effect = yes
                    }
                }
                p:6431 = { set_owned_by = scope:soloi_country }
                scope:soloi_country = {
                    create_character = {
                        female = no
                        family_name = "Pasikratid"
                        culture = cypriot
                        religion = roman_pantheon
                        no_stats = yes
                        good_martial_effect = yes
                        average_charisma_effect = yes
                        good_finesse_effect = yes
                        average_zeal_effect = yes
                        save_scope_as = eunostos_of_soloi
                    }
                }
                 set_as_ruler = scope:eunostos_of_soloi 
            }
            scope:soloi_country.current_ruler = { save_scope_as = eunostos_of_soloi }
            every_owned_province = {
                limit = {
                    is_in_area = cyprus_area
                    NOT = { owner = scope:salamis_country }
                    is_capital = no
                    OR = {
                        province_id = 6431
                        province_id = 333
                        province_id = 334
                        province_id = 7990
                        province_id = 338
                    }
                }
                set_conquered_by = scope:soloi_country
            }
            if = {
                limit = {
                    any_country = {
                        is_subject_of = root
                        capital_scope = {
                            OR = {
                                province_id = 331
                                province_id = 330
                            }
                        }
                    }
                }
                random_country = {
                    limit = {
                        is_subject_of = root
                        capital_scope = {
                            OR = {
                                province_id = 331
                                province_id = 330
                            }
                        }
                    }
                    save_scope_as = salamis_country
                }
            }
            else = {
                p:331 = {#    Salamis
                    create_country = {
                        change_government = despotic_monarchy
                        change_country_name = SALAMIS_CYPRUS_NAME
                        change_country_adjective = SALAMIS_CYPRUS_ADJECTIVE       
                        change_country_flag = CYPRUS_RUST
                        change_country_color = spartan_rust
                        save_scope_as = salamis_country
                    }
                }
                p:330 = { set_owned_by = scope:salamis_country }   
                scope:salamis_country = {
                    create_character = {
                        female = no
                        family = c:EGY.fam:Lagid
                        father=char:47                    
                        culture = cypriot
                        religion = roman_pantheon
                        force_add_trait="lagids"
                        no_stats = yes
                        average_martial_effect = yes
                        average_charisma_effect = yes
                        good_finesse_effect = yes
                        good_zeal_effect = yes
                        save_scope_as = menelaos_lagid
                    }
                  set_as_ruler = scope:menelaos_lagid 
                }
            }
            scope:salamis_country.current_ruler = { save_scope_as = menelaos_lagid }
            every_owned_province = {
                limit = {
                    is_in_area = cyprus_area
                    NOT = { owner = scope:soloi_country }
                    is_capital = no
                }
                set_conquered_by = scope:salamis_country
            }
        }
    }


    option = {#The island shall remain divided.
        name = "flavor_cyprus.11.a"
        custom_tooltip = flavor_cyprus.11.at
        ai_chance = { factor = 45 }
    }


    option = {#[menelaos_lagid.GetName] will be granted control over all territories in Cyprus not held by [eunostos_of_soloi.GetName]
        name = "flavor_cyprus.11.b"
        custom_tooltip = flavor_cyprus.11.bt
        scope:salamis_country = { save_scope_as = cyprus_country}
        scope:cyprus_country = {
            change_country_name = CYP
            hidden_effect = {
                change_country_adjective = CYP_ADJ
                change_country_tag = CYP
                change_country_flag = CYPRUS_RUST
                change_country_color = spartan_rust  
                scope:cyprus_country.overlord = { release_subject =scope:cyprus_country }
            }            
             make_subject = {
                target = scope:cyprus_country
                type = satrapy
            }
            add_country_modifier = {
                name = cyprus_satrapy_modifier
                duration = -1
            }
        }
        hidden_effect = {
            every_province = {
                limit = {
                    is_in_area = cyprus_area
                    NOR = {
                        province_id = 6431
                        province_id = 333
                    }
                }
                set_conquered_by = scope:cyprus_country
            }
        }
        scope:eunostos_of_soloi = { add_loyalty = scorned_claimant_loyalty }
        ai_chance = { factor = 20 } 
    }

    option = {
        name = "flavor_cyprus.1.c" #Let [eunostos_of_soloi.GetPraenomen] hold Cyprus, [menelaos_lagid.GetPraenomen] is needed for more important matters.
        custom_tooltip = flavor_cyprus.11.ct
        hidden_effect = {
            scope:menelaos_lagid = {
                move_country_with_close_family_effect = { COUNTRY = ROOT }
                remove_character_modifier = foreign_citizen
                set_home_country = ROOT
            }
        }
        scope:soloi_country = { save_scope_as = cyprus_country}
        scope:cyprus_country = {
            change_country_name = CYP
            hidden_effect = {
                change_country_adjective = CYP_ADJ
                change_country_tag = CYP
                change_country_flag = CYPRUS_SOLOI
                change_country_color = soloi_color
                scope:cyprus_country.overlord = { release_subject =scope:cyprus_country }
            }            
             make_subject = {
                target = scope:cyprus_country
                type = satrapy
            }
            add_country_modifier = {
                name = cyprus_satrapy_modifier
                duration = -1
            }
        }
        hidden_effect = {
            every_province = {
                limit = {
                    is_in_area = cyprus_area
                }
                set_conquered_by = scope:cyprus_country
            }
        }
        scope:menelaos_lagid = { add_loyalty = scorned_claimant_loyalty }
        ai_chance = { factor = 20 } 
    }   

    option = {
        name = "flavor_cyprus.11.d" # The kingdoms must be abolished once more.
        highlight = yes
        custom_tooltip = flavor_cyprus.11.dt
        add_tyranny = 20
        add_political_influence = -50
        hidden_effect = { 
            scope:menelaos_lagid = {
                move_country_with_close_family_effect = { COUNTRY = ROOT }
            }
            scope:eunostos_of_soloi = {
                move_country_with_close_family_effect = { COUNTRY = ROOT }
            }
            scope:cyprus_country = {
                every_owned_province = {
                    limit = { is_in_area = cyprus_area }
                    set_conquered_by = ROOT
                }
            }    
        }    
        scope:menelaos_lagid = { add_loyalty = scorned_claimant_loyalty }
        scope:eunostos_of_soloi = { add_loyalty = scorned_claimant_loyalty }
        ai_chance = { factor = 0 } 
    } 

    after = {
        if = {
            limit = {
                scope:cyprus_country = {
                    has_land = yes
                }
            }
            scope:cyprus_country = {
                hidden_effect = {
                    if = {
                        limit = {
                            NOT = {
                                primary_culture = cypriot
                            }
                        }
                        set_primary_culture_cleanup_effect = {
                            NEW_PRIMARY_CULTURE = cypriot
                            MAKE_OLD_CULTURE_INTEGRATED = yes
                        }
                    }
                    create_character = {
                        female = no
                        family_name = "Teucrid"                    
                        #family_name = "Pnytagorid"
                        culture = cypriot
                        religion = roman_pantheon
                        add_trait = teucer
                        save_scope_as = salamis_guy
                    }
                    create_character = {
                        female = no
                        family_name = "Poumyathonid"
                        culture = phoenician
                        religion = carthaginian_pantheon
                        save_scope_as = kition_guy
                    }
                    new_family_generation_effect = { FAMILY_CANDIDATE = kition_guy } #Scripted Effect that passes on the saved scope.
                    new_family_generation_effect = { FAMILY_CANDIDATE = salamis_guy } #Scripted Effect that passes on the saved scope.
                    scope:kition_guy.family = {
                        add_prestige = 100
                    }
                    scope:salamis_guy.family = {
                        add_prestige = 100
                    }
                }
            }
            every_country = {
                limit = {
                    OR = {
                        primary_culture = macedonian
                        capital_scope = {
                            OR = {
                                is_in_region = cilicia_region
                                is_in_region = asia_region
                                is_in_region = greece_region
                                is_in_region = macedonia_region
                                is_in_region = syria_region
                            }
                        }
                    }
                }
                trigger_event = {
                    id = flavor_cyprus.2
                    days = { 180 360 }
                }
            }
            scope:cyprus_country = {
                trigger_event = {
                    id = flavor_cyprus.9
                    days = { 361 400 }
                }
            }
        }

    }

}