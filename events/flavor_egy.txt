namespace = flavor_egy

flavor_egy.22 = { 					# Hidden Eunostos event
	type = country_event
	hidden = yes
	immediate = { 
		trigger_event = flavor_egy.23
	}
}
	

flavor_egy.23 = { 					# Eunostos event
	type = country_event
	title = "flavor_egy.23.t"
	desc = "flavor_egy.23.desc"
	picture = throneroom
	left_portrait = current_ruler
	right_portrait = scope:eunostos_of_soloi
	
	option = { # Give Soloi to Eunostos as League City
		name = "flavor_egy.23.a"
		custom_tooltip = flavor_egy.23.at
		hidden_effect = {
			p:333 = {
				create_country = {
					save_scope_as = soloi_country
					change_government = despotic_monarchy
				}
			}
			scope:eunostos_of_soloi = {
				move_country_with_entire_family_effect = { COUNTRY = scope:soloi_country }
			}
			scope:soloi_country = {
				set_as_ruler = scope:eunostos_of_soloi 
				change_country_name = CYP
				change_country_adjective = CYP_ADJ
				change_country_tag = CYP
				change_country_flag = CYPRUS_RUST
            	change_country_color = spartan_rust		
                add_country_modifier = {
                    name = indebted_ruler
                    duration = 7300 # 20 years
                }   
	            add_country_modifier = {
	                name = "prosperous_subject"
	                duration = -1
	            }
			}
			make_subject = {
				target = scope:soloi_country
				type = subject_league_city_state
				}
			}
			add_treasury = {
				value = has_monthly_income
				multiply = 2
			}
			ai_chance = { factor = 5 }
		}


	option = {
		name = "flavor_egy.23.b" # Give Western Cyprus to Eunostos as Feudatory
		custom_tooltip = flavor_egy.23.bt
		hidden_effect = {
			p:334 = {
				create_country = {
					save_scope_as = soloi_country
					change_government = tyrannic_monarchy
				}
			}
			scope:eunostos_of_soloi = {
				move_country_with_entire_family_effect = { COUNTRY = scope:soloi_country }
			}
			scope:soloi_country = {
				set_as_ruler = scope:eunostos_of_soloi 
				change_country_name = CYP
				change_country_adjective = CYP_ADJ
				change_country_tag = CYP
				change_country_flag = CYPRUS_RUST
            	change_country_color = spartan_rust		
                add_country_modifier = {
                    name = indebted_ruler
                    duration = 7300 # 20 years
                }   
	            add_country_modifier = {
	                name = "prosperous_subject"
	                duration = -1
	            }
			}
                p:6431 = { add_to_list = southern_cyprus_list }
                p:333 = { add_to_list = southern_cyprus_list }
                p:334 = { add_to_list = southern_cyprus_list }
                p:7990 = { add_to_list = southern_cyprus_list }
                p:338 = { add_to_list = southern_cyprus_list }
                p:336 = { add_to_list = southern_cyprus_list }                
                every_in_list = {
                    list = southern_cyprus_list
                    set_conquered_by = scope:soloi_country
                }
			make_subject = {
				target = scope:soloi_country
				type = feudatory
			}
		}
		add_treasury = {
			value = has_monthly_income
			multiply = 6
		}
		ai_chance = { factor = 10 }	
	}

	option = {
		name = "flavor_egy.23.c" # Give all of Cyprus to Eunostos as Client State
		custom_tooltip = flavor_egy.23.ct
		hidden_effect = {
			p:331 = {
				create_country = {
					save_scope_as = soloi_country
					change_government = tyrannic_monarchy
				}
			}
			scope:eunostos_of_soloi = {
				move_country_with_entire_family_effect = { COUNTRY = scope:soloi_country }
			}
			scope:soloi_country = {
				set_as_ruler = scope:eunostos_of_soloi 
				change_country_name = CYP
				change_country_adjective = CYP_ADJ
				change_country_tag = CYP
				change_country_flag = CYPRUS_RUST
            	change_country_color = spartan_rust		
                add_country_modifier = {
                    name = indebted_ruler
                    duration = 7300 # 20 years
                }   
	            add_country_modifier = {
	                name = "prosperous_subject"
	                duration = -1
	            }            					
			}
			every_owned_province = {
				limit = { is_in_area = cyprus_area }
				set_conquered_by = scope:soloi_country
			}
			make_subject = {
				target = scope:soloi_country
				type = client_state
			}
		}
		add_treasury = {
			value = has_monthly_income
			multiply = 12
		}
		ai_chance = { factor = 20 }	
	}

	option = {
		name = "flavor_egy.23.d"
		scope:eunostos_of_soloi = { add_loyalty = loyalty_plot_appeal_insulted }
		ai_chance = { factor = 0 }
	}
}