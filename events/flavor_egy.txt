namespace = flavor_egy

flavor_egy.22 = { 					# Hidden Eunostos event
	type = country_event
	hidden = yes
	immediate = { 
		trigger_event = flavor_egy.23
	}
}
	

flavor_egy.23 = { 					# Eunostos event
	type = country_event
	title = "flavor_egy.23.t"
	desc = "flavor_egy.23.desc"
	picture = throneroom
	left_portrait = current_ruler
	right_portrait = scope:eunostos_of_soloi
	
	option = { # Give Soloi to Eunostos as League City
		name = "flavor_egy.23.a"
		custom_tooltip = flavor_egy.23.at
		hidden_effect = {
			p:333 = {
				create_country = {
					save_scope_as = soloi_country
					change_government = despotic_monarchy
				}
			}
			scope:eunostos_of_soloi = {
				move_country_with_entire_family_effect = { COUNTRY = scope:soloi_country }
			}
			scope:soloi_country = {
				set_as_ruler = scope:eunostos_of_soloi 
#				change_country_name = KYPROS_NAME
				change_country_adjective = KYPROS_ADJECTIVE
				change_country_tag = CYP
				change_country_flag = CYPRUS_RUST
            	change_country_color = spartan_rust		
                add_country_modifier = {
                    name = indebted_ruler
                    duration = 7300 # 20 years
                }   
	            add_country_modifier = {
	                name = "prosperous_subject"
	                duration = -1
	            }
			}
			make_subject = {
				target = scope:soloi_country
				type = subject_league_city_state
				}
			}
			add_treasury = {
				value = has_monthly_income
				multiply = 2
			}
			ai_chance = { factor = 5 }
		}


	option = {
		name = "flavor_egy.23.b" # Give Western Cyprus to Eunostos as Feudatory
		custom_tooltip = flavor_egy.23.bt
		hidden_effect = {
			p:333 = {
				create_country = {
					save_scope_as = soloi_country
					change_government = tyrannic_monarchy
				}
			}
			scope:eunostos_of_soloi = {
				move_country_with_entire_family_effect = { COUNTRY = scope:soloi_country }
			}
			scope:soloi_country = {
				set_as_ruler = scope:eunostos_of_soloi 
#				change_country_name = CYPRUS_NAME
#				change_country_adjective = CYPRUS_ADJECTIVE
				change_country_name = KYPROS_NAME
				change_country_adjective = KYPROS_ADJECTIVE
				change_country_tag = CYP
				change_country_flag = CYPRUS_RUST
            	change_country_color = spartan_rust		
                add_country_modifier = {
                    name = indebted_ruler
                    duration = 7300 # 20 years
                }   
	            add_country_modifier = {
	                name = "prosperous_subject"
	                duration = -1
	            }
			}
                p:6431 = { add_to_list = southern_cyprus_list }
                p:333 = { add_to_list = southern_cyprus_list }
                p:334 = { add_to_list = southern_cyprus_list }
                p:7990 = { add_to_list = southern_cyprus_list }
                p:338 = { add_to_list = southern_cyprus_list }
                p:336 = { add_to_list = southern_cyprus_list }                
                every_in_list = {
                    list = southern_cyprus_list
                    set_conquered_by = scope:soloi_country
                }
			make_subject = {
				target = scope:soloi_country
				type = feudatory
			}
		}
		add_treasury = {
			value = has_monthly_income
			multiply = 6
		}
		ai_chance = { factor = 10 }	
	}

	option = {
		name = "flavor_egy.23.c" # Give all of Cyprus to Eunostos as Client State
		custom_tooltip = flavor_egy.23.ct
		hidden_effect = {
			p:333 = {
				create_country = {
					save_scope_as = soloi_country
					change_government = tyrannic_monarchy
				}
			}
			scope:eunostos_of_soloi = {
				move_country_with_entire_family_effect = { COUNTRY = scope:soloi_country }
			}
			scope:soloi_country = {
				set_as_ruler = scope:eunostos_of_soloi 
#				change_country_name = CYPRUS_NAME
#				change_country_adjective = CYPRUS_ADJECTIVE
				change_country_name = KYPROS_NAME
				change_country_adjective = KYPROS_ADJECTIVE
				change_country_tag = CYP
				change_country_flag = CYPRUS_RUST
            	change_country_color = spartan_rust		
                add_country_modifier = {
                    name = indebted_ruler
                    duration = 7300 # 20 years
                }   
	            add_country_modifier = {
	                name = "prosperous_subject"
	                duration = -1
	            }            					
			}
			every_owned_province = {
				limit = { is_in_area = cyprus_area }
				set_conquered_by = scope:soloi_country
			}
			make_subject = {
				target = scope:soloi_country
				type = client_state
			}
		}
		add_treasury = {
			value = has_monthly_income
			multiply = 12
		}
		ai_chance = { factor = 20 }	
	}

	option = {
		name = "flavor_egy.23.d"
		scope:eunostos_of_soloi = { add_loyalty = loyalty_plot_appeal_insulted }
		ai_chance = { factor = 0 }
	}
	after = {
		add_opinion = {
			target = scope:soloi_country
			modifier = granted_protectors_opinion
		}
	}	
}

flavor_egy.24 = {
	type = country_event
	title = "flavor_egy.24.t"
	desc = "flavor_egy.24.desc"
	picture = throneroom
	left_portrait = current_ruler
	right_portrait = scope:eunostos_of_soloi

    immediate = {
		hidden_effect = {
		#Soloi
			if = {
				limit = {
					char:430 = {
						is_alive = yes 
					}
				}
				char:430 = { save_scope_as = eunostos_of_soloi }
			}
			else = {
				create_character = {
					female = no
					family_name = "Pasikratid"
					culture = cypriot
					religion = roman_pantheon
					no_stats = yes
					good_martial_effect = yes
	    			average_charisma_effect = yes
	    			good_finesse_effect = yes
	    			average_zeal_effect = yes
	    			save_scope_as = eunostos_of_soloi
				}
			}
			p:333 = {
				create_country = {
					save_scope_as = soloi_country
					change_government = despotic_monarchy
	                set_primary_culture = cypriot  
					change_country_name = SOLOI_NAME
				}
			}
			p:336 = {
				set_owned_by = scope:soloi_country
			}
			scope:eunostos_of_soloi = {
				move_country_with_entire_family_effect = { COUNTRY = scope:soloi_country }
			}
			scope:soloi_country = {
				set_as_ruler = scope:eunostos_of_soloi 
				change_country_adjective = KYPROS_ADJECTIVE
				change_country_flag = CYPRUS_RUST
	        	change_country_color = spartan_rust		
	            add_country_modifier = {
	                name = indebted_ruler
	                duration = 7300 # 20 years
	            }   
			}
		
		#Kition
			if = {
				limit = {
					p:332 = {
						owner = c:PRY
					}
					p:7991 = {
						owner = c:PRY
					}				
				}
				p:332 = {
					create_country = {
						save_scope_as = kition_country
						change_government = despotic_monarchy
						change_country_flag = ALASHIYA_FLAG
				    	change_country_color = alashiya_color					
			            random_list = {
			                75 = {
		               			set_primary_culture = phoenician  
		               			set_country_religion = carthaginian_pantheon
								add_alliance = scope:marion_country		
								add_alliance = scope:amathous_country		
			                    every_character = {
			                        limit = {
			                            AND = {
			                                OR = {
			                                    from_ruler_family = yes
			                                    is_minor_character = no
			                                }
			                            }
			                        }
			                        set_culture = phoenician
			                        set_character_religion = carthaginian_pantheon
			                    } 	               			
			                }
			                25 = {

			                }
			            }
					}
				}
				p:7991 = {
					set_owned_by = scope:kition_country
				}
			}

		#Marion 
			if = {
				limit = {
					p:6431 = {
						owner = c:PRY
					}
				}
				p:6431 = {
					create_country = {
						save_scope_as = marion_country
						change_government = despotic_monarchy					
			            random_list = {
			                75 = {
		               			set_primary_culture = phoenician  
		               			set_country_religion = carthaginian_pantheon
								add_alliance = scope:kition_country		
								add_alliance = scope:amathous_country		
			                    every_character = {
			                        limit = {
			                            AND = {
			                                OR = {
			                                    from_ruler_family = yes
			                                    is_minor_character = no
			                                }
			                            }
			                        }
			                        set_culture = phoenician
			                        set_character_religion = carthaginian_pantheon
			                    } 	               			
			                }
			                25 = {

			                }
			            }
					}
				}
			}

		#Amathous 
			if = {
				limit = {
					p:338 = {
						owner = c:PRY
					}
				}
				p:338 = {
					create_country = {
						save_scope_as = amathous_country
						change_government = despotic_monarchy					
			            random_list = {
			                75 = {
		               			set_primary_culture = phoenician  
		               			set_country_religion = carthaginian_pantheon
								add_alliance = scope:marion_country		
								add_alliance = scope:kition_country						
			                    every_character = {
			                        limit = {
			                            AND = {
			                                OR = {
			                                    from_ruler_family = yes
			                                    is_minor_character = no
			                                }
			                            }
			                        }
			                        set_culture = phoenician
			                        set_character_religion = carthaginian_pantheon
			                    } 	               			
			                }
			                25 = {

			                }
			            }
					}
				}
			}
		
		#Pahpos
			if = {
				limit = {
					p:334 = {
						owner = c:PRY
					}
					p:7990 = {
						owner = c:PRY
					}
				}
				p:334 = {
					create_country = {
						save_scope_as = pahpos_country				
						change_government = despotic_monarchy
		                set_primary_culture = cypriot  
			            random_list = {
			                75 = {
								change_government = theocratic_monarchy
			                }
			                25 = {
								change_government = despotic_monarchy
			                }
			            }
					}
				}
				p:7990 = {
					set_owned_by = scope:pahpos_country
				}
			}

		#Salamis
			if = {
				limit = {
					p:331 = {
						owner = c:PRY
					}
					p:330 = {
						owner = c:PRY
					}				
				}
				p:331 = {
					create_country = {
						save_scope_as = salamis_country		
						change_government = despotic_monarchy
		                set_primary_culture = cypriot  
						change_country_name = SALAMIS_NAME							
					}
				}
				p:330 = {
					set_owned_by = scope:salamis_country
				}
			}

		#Keryneia
			if = {
				limit = {
					p:335 = {
						owner = c:PRY
					}
					p:6433 = {
						owner = c:PRY
					}				
				}
				p:335 = {
					create_country = {
						save_scope_as = keryneia_country		
						change_government = despotic_monarchy
		                set_primary_culture = cypriot  
					}
				}
				p:6433 = {
					set_owned_by = scope:keryneia_country
				}
			}
		}	
	}
	option = {
		name = "flavor_egy.24.a"
		add_manpower = -1.0
		make_subject = {
			target = scope:soloi_country
			type = feudatory
			}
		trigger_event = {
			id = flavor_egy.25
			days = { 30 60 }
		}			
	}
}

flavor_egy.25 = {
	type = country_event
	title = "flavor_egy.25.t"
	desc = "flavor_egy.25.desc"
	picture = throneroom
	left_portrait = current_ruler
	right_portrait = scope:eunostos_of_soloi

	option = {
		name = "flavor_egy.25.a"
		custom_tooltip = flavor_egy.25.at
		add_manpower = -2.0
        area:cyprus_area = {
            add_provincial_claim_effect = yes
        	}   
		trigger_event = {
			id = flavor_egy.26
			days = { 30 60 }
		}	
	}
	option = {
		name = "flavor_egy.25.b"
        area:cyprus_area = {
            add_provincial_claim_effect = yes
        	}   
	}		
}

flavor_egy.26 = {
	type = country_event
	title = "flavor_egy.26.t"
	desc = "flavor_egy.26.desc"
	picture = throneroom
	left_portrait = current_ruler
	right_portrait = scope:eunostos_of_soloi
	right_portrait = scope:eunostos_son

	immediate = { 
		scope:soloi_country = {
				create_character = {
					female = no
					family_name = "Pasikratid"
					father = scope:eunostos_of_soloi
					culture = cypriot
					religion = roman_pantheon
					no_stats = yes
					good_martial_effect = yes
	    			average_charisma_effect = yes
	    			good_finesse_effect = yes
	    			good_zeal_effect = yes
	    			save_scope_as = eunostos_son
				}
		}

		p:335 = {
			set_owned_by = scope:soloi_country
		}
		p:6433 = {
			set_owned_by = scope:soloi_country
		}
	}

	option = {
		name = "flavor_egy.26.a"
		custom_tooltip = flavor_egy.26.at		
		hidden_effect = {
			p:335 = {
				set_owned_by = scope:soloi_country
			}
			p:6433 = {
				set_owned_by = scope:soloi_country
			}
		}
	}	
	option = {
		name = "flavor_egy.26.b"
		custom_tooltip = flavor_egy.26.bt		
		hidden_effect = {
			scope:eunostos_son = {
	        	move_country = scope:keryneia_country
				remove_character_modifier = foreign_citizen		
				}		
			scope:keryneia_country = {
				set_as_ruler = scope:eunostos_son 
                add_country_modifier = {
                    name = indebted_ruler
                    duration = 7300 # 20 years
                }   
			}
			make_subject = {
				target = scope:keryneia_country
				type = feudatory
				}
			}
		}	
	option = {
		name = "flavor_egy.26.c"
		custom_tooltip = flavor_egy.26.ct		
		hidden_effect = {
			p:335 = {
				set_owned_by = c:EGY
			}
			p:6433 = {
				set_owned_by = scope:soloi_country
			}
		}
	}	
}		