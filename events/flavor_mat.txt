namespace = flavor_mat						# By Tudhaliya

## Aletes Event Chain: Part 1 (Events 1-19)
flavor_mat.1 = { 							# Aletes Searching the Mines - Trigger Event
	type = province_event
	hidden = yes
	fire_only_once = yes
	
	trigger = {
		exists = owner 
		this = p:1036
	}

	immediate = {
		owner = { 
			trigger_event = { id = flavor_mat.2 }
		}
	}
}

flavor_mat.2 = { 							# Aletes Searching the Mines - Start Event
	type = country_event
	
	title = flavor_mat.2.t
    desc = flavor_mat.2.desc
	picture = city_country
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	fire_only_once = yes
	
	immediate = {
		set_global_variable = {
			name = aletes_appeared
		}
		var:aletes_appeared = { } # Done to avoid the error log say it is never used
		c:REB = {
			char:558 = {
				save_scope_as = aletes_character
			}
		}
		var:aletes_flag = { } # Done to avoid the error log say it is never used
	}
	
	option = {
        name = flavor_mat.2.a
		custom_tooltip = aletes_adventure_start_tooltip
		custom_tooltip = flavor_mat.2.tooltip.a
		add_treasury = -100
		set_variable = {
			name = aletes_exploration_progress
			value = 1
		}
		trigger_event = {
			id = flavor_mat.3
			days = { 1095 1460 } # 3 - 4 years
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
        name = flavor_mat.2.b
		add_stability = 4
		custom_tooltip = flavor_mat.2.tooltip.b
		hidden_effect = {
			scope:aletes_character = {
				death = {
					death_reason = death_obscurity
					silent = yes
				}
			}
			p:1036 = {
				set_variable = rejected_aletes_province_variable
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

flavor_mat.3 = { 							# Aletes Searching the Mines - Asking for manpower
    type = country_event

    title = flavor_mat.3.t
    desc = flavor_mat.3.desc
    picture = city_country
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
    
	trigger = {
		has_land = yes
		owns = 1036
		exists = scope:aletes_character
		scope:aletes_character = {
			is_alive = yes
			employer = c:REB
		}
	}
	
    option = {
        name = flavor_mat.3.a
		capital_scope = {
			custom_tooltip = flavor_mat.3.tooltip.a
			hidden_effect = {
				while = {
					count = 3
					random_pops_in_province = {
						weight = {
							modifier = {
								factor = 100
								pop_type = slaves
							}
						}
						kill_pop = yes
					}
				}
			}
		}
		scope:aletes_character = {
			if = {
				limit = {
					NOT = {
						has_trait = confident
					}
				}
				add_trait = confident
			}
		}
		custom_tooltip = flavor_mat.3.tooltip.b
		hidden_effect = {
			change_variable = {
				name = aletes_exploration_progress
				add = 1
			}
		}
		trigger_event = {
			id = flavor_mat.4
			days = { 1095 1460 } # 3 - 4 years
		}
		ai_chance = {
			factor = 100
		}
    }
	
	option = {
        name = flavor_mat.3.b
        current_ruler = {
			add_popularity = popularity_medium
		}
		scope:aletes_character = {
			if = {
				limit = {
					NOT = {
						has_trait = rash
					}
				}
				add_trait = rash
			}
		}
		custom_tooltip = flavor_mat.3.tooltip.b
		trigger_event = {
			id = flavor_mat.4
			days = { 1095 1460 } # 3 - 4 years
		}
		ai_chance = {
			factor = 0
		}
    }
}

flavor_mat.4 = { 							# Aletes Searching the Mines - A Final Push
    type = country_event

    title = flavor_mat.4.t
    desc = flavor_mat.4.desc
    picture = city_country
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
    
	trigger = {
		has_land = yes
		owns = 1036
		exists = scope:aletes_character
		scope:aletes_character = {
			is_alive = yes
			employer = c:REB
		}
	}
	
	option = {
        name = flavor_mat.4.a
		add_treasury = 50
		add_political_influence = -25
		add_manpower = -2
		scope:aletes_character = {
			if = {
				limit = {
					NOT = {
						has_trait = orator
					}
				}
				add_trait = orator
			}
		}
		custom_tooltip = flavor_mat.3.tooltip.b
		hidden_effect = {
			change_variable = {
				name = aletes_exploration_progress
				add = 1
			}
		}
		if = {
			limit = {
				var:aletes_exploration_progress = 3
			}
			trigger_event = {
				id = flavor_mat.5
				days = { 1095 1460 } # 3 - 4 years
			}
		}
		if = {
			limit = {
				var:aletes_exploration_progress < 3
			}
			trigger_event = {
				id = flavor_mat.6
				days = { 1095 1460 } # 3 - 4 years
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
        name = flavor_mat.4.b
		add_treasury = 50
		current_ruler = {
			add_popularity = subtract_popularity_small
		}
		scope:aletes_character = {
			if = {
				limit = {
					NOT = {
						has_trait = stressed
					}
				}
				add_trait = stressed
			}
		}
		custom_tooltip = flavor_mat.3.tooltip.b
		trigger_event = {
			id = flavor_mat.6
			days = { 1095 1460 } # 3 - 4 years
		}
		ai_chance = {
			factor = 0
		}
	}
}

flavor_mat.5 = { 							# Aletes Searching the Mines - Massive Success!
    type = country_event

    title = flavor_mat.5.t
    desc = "flavor_mat.5.desc"
    picture = quarry
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
    
	trigger = {
		has_land = yes
		owns = 1036
		exists = scope:aletes_character
		scope:aletes_character = {
			is_alive = yes
			employer = c:REB
		}
	}
	
	option = {
        name = flavor_mat.5.a
		add_treasury = 500
		p:1036 = {
			add_permanent_province_modifier = {
				name = mastian_silver_range
				duration = -1
			}
		}
		scope:aletes_character = {
			if = {
				limit = {
					NOT = {
						has_trait = founder
					}
				}
				add_trait = founder
			}
			if = {
				limit = {
					NOT = {
						has_trait = prominent
					}
				}
				add_trait = prominent
			}
			move_country = root
			hidden_effect = {
				add_gold = 1000
				add_popularity = popularity_huge
				set_home_country = root
				remove_character_modifier = foreign_citizen
				set_as_minor_character = THIS
				set_can_marry = no
			}
		}
		custom_tooltip = "aletes_settles_down"
		hidden_effect = {
			scope:aletes_character = {
				add_character_modifier = {
					name = aletes_health_boost
					duration = 7300 # 20 Years
				}
			}
			remove_variable = aletes_exploration_progress
			set_variable = {
				name = aletes_apotheosis_progress
				value = 1
			}
			trigger_event = {
				id = "flavor_mat.20"
				days = { 150 240 }
			}
			every_neighbour_country = {
				limit = {
					has_land = yes
					any_neighbour_country = {
						has_land = yes
					}
					NOT = { tag = CAR }
					NOT = { tag = GAD }
				}
				trigger_event = {
					id = "flavor_mat.7"
					days = { 15 30 }
				}
			}
			c:CAR = {
				if = {
					limit = {
						NOT = { owns = 1036 }
					}
					trigger_event = {
						id = "flavor_mat.7"
						days = { 15 30 }
					}
				}
			}
			c:GAD = {
				if = {
					limit = {
						NOT = { owns = 1036 }
					}
					trigger_event = {
						id = "flavor_mat.7"
						days = { 15 30 }
					}
				}
			}
		}
	}
	
}

flavor_mat.6 = { 							# Aletes Searching the Mines - A Fair Success
    type = country_event

    title = flavor_mat.6.t
    desc = "flavor_mat.6.desc"
    picture = quarry
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
    
	trigger = {
		has_land = yes
		owns = 1036
		exists = scope:aletes_character
		scope:aletes_character = {
			is_alive = yes
			employer = c:REB
		}
	}
	
	option = {
        name = flavor_mat.6.a
		add_treasury = 300
		p:1036 = {
			add_permanent_province_modifier = {
				name = mastian_silver_range_weak
				duration = -1
			}
		}
		scope:aletes_character = {
			if = {
				limit = {
					NOT = {
						has_trait = founder
					}
				}
				add_trait = founder
			}
			move_country = root
			hidden_effect = {
				add_gold = 500
				add_popularity = popularity_medium
				set_home_country = root
				remove_character_modifier = foreign_citizen
				set_as_minor_character = THIS
				set_can_marry = no
			}
		}
		custom_tooltip = "aletes_settles_down"
		hidden_effect = {
			scope:aletes_character = {
				add_character_modifier = {
					name = aletes_health_boost
					duration = 7300 # 20 Years
				}
			}
			remove_variable = aletes_exploration_progress
			set_variable = {
				name = aletes_apotheosis_progress
				value = 1
			}
			trigger_event = {
				id = "flavor_mat.20"
				days = { 150 240 }
			}
			every_neighbour_country = {
				limit = {
					has_land = yes
					any_neighbour_country = {
						has_land = yes
					}
					NOT = { tag = CAR }
					NOT = { tag = GAD }
				}
				trigger_event = {
					id = "flavor_mat.7"
					days = { 15 30 }
				}
			}
			c:CAR = {
				if = {
					limit = {
						NOT = { owns = 1036 }
					}
					trigger_event = {
						id = "flavor_mat.7"
						days = { 15 30 }
					}
				}
			}
			c:GAD = {
				if = {
					limit = {
						NOT = { owns = 1036 }
					}
					trigger_event = {
						id = "flavor_mat.7"
						days = { 15 30 }
					}
				}
			}
		}
	}
}

flavor_mat.7 = { 							# Aletes Searching the Mines - The Discovery of the Gold Mines of Mastia (By Aletes. Informative Event)
    type = country_event

    title = flavor_mat.7.t
	desc = {
		first_valid = {
			triggered_desc = { # Carthage & Gadir
				trigger = {
					OR = {
						tag = CAR
						tag = GAD
					}
				}
				desc = flavor_mat.7.desc_1
			}
			triggered_desc = { # Rest of Neighbouring Countries
				trigger = {
					NOR = {
						tag = CAR
						tag = GAD
					}
				}
				desc = flavor_mat.7.desc_2
			}
		}
	}
    picture = council_country
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	goto_location = p:1036
	
	option = {
        name = flavor_mat.7.a
	}
	
}

flavor_mat.8 = { 							# Aletes Searching the Mines - The Discovery of the Gold Mines of Mastia (No Aletes. Informative Event)
    type = country_event

    title = flavor_mat.8.t
    desc = flavor_mat.8.desc
    picture = council_country
	left_portrait = current_ruler
	goto_location = p:1036
	
	option = {
        name = flavor_mat.8.a
	}
	
}

flavor_mat.9 = { 							# Finding the Mines without Aletes - Province Trigger
	type = province_event
	hidden = yes
	fire_only_once = yes
	
	trigger = {
		exists = owner 
		this = p:1036
		has_variable = rejected_aletes_province_variable
	}

	immediate = {
		owner = { 
			trigger_event = { id = flavor_mat.10 }
		}
	}
}

flavor_mat.10 = { 							# Finding the Mines without Aletes - Discovery of the Mines (No Aletes)
    type = country_event
	
    title = flavor_mat.10.t
    desc = flavor_mat.10.desc
	picture = quarry
	goto_location = p:1036
	fire_only_once = yes
    
	trigger = {
		has_land = yes
		owns = 1036
	}
	
	option = {
        name = flavor_mat.10.a
		p:1036 = {
			add_permanent_province_modifier = {
				name = mastian_silver_range_weak
				duration = -1
			}
			remove_variable = rejected_aletes_province_variable
		}
		hidden_effect = {
			every_neighbour_country = {
				limit = {
					has_land = yes
					any_neighbour_country = {
						has_land = yes
					}
					NOT = { tag = CAR }
					NOT = { tag = GAD }
				}
				trigger_event = {
					id = "flavor_mat.8"
					days = { 15 30 }
				}
			}
			c:CAR = {
				if = {
					limit = {
						NOT = { owns = 1036 }
					}
					trigger_event = {
						id = "flavor_mat.8"
						days = { 15 30 }
					}
				}
			}
			c:GAD = {
				if = {
					limit = {
						NOT = { owns = 1036 }
					}
					trigger_event = {
						id = "flavor_mat.8"
						days = { 15 30 }
					}
				}
			}
		}
	}
	
}

flavor_mat.11 = { 							# For Carthage in case Aletes never discovered the mines when Carthage starts its Iberian Missions (Carthage Informative Event)
    type = country_event

    title = flavor_mat.11.t
    desc = flavor_mat.11.desc
    picture = council_country
	left_portrait = current_ruler
	right_portrait = scope:barca_family_member_scope
	goto_location = p:1036
	
	immediate = {
		if = {
			limit = {
				NOT = {
					exists = scope:barca_family_member_scope
				}
			}
			random_character = {
				limit = {
					family = char:155.family
					is_alive = yes
					is_adult = yes
					is_ruler = no
				}
				set_variable = barca_family_member_flag
				save_scope_as = barca_family_member_scope
			}
		}
	}
	
	option = {
        name = flavor_mat.11.a
		custom_tooltip = flavor_mat.11.tooltip
	}
	
}

flavor_mat.12 = { 							# Carthage finds the mines in case Aletes never discovered them when Carthage completes the Silver Port task
    type = country_event

    title = flavor_mat.12.t
    desc = flavor_mat.12.desc
    picture = quarry
	left_portrait = current_ruler
	right_portrait = scope:barca_family_member_scope
	goto_location = p:1036
	
	immediate = {
		if = {
			limit = {
				any_character = { # Checks if the previous chosen character is alive
					has_variable = barca_family_member_flag
					is_alive = yes
					prisoner = no
					is_ruler = no
				}
			}
			random_character = {
				limit = {
					has_variable = barca_family_member_flag
				}
				save_scope_as = barca_family_member_scope
			}
		}
		else = {
			random_character = {
				limit = {
					family = char:155.family
					is_alive = yes
					is_adult = yes
					is_ruler = no
				}
				save_scope_as = barca_family_member_scope
			}
		}
	}
	
	option = {
        name = flavor_mat.12.a
		scope:barca_family_member_scope = { remove_variable = barca_family_member_flag }
		p:1036 = {
			add_permanent_province_modifier = {
				name = mastian_silver_range
				duration = -1
			}
		}
	}
	
}

## Aletes Event Chain: Part 2 (Events 20-59)
flavor_mat.20 = { 							# Aletes' Life - Prestige Events
	type = country_event
	hidden = yes

	immediate = {
		if = {
			limit = { # Check if Aletes is alive
				has_variable = aletes_apotheosis_progress
				var:aletes_apotheosis_progress < 20
				char:558 = {
					is_alive = yes
					employer = root
				}
			}
			random_list = { # Prestige Events
				2 = { # Prestige Opportunity - Sponsoring Games
					trigger = {
						char:558 = { prisoner = no }
					}
					trigger_event = {
						id = flavor_mat.21
					}
				}
				2 = { # Prestige Opportunity - Waves of Charity
					trigger = {
						char:558 = {
							wealth >= 100
							prisoner = no
						}
					}
					trigger_event = {
						id = flavor_mat.24
					}
				}
				2 = { # Prestige Opportunity - Recording a Life (Tudhaliya Easter Egg)
					trigger = {
						char:558 = {
							wealth >= 100
							prisoner = no
						}
						NOT = { any_character = { has_variable = tudhaliya_flag } }
					}
					trigger_event = {
						id = flavor_mat.25
					}
				}
				2 = { # Prestige Opportunity - Asking for an Office
					trigger = {
						char:558 = {
							has_any_office = no
							has_tech_office = no
							has_job = no
							prisoner = no
						}
						NOT = { has_variable = scheme_8_cooldown }
					}
					trigger_event = {
						id = flavor_mat.27
					}
				}
				2 = { # Prestige Opportunity - A Political Marriage
					trigger = {
						char:558 = {
							is_married = no
							prisoner = no
						}
						NOT = { has_variable = aletes_already_married }
					}
					trigger_event = {
						id = flavor_mat.33
					}
				}
				2 = { # Prestige Opportunity - Buying Holdings
					trigger = {
						char:558 = {
							wealth >= 80
							prisoner = no
						}
						any_owned_province = {
							count >= 1
							NOT = { exists = holding_owner }
						}
					}
					trigger_event = {
						id = flavor_mat.37
					}
				}
				2 = { # Prestige Opportunity - Outshining the Ruler
					trigger = {
						char:558 = {
							popularity >= 40
							prisoner = no
						}
					}
					trigger_event = {
						id = flavor_mat.38
					}
				}
				2 = { # Prestige Opportunity - Visiting Another City
					trigger = {
						char:558 = { prisoner = no }
						any_owned_province = {
							count >= 1
							has_city_status = yes
							is_capital = no
						}
					}
					trigger_event = {
						id = flavor_mat.39
					}
				}
				2 = { # Prestige Opportunity - Founding a Temple for a Local Deity
					trigger = {
						char:558 = {
							wealth >= 100
							prisoner = no
						}
						any_owned_province = {
							count >= 1
							has_city_status = yes
							free_building_slots >= 1
							num_of_temple_building < 1
						}
					}
					trigger_event = {
						id = flavor_mat.40
					}
				}
				2 = { # Prestige Opportunity - Befriending the High Priest
					trigger = {
						char:558 = { prisoner = no }
						any_character = {
							has_high_priest_office_trigger = yes 
							NOR = {
								is_friend = char:558
								is_rival = char:558
							}
						}
					}
					trigger_event = {
						id = flavor_mat.41
					}
				}
				2 = { # Prestige Opportunity - Patronize Head of Great Family Campaing
					trigger = {
						has_variable = aletes_already_married
						char:558 = {
							prisoner = no
							is_married = yes
							spouse = {
								from_ruler_family = no
								is_minor_character = no
							}
						}
					}
					trigger_event = {
						id = flavor_mat.42
					}
				}
				2 = { # Prestige Opportunity - Befriending a Governor
					trigger = {
						char:558 = {
							can_get_friends = yes
							prisoner = no
						}
						any_character = {
							is_governor = yes
							NOR = {
								is_friend = char:558
								is_rival = char:558
							}
						}
					}
					trigger_event = {
						id = flavor_mat.43
					}
				}
				2 = { # Prestige Opportunity - Fire in the Docks!
					trigger = {
						char:558 = {
							wealth >= 80
							prisoner = no
						}
						any_owned_province = {
							count >= 1
							num_of_port_building < 1
						}
					}
					trigger_event = {
						id = flavor_mat.44
					}
				}
				2 = { # Prestige Opportunity - Plead for Freedom
					trigger = {
						char:558 = { prisoner = yes }
					}
					trigger_event = {
						id = flavor_mat.47
					}
				}
				2 = { # Prestige Opportunity - Raid in your Latifundia!
					trigger = {
						char:558 = { prisoner = no }
						current_ruler = {
							is_rival = char:558
							num_holdings_owned > 0
						}
					}
					trigger_event = {
						id = flavor_mat.48
					}
				}
				2 = { # Prestige Opportunity - A Sharp Tongue
					trigger = {
						char:558 = {
							prisoner = no
							has_trait = orator
						}
						any_character = {
							has_any_office = yes
						}
					}
					trigger_event = {
						id = flavor_mat.51
					}
				}
			}
			change_variable = {
				name = aletes_apotheosis_progress
				add = 1
			}
			trigger_event = { # Trigger next event
				id = flavor_mat.20
				days = { 730 1095 } # 2 - 3 years
			}
		}
		else_if = { # Aletes is too full of himself... Be prepared! (Not Mastia)
			limit = {
				NOT = { tag = MAT }
				has_variable = aletes_apotheosis_progress
				var:aletes_apotheosis_progress >= 20
				char:558 = {
					is_alive = yes
					is_ruler = no
					employer = root
				}
			}
			trigger_event = {
				id = flavor_mat.64
			}
		}
		else_if = { # Aletes is too full of himself... Be prepared! (Mastia)
			limit = {
				tag = MAT
				has_variable = aletes_apotheosis_progress
				var:aletes_apotheosis_progress >= 20
				char:558 = {
					is_alive = yes
					is_ruler = no
					employer = root
				}
			}
			trigger_event = {
				id = flavor_mat.65
			}
		}
		else = {
			aletes_adventure_main_variable_cleanup_effect = yes
			aletes_adventure_event_variable_cleanup_effect = yes
		}
	}
}

flavor_mat.21 = { 							# Invitation to Games - An Invitation
    type = country_event

    title = flavor_mat.21.t
    desc = flavor_mat.21.desc
    picture = senator_conversing
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
        name = flavor_mat.21.a
		custom_tooltip = aletes_receives_a_prestige_point
		trigger_event = {
			id = flavor_mat.22
			days = { 10 13 }
		}
		ai_chance = {
			factor = 50
			modifier = {
				current_ruler = {
					OR = {
						char_is_decent_trigger = yes
						char_is_good_leader_trigger = yes
					}
				}
				factor = 90
			}
		}
	}
	
	option = {
        name = flavor_mat.21.b
		highlight = yes
		trigger = {
			current_ruler = {
				OR = {
					has_trait = cruel
					has_trait = vengeful
					has_trait = selfish
					has_trait = jealous
					is_rival = char:558
				}
			}
		}
		custom_tooltip = aletes_loses_a_prestige_point
		trigger_event = {
			id = flavor_mat.23
			days = { 10 13 }
		}
		ai_chance = {
			factor = 50
			modifier = {
				current_ruler = {
					OR = {
						AND = {
							char_is_bad_leader_trigger = yes
							is_rival = char:558
						}
						char_is_good_leader_trigger = yes
					}	
				}
				factor = 100
			}
		}
	}
	
	option = {
        name = flavor_mat.21.c
		char:558 = {
			add_loyalty = aletes_no_attended_games_loyalty
			hidden_effect = {
				add_character_modifier = {
					name = hold_games_modifier
					duration = 1825 # 5 years
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				current_ruler = {
					OR = {
						char_is_decent_trigger = yes
						char_is_good_leader_trigger = yes
					}
					is_rival = char:558
				}
				factor = 100
			}
		}
	}
	
}

flavor_mat.22 = { 							# Invitation to Games - Attending to the Games (Good)
    type = country_event

    title = flavor_mat.22.t
    desc = flavor_mat.22.desc
    picture = greek_theater
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		change_variable = {			# Aletes feels important!
			name = aletes_apotheosis_progress
			add = 1
		}
		custom_tooltip = aletes_had_received_a_prestige_point
		aletes_apotheosis_status = yes
	}
	
	option = {
        name = flavor_mat.22.a
		char:558 = {
			add_loyalty = aletes_attended_games_loyalty
			add_character_modifier = {
				name = hold_games_modifier
				duration = 1825 # 5 years
			}
		}
	}
	
}

flavor_mat.23 = { 							# Invitation to Games - Attending to the Games (Bad)
    type = country_event

    title = flavor_mat.23.t
    desc = flavor_mat.23.desc
    picture = event_crowd_speech_celebration
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		change_variable = {			# You mocked him in public!
			name = aletes_apotheosis_progress
			subtract = 2
		}
		custom_tooltip = aletes_had_lost_a_prestige_point
		aletes_apotheosis_status = yes
	}
	
	option = {
        name = flavor_mat.23.a
		char:558 = {
			add_loyalty = aletes_mocked_me_games_loyalty
			add_popularity = -10
			add_character_modifier = {
				name = hold_games_modifier
				duration = 1825 # 5 years
			}
		}
	}
	
}

flavor_mat.24 = { 							# Waves of Charity
    type = country_event

    title = flavor_mat.24.t
    desc = flavor_mat.24.desc
    picture = war_chest
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	trigger = {
		char:558 = { wealth >= 100 }
	}

	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		char:558 = { add_gold = -100 }
		aletes_apotheosis_status = yes
	}
	
	option = {
        name = flavor_mat.24.a
		char:558 = {
			add_popularity = 10
			add_character_modifier = {
				name = aletes_spread_charity_modifier
				duration = 1825 # 5 years
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				current_ruler = {
					OR = {
						has_trait = generous
						has_trait = content
						has_trait = humble
						has_trait = benefactor
						has_trait = merciful
						has_trait = good_natured
						is_friend = char:558
					}
				}
				factor = 100
			}
		}
	}
	
	option = {
        name = flavor_mat.24.b
		custom_tooltip = aletes_loses_a_prestige_point
		current_ruler = {
			add_gold = -100
			add_popularity = 10
		}
		char:558 = {
			add_loyalty = aletes_outshined_loyalty
			add_character_modifier = {
				name = aletes_spread_charity_modifier
				duration = 1825 # 5 years
			}
		}
		change_variable = {			# You outshined him
			name = aletes_apotheosis_progress
			subtract = 1
		}
		ai_chance = {
			factor = 10
			modifier = {
				current_ruler = {
					OR = {
						has_trait = deceitful
						has_trait = arrogant
						has_trait = jealous
						has_trait = narcissistic
						is_rival = char:558
					}
				}
				factor = 100
			}
		}
	}
	
}

flavor_mat.25 = { 							# Recording a Life - Hiring a Historian (Tudhaliya Easter Egg)
    type = country_event

    title = flavor_mat.25.t
    desc = flavor_mat.25.desc
    picture = bakery
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	right_portrait = scope:tudhaliya_character
	
	trigger = {
		char:558 = {
			wealth >= 100
		}
	}

	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		aletes_apotheosis_status = yes
		hidden_effect = {
			create_character = {
				first_name = "Tudattin"
				family_name = "Iyas"
				culture = turdetanian
				religion = animism
				age = 24
				female = no
				no_stats = yes
				add_martial = 3
				add_finesse = 10
				add_charisma = 6
				add_zeal = 5
				no_traits = yes
				add_trait = invictus
				add_trait = scholar
				add_trait = trustworthy
				add_gold = 200
				add_popularity = 50
				add_character_modifier = {
					name = foreign_citizen
					duration = -1
				}
				add_character_modifier = {
					name = aletes_health_boost
					duration = 3650 # 10 Years
				}
				save_scope_as = tudhaliya_character
				dna = "/8El75F/kWiYfOHdAnwCfAKWApYCkQKRApACkAJmAmYCdwJ3AoACgAKCAoICawJrAo0CjQJ3AncCaAJoAogCiAKSApICbwJvApYClgOoA6gCcgJyADMAMwKFAoUClgKWAogCiAKRApEANQA1AngCeAKeApcC6AKOAnUCdQTJBMkCggKCAooCigKWApYCjAKMAnYCdgKWApYCgwKDAVIBUgJ4AngDnwOfApECkQAxADECegJ6AoUChQJ2AnYClgKWAowCjAJwAnACrQKIAYIBXgG6AVUCkwJzApcClwJ8AnwCdgJ2ApsCkgCWA38AVABUAOwA7AEAAQAACwALAu8C7wCtAK0BRwFHAUYBRgFDAUMDAAMAASgBKAB/AH8ANgA2ABwAHADlAOUAzwDPAuwC7AKeAp4AxQDFAGYAZgB/AH8BLQEtAWkBaQFxAXEALAAsALkAuQT9BP0ARQBFAMkAyQDJAMkDOgM6AQUBBQBMAEwH/wNZAHQAfwTBAtIHmAnpAGIAxwWYBZoHdAexA/8I9wAAAAAAAAAAAAAAAA=="
			}
			set_variable = {
				name = tudhaliya_flag
				value = scope:tudhaliya_character
			}
			if = {
				limit = {
					OR = {
						country_culture_group = latin
						scope:tudhaliya_character = { has_culture_group = latin }
					}
				}
				scope:tudhaliya_character = {
					add_nickname = "NICKNAME_HETTHEUS"
				}					
			}
			else = {
				scope:tudhaliya_character = {
					add_nickname = "NICKNAME_KETEIOS"
				}					
			}
			char:558 = {
				add_gold = -100
			}
			if = {
				limit = {
					scope:tudhaliya_character = { can_get_friends = yes }
					char:558 = { can_get_friends = yes }
				}
				scope:tudhaliya_character = { add_friend = char:558 }
			}
			if = {
				limit = {
					char:558 = { can_get_friends = no }
				}
				char:558 = {
					add_triggered_character_modifier = {
						name = aletes_extra_friend_modifier
						duration = -1
					}
				}
				scope:tudhaliya_character = { add_friend = char:558 }
			}
		}
	}
	
	option = {
        name = flavor_mat.25.a
		custom_tooltip = aletes_adventure_tudhaliya_start_tooltip
		add_treasury = -150
		scope:tudhaliya_character = {
			add_gold = 150
			add_loyalty = aletes_sponsored_me_loyalty
			remove_character_modifier = foreign_citizen
		}
		ai_chance = {
			factor = 50
		}
	}
	
	option = {
        name = flavor_mat.25.b
		custom_tooltip = zealous_xenophobic_jewish_bad_tooltip
		highlight = yes
		trigger = {
			current_ruler = {
				OR = {
					has_trait = zealous
					has_trait = xenophobic
					has_religion = judaism
				}
			}
		}
		scope:tudhaliya_character = {
			set_character_religion = employer.religion
			add_loyalty = aletes_forced_conversion_loyalty
		}
		ai_chance = {
			factor = 0
			modifier = {
				current_ruler = {
					OR = {
						has_trait = zealous
						has_trait = xenophobic
						has_religion = judaism
					}
				}
				factor = 100
			}
		}
	}
	
	option = {
        name = flavor_mat.25.c
		custom_tooltip = no_effect_tooltip
		ai_chance = {
			factor = 50
		}
	}
	
}

flavor_mat.26 = { 							# Recording a Life - A Life in a Book
    type = country_event

    title = flavor_mat.26.t
    desc = flavor_mat.26.desc
    picture = event_wise_men_indoors_debate
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	right_portrait = scope:tudhaliya_character
	
	option = {
        name = flavor_mat.26.a
		create_country_treasure = {
			key = "treasure_life_of_aletes"
			icon = "treasure_chest"
			modifier = {
				local_pop_promotion_speed_modifier = 0.15
			}
		}
	}
	
}

flavor_mat.27 = { 							# Asking for an Office - Start Event
    type = country_event

    title = flavor_mat.27.t
    desc = flavor_mat.27.desc
    picture = council_country
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	trigger = {
		char:558 = {
			has_any_office = no
			has_tech_office = no
			has_job = no
		}
		NOT = { has_variable = flavor_mat_27_ongoing }
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		char:558 = {
			set_variable = {
				name = flavor_mat_27_ongoing
				days = 1000
			}
		}
		save_scope_as = flavor_mat_27_country
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.27.a
		custom_tooltip = flavor_mat.27.a.tooltip
		scope:aletes_character = {
			add_loyalty = loyalty_office_excuses
			set_variable = {
				name = aletes_very_displeased
				value = 1
			}
		}
		
		hidden_effect = {
			scope:aletes_character = {
				trigger_event = {
					id = flavor_mat.28
					days = { 90 180 }
				}
			}
		}
	}
	
	option = {
		name = flavor_mat.27.b
		custom_tooltip = flavor_mat.27.b.tooltip
		trigger = {
			exists = scope:aletes_character
			scope:aletes_character = {
				is_friend = root.current_ruler
			}
		}
		scope:aletes_character = {
			add_loyalty = loyalty_friend_office_grant
			set_variable = {
				name = aletes_very_displeased
				value = 2
			}
		}
		hidden_effect = {
			scope:aletes_character = {
				trigger_event = {
					id = flavor_mat.28
					days = { 90 180 }
				}
			}
		}
	}
	
}

flavor_mat.28 = { 							# Asking for an Office - Hidden Event 1
	type = character_event
	hidden = yes
	
	trigger = {
		is_alive = yes
		employer = scope:flavor_mat_27_country
		prisoner = no
		is_ruler = no
		is_co_ruler = no
	}
	
	immediate = {
		if = {
			limit = {
				OR = {
					has_any_office = yes
					has_tech_office = yes
				}
			}
			employer = {
				trigger_event = {
					id = flavor_mat.29
				}
			}
		}
		else = {
			employer = {
				trigger_event = {
					id = flavor_mat.30
				}
			}
		}
	}
	
}
	
flavor_mat.29 = { 							# Asking for an Office - Good Ending
	type = country_event
	title = flavor_mat.29.t
	desc = flavor_mat.29.desc
	picture = war_chest
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	trigger = {
		scope:aletes_character = {
			is_alive = yes
			employer = scope:flavor_mat_27_country
			is_ruler = no
			is_co_ruler = no
			prisoner = no
		}
	}
	
	immediate = {
		if = {
			limit = {
				scope:aletes_character = {
					has_variable = aletes_very_displeased
				}
			}
			scope:aletes_character = {
				remove_variable = aletes_very_displeased
			}
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.29.a
		add_treasury  = {
			value = root.has_monthly_income
			multiply = add_monthly_income_medium
		}
	}
	
}

flavor_mat.30 = { 							# Asking for an Office - Aletes is Displeased
	type = country_event
	title = flavor_mat.30.t
	desc = flavor_mat.30.desc
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	trigger = {
		scope:aletes_character = {
			is_alive = yes
			employer = scope:flavor_mat_27_country
			is_ruler = no
			is_co_ruler = no
			prisoner = no
		}
	}
	
	immediate = {
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.30.a
		custom_tooltip = flavor_mat.30.fuss
		scope:aletes_character = {
			add_loyalty = loyalty_office_excuses
			if = {
				limit = {
					has_variable = aletes_very_displeased
				}
				change_variable = {
					name = aletes_very_displeased
					add = 2
				}
			}
			else = {
				set_variable = {
					name = aletes_very_displeased
					value = 2
				}
			}
			trigger_event = {
				id = flavor_mat.31
				days = { 90 180 }
			}
		}
	}
	
	option = {
		name = flavor_mat.30.b
		custom_tooltip = "orator_tooltip"
		highlight = yes
		trigger = {
			current_ruler = {
				has_trait = orator
			}
		}
		scope:aletes_character = {
			add_prominence = subtract_prominence_large
		}
		custom_tooltip = aletes_loses_a_prestige_point
		change_variable = {			# You mocked him!
			name = aletes_apotheosis_progress
			subtract = 2
		}
	}
	
	option = {
		name = flavor_mat.30.b
		custom_tooltip = "silver_tongued_tooltip"
		highlight = yes
		trigger = {
			current_ruler = {
				has_trait = silver_tongued
				NOT = {
					has_trait = orator
				}
			}
		}
		scope:aletes_character = {
			add_prominence = subtract_prominence_large
		}
		custom_tooltip = aletes_loses_a_prestige_point
		change_variable = {			# You mocked him!
			name = aletes_apotheosis_progress
			subtract = 2
		}
	}
	
	option = {
		name = flavor_mat.30.c
		custom_tooltip = "blunt_tooltip"
		highlight = yes
		trigger = {
			current_ruler = {
				has_trait = blunt
				can_get_rivals = yes
			}
			scope:aletes_character = {
				can_get_rivals = yes
				NOT = {
					is_rival = root.current_ruler
				}
			}
		}
		scope:aletes_character = {
			add_rival = root.current_ruler
		}
	}
	
}

flavor_mat.31 = { 							# Asking for an Office - Hidden Event 2
	type = character_event
	hidden = yes
	
	trigger = {
		is_alive = yes
		employer = scope:flavor_mat_27_country
		is_ruler = no
		is_co_ruler = no
		prisoner = no
	}
	
	immediate = {
		if = {
			limit = {
				OR = {
					has_any_office = yes
					has_tech_office = yes
				}
			}
			employer = {
				trigger_event = {
					id = flavor_mat.29
				}
			}
		}
		else = {
			employer = {
				trigger_event = {
					id = flavor_mat.32
				}
			}
		}
	}
	
}

flavor_mat.32 = { 							# Asking for an Office - Bad Ending
	type = country_event
	title = flavor_mat.32.t
	desc = flavor_mat.32.desc
	picture = dagger_behind_back
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	right_portrait = scope:flavor_mat_32_stolen_away
	
	trigger = {
		scope:aletes_character = {
			is_alive = yes
			employer = scope:flavor_mat_27_country
			is_ruler = no
			is_co_ruler = no
			prisoner = no
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_character = {
					is_ruler = no
					has_any_office = yes
					NOT = {
						is_friend = root.current_ruler
					}
				}
			}
			random_character = {
				limit = {
					is_ruler = no
					has_any_office = yes
					NOT = {
						is_friend = root.current_ruler
					}
				}
				weight = {
					title_importance_modifier = yes
				}
				save_scope_as = flavor_mat_32_stolen_away
			}
		}
		else = {
			random_character = {
				limit = {
					is_ruler = no
				}
				weight = {
					title_importance_modifier = yes
				}
				save_scope_as = flavor_mat_32_stolen_away
			}
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.32.a
		if = {
			limit = {
				exists = scope:flavor_mat_32_stolen_away
			}
			scope:flavor_mat_32_stolen_away = {
				if = {
					limit = { scope:aletes_character.var:aletes_very_displeased <= 1 }
					add_loyalty = loyalty_stole_job_1
				}
				else_if = {
					limit = { scope:aletes_character.var:aletes_very_displeased = 2 }
					add_loyalty = loyalty_stole_job_1
				}
				else_if = {
					limit = { scope:aletes_character.var:aletes_very_displeased = 3 }
					add_loyalty = loyalty_stole_job_1
				}
				else_if = {
					limit = { scope:aletes_character.var:aletes_very_displeased >= 4 }
					add_loyalty = loyalty_stole_job_1
				}
			}
		}
		if = {
			limit = {
				exists = scope:flavor_mat_32_stolen_away
				scope:flavor_mat_32_stolen_away = {
					is_friend = root.current_ruler
				}
			}
			scope:flavor_mat_32_stolen_away = {
				remove_friend = root.current_ruler
			}
		}
		scope:aletes_character = {
			if = {
				limit = { scope:aletes_character.var:aletes_very_displeased <= 1 }
				add_loyalty = loyalty_refused_job_1
			}
			else_if = {
				limit = { scope:aletes_character.var:aletes_very_displeased = 2 }
				add_loyalty = loyalty_refused_job_2
			}
			else_if = {
				limit = { scope:aletes_character.var:aletes_very_displeased = 3 }
				add_loyalty = loyalty_refused_job_3
			}
			else_if = {
				limit = { scope:aletes_character.var:aletes_very_displeased >= 4 }
				add_loyalty = loyalty_refused_job_4
			}
			if = {
				limit = {
					can_get_rivals = yes
					root.current_ruler = {
						can_get_rivals = yes
					}
					NOR = {
						is_friend = root.current_ruler
						is_rival = root.current_ruler
					}
				}
				add_rival = root.current_ruler
			}
		}
	}
}

flavor_mat.33 = { 							# A Political Marriage - Start Event
    type = country_event

    title = flavor_mat.33.t
    desc = flavor_mat.33.desc
    picture = event_wise_men_indoors_debate
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	trigger = {
		char:558 = { is_married = no }
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
        name = flavor_mat.33.a
		custom_tooltip = aletes_receives_a_prestige_point
		custom_tooltip = flavor_mat.33.tooltip.a
		trigger = {
			any_character = {
				from_ruler_family = yes
				is_female = yes
				age > 15
				age < 30
			}
		}
		trigger_event = {
			id = flavor_mat.34
			days = { 2 4 } # 2 - 4 days
		}
	}
	
	option = {
        name = flavor_mat.33.b
		custom_tooltip = flavor_mat.33.tooltip.b
		trigger_event = {
			id = flavor_mat.36
			days = { 30 60 } # 1 - 2 months
		}
	}
}

flavor_mat.34 = { 							# A Political Marriage - Seeking a Bride (Bride Selection)
    type = country_event

    title = flavor_mat.34.t
    desc = flavor_mat.34.desc
    picture = event_wise_men_indoors_debate
	left_portrait = current_ruler
	left_portrait = scope:aletes_character
	right_portrait = scope:aletes_bride_candidate_1
	right_portrait = scope:aletes_bride_candidate_2
	right_portrait = scope:aletes_bride_candidate_3
	
	trigger = {
		char:558 = { is_married = no }
	}
	
	immediate = {
		char:558 = { save_scope_as = aletes_character }
		random_character = {
    		limit = {
				from_ruler_family = yes
				is_female = yes
				age > 15
				age < 30
			}
			weight = {
				base = 1
				modifier = {
					factor = 1000
					is_married = no
				}
			}
    		save_scope_as = aletes_bride_candidate_1
    	}
		random_character = {
    		limit = {
				from_ruler_family = yes
				is_female = yes
				age > 15
				age < 30
				NOT = { this = scope:aletes_bride_candidate_1 }
			}
			weight = {
				base = 1
				modifier = {
					factor = 1000
					is_married = no
				}
			}
    		save_scope_as = aletes_bride_candidate_2
    	}
		random_character = {
    		limit = {
				from_ruler_family = yes
				is_female = yes
				age > 15
				age < 30
				NOT = { this = scope:aletes_bride_candidate_1 }
				NOT = { this = scope:aletes_bride_candidate_2 }
			}
			weight = {
				base = 1
				modifier = {
					factor = 1000
					is_married = no
				}
			}
    		save_scope_as = aletes_bride_candidate_3
    	}
		aletes_apotheosis_status = yes
	}
	
	option = {
        name = flavor_mat.34.a
		show_as_tooltip = {
			if = {
				limit = { exists = scope:aletes_bride_candidate_1 }
				scope:aletes_character = { marry_character = scope:aletes_bride_candidate_1 }
			}
		}
		scope:aletes_bride_candidate_1 = { set_variable = aletes_bride_flag }
		custom_tooltip = flavor_mat.34.tooltip
		trigger_event = {
			id = flavor_mat.35
			days = { 90 120 } # 3 - 4 months
		}
	}
	
	option = {
        name = flavor_mat.34.b
		show_as_tooltip = {
			if = {
				limit = { exists = scope:aletes_bride_candidate_2 }
				scope:aletes_character = { marry_character = scope:aletes_bride_candidate_2 }
			}
		}
		scope:aletes_bride_candidate_2 = { set_variable = aletes_bride_flag }
		custom_tooltip = flavor_mat.34.tooltip
		trigger_event = {
			id = flavor_mat.35
			days = { 90 120 } # 3 - 4 months
		}
	}
	
	option = {
        name = flavor_mat.34.c
		show_as_tooltip = {
			if = {
				limit = { exists = scope:aletes_bride_candidate_3 }
				scope:aletes_character = { marry_character = scope:aletes_bride_candidate_3 }
			}
		}
		scope:aletes_bride_candidate_3 = { set_variable = aletes_bride_flag }
		custom_tooltip = flavor_mat.34.tooltip
		trigger_event = {
			id = flavor_mat.35
			days = { 90 120 } # 3 - 4 months
		}
	}
}

flavor_mat.35 = { 							# A Political Marriage - A Ring to Rule them All (Ruling Family Bride)
    type = country_event

    title = flavor_mat.35.t
    desc = flavor_mat.35.desc
    picture = celtic_religious_festival
	left_portrait = scope:aletes_character
	right_portrait = scope:aletes_bride_scope
	goto_location = p:1036
	
	trigger = {
		char:558 = { is_married = no }
	}
	
	immediate = {
		hidden_effect = { char:558 = { set_can_marry = yes } }
		if = {
			limit = { NOT = { exists = scope:aletes_bride_scope } }
			random_character = {
				limit = { has_variable = aletes_bride_flag }
				save_scope_as = aletes_bride_scope
			}
		}
		hidden_effect = {
			if = {
				limit = { scope:aletes_bride_scope = { is_married = yes } }
				scope:aletes_bride_scope.spouse = { save_scope_as = aletes_bride_old_husband_scope }
				scope:aletes_bride_scope = { divorce_character = scope:aletes_bride_old_husband_scope }
				scope:aletes_bride_old_husband_scope = { add_loyalty = loyalty_consort_cast_aside }
			}
		}
		change_variable = {			# Aletes feels important!
			name = aletes_apotheosis_progress
			add = 1
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
        name = flavor_mat.35.a
		custom_tooltip = aletes_had_received_a_prestige_point
		set_variable = aletes_already_married
		scope:aletes_character = {
			marry_character = scope:aletes_bride_scope
			add_popularity = 10
		}
		scope:aletes_bride_scope = { remove_variable = aletes_bride_flag }
		set_variable = {
			name = aletes_wife_flag
			value = scope:aletes_bride_scope
		}
		set_variable = {
			name = aletes_wife_family_flag
			value = scope:aletes_bride_scope.family
		}
		scope:aletes_character = { add_loyalty = aletes_married_into_family_loyalty }
		custom_tooltip = flavor_mat.35.tooltip
		show_as_tooltip = {
			p:1036 = {
				add_province_modifier = {
					name = aletes_great_wedding_modifier
					duration = 1825
				}
			}
		}
		hidden_effect = {
			area:mastiania_area = {
				every_area_province = {
					limit = { owner = root }
					add_province_modifier = {
						name = aletes_great_wedding_modifier
						duration = 1825
					}
				}
			}
		}
	}
}

flavor_mat.36 = { 							# A Political Marriage - The Wedding of the Century (Non-Ruling Family Bride)
    type = country_event

    title = flavor_mat.36.t
    desc = flavor_mat.36.desc
    picture = celtic_religious_festival
	left_portrait = scope:aletes_character
	right_portrait = scope:aletes_bride_scope
	goto_location = p:1036
	
	trigger = {
		char:558 = { is_married = no }
	}
	
	immediate = {
		hidden_effect = { char:558 = { set_can_marry = yes } }
		random_character = {
    		limit = {
				from_ruler_family = no
				is_minor_character = no
				is_female = yes
				age > 15
				age < 30
			}
			weight = {
				base = 1
				modifier = {
					factor = 1000
					is_married = no
				}
			}
			set_variable = aletes_bride_flag
    		save_scope_as = aletes_bride_scope
    	}
		hidden_effect = {
			if = {
				limit = { scope:aletes_bride_scope = { is_married = yes } }
				scope:aletes_bride_scope.spouse = { save_scope_as = aletes_bride_old_husband_scope }
				scope:aletes_bride_scope = { divorce_character = scope:aletes_bride_old_husband_scope }
				scope:aletes_bride_old_husband_scope = { add_loyalty = loyalty_consort_cast_aside }
			}
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
        name = flavor_mat.36.a
		set_variable = aletes_already_married
		scope:aletes_character = {
			marry_character = scope:aletes_bride_scope
			add_popularity = 10
		}
		scope:aletes_bride_scope = {
			remove_variable = aletes_bride_flag
			set_variable = {
				name = aletes_wife_flag
				value = 1
			}
		}
		scope:aletes_bride_scope.family = {
			set_variable = {
				name = aletes_wife_family_flag
				value = 1
			}
		}
		custom_tooltip = flavor_mat.35.tooltip
		show_as_tooltip = {
			p:1036 = {
				add_province_modifier = {
					name = aletes_great_wedding_modifier
					duration = 1825
				}
			}
		}
		hidden_effect = {
			area:mastiania_area = {
				every_area_province = {
					limit = { owner = root }
					add_province_modifier = {
						name = aletes_great_wedding_modifier
						duration = 1825
					}
				}
			}
		}
	}
}

flavor_mat.37 = { 							# Buying Holdings
	type = country_event
	title = flavor_mat.37.t
	desc = flavor_mat.37.desc
	picture = council_country
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	goto_location  = scope:aletes_holding_scope
	
	trigger = {
		char:558 = { wealth >= 80 }
		any_owned_province = {
			count >= 1
			NOT = { exists = holding_owner }
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		hidden_effect = {
			random_owned_province = {
				limit = {
					NOT = { exists = holding_owner }
				}
				save_scope_as = aletes_holding_scope
			}
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.37.a
		scope:aletes_character = {
			add_gold = -80
			add_holding = scope:aletes_holding_scope
			add_loyalty = objective_holding_granted
		}
		add_treasury = 80
		ai_chance = { factor = 90 }
	}
	
	option = {
		name = flavor_mat.37.b
		current_ruler = { add_popularity = subtract_popularity_small }
		scope:aletes_character = { add_loyalty = aletes_refused_holding_loyalty }
		ai_chance = { factor = 10 }
	}
}

flavor_mat.38 = { 							# Outshining the Ruler
	type = country_event
	title = flavor_mat.38.t
	desc = flavor_mat.38.desc
	picture = council_country
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	trigger = {
		char:558 = { popularity >= 40 }
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		char:558 = {
			add_character_modifier = {
				name = aletes_popular_figurehead_modifier
				duration = -1
			}
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.38.a
		char:558 = { add_popularity = 5 }
		ai_chance = { factor = 90 }
	}
	
	option = {
		name = flavor_mat.38.b
		highlight = yes
		trigger = {
			current_ruler = {
				OR = {
					char_is_decent_trigger = yes
					char_is_good_leader_trigger = yes
					is_friend = char:558
				}
			}
		}
		custom_tooltip = aletes_receives_a_prestige_point
		add_political_influence = -10
		char:558 = {
			add_popularity = 10
			add_loyalty = aletes_friendly_ruler_loyalty
		}
		change_variable = {			# Aletes feels important!
			name = aletes_apotheosis_progress
			add = 1
		}
		ai_chance = {
			factor = 10
			modifier = {
				current_ruler = {
					OR = {
						char_is_decent_trigger = yes
						char_is_good_leader_trigger = yes
						is_friend = char:558
					}
				}
				factor = 100
			}
		}
	}
	
	option = {
		name = flavor_mat.38.c
		add_political_influence = -15
		char:558 = {
			add_popularity = -10
			add_loyalty = aletes_hostile_ruler_loyalty
		}
		ai_chance = {
			factor = 10
			modifier = {
				current_ruler = {
					OR = {
						has_trait = cruel
						has_trait = vengeful
						has_trait = selfish
						has_trait = jealous
						is_rival = char:558
					}
				}
				factor = 100
			}
		}
	}
}

flavor_mat.39 = { 							# Visiting Another City
	type = country_event
    title = flavor_mat.39.t
    desc = flavor_mat.39.desc
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	goto_location  = scope:aletes_visiting_city_scope

	trigger = {
		any_owned_province = {
			count >= 1
			has_city_status = yes
			is_capital = no
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_city_status = yes
					is_capital = no
				}
				save_scope_as = aletes_visiting_city_scope
			}
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.39.a
		scope:aletes_character = { add_popularity = 10 }
		scope:aletes_visiting_city_scope = {
			add_province_modifier = {
				name = aletes_great_reception_modifier
				duration = 1825
			}
		}
	}
}

flavor_mat.40 = { 							# Founding a Temple for a Local Deity
	type = country_event
    title = flavor_mat.40.t
    desc = flavor_mat.40.desc
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	goto_location  = scope:aletes_temple_territory_scope

	trigger = {
		char:558 = { wealth >= 100 }
		any_owned_province = {
			count >= 1
			has_city_status = yes
			free_building_slots >= 1
			num_of_temple_building < 1
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_city_status = yes
					free_building_slots >= 1
					num_of_temple_building < 1
				}
				save_scope_as = aletes_temple_territory_scope
			}
		}
		scope:aletes_character = {
			add_gold = -100
			add_popularity = 10
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.40.a
		scope:aletes_temple_territory_scope = {
			add_building_level = temple_building
			add_province_modifier = {
				name = aletes_temple_founded_modifier
				duration = 1825
			}
		}
	}
}

flavor_mat.41 = { 							# Befriending the High Priest
	type = country_event
    title = flavor_mat.41.t
    desc = flavor_mat.41.desc
	picture = successors
	left_portrait = current_ruler
	left_portrait = scope:aletes_high_priest_scope
	right_portrait = scope:aletes_character

	trigger = {
		any_character = {
			has_high_priest_office_trigger = yes
			NOR = {
				is_friend = char:558
				is_rival = char:558
			}
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = aletes_high_priest_scope
    	}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.41.a
		if = {
			limit = {
				scope:aletes_high_priest_scope = { can_get_friends = yes }
				scope:aletes_character = { can_get_friends = yes }
			}
			scope:aletes_character = { add_friend = scope:aletes_high_priest_scope }
		}
	}
	
	option = {
		name = flavor_mat.41.b
		custom_tooltip = aletes_loses_a_prestige_point
		scope:aletes_character = {
			if = {
				limit = {
					can_get_rivals = yes
					root.current_ruler = {
						can_get_rivals = yes
					}
					NOR = {
						is_friend = root.current_ruler
						is_rival = root.current_ruler
					}
				}
				add_rival = root.current_ruler
			}
		}
		change_variable = {			# You went against him!
			name = aletes_apotheosis_progress
			subtract = 2
		}
	}
}

flavor_mat.42 = { 							# Patronize Head of Great Family Campaing (Non-Ruling Family Wife)
	type = country_event
    title = flavor_mat.42.t
    desc = flavor_mat.42.desc
	picture = successors
	left_portrait = current_ruler
	left_portrait = scope:aletes_character
	right_portrait = scope:aletes_wife_scope
	right_portrait = scope:aletes_in_law_scope

	trigger = {
		has_variable = aletes_already_married
		var:aletes_wife_family_flag = { any_family_member = { is_ruler = no } }
		char:558 = {
			is_married = yes
			spouse = {
				from_ruler_family = no
				is_minor_character = no
			}
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		scope:aletes_character = {
			add_gold = -100
			spouse = { save_scope_as = aletes_wife_scope }
		}
		scope:aletes_wife_scope.family = {
			head_of_family = {
				save_scope_as = aletes_in_law_scope
			}
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.42.a
		scope:aletes_in_law_scope = {
			add_prominence = prominence_medium
		}
	}
	
	option = {
		name = flavor_mat.42.b
		highlight = yes
		trigger = {
			current_ruler = {
				OR = {
					is_friend = char:558
					is_friend = scope:aletes_in_law_scope
				}
			}
		}
		custom_tooltip = aletes_receives_a_prestige_point
		scope:aletes_in_law_scope = {
			add_prominence = prominence_large
		}
		change_variable = {
			name = aletes_apotheosis_progress
			add = 1
		}
		ai_chance = {
			factor = 0
			modifier = {
				current_ruler = {
					OR = {
						is_friend = char:558
						is_friend = scope:aletes_in_law_scope
					}
				}
				factor = 100
			}
		}
	}
}

flavor_mat.43 = { 							# Befriending a Governor
	type = country_event
    title = flavor_mat.43.t
    desc = flavor_mat.43.desc
	picture = successors
	left_portrait = current_ruler
	left_portrait = scope:aletes_governor_scope
	right_portrait = scope:aletes_character

	trigger = {
		char:558 = { can_get_friends = yes }
		any_character = {
			is_governor = yes
			NOR = {
				is_friend = char:558
				is_rival = char:558
			}
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		random_character = {
			limit = {
				is_governor = yes
				can_get_friends = yes
			}
			weight = {
				title_importance_modifier = yes
			}
			set_variable = {
				name = aletes_governor_variable
				days = 18250
			}
			save_scope_as = aletes_governor_scope
		}
		if = {
			limit = {
				scope:aletes_governor_scope = { can_get_friends = yes }
				scope:aletes_character = { can_get_friends = yes }
			}
			scope:aletes_character = { add_friend = scope:aletes_governor_scope }
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.43.a
		custom_tooltip = no_effect_tooltip
	}
	
	option = {
		name = flavor_mat.43.b
		custom_tooltip = aletes_loses_a_prestige_point
		scope:aletes_character = { add_loyalty = aletes_hostile_ruler_loyalty }
		scope:aletes_governor_scope = {
			if = {
				limit = {
					can_get_rivals = yes
					root.current_ruler = {
						can_get_rivals = yes
					}
					NOR = {
						is_friend = root.current_ruler
						is_rival = root.current_ruler
					}
				}
				add_rival = root.current_ruler
			}
			remove_all_positions = yes
			add_loyalty = loyalty_governor_resignation
		}
		change_variable = {			# You went against him!
			name = aletes_apotheosis_progress
			subtract = 2
		}
	}
}

flavor_mat.44 = { 							# Fire in the Docks! - Start Event
	type = country_event
    title = flavor_mat.44.t
    desc = flavor_mat.44.desc
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	goto_location  = scope:aletes_port_territory_scope

	trigger = {
		char:558 = { wealth >= 80 }
		any_owned_province = {
			count >= 1
			num_of_port_building >= 1
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		random_owned_province = {
			limit = { num_of_port_building >= 1 }
			save_scope_as = aletes_port_territory_scope
		}
		scope:aletes_port_territory_scope = {
			add_province_modifier = {
				name = aletes_recovering_from_fire_modifier
				duration = 360
			}
		}
		char:558 = {
			add_gold = -80
			add_popularity = 10
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.44.a			# What a man! <3
		custom_tooltip = no_effect_tooltip
		ai_chance = {
			factor = 60
			modifier = {
				current_ruler = {
					OR = {
						has_trait = trusting
						has_trait = dumb
						has_trait = submissive
						is_friend = char:558
					}
				}
				factor = 100
			}
		}
	}
	
	option = {
		name = flavor_mat.44.b			# Investigate this incident!
		add_treasury = -100
		custom_tooltip = flavor_mat.44.tooltip
		hidden_effect = {
			random_list = {
				60 = { # The Culprit!
					trigger_event = {
						id = flavor_mat.45
						days = { 60 90 } # 2 - 3 months
					}
				}
				40 = { # Failed Investigation
					trigger_event = {
						id = flavor_mat.46
						days = { 60 90 } # 2 - 3 months
					}
				}
			}
		}
		ai_chance = {
			factor = 40
			modifier = {
				current_ruler = {
					OR = {
						has_trait = sceptical
						has_trait = righteous
						has_trait = jealous
						has_trait = suspicious
						has_trait = paranoid
						is_rival = char:558
					}
				}
				factor = 100
			}
		}
	}
}

flavor_mat.45 = { 							# Fire in the Docks! - The Culprit!
	type = country_event
    title = flavor_mat.45.t
    desc = flavor_mat.45.desc
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:aletes_character

	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.45.a
		custom_tooltip = aletes_loses_a_prestige_point
		scope:aletes_character = { add_popularity = -10 }
		change_variable = {			# You caught him!
			name = aletes_apotheosis_progress
			subtract = 2
		}
	}
	
	option = {
		name = flavor_mat.45.b
		scope:aletes_character = { add_loyalty = aletes_friendly_ruler_loyalty }
	}
}

flavor_mat.46 = { 							# Fire in the Docks! - Failed Investigation
	type = minor_country_event
    title = flavor_mat.46.t
    desc = flavor_mat.46.desc
	left_portrait = current_ruler
	interface_lock = no
	
	option = { name = flavor_mat.46.a }
}

flavor_mat.47 = { 							# Plead for Freedom
	type = country_event
    title = flavor_mat.47.t
    desc = flavor_mat.47.desc
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	trigger = {
		char:558 = { prisoner = yes }
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.47.a
		custom_tooltip = no_effect_tooltip
		ai_chance = {
			factor = 10
			modifier = {
				current_ruler = {
					OR = {
						has_trait = suspicious
						has_trait = paranoid
						is_rival = char:558
					}
				}
				factor = 100
			}
		}
	}
	
	option = {
		name = flavor_mat.47.b
		if = {
			limit = {
				has_variable = aletes_apotheosis_progress
			}
			custom_tooltip = aletes_loses_several_prestige_point
			change_variable = {			# You humiliated him!
				name = aletes_apotheosis_progress
				subtract = 3
			}
		}
		custom_tooltip = flavor_mat.67.tooltip.b
		root = {
			release_prisoner = { target = scope:aletes_character }
		}
		add_treasury  = {
			value = scope:aletes_character.wealth
			divide = 3
		}
		scope:aletes_character = {
			add_loyalty = aletes_terrified_loyalty
			add_gold = {
				subtract = scope:aletes_character.wealth
				divide = 3
			}
		}
		hidden_effect = {
			if = {
				limit = {
					scope:aletes_character = {
						has_loyalty = imprisoned_l
					}
				}
				scope:aletes_character = {
					remove_loyalty = imprisoned_l
				}
			}
			scope:aletes_character = {
				if = {
					limit = {
						has_variable = imprisoned_manually
					}
					remove_variable = imprisoned_manually
				}
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				current_ruler = {
					OR = {
						has_trait = merciful
						has_trait = miserly
						is_friend = char:558
					}
				}
				factor = 100
			}
		}
	}
}

flavor_mat.48 = { 							# Raid in your Latifundia! - Start Event
	type = country_event
    title = flavor_mat.48.t
    desc = flavor_mat.48.desc
	picture = event_wheat_fields_harvest
	left_portrait = current_ruler
	goto_location = scope:holding_raided
	
	trigger = {
		char:558 = { prisoner = no }
		current_ruler = {
			is_rival = char:558
			num_holdings_owned > 0
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		current_ruler = {
			random_holdings = {
				save_scope_as = holding_raided
			}
		}
		scope:holding_raided = {
			add_province_modifier = {
				name = aletes_holding_raided_modifier
				duration = 360
			}
		}
	}

	option = {
		name = flavor_mat.48.a
		custom_tooltip = no_effect_tooltip
		ai_chance = {
			factor = 0
			modifier = {
				current_ruler = {
					OR = {
						has_trait = suspicious
						has_trait = paranoid
					}
				}
				factor = 100
			}
		}
	}
	
	option = {
		name = flavor_mat.48.b			# Investigate this incident!
		add_treasury = -100
		custom_tooltip = flavor_mat.44.tooltip
		hidden_effect = {
			random_list = {
				70 = { # The Culprit!
					trigger_event = {
						id = flavor_mat.49
						days = { 60 90 } # 2 - 3 months
					}
				}
				30 = { # Failed Investigation
					trigger_event = {
						id = flavor_mat.50
						days = { 60 90 } # 2 - 3 months
					}
				}
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				current_ruler = {
					OR = {
						has_trait = trusting
						has_trait = dumb
						has_trait = submissive
					}
				}
				factor = 0
			}
		}
	}
}

flavor_mat.49 = { 							# Raid in your Latifundia! - The Culprit!
	type = country_event
    title = flavor_mat.49.t
    desc = flavor_mat.49.desc
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:aletes_character

	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.49.a
		custom_tooltip = aletes_loses_a_prestige_point
		scope:aletes_character = { add_popularity = -5 }
		change_variable = {			# You caught him!
			name = aletes_apotheosis_progress
			subtract = 2
		}
	}
}

flavor_mat.50 = { 							# Raid in your Latifundia! - Failed Investigation
	type = minor_country_event
    title = flavor_mat.50.t
    desc = flavor_mat.50.desc
	left_portrait = current_ruler
	interface_lock = no
	
	option = { name = flavor_mat.50.a }
}

flavor_mat.51 = { 							# A Sharp Tongue
	type = country_event
    title = flavor_mat.51.t
    desc = flavor_mat.51.desc
	picture = senator_conversing
	left_portrait = current_ruler
	left_portrait = scope:aletes_angry_officer
	right_portrait = scope:aletes_character
	
	trigger = {
		char:558 = {
			prisoner = no
			has_trait = orator
		}
		any_character = {
			has_any_office = yes
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		if = {
			limit = {
				any_character = {
					has_any_office = yes
					NOT = { THIS = scope:aletes_character }
				}
			}
			random_character = {
				limit = {
					has_any_office = yes
					NOT = { THIS = scope:aletes_character }
				}
				save_scope_as = aletes_angry_officer
			}
		}
	}
	
	option = {
		name = flavor_mat.51.a
		custom_tooltip = aletes_receives_a_prestige_point
		scope:aletes_character = {
			add_loyalty = aletes_friendly_ruler_loyalty
			add_popularity = 10
		}
		scope:aletes_angry_officer = {
			add_loyalty = loyalty_office_threatened
			add_popularity = -10
		}
		change_variable = {
			name = aletes_apotheosis_progress
			add = 1
		}
		ai_chance = {
			factor = 80
			modifier = {
				current_ruler = {
					OR = { 
						is_friend = scope:aletes_character
						is_rival = scope:aletes_angry_officer
					}
				}
				factor = 0
			}
		}
	}
	
	option = {
		name = flavor_mat.51.b
		scope:aletes_character = {
			add_loyalty = aletes_hostile_ruler_loyalty
			add_popularity = -10
		}
		current_ruler = {
			add_popularity = -5
		}
		scope:aletes_angry_officer = {
			add_loyalty = loyalty_defended_office
			add_popularity = 10
		}
		change_variable = {			# You caught him!
			name = aletes_apotheosis_progress
			subtract = 2
		}
		custom_tooltip = aletes_loses_a_prestige_point
		ai_chance = {
			factor = 20
			modifier = {
				current_ruler = {
					OR = { 
						is_rival = scope:aletes_character
						is_friend = scope:aletes_angry_officer
					}
				}
				factor = 100
			}
		}
	}
}

## Aletes Event Chain: Endings (Events 60-70)
flavor_mat.60 = { 							# The Apotheosis of Aletes - The Disgraced Aletes (Bad Ending)
    type = country_event

    title = flavor_mat.60.t
    desc = flavor_mat.60.desc
    picture = event_wise_men_indoors_debate
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	option = {
        name = flavor_mat.60.a
		remove_variable = aletes_disgraced_variable
	}
}

flavor_mat.61 = { 							# The Apotheosis of Aletes - Death of a Prominent Man
    type = country_event

    title = flavor_mat.61.t
	desc = {
		first_valid = {
			triggered_desc = { # Tudattin Iyas is alive
				trigger = {
					var:tudhaliya_flag = {
                        is_alive = yes
                    }
				}
				desc = flavor_mat.61.desc_1
			}
			triggered_desc = { # Tudattin Iyas is dead or not in country
				trigger = {
					always = yes
				}
				desc = flavor_mat.61.desc_2
			}
		}
	}
    picture = event_wise_men_indoors_debate
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	right_portrait = scope:tudhaliya_character
	
	immediate = {
		if = {
			limit = { var:tudhaliya_flag = { is_alive = yes } }
			var:tudhaliya_flag = { save_scope_as = tudhaliya_character }
		}
	}
	
	option = {
        name = flavor_mat.61.a
		custom_tooltip = flavor_mat.61.tooltip
		show_as_tooltip = {
			p:1036 = {
				add_province_modifier = {
					name = will_of_aletes_modifier
					duration = 3650
				}
			}
		}
		hidden_effect = {
			area:mastiania_area = {
				every_area_province = {
					limit = {
						owner = root
					}
					add_province_modifier = {
						name = will_of_aletes_modifier
						duration = 3650
					}
				}
			}
		}
		if = {
			limit = { # Aletes has enough prestige points after his death
				has_variable = aletes_apotheosis_secured
				char:558 = {
					is_alive = no
					employer = root
				}
			}
			trigger_event = {
				id = flavor_mat.62
				days = { 730 1095 } # 2 - 3 years
			}
		}
		if = {
			limit = { # Aletes has not enough prestige points after his death
				has_variable = aletes_apotheosis_progress
				char:558 = {
					is_alive = no
					employer = root
				}
			}
			aletes_adventure_event_variable_cleanup_effect = yes
			trigger_event = {
				id = flavor_mat.63
				days = { 730 1095 } # 2 - 3 years
			}
		}
		if = {
			limit = { # Check if Tudattin Iyas is alive
				scope:tudhaliya_character = {
					is_alive = yes
				}
			}
			trigger_event = {
				id = flavor_mat.26
				days = { 20 30 }
			}
		}
	}
	
}

flavor_mat.62 = { 							# The Apotheosis of Aletes - Worship of Aletes
    type = country_event

    title = flavor_mat.62.t
    desc = flavor_mat.62.desc
    picture = celtic_religious_festival
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
	}
	
	option = {
        name = flavor_mat.62.a
		custom_tooltip = flavor_mat.62.tooltip
		set_variable = deity_unlocked_aletes
		hidden_effect = {
			add_deity_to_pantheon = { deity = deity:omen_aletes }
		}
		aletes_adventure_main_variable_cleanup_effect = yes
	}
	
}

flavor_mat.63 = { 							# The Apotheosis of Aletes - Aletes is remembered as a mere mortal
    type = country_event

    title = flavor_mat.63.t
    desc = flavor_mat.63.desc
    picture = event_wheat_fields_harvest
	
	option = {
        name = flavor_mat.63.a
		aletes_adventure_main_variable_cleanup_effect = yes
	}
	
}

flavor_mat.64 = { 							# The Prince in the Hill - Bad Ending
	type = country_event
	title = flavor_mat.64.t
	desc = flavor_mat.64.desc
	picture = dagger_behind_back
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	right_portrait = scope:tudhaliya_character
	goto_location = scope:aletes_mastiania_capital
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			root = { save_scope_as = aletes_origin_country_scope }
			if = {
				limit = {
					p:1036 = {
						owner = scope:aletes_origin_country_scope
						NOT = { is_capital = yes }
					}
				}
				p:1036 = {
					save_scope_as = aletes_mastiania_capital
				}
			}
			else = {
				ordered_owned_province = {
					limit = {
						is_capital = no
					}
					order_by = total_population
					max = 1
					save_scope_as = aletes_mastiania_capital
				}
			}
			if = {
				limit = { NOT = { exists = scope:aletes_governor_scope } }
				random_character = {
					limit = {
						is_governor = yes
						has_variable = aletes_governor_variable
					}
					save_scope_as = aletes_governor_scope
				}
			}
			scope:aletes_mastiania_capital = {
				establish_city_effect = yes
				create_country = { save_scope_as = aletes_mastiania_scope }
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
			}
			every_owned_province = {
				limit = {
					area = scope:aletes_mastiania_scope.capital_scope.area
					is_capital = no
				}
				set_owned_by = scope:aletes_mastiania_scope
				add_claim = ROOT
			}
			scope:aletes_governor_scope = {
				if = {
					limit = {
						is_friend = scope:aletes_governor_scope.employer.current_ruler
					}
					remove_friend = scope:aletes_governor_scope.employer.current_ruler
				}
				employer = {
					add_opinion = {
						target = scope:aletes_mastiania_scope
						modifier = enticed_our_governor
					}
				}
				show_as_tooltip = { move_country = scope:aletes_mastiania_scope }
				custom_tooltip = aletes_governor_deserts
				custom_tooltip = province_claims_enticed
				hidden_effect = {
					every_governor_state = {
						limit = {
							any_state_province = {
								state_loyalty <= 50
							}
						}
						every_state_province = {
							set_owned_by = scope:aletes_mastiania_scope
							add_claim = scope:aletes_governor_scope.employer
							save_scope_as = to_set_governor
						}
					}
				}
				hidden_effect = {
					if = {
						limit = {
							num_of_children > 0
							any_child = {
								is_adult = no
							}
						}
						add_character_modifier = {
							name = abandoned_family
							duration = -1
						}
						every_child = {
							limit = {
								is_adult = no
							}
							add_character_modifier = {
								name = absentee_father
								duration = -1
							}
						}
					}
				}
				hidden_effect = {
					remove_all_positions = yes
					move_country = scope:aletes_mastiania_scope
					remove_character_modifier = foreign_citizen
					set_as_minor_character = THIS
					set_home_country = scope:aletes_mastiania_scope
				}
				hidden_effect = {
					if = {
						limit = {
							exists = scope:to_set_governor 
						}
						scope:to_set_governor = {
							set_as_governor = scope:aletes_governor_scope
						}
					}
				}
			}
			area:mastiania_area = {
				every_area_province = {
					limit = { NOT = { owner = scope:aletes_mastiania_scope } }
					add_claim = scope:aletes_mastiania_scope
				}
			}
			scope:aletes_mastiania_scope = {
				add_truce = {
					target = root
					duration = 3650
				}
				aletes_mastiania_setup_effect = yes
			}
			add_truce = {
				target = scope:aletes_mastiania_scope
				duration = 3650
			}
			reset_scoring = scope:aletes_mastiania_scope
			if = {
				limit = { NOT = { exists = scope:aletes_character } }
				char:558 = { save_scope_as = aletes_character }
			}
			scope:aletes_character = { aletes_moves_mastiania_effect = yes }
			scope:aletes_mastiania_scope = {
				aletes_mastiania_setup_effect = yes
				set_as_ruler = scope:aletes_character
			}
			scope:aletes_character.family = { add_prestige = prestige_huge }
			if = {
				limit = {
					any_character = { # If Tudattin 'Iyas is alive, he moves to the new country
						has_variable = tudhaliya_flag
						is_alive = yes
						prisoner = no
						is_ruler = no
						NOT = { is_rival = scope:aletes_character }
					}
				}
				random_character = {
					limit = {
						has_variable = tudhaliya_flag
						is_alive = yes
						is_ruler = no
						prisoner = no
					}
					save_scope_as = tudhaliya_character
				}
				scope:tudhaliya_character = {
					if = {
						limit = {
							NOT = { has_religion = animism }
						}
						set_character_religion = animism
					}
					move_country_with_entire_family_effect = { COUNTRY = scope:aletes_mastiania_scope }
				}
			}
			scope:aletes_origin_country_scope = {
				add_opinion = {
					modifier = iberian_aletes_independence_opmod
					target = scope:aletes_mastiania_scope
				}
			}
			aletes_adventure_main_variable_cleanup_effect = yes
			aletes_adventure_event_variable_cleanup_effect = yes
			mastiania_foundation_ping_effect = yes
		}
	}
	
	option = {
		name = flavor_mat.64.a
		scope:aletes_mastiania_scope = {
			set_variable = aletes_apotheosis_secured
		}
	}
	
	option = {
		name = flavor_mat.64.b
		# Play as Aletes' Mastia
		custom_tooltip = flavor_mat.65.b.tooltip
		scope:aletes_mastiania_scope = {
			set_variable = aletes_apotheosis_secured
		}
		hidden_effect = { 
			set_player_country = scope:aletes_mastiania_scope
		}
	}
}

flavor_mat.65 = { 							# The Prince's Coup - Bad Ending (Civil War)
	type = country_event
	title = flavor_mat.65.t
	desc = flavor_mat.65.desc
	picture = dagger_behind_back
	left_portrait = current_ruler
	right_portrait = scope:aletes_character
	goto_location = scope:capital_scope
	
	fire_only_once = yes
	
	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		if = {
			limit = { NOT = { exists = scope:aletes_governor_scope } }
			random_character = {
				limit = {
					is_governor = yes
					has_variable = aletes_governor_variable
				}
				save_scope_as = aletes_governor_scope
			}
		}
		capital_scope = {
			save_scope_as = aletes_original_capital
			set_variable = aletes_original_capital_var
		}
		ordered_owned_province = {
    		order_by = total_population
    		limit = {
				is_capital = no
    			OR = {
					is_in_region = baetica_region
					is_in_region = tarraconensis_region
					is_in_region = lusitania_region
					is_in_region = gallaecia_region
					is_in_region = mauretainia_region
					is_in_region = transalpine_gaul_region
					is_in_region = numidia_region
				}
    		}
    		max = 1
    		save_scope_as = new_aletes_capital
    	}
		aletes_adventure_main_variable_cleanup_effect = yes
		aletes_adventure_event_variable_cleanup_effect = yes
		custom_tooltip = aletes_will_rebel_tooltip
	}
	
	option = {	# Play as Mastia
		name = flavor_mat.65.a
		hidden_effect = {
			root = { save_scope_as = aletes_origin_country_scope }
			every_character = {
				limit = {
					is_alive = yes
					prisoner = no
					has_same_family = scope:aletes_character
					employer = root
				}
				set_variable = aletes_character_family_var
			}
			scope:new_aletes_capital = {
	    		set_as_governor = scope:aletes_character
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				if = {
					limit = { 
						num_of_fortress_building < 1
						can_build_building = fortress_building 
					}
					add_building_level = fortress_building
				}
	    	}
			start_civil_war = scope:aletes_character
			scope:new_aletes_capital.owner = {
				if = {
					limit = {
						NOT = {
							primary_culture = bastetanian
						}
					}
					set_primary_culture_cleanup_effect = {
						NEW_PRIMARY_CULTURE = bastetanian
						MAKE_OLD_CULTURE_INTEGRATED = yes
					}
				}
				set_country_religion = animism
				set_country_heritage = aletes_heritage
				change_country_color = "offwhite"
				change_country_flag = MAT_REVOLT
				if = {
					limit = { is_republic = yes }
					republic_to_monarchy_law_variable_effect = yes # decide which legion law should be transferred
					change_government = despotic_monarchy
					republic_to_monarchy_law_change_effect = yes # change legion law based on variable if present
				}
				if = {
					limit = { is_monarchy = yes }
					change_government = despotic_monarchy
					switch_government_type_event_clearup_effect = yes
				}
				else = {
					change_government = despotic_monarchy
				}
				add_treasury = 500
				add_political_influence = 75
				add_manpower = 8
				add_stability_effect = yes
				set_variable = aletes_apotheosis_secured
				save_scope_as = aletes_mastiania_scope
				create_family = scope:aletes_character
			}
			every_owned_province = {
	    		limit = {
	    			is_capital = no
					OR = {
						is_in_region = baetica_region
						is_in_region = tarraconensis_region
						is_in_region = lusitania_region
						is_in_region = gallaecia_region
						is_in_region = mauretainia_region
						is_in_region = transalpine_gaul_region
						is_in_region = numidia_region
					}
	    		}
	    		set_owned_by = scope:aletes_mastiania_scope
	    		add_claim = root
	    	}
			if = {
				limit = { exists = scope:aletes_governor_scope }
				scope:aletes_governor_scope = {
					if = {
						limit = {
							is_friend = scope:aletes_governor_scope.employer.current_ruler
						}
						remove_friend = scope:aletes_governor_scope.employer.current_ruler
					}
					employer = {
						add_opinion = {
							target = scope:aletes_mastiania_scope
							modifier = enticed_our_governor
						}
					}
					show_as_tooltip = { move_country = scope:aletes_mastiania_scope }
					custom_tooltip = aletes_governor_deserts
					custom_tooltip = province_claims_enticed
					hidden_effect = {
						every_governor_state = {
							limit = {
								any_state_province = {
									state_loyalty <= 50
								}
							}
							every_state_province = {
								set_owned_by = scope:aletes_mastiania_scope
								add_claim = scope:aletes_governor_scope.employer
								save_scope_as = to_set_governor
							}
						}
					}
					hidden_effect = {
						if = {
							limit = {
								num_of_children > 0
								any_child = {
									is_adult = no
								}
							}
							add_character_modifier = {
								name = abandoned_family
								duration = -1
							}
							every_child = {
								limit = {
									is_adult = no
								}
								add_character_modifier = {
									name = absentee_father
									duration = -1
								}
							}
						}
					}
					hidden_effect = {
						remove_all_positions = yes
						move_country = scope:aletes_mastiania_scope
						remove_character_modifier = foreign_citizen
						set_as_minor_character = THIS
						set_home_country = scope:aletes_mastiania_scope
					}
					hidden_effect = {
						if = {
							limit = {
								exists = scope:to_set_governor 
							}
							scope:to_set_governor = {
								set_as_governor = scope:aletes_governor_scope
							}
						}
					}
				}
			}
	    	every_owned_province = {
	    		add_claim = scope:aletes_mastiania_scope
	    	}
			every_character = {
				limit = {
					is_alive = yes
					prisoner = no
					has_variable = aletes_character_family_var
					employer = root
				}
				remove_all_positions = yes
				move_country = scope:aletes_mastiania_scope
				remove_character_modifier = foreign_citizen
				set_family = scope:aletes_character.family 	
				remove_variable = aletes_character_family_var
			}
			mastiania_foundation_ping_effect = yes
		}
	}

	option = {	# Play as Aletes
		name = flavor_mat.65.b
		custom_tooltip = flavor_mat.65.b.tooltip
		hidden_effect = {
			current_ruler = { save_scope_as = random_aletes_civil_war_character }
			every_character = {
				limit = {
					is_alive = yes
					prisoner = no
					has_same_family = scope:random_aletes_civil_war_character
					employer = root
				}
				set_variable = random_aletes_civil_war_family_var
			}
			aletes_adventure_setting_government_effect = yes
			root = { save_scope_as = aletes_mastiania_scope }
			set_capital = scope:new_aletes_capital
			set_as_ruler = scope:aletes_character
			scope:new_aletes_capital.state = {
	    		set_state_capital = scope:new_aletes_capital
	    	}
			scope:new_aletes_capital = {
				establish_city_effect = yes
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				define_pop = {
					culture = bastetanian
					religion = animism
					type = citizen
				}
				if = {
					limit = { 
						num_of_fortress_building < 1
						can_build_building = fortress_building 
					}
					add_building_level = fortress_building
				}
	    	}
			scope:random_aletes_civil_war_character = { remove_all_positions = yes }
			start_civil_war = scope:random_aletes_civil_war_character
			change_country_name = "MASTIAN_REVOLT"
			change_country_adjective = "MAT_ADJ"
			if = {
				limit = {
					NOT = {
						primary_culture = bastetanian
					}
				}
				set_primary_culture_cleanup_effect = {
					NEW_PRIMARY_CULTURE = bastetanian
					MAKE_OLD_CULTURE_INTEGRATED = yes
				}
			}
			set_country_religion = animism
			set_country_heritage = aletes_heritage
			change_country_color = "offwhite"
			change_country_flag = MAT_REVOLT
			if = {
				limit = { is_republic = yes }
				republic_to_monarchy_law_variable_effect = yes # decide which legion law should be transferred
				change_government = despotic_monarchy
				republic_to_monarchy_law_change_effect = yes # change legion law based on variable if present
			}
			else = {
				change_government = despotic_monarchy
			}
			set_variable = playing_as_aletes_variable
			set_variable = aletes_apotheosis_secured
			save_scope_as = aletes_mastiania_scope
			scope:random_aletes_civil_war_character.employer = {
				change_country_name = "MAT"
	    		change_country_adjective = "MAT_ADJ"
				change_country_color = "mastia_country_color"
				change_country_flag = MAT
				save_scope_as = aletes_origin_country_scope
			}
			scope:aletes_original_capital = { # Ensure the capital is retained by the Legitimate Government
				if = {
					limit = {
						owner = {
							NOT = { this = scope:random_aletes_civil_war_character.employer }
						}
					}
					set_conquered_by = scope:random_aletes_civil_war_character.employer
				}
				if = {
					limit = {
						any_neighbor_province = {
							owner = scope:aletes_character.employer
							NOR = { 
								is_capital = yes
								this = scope:new_aletes_capital
							}
						}
					}
					every_neighbor_province = {
						limit = {
							owner = scope:aletes_character.employer
							NOR = { 
								is_capital = yes
								this = scope:new_aletes_capital
							}
						}
						set_conquered_by = scope:random_aletes_civil_war_character.employer
					}
				}
				if = {
					limit = { is_capital = no }
					owner = { set_capital = scope:aletes_original_capital }
					state = { set_state_capital = scope:aletes_original_capital }
				}
			}
			aletes_adventure_changing_government_effect = yes
			switch_government_type_event_clearup_effect = yes
			scope:aletes_origin_country_scope = {
				add_treasury = 500
				add_political_influence = 75
				add_manpower = 8
				add_stability_effect = yes
				set_variable = aletes_original_tag_variable
			}
			every_owned_province = {
	    		limit = {
					NOT = { THIS = scope:new_aletes_capital }
					OR = {
						is_in_region = baetica_region
						is_in_region = contestania_region
					}
	    		}
	    		set_owned_by = scope:aletes_origin_country_scope
	    		add_claim = root
	    	}
	    	every_owned_province = {
	    		add_claim = scope:aletes_origin_country_scope
	    	}
			every_character = {
				limit = {
					is_alive = yes
					prisoner = no
					has_variable = random_aletes_civil_war_family_var
					employer = root
				}
				remove_all_positions = yes
				move_country = scope:aletes_origin_country_scope
				remove_character_modifier = foreign_citizen
				set_family = scope:random_aletes_civil_war_character.family 	
				remove_variable = random_aletes_civil_war_family_var
			}
			scope:aletes_character = {
				if = {
					limit = { employer = scope:random_aletes_civil_war_character.employer }
					move_country = root
					remove_character_modifier = foreign_citizen
					family = {
						every_family_member = {
							limit = {
								prisoner = no
								employer = scope:random_aletes_civil_war_character.employer
							}
							remove_all_positions = yes
							move_country = scope:aletes_character.employer
							remove_character_modifier = foreign_citizen
							set_family = scope:aletes_character.family 
						}
						move_family = scope:aletes_character.employer
					}
				}
			}
			hidden_effect = {
				aletes_family_generation_effect = { FAMILY_CANDIDATE = aletes_character } #Scripted Effect that passes on the saved scope.
			}
			mastiania_foundation_ping_effect = yes
			set_player_country = scope:aletes_mastiania_scope
		}
	}

}

flavor_mat.66 = { 							# Mastiania Formation Ping (Informative)
	type = country_event
    title = flavor_mat.66.t
    desc = flavor_mat.66.desc
	picture = successors
	left_portrait = current_ruler
	right_portrait = scope:aletes_mastiania_scope.current_ruler
	goto_location  = scope:aletes_mastiania_scope.capital_scope

	trigger = { has_land = yes }

	option = {
		name = flavor_mat.66.a
	}
}

flavor_mat.67 = { 							# Alestes in Prison
	type = country_event
    title = flavor_mat.67.t
	desc = {
		first_valid = {
			triggered_desc = { # You are Aletes' home country
				trigger = {
					NOT = {
						has_variable = aletes_apotheosis_progress
					}
				}
				desc = flavor_mat.67.desc_1
			}
			triggered_desc = { # You are not Aletes' home country or already secured his loyalty
				trigger = {
					always = yes
				}
				desc = flavor_mat.67.desc_2
			}
		}
	}
	
	picture = greek_philosophers
	left_portrait = current_ruler
	right_portrait = scope:aletes_character

	trigger = {
		has_land = yes
	}

	immediate = {
		if = {
			limit = { NOT = { exists = scope:aletes_character } }
			char:558 = { save_scope_as = aletes_character }
		}
		if = {
			limit = {
				any_country = {
					OR = {
						has_variable = aletes_apotheosis_progress
						has_variable = aletes_apotheosis_secured
					}
					has_land = yes
				}
			}
			random_country = {
				limit = {
					OR = {
						has_variable = aletes_apotheosis_progress
						has_variable = aletes_apotheosis_secured
					}
				}
				save_scope_as = aletes_home_country_scope
			}
		}
		current_ruler = { save_scope_as = aletes_jailer }
		aletes_apotheosis_status = yes
	}
	
	option = {
		name = flavor_mat.67.a
		trigger = {
			has_variable = aletes_apotheosis_progress
		}
		custom_tooltip = flavor_mat.67.tooltip.a
		ai_chance = {
			factor = 10
			modifier = {
				current_ruler = {
					OR = {
						has_trait = suspicious
						has_trait = paranoid
						is_rival = char:558
					}
				}
				factor = 100
			}
		}
	}
	
	option = {
		name = flavor_mat.67.b
		trigger = {
			has_variable = aletes_apotheosis_progress
		}
		if = {
			limit = {
				has_variable = aletes_apotheosis_progress
			}
			change_variable = {			# You humiliated him!
				name = aletes_apotheosis_progress
				subtract = 3
			}
			custom_tooltip = aletes_loses_several_prestige_point
		}
		custom_tooltip = flavor_mat.67.tooltip.b
		root = {
			release_prisoner = { target = scope:aletes_character }
		}
		hidden_effect = {
			add_treasury = {
				value = scope:aletes_character.wealth
				divide = 3
			}
		}
		scope:aletes_character = {
			add_gold = {
				subtract = scope:aletes_character.wealth
				divide = 3
			}
		}
		show_as_tooltip = {
			add_treasury  = {
				value = scope:aletes_character.wealth
				divide = 3
			}
		}
		scope:aletes_character = { add_loyalty = aletes_humiliated_loyalty }
		hidden_effect = {
			if = {
				limit = {
					scope:aletes_character = {
						has_loyalty = imprisoned_l
					}
				}
				scope:aletes_character = {
					remove_loyalty = imprisoned_l
				}
			}
			scope:aletes_character = {
				if = {
					limit = {
						has_variable = imprisoned_manually
					}
					remove_variable = imprisoned_manually
				}
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				current_ruler = {
					OR = {
						has_trait = merciful
						has_trait = miserly
						is_friend = char:558
					}
				}
				factor = 100
			}
		}
	}
	
	option = {
		name = flavor_mat.67.c
		trigger = {
			has_variable = aletes_apotheosis_progress
		}
		custom_tooltip = flavor_mat.67.tooltip.c
		current_ruler = { add_popularity = -20 }
		add_tyranny = 10
		root = {
			release_prisoner = { target = scope:aletes_character }
		}
		seize_aletes_wealth_effect = yes
		aletes_adventure_main_variable_cleanup_effect = yes
		aletes_adventure_event_variable_cleanup_effect = yes
		set_variable = aletes_disgraced_variable
		scope:aletes_character = {
			add_loyalty = aletes_terrified_loyalty
			hidden_effect = {
				if = {
					limit = {
						has_loyalty = imprisoned_l
					}
					remove_loyalty = imprisoned_l
				}
			}
		}
		hidden_effect = { aletes_adventure_good_loyalty_cleanup_effect = yes }
		ai_chance = {
			factor = 0
			modifier = {
				current_ruler = {
					OR = {
						has_trait = cruel
						has_trait = vengeful
						is_rival = char:558
					}
				}
				factor = 100
			}
		}
	}
	
	option = {
		name = flavor_mat.67.d
		trigger = {
			NOT = { has_variable = aletes_apotheosis_progress }
		}
		hidden_effect = {
			add_treasury = {
				value = scope:aletes_character.wealth
				divide = 5
			}
		}
		scope:aletes_character = {
			add_gold = {
				subtract = scope:aletes_character.wealth
				divide = 5
			}
		}
		show_as_tooltip = {
			add_treasury = {
				value = scope:aletes_character.wealth
				divide = 5
			}
		}
		root = {
			release_prisoner = { target = scope:aletes_character }
		}
		hidden_effect = {
			if = {
				limit = {
					scope:aletes_character = {
						has_loyalty = imprisoned_l
					}
				}
				scope:aletes_character = {
					remove_loyalty = imprisoned_l
				}
			}
			if = {
				limit = {
					NOT = { scope:aletes_home_country_scope = THIS }
				}
				scope:aletes_character = {
					remove_all_positions = yes
					move_country = scope:aletes_home_country_scope
					hidden_effect = {
						remove_character_modifier = foreign_citizen
					}
				}
			}
			scope:aletes_character = {
				if = {
					limit = {
						has_variable = imprisoned_manually
					}
					remove_variable = imprisoned_manually
				}
			}
		}
	}
}