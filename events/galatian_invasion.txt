namespace = galatian_invasion

galatian_invasion.1 = { # Barbarian Rumblings
	type = country_event
	title = "galatian_invasion.1.t"
	desc = "galatian_invasion.1.desc"

	left_portrait = scope:pella_attacker.current_ruler
	left_portrait = scope:delphi_attacker.current_ruler
	left_portrait = scope:tylis_attacker.current_ruler
	right_portrait = scope:tavium_attacker.current_ruler
	right_portrait = scope:ankyra_attacker.current_ruler
	right_portrait = scope:pessinous_attacker.current_ruler
	# right_portrait = current_ruler

	picture = celtic_chiefs # gallic_clan_chiefs_discussing

	fire_only_once = yes

	trigger = {
		NOT = { has_global_variable = celtic_invasion_occurred }
		OR = {
			AND = {
				trigger_if ={
					limit = {
						c:DND = { exists = yes }
					}
					c:DND = { is_ai = yes }
				}
				trigger_if ={
					limit = {
						c:SCD = { exists = yes }
					}
					c:SCD = { is_ai = yes }
				}
				trigger_if ={
					limit = {
						c:X07 = { exists = yes }
					}
					c:X07 = { is_ai = yes }
				}
				trigger_if ={
					limit = {
						c:X08 = { exists = yes }
					}
					c:X08 = { is_ai = yes }
				}
				trigger_if ={
					limit = {
						c:X09 = { exists = yes }
					}
					c:X09 = { is_ai = yes }
				}
				trigger_if ={
					limit = {
						c:X12 = { exists = yes }
					}
					c:X12 = { is_ai = yes }
				}
			}
			has_variable = player_invasion_eligible
		}
		OR = {
			AND = {
				current_date > 455.1.1
				c:MAC = {
					NOT = { owns = 379 }
				}
			}
			c:SEL = {
				any_owned_province = {
					is_in_region = galatia_region
				}
			}
			c:EGY = {
				any_owned_province = {
					is_in_region = galatia_region
				}
			}
			c:TRE = {
				any_owned_province = {
					is_in_region = galatia_region
				}
			}
			c:MAC = {
				any_owned_province = {
					is_in_region = galatia_region
				}
			}
			c:PRY = {
				NOT = {
					any_owned_province = {
						is_in_region = galatia_region
					}
				}
			}
			current_date > 470.1.1
			has_variable = galatian_mission_flag
		}
	}

	immediate = {
		set_global_variable = {
			name = celtic_invasion_occurred
		}
		
		if ={
			limit = {
				c:DND = { exists = yes }
			}
			c:DND = {  # Dindaria
				save_scope_as = pella_attacker
			}
		} 
		# else = {
			# random_country = {
				# limit = {
					# country_culture_group = gallic
					# capital_scope = {
						# OR = {
							# is_in_region = macedonia_region
							# is_in_region = moesia_region
							# is_in_region = pannonia_region
						# }
					# }
				# }
				# save_scope_as = pella_attacker
			# }
		# }
		if ={
			limit = { # Scordiscia
				c:SCD = { exists = yes }
			}
			c:SCD = { # Dardania
				save_scope_as = delphi_attacker
			}
		}
		# else = {
			# random_country = {
				# limit = {
					# country_culture_group = gallic
					# capital_scope = {
						# OR = {
							# is_in_region = macedonia_region
							# is_in_region = moesia_region
							# is_in_region = pannonia_region
						# }
					# }
					# NOT = { this = scope:pella_attacker }
				# }
				# save_scope_as = delphi_attacker
			# }
		# }
		if ={
			limit = { # Scordiscia
				c:X12 = { exists = yes }
			}
			c:X12 = { # Dardania
				save_scope_as = tylis_attacker
			}
		}
		# else = {
			# random_country = {
				# limit = {
					# country_culture_group = gallic
					# capital_scope = {
						# OR = {
							# is_in_region = macedonia_region
							# is_in_region = moesia_region
							# is_in_region = pannonia_region
						# }
					# }
					# NOR = {
						# this = scope:pella_attacker
						# this = scope:delphi_attacker
					# }
				# }
				# save_scope_as = delphi_attacker
			# }
		# }
		if ={
			limit = {
				c:X09 = { exists = yes }
			}
			c:X09 = { # Trocmeria
				save_scope_as = tavium_attacker
			}
		}
		# else = {
			# random_country = {
				# limit = {
					# country_culture_group = gallic
					# capital_scope = {
						# OR = {
							# is_in_region = macedonia_region
							# is_in_region = moesia_region
							# is_in_region = pannonia_region
						# }
					# }
					# NOR = {
						# this = scope:pella_attacker
						# this = scope:delphi_attacker
					# }
				# }
				# save_scope_as = phrygia_attacker
			# }
		# }
		if ={
			limit = {
				c:X08 = { exists = yes }
			}
			c:X08 = { # Tolistobogia
				save_scope_as = pessinous_attacker
			}
		}
		# else = {
			# random_country = {
				# limit = {
					# country_culture_group = gallic
					# capital_scope = {
						# OR = {
							# is_in_region = macedonia_region
							# is_in_region = moesia_region
							# is_in_region = pannonia_region
						# }
					# }
					# NOR = {
						# this = scope:pella_attacker
						# this = scope:delphi_attacker
					# }
				# }
				# save_scope_as = phrygia_attacker_2
			# }
		# }
		if ={
			limit = {
				c:X07 = { exists = yes }
			}
			c:X07 = { # Tectosagia
				save_scope_as = ankyra_attacker
			}
		}
		# else = {
			# random_country = {
				# limit = {
					# country_culture_group = gallic
					# capital_scope = {
						# OR = {
							# is_in_region = macedonia_region
							# is_in_region = moesia_region
							# is_in_region = pannonia_region
						# }
					# }
					# NOR = {
						# this = scope:pella_attacker
						# this = scope:delphi_attacker
					# }
				# }
				# save_scope_as = phrygia_attacker
			# }
		# }
	}

	option = {
		name = galatian_invasion.1.a
	}

	after = {
		
		set_global_variable = {
			name = celtic_invasion_occurred
			# value = 1
		}

		if = {
			limit = {
				scope:pella_attacker = {
					exists = yes
					# is_ai = yes
				}
			}
			random_country = {
				limit = { owns = 379 } # Pella
				save_scope_as = pella_defender
			}
			scope:pella_defender ={
				trigger_event = {
					id = galatian_invasion.10
					days = 30
				}
			}
		}
		if = {
			limit = {
				scope:delphi_attacker = {
					exists = yes
					# is_ai = yes
				}
			}
			random_country = {
				limit = { owns = 424 } # Delphi
				save_scope_as = delphi_defender
			}
			scope:delphi_defender ={
				trigger_event = {
					id = galatian_invasion.20
					days = 60
				}
			}
		}
		if = {
			limit = {
				scope:tylis_attacker = {
					exists = yes
					# is_ai = yes
				}
			}
			random_country = {
				limit = { owns = 480 } # Mesembria
				save_scope_as = tylis_defender
			}
			scope:tylis_defender ={
				trigger_event = {
					id = galatian_invasion.30
					days = 75
				}
			}

		}
		
		if = {
			limit = {
				NOT = { # verifies that special player events will not occur
					any_country = {
						has_variable =  player_invasion_eligible
					}
				}
			}
			# if = {
				# limit = {
					# scope:pella_attacker = {
						# exists = yes
					# }
				# }
				# trigger_event = {
					# id = galatian_invasion.10
					# days = 30

			# if = {
				# limit = {
					# scope:pessinous_attacker = {
						# exists = yes
						# is_ai = yes
					# }
				# }
				# trigger_event = {
					# id = galatian_invasion.40
					# days = 90
				# }
			# }
			# if = {
				# limit = {

					# scope:delphi_attacker = {
						# exists = yes
					# }
				# }
				# trigger_event = {
					# id = galatian_invasion.20
					# days = 60
					# scope:ankyra_attacker = {
						# exists = yes
						# is_ai = yes
					# }
				# }
				# trigger_event = {
					# id = galatian_invasion.50
					# days = 90
				# }
			# }
			# if = {
				# limit = {
					# scope:tylis_attacker = {
						# exists = yes
					# }
				# }
				# trigger_event = {
					# id = galatian_invasion.30
					# days = 75
				# }
			# }
					# scope:tavium_attacker = {
						# exists = yes
						# is_ai = yes
					# }
				# }
				# trigger_event = {
					# id = galatian_invasion.60
					# days = 90
				# }
			# }
			if = {
				limit = {
					scope:ankyra_attacker = { exists = yes }
				}
				scope:ankyra_attacker = {
					trigger_event = {
						id = galatian_invasion.5
						days = 89
					}
				}
			}
			else_if = {
				limit = {
					scope:ankyra_attacker = { exists = no }
					scope:tavium_attacker = { exists = yes }
				}
				scope:tavium_attacker = {
					trigger_event = {
						id = galatian_invasion.5
						days = 89
					}
				}
			}
			else_if = {
				limit = {
					scope:ankyra_attacker = { exists = no }
					scope:tavium_attacker = { exists = no }
					scope:pessinous_attacker = { exists = yes }
				}
				scope:pessinous_attacker = {
					trigger_event = {
						id = galatian_invasion.5
						days = 89
					}
				}
			}
		}
		else = {
			# if = {
				# limit = {
					# scope:pella_attacker = {
						# exists = yes
					# }
				# }
				# random_country = {
					# limit = { owns = 379 } # Pella
					# save_scope_as = pella_defender
				# }
				# scope:pella_defender ={
					# trigger_event = {
						# id = galatian_invasion.10
						# days = 30
					# }
				# }
			# }
			# if = {
				# limit = {
					# scope:delphi_attacker = {
						# exists = yes
					# }
				# }
				# random_country = {
					# limit = { owns = 424 } # Delphi
					# save_scope_as = delphi_defender
				# }
				# scope:delphi_defender ={
					# trigger_event = {
						# id = galatian_invasion.20
						# days = 60
					# }
				# }
			# }
			# if = {
				# limit = {
					# scope:tylis_attacker = {
						# exists = yes
					# }
				# }
				# random_country = {
					# limit = { owns = 480 } # Mesembria
					# save_scope_as = tylis_defender
				# }
				# scope:tylis_defender ={
					# trigger_event = {
						# id = galatian_invasion.30
						# days = 75
					# }
				# }
			# }
			if = {
				limit = {
					has_variable = player_invasion_eligible
				}
				trigger_event = {
					id = galatian_invasion.2
					days = 15
				}
			}
				# limit = {
					# scope:pessinous_attacker = {
						# exists = yes
						# is_ai = yes
					# }
				# }
				# random_country = {
					# limit = { owns = 1941 } # Synnada
					# save_scope_as = pessinous_defender
				# }
				# scope:pessinous_defender = {
					# trigger_event = {
						# id = galatian_invasion.40
						# days = 90
					# }
				# }
			# }
		}
		# if = {
			# limit = {
				# scope:ankyra_attacker = {
					# exists = yes
					# is_ai = yes
				# }
			# }
			# trigger_event = {
				# id = galatian_invasion.40
				# days = 93
			# }
		# }
		# if = {
			# limit = {
				# scope:tavium_attacker = {
					# exists = yes
					# is_ai = yes
				# }
			# }
			# trigger_event = {
				# id = galatian_invasion.40
				# days = 96
			# }
		# }
	}
}

galatian_invasion.2 = { # Volcae Brethren
	type = country_event
	title = "galatian_invasion.2.t"
	desc = "galatian_invasion.2.desc"
	# picture = elephant_battle
	left_portrait = scope:tavium_attacker.current_ruler
	left_portrait = scope:ankyra_attacker.current_ruler
	right_portrait = scope:pessinous_attacker.current_ruler

	picture = celtic_diplomacy

	goto_location = root

	option = {
		name = galatian_invasion.2.a

		add_political_influence = -40
		add_treasury = -20

		set_variable = {
			name = volcae_brethren
			value = 1
		}

		# if = {
			# limit = {
				# any_country = {
					# limit = {
						# OR = {
							# tag = X07
							# tag = X08
							# tag = X09
						# }
						# war = yes
					# }
				# }
			# }
			# every_country = {
				# limit = {
					# OR = {
						# tag = X07
						# tag = X08
						# tag = X09
					# }
					# war = yes
				# }
				# set_variable = {
					# name = balkan_fighting
					# value = 1
				# }
			# }
		# }
		if = {
			limit = {
				any_current_war = {
					any_war_participant = {
						OR = {
							tag = X07
							tag = X08
							tag = X09
						}
					}
				}
			}
			every_current_war = {
				limit = {
					any_war_participant = {
						OR = {
							tag = X07
							tag = X08
							tag = X09
						}
					}
				}
				force_white_peace = THIS
			}

		}
	}

	# option = {
		# name = galatian_invasion.2.b
	# }

	after = {
		trigger_event = {
			id = galatian_invasion.3
			days = 30
		}
	}

}

galatian_invasion.3 = { # Choosing a Target
	type = country_event
	title = "galatian_invasion.3.t"
	desc = "galatian_invasion.3.desc"
	# picture = elephant_battle
	left_portrait = scope:tavium_attacker.current_ruler
	left_portrait = scope:ankyra_attacker.current_ruler
	right_portrait = scope:pessinous_attacker.current_ruler
	picture = looting #
	goto_location = root
	
	
	# option = { # Asia
		# name = galatian_invasion.3.a	
		# trigger_event = {
			# id = galatian_invasion.4
			# days = 44
		# }
	# }
	
	option = { # Phrygia
		name = galatian_invasion.3.b
		trigger_event = {
			id = galatian_invasion.5
			days = 44
		}
	}

	# option = {
		# name = galatian_invasion.3.c
		# trigger_event = {
			# id = galatian_invasion.6
			# days = 44
		# }
	# }

}

galatian_invasion.4 = { # Asian Targets
	type = country_event
	title = "galatian_invasion.4.t"
	desc = "galatian_invasion.4.desc"

	left_portrait = scope:pessinous_defender.current_ruler
	right_portrait = current_ruler
	picture = elephant_battle #city_siege
	goto_location = p:292

	fire_only_once = yes

	immediate = {

		set_global_variable = {
			name = asian_invasion_flag
			value = 1
		}

		random_country = {
			limit = {
				any_owned_province = { province_id = 1945 } # Colossae
			}
			save_scope_as = tavium_defender
		}
		p:1945 = {
			save_scope_as = galatian_target_scope_1
		}

		random_country = {
			limit = {
				any_owned_province = { province_id = 292 } # Sardis
			}
			save_scope_as = ankyra_defender
		}
		p:292 = {
			save_scope_as = galatian_target_scope_2
		}

		random_country = {
			limit = {
				any_owned_province = { province_id = 278 } # Pergamon
			}
			save_scope_as = pessinous_defender
		}
		p:278 = {
			save_scope_as = galatian_target_scope_3
		}
	}

	option = {
		name = galatian_invasion.4.a

		scope:tavium_defender = {
			trigger_event = {
				id = galatian_invasion.40
				days = 1
			}
		}

		scope:ankyra_defender = {
			trigger_event = {
				id = galatian_invasion.50
				days = 1
			}
		}

		scope:pessinous_defender = {
			trigger_event = {
				id = galatian_invasion.60
				days = 1
			}
		}
	}

}

galatian_invasion.5 = { # Phrygian Targets
	type = country_event
	title = "galatian_invasion.5.t"
	desc = "galatian_invasion.5.desc"

	left_portrait = scope:tavium_attacker.current_ruler
	left_portrait = scope:ankyra_attacker.current_ruler
	left_portrait = scope:pessinous_attacker.current_ruler
	right_portrait = scope:tavium_defender.current_ruler
	right_portrait = scope:ankyra_defender.current_ruler
	right_portrait = scope:pessinous_defender.current_ruler
	picture = elephant_battle #city_siege
	goto_location = p:194
		# hidden = yes

	fire_only_once = yes
	
	trigger = {
		# OR = {
			# owns = 189
			# has_variable = player_invasion_eligible
		# }
	}

	immediate = {

		set_global_variable = {
			name = phrygian_invasion_flag
			value = 1
		}
		
		# if = {
			# limit = {
				# p:194 = { has_siege = no }
			# }
			p:194 = {
				save_scope_as = galatian_target_scope_1
			}
		# }
		# else = {
			# random_owned_province = {
				# limit = {
					# is_in_area = galatia_trocmi_area
					# has_siege = no
				# }
				# save_scope_as = galatian_target_scope_1
			# }
		# }
		random_country = {
			limit = {
				any_owned_province = {
					this = scope:galatian_target_scope_1
					# province_id = 194
				}
			}
			save_scope_as = tavium_defender # defending Ankyra
		}
		
		# if = {
			# limit = {
				# p:189 = { has_siege = no }
			# }
			p:189 = {
				save_scope_as = galatian_target_scope_2
			}
		# }
		# else = {
			# random_owned_province = {
				# limit = {
					# is_in_area = galatia_area
					# has_siege = no
				# }
				# save_scope_as = galatian_target_scope_2
			# }
		# }
		random_country = {
			limit = {
				any_owned_province = {
					this = scope:galatian_target_scope_2
					# province_id = 189
				}
			}
			save_scope_as = ankyra_defender # defending Gordion
		}
		
		# if = {
			# limit = {
				# p:1941 = { has_siege = no }
			# }
			p:1941 = {
				save_scope_as = galatian_target_scope_3
			}
		# }
		# else = {
			# random_owned_province = {
				# limit = {
					# is_in_area = phrygia_parorea_area
					# has_siege = no
				# }
				# save_scope_as = galatian_target_scope_3
			# }
		# }
		random_country = {
			limit = {
				any_owned_province = {
					this = scope:galatian_target_scope_3
					# province_id = 1941
				}
			}
			save_scope_as = pessinous_defender # defending Synnada
		}
	}

	option = {
		name = galatian_invasion.5.a

		scope:tavium_defender = {
			trigger_event = {
				id = galatian_invasion.40
				days = 1
			}
		}

		scope:ankyra_defender = {
			trigger_event = {
				id = galatian_invasion.50
				days = 1
			}
		}

		scope:pessinous_defender = {
			trigger_event = {
				id = galatian_invasion.60
				days = 1
			}
		}
	}

}

galatian_invasion.6 = { # Cappadocian Targets
	type = country_event
	title = "galatian_invasion.6.t"
	desc = "galatian_invasion.6.desc"
	# picture = elephant_battle
	# left_portrait = scope:pella_attacker.current_ruler
	# right_portrait = scope:pella_defender.current_ruler
	# picture = city_siege #walled_city_under_siege
	# goto_location = root
		hidden = yes

	immediate = {

		set_global_variable = {
			name = cappadocian_invasion_flag
			value = 1
		}

		random_country = {
			limit = {
				any_owned_province = { province_id = 194 }
			}
			save_scope_as = tavium_defender # defending Ankyra
		}

		random_country = {
			limit = {
				any_owned_province = { province_id = 189 }
			}
			save_scope_as = ankyra_defender # defending Gordion
		}

		random_country = {
			limit = {
				any_owned_province = { province_id = 1941 }
			}
			save_scope_as = pessinous_defender # defending Synnada
		}
	}

	option = {

		scope:tavium_defender = {
			trigger_event = {
				id = galatian_invasion.40
				days = 1
			}
		}

		scope:ankyra_defender = {
			trigger_event = {
				id = galatian_invasion.50
				days = 1
			}
		}

		scope:pessinous_defender = {
			trigger_event = {
				id = galatian_invasion.60
				days = 1
			}
		}
	}

}

galatian_invasion.10 = {
	type = country_event
	title = "galatian_invasion.10.t"
	desc = "galatian_invasion.10.desc"
	# picture = elephant_battle
	left_portrait = scope:pella_attacker.current_ruler
	right_portrait = scope:pella_defender.current_ruler
	picture = city_siege #walled_city_under_siege
	goto_location = root

	fire_only_once = yes 
	
	trigger = {
		owns = 379
	}

	immediate = { # invade

		random_country = {
			limit = {
				owns = 379
			}
			save_scope_as = pella_defender
		}

		scope:pella_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:379
				target = scope:pella_defender
			}
			create_unit = {
				navy = no
				location = p:384
				commander = scope:pella_attacker.current_ruler
				while = {
					count = 39
					add_subunit = light_infantry
				}
				while = {
					count = 10
					add_subunit = chariots
				}
				add_food = 50
				add_morale = 2
			}
			# save_scope_as = first_gauls
		}

		random_current_war = {
			limit = {
				any_war_attacker = { this = scope:pella_attacker }
				any_war_defender = { this = scope:pella_defender }
			}
			save_scope_as = first_galatian_war_scope
		}
	}

	option = {
		name = galatian_invasion.10.a
	}

	# option = {
		# name = galatian_invasion.2.b #

	# }

	after = {

		if = {
			limit = {
				NOT = {
					c:TRE = { owns = 379 }
				}
			}
			c:TRE = {
				trigger_event = {
					id = galatian_invasion.11
					days = 1
				}
			}
		}

		every_country = {
			limit = {
				OR = {
					country_culture_group = hellenic
					# has_variable = player_invasion_eligible
				}
			}
			trigger_event = {
				id = galatian_invasion.12
				days = 3
			}
		}

	}

}

galatian_invasion.11 = { # Help from Thrace
	type = country_event
	title = "galatian_invasion.11.t"
	desc = "galatian_invasion.11.desc"

	left_portrait = scope:pella_attacker.current_ruler
	right_portrait = scope:pella_defender.current_ruler
	right_portrait = current_ruler
	# picture = looting #soldiers look roman
	picture = city_siege # walled_city_under_siege
	# picture = elephant_battle

	trigger = {
		tag = TRE
		is_ai = no
	}

	# immediate = {

	# }

	option = {
		name = galatian_invasion.11.a

		add_to_war = {
			target = scope:first_galatian_war_scope
			leader = no
			attacker = no
		}

	}

	option = {
		name = galatian_invasion.11.b

	}

}

galatian_invasion.12 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.12.t"
	desc = "galatian_invasion.12.desc"
	# picture = looting #soldiers look roman
	# picture = elephant_battle

	left_portrait = scope:pella_attacker.current_ruler
	right_portrait = scope:pella_defender.current_ruler
	picture = city_siege

	trigger = {
		# country_culture_group = hellenic
		NOT = {	owns = 379 }
		NOT = { tag = TRE }
	}

	# immediate = {

	# }

	option = {
		name = galatian_invasion.12.a
	}

}

# .13 for peace treaty

# galatian_invasion.14 = { # Setting - Start Task
	# type = country_event
	# title = "galatian_invasion.13.t"
	# desc = "galatian_invasion.13.desc"
	# picture = gallic_village_scene # aka celtic_village # too serene
	# right_portrait = current_ruler

	# fire_only_once = yes

	# trigger = {
		# country_culture_group = gallic
		# any_owned_province = {
			# is_in_region = macedonia_region
		# }
		# is_ai = yes
	# }

	# immediate = {

		# random_country = {
			# limit = {
				# country_culture_group = gallic
				# any_owned_province = {
					# is_in_region = macedonia_region
				# }
				# is_ai = yes
			# }
			# save_scope_as = migrating_nation
		# }
	# }

	# option = {
		# name = galatian_invasion.14.a

		# scope:migrating_nation = {
			# while = {
				# count = { 20 }
				# if = {
					# limit = {
						# NOR = { has_variable = pella_chosen_city }
						# any_owned_province = {
							# OR = {
								# is_in_region = moesia_region
								# is_in_region = illyria_region
								# is_in_region = pannonia_region
								# is_in_region = dacia_region
							# }
							# province_dominant_culture_group = gallic
						# }
					# }
					# random_owned_province = {
						# limit = {
							# NOT = { has_variable = pella_chosen_city }
							# OR = {
								# is_in_region = moesia_region
								# is_in_region = illyria_region
								# is_in_region = pannonia_region
								# is_in_region = dacia_region
							# }
							# province_dominant_culture_group = gallic
						# }
						# set_variable = pella_chosen_city

						# trigger_event = {
							# id = galatian_invasion.15
							# days = 3
						# }
					# }
				# }
			# }
		# }
	# }

# }


# galatian_invasion.15 = { # Settling
    # type = province_event
    # hidden = yes


	# trigger = {

	# }

	# immediate = {

		# random_ownable_province = {
			# limit = {
				# is_in_region = macedonia_region
				# trigger_if = {
					# limit = {
						# exists = owner
					# }
					# owner = scope:migrating_nation
				# }
			# }
			# weight = {
				# modifier = {
					# factor = 15
					# total_population < 15
				# }
				# modifier = {
					# factor = 15
					# total_population < 10
				# }
				# modifier = {
					# factor = 5
					# is_capital = yes
				# }
				# modifier = {
					# factor = 5
					# is_state_capital = yes
				# }
				# modifier = {
					# factor = 3
					# total_population < population_cap
				# }
				# modifier = {
					# factor = 0.005
					# total_population > population_cap
				# }
			# }
			# save_scope_as = new_city
		# }


		# while = {
			# count = { 15 20 }
			# if = {
				# limit = {
					# any_pops_in_province = {
						# pop_culture_group = gallic
					# }
				# }
				# random_pops_in_province = {
					# limit = {
						# pop_culture_group = gallic
					# }
					# move_pop = scope:new_city
				# }
				# if = {
					# limit = {
						# has_variable = galatian_pop_move_variable
					# }
					# change_variable = {
						# name = galatian_pop_move_variable
						# add = 1
					# }
				# }
				# else = {
					# set_variable = {
						# name = galatian_pop_move_variable
						# value = 1
					# }
				# }
				# scope:new_city = {
					# if = {
						# limit = {
							# has_variable = galatian_pop_move_variable
						# }
						# change_variable = {
							# name = galatian_pop_move_variable
							# add = 1
						# }
					# }
					# else = {
						# set_variable = {
							# name = galatian_pop_move_variable
							# value = 1
						# }
					# }
				# }
			# }
		# }
		# if = {
			# limit = {
				# has_variable = pella_chosen_city
			# }
			# remove_variable = pella_chosen_city
		# }

	# }

	# option = {
		# name = galatian_invasion.15.a
	# }

# }


galatian_invasion.20 = { # Second Wave
	type = country_event
	title = "galatian_invasion.20.t"
	desc = "galatian_invasion.20.desc"

	left_portrait = scope:delphi_attacker.current_ruler
	right_portrait = scope:delphi_defender.current_ruler
	picture = city_siege #walled_city_under_siege #aka city_siege
	goto_location = root

	fire_only_once = yes 

	trigger = {
		owns = 424
	}

	immediate = { #  invade

		random_country = {
			limit = {
				any_owned_province = { province_id = 424 }
			}
			save_scope_as = delphi_defender
		}
		if = {
			limit = {
				scope:delphi_defender = {
					NOT = { owns = 475 }
				}
			}
			random_country = {
				limit = {
					any_owned_province = { province_id = 475 }
				}
				save_scope_as = passerby_one
			}
		}
		if = {
			limit = {
				NOR = {
					scope:delphi_defender = { owns = 399 }
					trigger_if = {
						limit = {exists = scope:passerby_one }
						scope:passerby_one = { owns = 399 }
					}
				}
			}
			random_country = {
				limit = {
					any_owned_province = { province_id = 399 }
				}
				save_scope_as = passerby_two
			}
		}
		if = {
			limit = {
				NOR = {
					scope:delphi_defender = { owns = 469 }
					trigger_if = {
						limit = {exists = scope:passerby_one }
						scope:passerby_one = { owns = 469 }
					}
				}
			}
			random_country = {
				limit = {
					any_owned_province = { province_id = 469 }
				}
				save_scope_as = passerby_three
			}
		}

		scope:delphi_attacker = {
			# trigger_if = {
			if = {
				limit = { exists = scope:passerby_one }
				add_military_access = scope:passerby_one
			}
			# trigger_if = {
			if = {
				limit = { exists = scope:passerby_two }
				add_military_access = scope:passerby_two
			}
			if = {
				limit = { exists = scope:passerby_two }
				add_military_access = scope:passerby_three
			}
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:424
				target = scope:delphi_defender
			}
			create_unit = {
				navy = no
				location = p:469
				commander = scope:delphi_attacker.current_ruler
				while = {
					count = 39
					add_subunit = light_infantry
				}
				while = {
					count = 10
					add_subunit = chariots
				}
				add_food = 50
				add_morale = 2
			}
			# save_scope_as = second_gauls
		}

		random_current_war = {
			limit = {
				any_war_attacker = { this = scope:delphi_attacker }
				any_war_defender = { this = scope:delphi_defender }
			}
			save_scope_as = second_galatian_war_scope
		}

	}

	option = {
		name = galatian_invasion.20.a

		random_country = {
			limit = {
				capital_scope = {
					OR = {
						is_in_area = boeotia_area
						is_in_area = central_greece_area
						is_in_area = aetolia_area
					}
				}
				is_subject = no
				NOT = { owns = 424 }
			}
			trigger_event = {
				id = galatian_invasion.21
				days = 1
			}
		}
	}

	after = {

		every_country = {
			limit = {
				capital_scope = {
					OR = {
						is_in_area = boeotia_area
						is_in_area = central_greece_area
						is_in_area = aetolia_area
					}
				}
				NOT = { owns = 424 }
			}
			trigger_event = {
				id = galatian_invasion.21
				days = 1
			}
		}
		every_country = {
			limit = {
				country_culture_group = hellenic
			}
			trigger_event = {
				id = galatian_invasion.22
				days = 3
			}
		}
	}

}

galatian_invasion.21 = { # Help from Greeks
	type = country_event
	title = "galatian_invasion.21.t"
	desc = "galatian_invasion.21.desc"

	left_portrait = scope:delphi_attacker.current_ruler
	right_portrait = scope:delphi_defender.current_ruler
	right_portrait = current_ruler
	picture = city_siege #walled_city_under_siege #aka city_siege
	goto_location = root

	trigger = {
		is_subject = no
		NOT = { owns = 424 }
		NOT = { war_with = scope:delphi_attacker }
	}

	immediate = {

		# random_country = {
			# limit = { this = root }
			# save_scope_as = friend_of_delphi
		# }
	}

	option = {
		name = galatian_invasion.21.a

		add_to_war = {
			target = scope:second_galatian_war_scope
			leader = no
			attacker = no
		}
		set_variable = {
			name = defender_of_delphi
			value = 1
		}
	}

}

galatian_invasion.22 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.22.t"
	desc = "galatian_invasion.22.desc"

	left_portrait = scope:delphi_attacker.current_ruler
	right_portrait = scope:delphi_defender.current_ruler
	picture = city_siege #walled_city_under_siege

	trigger = {
		country_culture_group = hellenic
		NOT = {	has_variable = defender_of_delphi }
		NOT = { owns = 424 }
	}

	# immediate = {

	# }

	option = {
		name = galatian_invasion.22.a
	}

}

# galatian_invasion.24 = { # Setting - Start Task
	# type = country_event
	# title = "galatian_invasion.24.t"
	# desc = "galatian_invasion.24.desc"
	# picture = gallic_village_scene # aka celtic_village # too serene
	# right_portrait = current_ruler

	# fire_only_once = yes

	# trigger = {
		# country_culture_group = gallic
		# any_owned_province = {
			# is_in_region = greece_region
		# }
		# is_ai = yes
	# }

	# immediate = {

		# random_country = {
			# limit = {
				# country_culture_group = gallic
				# any_owned_province = {
					# is_in_region = greece_region
				# }
				# is_ai = yes
			# }
			# save_scope_as = migrating_nation
		# }
	# }

	# option = {
		# name = galatian_invasion.23.a

		# scope:migrating_nation = {
			# while = {
				# count = { 20 }
				# if = {
					# limit = {
						# NOR = { has_variable = delphi_chosen_city }
						# any_owned_province = {
							# OR = {
								# is_in_region = moesia_region
								# is_in_region = illyria_region
								# is_in_region = pannonia_region
								# is_in_region = dacia_region
							# }
							# province_dominant_culture_group = gallic
						# }
					# }
					# random_owned_province = {
						# limit = {
							# NOT = { has_variable = delphi_chosen_city }
							# OR = {
								# is_in_region = moesia_region
								# is_in_region = illyria_region
								# is_in_region = pannonia_region
								# is_in_region = dacia_region
							# }
							# province_dominant_culture_group = gallic
						# }
						# set_variable = delphi_chosen_city

						# trigger_event = {
							# id = galatian_invasion.25
							# days = 3
						# }
					# }
				# }
			# }
		# }
	# }

# }


# galatian_invasion.25 = { # Settling - Settling
    # type = province_event
    # hidden = yes

	# trigger = {

	# }

	# immediate = {

			# random_ownable_province = {
				# limit = {
					# is_in_region = greece_region
					# trigger_if = {
						# limit = {
							# exists = owner
						# }
						# owner = scope:migrating_nation
					# }
				# }
				# weight = {
					# modifier = {
						# factor = 15
						# total_population < 15
					# }
					# modifier = {
						# factor = 15
						# total_population < 10
					# }
					# modifier = {
						# factor = 5
						# is_capital = yes
					# }
					# modifier = {
						# factor = 5
						# is_state_capital = yes
					# }
					# modifier = {
						# factor = 3
						# total_population < population_cap
					# }
					# modifier = {
						# factor = 0.005
						# total_population > population_cap
					# }
				# }
				# save_scope_as = new_city
			# }

		# while = {
			# count = { 15 20 }
			# if = {
				# limit = {
					# any_pops_in_province = {
						# pop_culture_group = gallic
					# }
				# }
				# random_pops_in_province = {
					# limit = {
						# pop_culture_group = gallic
					# }
					# move_pop = scope:new_city
				# }
				# if = {
					# limit = {
						# has_variable = galatian_pop_move_variable
					# }
					# change_variable = {
						# name = galatian_pop_move_variable
						# add = 1
					# }
				# }
				# else = {
					# set_variable = {
						# name = galatian_pop_move_variable
						# value = 1
					# }
				# }
				# scope:new_city = {
					# if = {
						# limit = {
							# has_variable = galatian_pop_move_variable
						# }
						# change_variable = {
							# name = galatian_pop_move_variable
							# add = 1
						# }
					# }
					# else = {
						# set_variable = {
							# name = galatian_pop_move_variable
							# value = 1
						# }
					# }
				# }
			# }
		# }
		# if = {
			# limit = {
				# has_variable = pella_chosen_city
			# }
			# remove_variable = pella_chosen_city
		# }

	# }

	# option = {
		# name = galatian_invasion.25.a

	# }

# }

galatian_invasion.30 = {
	type = country_event
	title = "galatian_invasion.30.t"
	desc = "galatian_invasion.30.desc"

	left_portrait = scope:tylis_attacker.current_ruler
	right_portrait = scope:tylis_defender.current_ruler
	picture = city_siege #walled_city_under_siege #aka city_siege

	goto_location = root

	fire_only_once = yes 


	trigger = {
		owns = 480
	}

	immediate = { # invade

		random_country = {
			limit = {
				owns = 480
			}
			save_scope_as = tylis_defender
		}

		scope:tylis_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:480
				target = scope:tylis_defender
			}
			create_unit = {
				navy = no
				location = p:480
				commander = scope:tylis_attacker.current_ruler
				while = {
					count = 39
					add_subunit = light_infantry
				}
				while = {
					count = 10
					add_subunit = chariots
				}
				add_food = 50
				add_morale = 2
			}
			# save_scope_as = first_gauls
		}

		random_current_war = {
			limit = {
				any_war_attacker = { this = scope:tylis_attacker }
				any_war_defender = { this = scope:tylis_defender }
			}
			save_scope_as = tylis_war_scope
		}
	}

	option = {
		name = galatian_invasion.30.a
	}

	# option = {
		# name = galatian_invasion.2.b #

	# }

	after = {

		every_country = {
			limit = {
				country_culture_group = hellenic
			}
			trigger_event = {
				id = galatian_invasion.32
				days = 3
			}
		}

	}

}

# 31 skipped for numerical consistency

galatian_invasion.32 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.32.t"
	desc = "galatian_invasion.32.desc"

	left_portrait = scope:tylis_attacker.current_ruler
	right_portrait = scope:tylis_defender.current_ruler
	picture = city_siege

	trigger = {
		country_culture_group = hellenic
		NOT = {	owns = 480 }
	}

	# immediate = {

	# }

	option = {
		name = galatian_invasion.32.a
	}

}

# 33 for scripted peace

galatian_invasion.34 = { # Setting - Start Task
	type = country_event
	title = "galatian_invasion.44.t"
	desc = "galatian_invasion.44.desc"

	right_portrait = current_ruler
	picture = celtic_village

	fire_only_once = yes

	trigger = {
		country_culture_group = gallic
		any_owned_province = {
			is_in_region = thrace_region
		}
		is_ai = yes
	}

	immediate = {

		random_country = {
			limit = {
				country_culture_group = gallic
				any_owned_province = {
					is_in_region = thrace_region
				}
				is_ai = yes
			}
			save_scope_as = migrating_nation
		}
	}

	option = {
		name = galatian_invasion.44.a

		scope:migrating_nation = {
			while = {
				count = { 15 20 }
				if = {
					limit = {
						NOR = { has_variable = tylis_chosen_city }
						any_owned_province = {
							OR = {
								is_in_region = moesia_region
								is_in_region = illyria_region
								is_in_region = pannonia_region
								is_in_region = dacia_region
							}
							province_dominant_culture_group = gallic
						}
					}
					random_owned_province = {
						limit = {
							NOT = { has_variable = tylis_chosen_city }
							OR = {
								is_in_region = moesia_region
								is_in_region = illyria_region
								is_in_region = pannonia_region
								is_in_region = dacia_region
							}
							province_dominant_culture_group = gallic
						}
						set_variable = tylis_chosen_city

						trigger_event = {
							id = galatian_invasion.35
							days = 3
						}
					}
				}
			}
		}
	}

}


galatian_invasion.35 = { # Settling - Settling
    type = province_event
    hidden = yes

	trigger = {

	}

	immediate = {

		random_ownable_province = {
			limit = {
				is_in_region = thrace_region
				trigger_if = {
					limit = {
						exists = owner
					}
					owner = scope:migrating_nation
				}
			}
			weight = {
				modifier = {
					factor = 15
					total_population < 15
				}
				modifier = {
					factor = 15
					total_population < 10
				}
				modifier = {
					factor = 5
					is_capital = yes
				}
				modifier = {
					factor = 5
					is_state_capital = yes
				}
				modifier = {
					factor = 3
					total_population < population_cap
				}
				modifier = {
					factor = 0.005
					total_population > population_cap
				}
			}
			save_scope_as = new_city
		}

		while = {
			count = { 15 20 }
			if = {
				limit = {
					any_pops_in_province = {
						pop_culture_group = gallic
					}
				}
				random_pops_in_province = {
					limit = {
						pop_culture_group = gallic
					}
					move_pop = scope:new_city
				}
				if = {
					limit = {
						has_variable = galatian_pop_move_variable
					}
					change_variable = {
						name = galatian_pop_move_variable
						add = 1
					}
				}
				else = {
					set_variable = {
						name = galatian_pop_move_variable
						value = 1
					}
				}
				scope:new_city = {
					if = {
						limit = {
							has_variable = galatian_pop_move_variable
						}
						change_variable = {
							name = galatian_pop_move_variable
							add = 1
						}
					}
					else = {
						set_variable = {
							name = galatian_pop_move_variable
							value = 1
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_variable = tylis_chosen_city
			}
			remove_variable = tylis_chosen_city
		}

	}

	option = {
		name = galatian_invasion.45.a

	}

}

galatian_invasion.40 = { # Anatolia invasion
	type = country_event
	title = "galatian_invasion.40.t"
	desc = "galatian_invasion.40.desc"
	# picture = looting #soldiers look roman
	# picture = walled_city_under_siege #aka city_siege

	left_portrait = scope:pessinous_attacker.current_ruler
	left_portrait = scope:ankyra_attacker.current_ruler
	left_portrait = scope:tavium_attacker.current_ruler
	right_portrait = scope:pessinous_defender.current_ruler
	right_portrait = scope:ankyra_defender.current_ruler
	right_portrait = scope:tavium_defender.current_ruler
	picture = elephant_battle

	goto_location = root

	fire_only_once = yes 

	trigger = {

		# trigger_if = {
			# limit = {
				# NOT = {
					# any_country = {
						# has_variable = player_invasion_eligible
					# }
				# }
			# }
		# OR = {
			# owns = 1941 # Synnada
			# owns = 189 # Gordion
			# owns = 194 # Ankyra
		# }
		# }
	}

	immediate = { #  invade

		# random_country = {
			# limit = {
				# any_owned_province = { province_id = 194 }
			# }
			# save_scope_as = tavium_defender # defending Ankyra
		# }

		# random_country = {
			# limit = {
				# any_owned_province = { province_id = 189 }
			# }
			# save_scope_as = ankyra_defender # defending Gordion
		# }

		# random_country = {
			# limit = {
				# any_owned_province = { province_id = 1941 }
			# }
			# save_scope_as = pessinous_defender # defending Synnada
		# }

		# scope:pessinous_attacker = {
			# declare_war_with_wargoal = {
				# war_goal = conquer_wargoal
				# province = p:1941 # Synnada
				# target = scope:pessinous_defender
			# }
			# create_unit = {
				# navy = no
				# location = p:1941
				# commander = scope:pessinous_attacker.current_ruler
				# while = {
					# count = 79
					# add_subunit = light_infantry
				# }
				# while = {
					# count = 20
					# add_subunit = chariots
				# }
				# save_scope_as = tectosagia_galatian_horde
			# }

		# }

		# scope:ankyra_attacker = {
			# declare_war_with_wargoal = {
				# war_goal = conquer_wargoal
				# province = p:189 # Gordion
				# target = scope:ankyra_defender
			# }
			# create_unit = {
				# navy = no
				# location = p:189
				# commander = scope:ankyra_attacker.current_ruler
				# while = {
					# count = 79
					# add_subunit = light_infantry
				# }
				# while = {
					# count = 20
					# add_subunit = chariots
				# }
			# }

		# }

		scope:tavium_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = scope:galatian_target_scope_1 #p:194 # Ankyra
				target = scope:tavium_defender
			}
			if = {
				limit = {
					scope:tavium_defender = c:PAP
					c:PAP = {
						war_with = c:PON
					}
				}
				declare_war_with_wargoal = {
					war_goal = conquer_wargoal
					province = scope:galatian_target_scope_1 #p:194 # Ankyra
					target = c:PON
				}
			}
			create_unit = {
				navy = no
				location = scope:galatian_target_scope_1 #p:194
				commander = scope:tavium_attacker.current_ruler
				while = {
					count = 79
					add_subunit = light_infantry
				}
				while = {
					count = 20
					add_subunit = chariots
				}
				add_food = 100
				add_morale = 2
			}
			add_country_modifier = {
				name = celtic_hordes
				duration = 730
			}
		}

	}

	option = {
		name = galatian_invasion.40.a

		if = {
			limit = {
				scope:tavium_attacker = { is_ai = yes }
				NOT = {
					any_country = {
						has_variable = volcae_brethren
					}
				}
			}
			scope:tavium_defender = {
				trigger_event = {
					id = galatian_invasion.43
					days = 180
				}
			}
			
			if = {
				limit = {
					scope:tavium_defender = c:PAP
					c:PAP = {
						war_with = c:PON
					}
				}
				c:PON = {
					trigger_event = {
						id = galatian_invasion.43
						days = 180
					}
				}
			}
			
		}
		# if = {
			# limit = {
				# scope:ankyra_attacker = { is_ai = yes }
			# }
			# scope:ankyra_defender = {
				# trigger_event = {
					# id = galatian_invasion.53
					# days = 180
				# }
			# }
		# }
		# if = {
			# limit = {
				# scope:pessinous_attacker = { is_ai = yes }
			# }
			# scope:pessinous_defender = {
				# trigger_event = {
					# id = galatian_invasion.63
					# days = 180
				# }
			# }
		# }
	}

	after = {

		every_country = {
			limit = {
				country_culture_group = hellenic
			}
			trigger_event = {
				id = galatian_invasion.42
				days = 3
			}
		}
	}

	# option = {
		# name = galatian_invasion.32.b
	# }

}

# skip 41 for numerical consistency

galatian_invasion.42 = { # Hellenic Notification of Invasion
	type = country_event
	title = "galatian_invasion.42.t"
	desc = "galatian_invasion.42.desc"

	left_portrait = scope:pessinous_attacker.current_ruler
	left_portrait = scope:ankyra_attacker.current_ruler
	left_portrait = scope:tavium_attacker.current_ruler
	right_portrait = scope:pessinous_defender.current_ruler
	right_portrait = scope:ankyra_defender.current_ruler
	right_portrait = scope:tavium_defender.current_ruler
	picture = elephant_battle

	trigger = {
		country_culture_group = hellenic
		NOR = {
			owns = 189 # Gordion
			owns = 194 # Ankyra
			owns = 1941 # Synnada
			owns = scope:galatian_target_scope_1
			owns = scope:galatian_target_scope_2
			owns = scope:galatian_target_scope_3
		}
	}

	# immediate = {

	# }

	option = {
		name = galatian_invasion.42.a
	}

}
galatian_invasion.43 = { # Special Peace - Trocmeria
	type = country_event
	title = "galatian_invasion.43.t"
	desc = "galatian_invasion.43.desc"
	picture = celtic_chiefs
	# picture = elephant_battle

	left_portrait = scope:tavium_attacker.current_ruler
	right_portrait = scope:tavium_defender.current_ruler
	picture = celtic_diplomacy # aka ?

	trigger = {
		war_with = scope:tavium_attacker
		owns = 194
	}

	# immediate = {

	# }

	option = { # Give land and make subject
		name = galatian_invasion.43.a

		if = {
			limit = {
				has_global_variable = phrygian_invasion_flag
			}
			scope:tavium_defender = {
				every_owned_province = {
					limit = {
						is_in_area = galatia_trocmi_area
					}
					set_owned_by = scope:tavium_attacker
				}
			}
			every_country = {
				limit = {
					OR = {
						tag = PRY
						tag = SEL
						tag = MAC
						tag = TRE
						tag = EGY
					}
				}
				every_owned_province = {
					limit = {
						is_in_area = galatia_trocmi_area
					}
					set_owned_by = scope:tavium_attacker
				}
			}
		}
		else_if = {
			limit = {
				has_global_variable = asian_invasion_flag
			}
			scope:tavium_defender = {
				every_owned_province = {
					limit = {
						is_in_area = phrygia_area #scope:galatian_target_scope_1.area
					}
					set_owned_by = scope:tavium_attacker
				}
			}
		}

		# scope:tavium_defender = {
			# make_subject = {
				# target = scope:tavium_attacker
				# type = vassal_tribe
			# }
		# }

		scope:tavium_attacker = {
			
			set_capital = 194 # ankyra
			
			trigger_event = {
				id = galatian_invasion.44 # Move Pops
				days = 1
			}

			# trigger_event = {
				# id = galatian_invasion.38 # Form Galatia
				# days = 10
			# }
			# make_subject
		}
		# ai_will_do = yes
		# ai_chance = { factor = 95 }
	}

	option = {
		name = galatian_invasion.43.b
		trigger = {
			# OR = {
				# scope:tavium_defender = {
					# OR = {
						# tag = c:PRY
						# tag = c:SEL
						# tag = c:MAC
						# tag = c:TRE
						# tag = c:EGY
					# }
				# }
				is_ai = no
			# }
		}
		# ai_chance = { factor = 5 }
	}

}

galatian_invasion.44 = { # Setting Galatia - Start Task
	type = country_event
	title = "galatian_invasion.44.t"
	desc = "galatian_invasion.44.desc"

	right_portrait = current_ruler
	picture = celtic_village

	trigger = {
		country_culture_group = gallic
		NOT = { exists = c:GLT }
		NOT = { has_variable = has_migrated }
		OR = {
			is_ai = yes
			has_variable = player_invasion_eligible
		}
		OR = {
			has_global_variable = asian_invasion_flag
			has_global_variable = phrygian_invasion_flag
			has_global_variable = cappadocian_invasion_flag
		}
		trigger_if = {
			limit = {
				# any_country = {
					has_global_variable = asian_invasion_flag
				# }
			}
			any_owned_province = {
				is_in_region = asia_region
			}
		}
		trigger_if = {
			limit = {
				# any_country = {
					has_global_variable = phrygian_invasion_flag
				# }
			}
			any_owned_province = {
				is_in_region = galatia_region
			}
		}
		trigger_if = {
			limit = {
				# any_country = {
					has_global_variable = cappadocian_invasion_flag
				# }
			}
			any_owned_province = {
				OR = {
					is_in_region = cappadocia_region
					is_in_region = galatia_region
				}
			}
		}
	}

	immediate = {
		set_variable = {
			name = has_migrated
			value = 1
		}
	}

	option = {
		name = galatian_invasion.44.a

		while = {
			count = { 20 25 }
			if = {
				limit = {
					NOR = { has_variable = galatian_chosen_city }
					any_owned_province = {
						OR = {
							is_in_region = macedonia_region
							is_in_region = moesia_region
							is_in_region = illyria_region
							is_in_region = pannonia_region
							is_in_region = dacia_region
						}
						province_dominant_culture_group = gallic
					}
				}
				random_owned_province = {
					limit = {
						NOT = { has_variable = galatian_chosen_city }
						# trigger_if = {
							# limit = {
								# exists = owner
							# }
							# NOT = { owner = scope:seleukid_nation }
						# }
						# total_population >= 20
						OR = {
							is_in_region = macedonia_region
							is_in_region = moesia_region
							is_in_region = illyria_region
							is_in_region = pannonia_region
							is_in_region = dacia_region
						}
						province_dominant_culture_group = gallic
					}
					set_variable = galatian_chosen_city

					trigger_event = {
						id = galatian_invasion.45
						days = 3
					}
				}
			}
		}
	}

}


galatian_invasion.45 = { # Settling Galatia - Settling
    type = province_event
    hidden = yes

	trigger = {

	}

	immediate = {

		# scope:first_galatians = {
			# random_owned_province = {
			random_ownable_province = {
				limit = {
					OR = {
						is_in_region = galatia_region
						is_in_region = asia_region
					}
					trigger_if = {
						limit = {
							exists = owner
						}
						OR = {
							owner = scope:tavium_attacker
							owner = scope:ankyra_attacker
							owner = scope:pessinous_attacker
						}
					}
				}
				weight = {
					modifier = {
						factor = 15
						total_population < 15
					}
					modifier = {
						factor = 15
						total_population < 10
					}
					modifier = {
						factor = 5
						is_capital = yes
					}
					modifier = {
						factor = 5
						is_state_capital = yes
					}
					modifier = {
						factor = 3
						total_population < population_cap
					}
					modifier = {
						factor = 0.005
						total_population > population_cap
					}
				}
				save_scope_as = galatian_city
			}
		# }

		while = {
			count = { 20 25 }
			if = {
				limit = {
					# total_population >= 20
					any_pops_in_province = {
						pop_culture_group = gallic
						# NOR = {
							# pop_type = slaves
							# pop_type = tribesmen
						# }
					}
				}
				random_pops_in_province = {
					limit = {
						pop_culture_group = gallic
						# NOR = {
							# pop_type = slaves
							# pop_type = tribesmen
						# }
					}
					move_pop = scope:galatian_city
				}
				if = {
					limit = {
						has_variable = galatian_pop_move_variable
					}
					change_variable = {
						name = galatian_pop_move_variable
						add = 1
					}
				}
				else = {
					set_variable = {
						name = galatian_pop_move_variable
						value = 1
					}
				}
				scope:galatian_city = {
					if = {
						limit = {
							has_variable = galatian_pop_move_variable
						}
						change_variable = {
							name = galatian_pop_move_variable
							add = 1
						}
					}
					else = {
						set_variable = {
							name = galatian_pop_move_variable
							value = 1
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_variable = galatian_chosen_city
			}
			remove_variable = galatian_chosen_city
		}

	}

	option = {
		name = galatian_invasion.45.a

	}

}

galatian_invasion.50 = { # Anatolia invasion
	type = country_event
	title = "galatian_invasion.40.t"
	desc = "galatian_invasion.40.desc"
	# picture = looting #soldiers look roman
	# picture = walled_city_under_siege #aka city_siege

	left_portrait = scope:pessinous_attacker.current_ruler
	left_portrait = scope:ankyra_attacker.current_ruler
	left_portrait = scope:tavium_attacker.current_ruler
	right_portrait = scope:pessinous_defender.current_ruler
	right_portrait = scope:ankyra_defender.current_ruler
	right_portrait = scope:tavium_defender.current_ruler
	picture = elephant_battle

	goto_location = root
	
	fire_only_once = yes 

	trigger = {

		# trigger_if = {
			# limit = {
				# NOT = {
					# any_country = {
						# has_variable = player_invasion_eligible
					# }
				# }
			# }
		# OR = {
			# owns = 1941 # Synnada
			# owns = 189 # Gordion
			# owns = 194 # Ankyra
		# }
		# }

	}

	immediate = { #  invade

		# random_country = {
			# limit = {
				# any_owned_province = { province_id = 194 }
			# }
			# save_scope_as = tavium_defender # defending Ankyra
		# }

		# random_country = {
			# limit = {
				# any_owned_province = { province_id = 189 }
			# }
			# save_scope_as = ankyra_defender # defending Gordion
		# }

		# random_country = {
			# limit = {
				# any_owned_province = { province_id = 1941 }
			# }
			# save_scope_as = pessinous_defender # defending Synnada
		# }

		# scope:pessinous_attacker = {
			# declare_war_with_wargoal = {
				# war_goal = conquer_wargoal
				# province = p:1941 # Synnada
				# target = scope:pessinous_defender
			# }
			# create_unit = {
				# navy = no
				# location = p:1941
				# commander = scope:pessinous_attacker.current_ruler
				# while = {
					# count = 79
					# add_subunit = light_infantry
				# }
				# while = {
					# count = 20
					# add_subunit = chariots
				# }
			# }

		# }

		scope:ankyra_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = scope:galatian_target_scope_2 #p:189 # Gordion
				target = scope:ankyra_defender
			}
			# Need to see if other Diadochi potentially are taking the land
			if = {
				limit = {
					scope:ankyra_defender = {
						war_with = c:MAC
					}
				}
				declare_war_with_wargoal = {
					war_goal = conquer_wargoal
					province = scope:galatian_target_scope_2
					target = c:MAC
				}
			}
			if = {
				limit = {
					scope:ankyra_defender = {
						war_with = c:TRE
					}
				}
				declare_war_with_wargoal = {
					war_goal = conquer_wargoal
					province = scope:galatian_target_scope_2 
					target = c:TRE
				}
			}
			if = {
				limit = {
					scope:ankyra_defender = {
						war_with = c:SEL
					}
				}
				declare_war_with_wargoal = {
					war_goal = conquer_wargoal
					province = scope:galatian_target_scope_2 
					target = c:SEL
				}
			}
			if = {
				limit = {
					scope:ankyra_defender = {
						war_with = c:EGY
					}
				}
				declare_war_with_wargoal = {
					war_goal = conquer_wargoal
					province = scope:galatian_target_scope_2 
					target = c:EGY
				}
			}
			create_unit = {
				navy = no
				location = scope:galatian_target_scope_2 #p:189
				commander = scope:ankyra_attacker.current_ruler
				while = {
					count = 79
					add_subunit = light_infantry
				}
				while = {
					count = 20
					add_subunit = chariots
				}
				add_food = 50
				add_morale = 2
				# save_scope_as = tectosagia_galatian_horde
			}
			add_country_modifier = {
				name = celtic_hordes
				duration = 730
			}

		}

		# scope:tavium_attacker = {
			# declare_war_with_wargoal = {
				# war_goal = conquer_wargoal
				# province = p:194 # Ankyra
				# target = scope:tavium_defender
			# }
			# create_unit = {
				# navy = no
				# location = p:194
				# commander = scope:tavium_attacker.current_ruler
				# while = {
					# count = 79
					# add_subunit = light_infantry
				# }
				# while = {
					# count = 20
					# add_subunit = chariots
				# }
			# }

		# }

	}

	option = {
		name = galatian_invasion.40.a

		# if = {
			# limit = {
				# scope:tavium_attacker = { is_ai = yes }
			# }
			# scope:tavium_defender = {
				# trigger_event = {
					# id = galatian_invasion.43
					# days = 180
				# }
			# }
		# }
		if = {
			limit = {
				scope:ankyra_attacker = { is_ai = yes }
				NOT = {
					any_country = {
						has_variable = volcae_brethren
					}
				}
			}
			scope:ankyra_defender = {
				trigger_event = {
					id = galatian_invasion.53
					days = 180
				}
			}
		}
		# if = {
			# limit = {
				# scope:pessinous_attacker = { is_ai = yes }
			# }
			# scope:pessinous_defender = {
				# trigger_event = {
					# id = galatian_invasion.63
					# days = 180
				# }
			# }
		# }
	}

	after = {
		# every_country = {
			# limit = {
				# country_culture_group = hellenic
			# }
			# trigger_event = {
				# id = galatian_invasion.42
				# days = 3
			# }
		# }
	}

	# option = {
		# name = galatian_invasion.32.b
	# }

}

galatian_invasion.53 = { # Special Peace - Tectosagia
	type = country_event
	title = "galatian_invasion.53.t"
	desc = "galatian_invasion.53.desc"
	# picture = looting #soldiers look roman
	# picture = walled_city_under_siege #aka city_siege
	# picture = elephant_battle

	left_portrait = scope:ankyra_attacker.current_ruler
	right_portrait = scope:ankyra_defender.current_ruler
	picture = celtic_diplomacy # out of place; maybe for peace deals

	trigger = {
		war_with = scope:ankyra_attacker
	}

	# immediate = {

	# }

	option = { # Give land and make subject
		name = galatian_invasion.53.a

		if = {
			limit = {
				has_global_variable = phrygian_invasion_flag
			}
			scope:ankyra_defender = {
				every_owned_province = {
					limit = {
						OR = {
							is_in_area = galatia_area
							province_id = 174 # northern lyaonia
							province_id = 176
							province_id = 177
							province_id = 180
						}
					}
					set_owned_by = scope:ankyra_attacker
				}
			}
			every_country = {
				limit = {
					OR = {
						tag = PRY
						tag = SEL
						tag = MAC
						tag = TRE
						tag = EGY
					}
				}
				every_owned_province = {
					limit = {
						OR = {
							is_in_area = galatia_area
							province_id = 174 # northern lyaonia
							province_id = 176
							province_id = 177
							province_id = 180
						}
					}
					set_owned_by = scope:ankyra_attacker
				}
			}
		}
		else_if = {
			limit = {
				has_global_variable = asian_invasion_flag
			}
			scope:ankyra_defender = {
				every_owned_province = {
					limit = {
						is_in_area = lydia_area # scope:galatian_target_scope_2.area
					}
					set_owned_by = scope:ankyra_attacker
				}
			}
		}

		# scope:ankyra_defender = {
			# make_subject = {
				# target = scope:ankyra_attacker
				# type = vassal_tribe
			# }
		# }

		scope:ankyra_attacker = {
			
			set_capital = 189 # gordion
			
			trigger_event = {
				id = galatian_invasion.44 # Move Pops
				days = 1
			}

			# trigger_event = {
				# id = galatian_invasion.38 # Form Galatia
				# days = 10
			# }
			# make_subject
		}
		# ai_will_do = yes
		# ai_chance = { factor = 95 }
	}

	option = {
		name = galatian_invasion.53.b
		trigger = {
			# OR = {
				# scope:ankyra_defender = {
					# OR = {
						# tag = c:PRY
						# tag = c:SEL
						# tag = c:MAC
						# tag = c:TRE
						# tag = c:EGY
					# }
				# }
				is_ai = no
			# }
		}
		# ai_chance = { factor = 5 }
	}

}

galatian_invasion.60 = { # Anatolia invasion
	type = country_event
	title = "galatian_invasion.40.t"
	desc = "galatian_invasion.40.desc"
	# picture = looting #soldiers look roman
	# picture = walled_city_under_siege #aka city_siege

	left_portrait = scope:pessinous_attacker.current_ruler
	left_portrait = scope:ankyra_attacker.current_ruler
	left_portrait = scope:tavium_attacker.current_ruler
	right_portrait = scope:pessinous_defender.current_ruler
	right_portrait = scope:ankyra_defender.current_ruler
	right_portrait = scope:tavium_defender.current_ruler
	picture = elephant_battle

	goto_location = root

	fire_only_once = yes 

	trigger = {

		# trigger_if = {
			# limit = {
				# NOT = {
					# any_country = {
						# has_variable = player_invasion_eligible
					# }
				# }
			# }
		# OR = {
			# owns = 1941 # Synnada
			# owns = 189 # Gordion
			# owns = 194 # Ankyra
		# }
		# }
	}

	immediate = { #  invade

		# random_country = {
			# limit = {
				# any_owned_province = { province_id = 194 }
			# }
			# save_scope_as = tavium_defender # defending Ankyra
		# }

		# random_country = {
			# limit = {
				# any_owned_province = { province_id = 189 }
			# }
			# save_scope_as = ankyra_defender # defending Gordion
		# }

		# random_country = {
			# limit = {
				# any_owned_province = { province_id = 1941 }
			# }
			# save_scope_as = pessinous_defender # defending Synnada
		# }

		scope:pessinous_attacker = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = scope:galatian_target_scope_3 #p:1941 # Synnada
				target = scope:pessinous_defender
			}
			# Need to see if other Diadochi potentially are taking the land
			if = {
				limit = {
					scope:pessinous_defender = {
						war_with = c:MAC
					}
				}
				declare_war_with_wargoal = {
					war_goal = conquer_wargoal
					province = scope:galatian_target_scope_3
					target = c:MAC
				}
			}
			if = {
				limit = {
					scope:pessinous_defender = {
						war_with = c:TRE
					}
				}
				declare_war_with_wargoal = {
					war_goal = conquer_wargoal
					province = scope:galatian_target_scope_3
					target = c:TRE
				}
			}
			if = {
				limit = {
					scope:pessinous_defender = {
						war_with = c:SEL
					}
				}
				declare_war_with_wargoal = {
					war_goal = conquer_wargoal
					province = scope:galatian_target_scope_3
					target = c:SEL
				}
			}
			if = {
				limit = {
					scope:pessinous_defender = {
						war_with = c:EGY
					}
				}
				declare_war_with_wargoal = {
					war_goal = conquer_wargoal
					province = scope:galatian_target_scope_3
					target = c:EGY
				}
			}
			create_unit = {
				navy = no
				location = scope:galatian_target_scope_3 #p:1941
				commander = scope:pessinous_attacker.current_ruler
				while = {
					count = 79
					add_subunit = light_infantry
				}
				while = {
					count = 20
					add_subunit = chariots
				}
				add_food = 50
				add_morale = 2
			}
			add_country_modifier = {
				name = celtic_hordes
				duration = 730
			}
		}

		# scope:ankyra_attacker = {
			# declare_war_with_wargoal = {
				# war_goal = conquer_wargoal
				# province = p:189 # Gordion
				# target = scope:ankyra_defender
			# }
			# create_unit = {
				# navy = no
				# location = p:189
				# commander = scope:ankyra_attacker.current_ruler
				# while = {
					# count = 79
					# add_subunit = light_infantry
				# }
				# while = {
					# count = 20
					# add_subunit = chariots
				# }
			# }

		# }

		# scope:tavium_attacker = {
			# declare_war_with_wargoal = {
				# war_goal = conquer_wargoal
				# province = p:194 # Ankyra
				# target = scope:tavium_defender
			# }
			# create_unit = {
				# navy = no
				# location = p:194
				# commander = scope:tavium_attacker.current_ruler
				# while = {
					# count = 79
					# add_subunit = light_infantry
				# }
				# while = {
					# count = 20
					# add_subunit = chariots
				# }
			# }

		# }

	}

	option = {
		name = galatian_invasion.40.a

		# if = {
			# limit = {
				# scope:tavium_attacker = { is_ai = yes }
			# }
			# scope:tavium_defender = {
				# trigger_event = {
					# id = galatian_invasion.43
					# days = 180
				# }
			# }
		# }
		# if = {
			# limit = {
				# scope:ankyra_attacker = { is_ai = yes }
			# }
			# scope:ankyra_defender = {
				# trigger_event = {
					# id = galatian_invasion.53
					# days = 180
				# }
			# }
		# }
		if = {
			limit = {
				scope:pessinous_attacker = { is_ai = yes }
				NOT = {
					any_country = {
						has_variable = volcae_brethren
					}
				}
			}
			scope:pessinous_defender = {
				trigger_event = {
					id = galatian_invasion.63
					days = 180
				}
			}
		}
	}

	# after = {
		# every_country = {
			# limit = {
				# country_culture_group = hellenic
			# }
			# trigger_event = {
				# id = galatian_invasion.42
				# days = 3
			# }
		# }
	# }

	# option = {
		# name = galatian_invasion.32.b
	# }

}

galatian_invasion.63 = { # Special Peace - Tolistobogia
	type = country_event
	title = "galatian_invasion.63.t"
	desc = "galatian_invasion.63.desc"
	# picture = looting #soldiers look roman
	# picture = walled_city_under_siege #aka city_siege
	# picture = elephant_battle

	left_portrait = scope:pessinous_attacker.current_ruler
	right_portrait = scope:pessinous_defender.current_ruler
	picture = celtic_diplomacy 

	trigger = {
		war_with = scope:pessinous_attacker
	}

	# immediate = {

	# }

	option = { # Give land and make subject
		name = galatian_invasion.63.a

		if = {
			limit = {
				has_global_variable = phrygian_invasion_flag
			}
			scope:pessinous_defender = {
				every_owned_province = {
					limit = {
						OR = { # pulls from phrygia_epiktetos then phrygia_parorea
							province_id = 314 # Nakoleia
							province_id = 313 # Mitropolis Phrygias
							province_id = 183 # Abbasion
							province_id = 184 # Dokimeion
							province_id = 185 # Ipsos
							province_id = 178
							province_id = 179
							province_id = 182
							province_id = 230
							province_id = 1777
							province_id = 1937
							province_id = 1939
							province_id = 1941
						}
					}
					set_owned_by = scope:pessinous_attacker
				}
			}
			every_country = {
				limit = {
					OR = {
						tag = PRY
						tag = SEL
						tag = MAC
						tag = TRE
						tag = EGY
					}
				}
				every_owned_province = {
					limit = {
						OR = { # pulls from phrygia_epiktetos then phrygia_parorea
							province_id = 314 # Nakoleia
							province_id = 313 # Mitropolis Phrygias
							province_id = 183 # Abbasion
							province_id = 184 # Dokimeion
							province_id = 185 # Ipsos
							province_id = 178
							province_id = 179
							province_id = 182
							province_id = 230
							province_id = 1777
							province_id = 1937
							province_id = 1939
							province_id = 1941
						}
					}
					set_owned_by = scope:pessinous_attacker
				}
			}
		}
		else_if = {
			limit = {
				has_global_variable = asian_invasion_flag
			}
			scope:pessinous_defender = {
				every_owned_province = {
					limit = {
						is_in_area = mysia_abrettene_area #scope:galatian_target_scope_3.area
					}
					set_owned_by = scope:pessinous_attacker
				}
			}
		}

		# scope:pessinous_defender = {
			# make_subject = {
				# target = scope:pessinous_attacker
				# type = vassal_tribe
			# }
		# }

		scope:pessinous_attacker = {
			
			set_capital = 1941 #synnada
			
			trigger_event = {
				id = galatian_invasion.44 # Move Pops
				days = 1
			}

			# trigger_event = {
				# id = galatian_invasion.38 # Form Galatia
				# days = 10
			# }
			# make_subject
		}
		# ai_will_do = yes
		# ai_chance = { factor = 90 }
	}

	option = {
		name = galatian_invasion.63.b
		trigger = {
			# OR = {
				# scope:pessinous_defender = {
					# NOR = {
						# tag = c:PRY
						# tag = c:SEL
						# tag = c:MAC
						# tag = c:TRE
						# tag = c:EGY
					# }
				# }
				is_ai = no
			}
		# }
		# ai_chance = { factor = 10 }
	}

}

galatian_invasion.70 = { # Ethnogenesis
	type = country_event
	title = "galatian_invasion.70.t"
	desc = "galatian_invasion.70.desc"

	# left_portrait = scope:pessinous_attacker.current_ruler
	# left_portrait = scope:tavium_attacker.current_ruler
	# right_portrait = scope:new_galatians.current_ruler
	picture = celtic_village

	fire_only_once = yes

	trigger = {

		country_culture_group = gallic
		has_variable = has_migrated
		OR = {
			is_ai = yes
			has_variable = player_invasion_eligible
		}
		OR = {
			has_global_variable = asian_invasion_flag
			has_global_variable = phrygian_invasion_flag
			has_global_variable = cappadocian_invasion_flag
		}
		trigger_if = {
			limit = {
				has_global_variable = asian_invasion_flag
			}
			any_owned_province = {
				OR = {
					is_in_region = asia_region
					is_in_region = galatia_region
				}
			}
		}
		trigger_if = {
			limit = {
				has_global_variable = phrygian_invasion_flag
			}
			any_owned_province = {
				is_in_region = galatia_region
			}
		}
		trigger_if = {
			limit = {
				has_global_variable = cappadocian_invasion_flag
			}
			any_owned_province = {
				OR = {
					is_in_region = cappadocia_region
					is_in_region = galatia_region
				}
			}
		}

	}

	immediate = {
		every_owned_province = {
			limit = {
				is_in_region = galatia_region
			}
			ordered_pops_in_province = {
				order_by = pop_hapiness
				limit = {
					pop_culture_group = gallic
				}
				set_pop_culture = galatian
				max = 10
			}
		}
	}

	option = {
		name = galatian_invasion.70.a

		# set_primary_culture = galatian

	}

	# option = {
		# name = galatian_invasion.70.b
		# trigger = {
			# is_ai = no
		# }
	# }

	after = {

		# if = {
			# limit = {
				# primary_culture = galatian
			# }


		# }

		if = {
			limit = { # makes sure that all Galatian settlers are AI
				NOT = {
					any_country = {
						OR = {
							country_culture_group = gallic
							primary_culture = galatian
						}
						any_owned_province = {
							is_in_region = galatia_region
						}
						is_ai = no
					}
				}
			}
			trigger_event = {
				id = galatian_invasion.71
				days = 120
			}
		}
	}
}

galatian_invasion.71 = { # Forming Galatia for AI
	type = country_event
	title = "galatian_invasion.71.t"
	desc = "galatian_invasion.71.desc"
	# picture = celtic_chiefs

	# left_portrait = scope:pessinous_attacker.current_ruler
	# left_portrait = scope:tavium_attacker.current_ruler
	# right_portrait = scope:new_galatians.current_ruler
	picture = celtic_village

	fire_only_once = yes

	trigger = {
		NOT = {
			any_country = {
				has_variable = player_invasion_eligible
			}
		}
		OR = {
			country_culture_group = gallic
			primary_culture = galatian
		}
		any_owned_province = {
			is_in_region = galatia_region
		}
		is_ai = yes
		NOT = {
			tag = GLT
		}
	}

	immediate = {

		if = { # Moves capital to Ankyra, Gordion, or random city
			limit = {
				NOT = { exists = c:GLT }
			}
			if = {
				limit = {
					any_country = {
						owns = 194
						country_culture_group = gallic
					}
				}
				random_country = {
					limit = {
						owns = 194
						country_culture_group = gallic
					}
					save_scope_as = new_galatians
				}
			}
			else = {
				# limit = {
					# NOT = {
						# any_country = {
							# owns = 194
							# country_culture_group = gallic
						# }
					# }
				# }
				random_country = {
					limit = {
						country_culture_group = gallic
						any_owned_province = {
							is_in_region = galatia_region
						}
					}
					save_scope_as = new_galatians
				}
			}
			# c:TBL = {
			# effect = {
			scope:new_galatians = {
				# custom_tooltip = "tier_2_formable_tooltip"
				tribal_formable_government_change_effect = yes
				change_country_name = "GALATIA_NAME"
				# hidden_effect = {
					change_country_adjective = "GALATIA_ADJECTIVE"
					change_country_color = "galatia_light_blue_color"
					change_country_tag = GLT
					change_country_flag = GALATIA_FLAG
				# }
				if = {
					limit = {
						owns = 194
						p:194 = { is_capital = no }
					}
					p:194 = {
						save_scope_as = new_galatian_capital
					}
				}
				else_if = {
					limit = {
						owns = 189
						p:189 = { is_capital = no }
					}
					p:189 = {
						save_scope_as = new_galatian_capital
					}
				}
				else = {
					random_owned_province = {
						limit = { has_city_status = yes }
						save_scope_as = new_galatian_capital
					}
				}

				# set_capital = 194
				set_capital = scope:new_galatian_capital
				hidden_effect = {
					# p:194.state = {
					scope:new_galatian_capital.state = {
						# set_state_capital = 194
						set_state_capital = scope:new_galatian_capital
					}
				}
				capital_scope = {
					establish_city_effect = yes
				}
				# p:194 = {
				scope:new_galatian_capital = {
					capital_formable_medium_effect = yes
					formable_capital_modifier_normal_effect = yes
				}
				custom_tooltip = galatia_claims_tooltip
				hidden_effect = {
					region:galatia_region = { formable_region_province_effect = yes }
					region:cappadocia_region = { formable_region_province_effect = yes }
				}
				add_3_free_province_investments = yes
			}

		}

		if = { # absorbs other nations into Galatia
			limit = {
				any_country = {
					country_culture_group = gallic
					any_owned_province = {
						is_in_region = galatia_region
					}
					NOT = { tag = GLT }
				}
			}
			# random_country = {
			every_country = {
				limit = {
					country_culture_group = gallic
					any_owned_province = {
						is_in_region = galatia_region
					}
					NOT = { tag = GLT }
				}
				# save_scope_as = other_galatians
			# }

			# scope:other_galatians = {
				every_owned_province = {
					# limit = { is_in_area = galatia_area }
					set_owned_by = scope:new_galatians #first_galatians
				}
			}
		}

		scope:new_galatians = {
			if = {
				limit = {
					NOT = {
						primary_culture = galatian
					}
				}
				set_primary_culture_cleanup_effect = {
					NEW_PRIMARY_CULTURE = galatian
					MAKE_OLD_CULTURE_INTEGRATED = yes
				}
			}

			every_owned_province = {
				limit = {
					is_in_region = galatia_region
				}
				ordered_pops_in_province = {
					order_by = pop_hapiness
				# every_pops_in_province = {
					limit = {
						pop_culture_group = gallic
					}
					set_pop_culture = galatian
					max = 10
				}
			}
		}

	}

	option = {
		name = galatian_invasion.71.a
	# }

	# after = {
		every_country = {
			limit = {
				OR = {
					country_culture_group = hellenic
					capital_scope = {
						OR = {
							is_in_region = asia_region
							is_in_region = galatia_region
							is_in_region = cilicia_region
						}
					}
				}
			}
			trigger_event = {
				id = galatian_invasion.72
				days = 3
			}
		}
	}
}

galatian_invasion.72 = { #Notification of Galatia
	type = country_event
	title = "galatian_invasion.72.t"
	desc = "galatian_invasion.72.desc"
	# picture = celtic_chiefs

	left_portrait = scope:new_galatians.current_ruler
	right_portrait = current_ruler
	picture = celtic_village

	fire_only_once = yes 

	trigger = {

	}

	# immediate = {

	# }

	option = {
		name = galatian_invasion.72.a
	}
}

galatian_invasion.75 = { # From Friends to Feudatories
	type = country_event
	title = "galatian_invasion.75.t"
	desc = "galatian_invasion.75.desc"

	left_portrait = scope:galatian_feudatory.current_ruler
	left_portrait = scope:galatian_feudatory_2.current_ruler
	right_portrait = current_ruler
	picture = celtic_chiefs

	fire_only_once = yes 

	trigger = {
		is_ai = no
	}

	immediate = {

		save_scope_as = galatian_overlords

		if = {
			limit = {
				is_subject = yes
			}
			random_country = {
				limit = {
					any_subject = {
						this = scope:galatian_overlords
					}
				}
				release_subject = scope:galatian_overlords
			}
		}

		if = {
			limit = {
				any_country = {
					OR = {
						primary_culture = galatian
						AND = {
							country_culture_group = gallic
							any_owned_province = {
								OR = {
									is_in_region = asia_region
									is_in_region = galatia_region
									is_in_region = cappadocia_region
								}
							}
						}
					}
					is_ai = yes
				}
			}
			random_country = {
				limit = {
					OR = {
						primary_culture = galatian
						AND = {
							country_culture_group = gallic
							any_owned_province = {
								OR = {
									is_in_region = asia_region
									is_in_region = galatia_region
									is_in_region = cappadocia_region
								}
							}
						}
					}
					is_ai = yes
				}
				save_scope_as = galatian_feudatory
			}
			if = {
				limit = {
					scope:galatian_feudatory = {
						is_subject = yes
					}
				}
				random_country = {
					limit = {
						any_subject = {
							this = scope:galatian_feudatory
						}
					}
					release_subject = scope:galatian_feudatory
				}
			}
			# c:ROOT = {
				make_subject = {
					target = scope:galatian_feudatory
					type = feudatory
				}
			# }

		}

		if = {
			limit = {
				any_country = {
					OR = {
						primary_culture = galatian
						AND = {
							country_culture_group = gallic
							any_owned_province = {
								OR = {
									is_in_region = asia_region
									is_in_region = galatia_region
									is_in_region = cappadocia_region
								}
							}
						}
					}
					is_ai = yes
					NOT = { this = scope:galatian_feudatory }
				}
			}
			random_country = {
				limit = {
					OR = {
						primary_culture = galatian
						AND = {
							country_culture_group = gallic
							any_owned_province = {
								OR = {
									is_in_region = asia_region
									is_in_region = galatia_region
									is_in_region = cappadocia_region
								}
							}
						}
					}
					is_ai = yes
					NOT = { this = scope:galatian_feudatory }
				}
				save_scope_as = galatian_feudatory_2
			}
			if = {
				limit = {
					scope:galatian_feudatory_2 = {
						is_subject = yes
					}
				}
				random_country = {
					limit = {
						any_subject = {
							this = scope:galatian_feudatory_2
						}
					}
					release_subject = scope:galatian_feudatory_2
				}
			}

			# c:ROOT = {
				make_subject = {
					target = scope:galatian_feudatory_2
					type = feudatory
				}
			# }
		}

	}

	option = {
		name = galatian_invasion.75.a
	}
}

galatian_invasion.80 = { # Pops on a journey
	type = country_event
	title = "galatian_invasion.75.t"
	desc = "galatian_invasion.75.desc"

	left_portrait = scope:galatian_feudatory.current_ruler
	left_portrait = scope:galatian_feudatory_2.current_ruler
	right_portrait = current_ruler
	picture = celtic_chiefs

	fire_only_once = yes 

	trigger = {
		any_owned_province = {
			count = 2
			any_pops_in_province = {
				pop_culuture = {
					is_integrated = yes
				}
				
			}
		}
	}
	
	immediate = {
		
		random_owned_province = {
			limit = {
				count = 4
				any_pops_in_province = {
					pop_culuture = {
						is_integrated = yes
					}
				}
			}
			save_scope_as = sending_galatian_troops_city
		}
		
		random_country = {
			limit = {
				country_culture_group = hellenic
				war = yes
				treasury = > 100
			}
			save_scope_as = receiving_galatian_troops
			random_owned_province = {
				save_scope_as = receiving_galatian_troops_city
			}
		}
		

	}
	
	option = {
		name = galatian_invasion.80.a

		while = {
			count = { 3 5 }
			random_pops_in_province = {
				limit = {
					pop_culuture = {
						is_integrated = yes
					}
				}
				move_pop = scope:receiving_galatian_troops_city
			}
		}
		
		add_treasury = 100
		scope:receiving_galatian_troops = {
			add_treasury = - 100
		}
	}
	
	option = {
		trigger = {
			any_country = {
				country_culture_group = hellenic
				war = yes
				treasury = > 100
				NOT = { scope:receiving_galatian_troops }
			}
		}
		
		random_country = {
			limit = {
				country_culture_group = hellenic
				war = yes
				treasury = > 100
				NOT = { scope:receiving_galatian_troops }
			}
			save_scope_as = receiving_galatian_troops_2
			random_owned_province = {
				save_scope_as = receiving_galatian_troops_2_city
			}
		}
		
		while = {
			count = { 3 5 }
			random_pops_in_province = {
				limit = {
					pop_culuture = {
						is_integrated = yes
					}
				}
				move_pop = scope:receiving_galatian_troops_2_city
			}
		}
		
		add_treasury = 100
		scope:receiving_galatian_troops_2 = {
			add_treasury = - 100
		}
	}
	
	after = {
		trigger_event = {
			id = galatian_invasion.81
			days = 365
		}
	}
	
	
	galatian_invasion.90 = { # Merc St
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = current_ruler
		
		option = {
			name = galatian_invasion.90.a
			trigger = {
				owns = 194
			}
			p:194 = {
				save_scope_as = merc_st_city
			}
			scope:player = {
				pay_price = create_merc_state_price
			} 
		}
		
		option = {
			name = galatian_invasion.90.b
			trigger = {
				owns = 189
			}
			p:189 = {
				save_scope_as = merc_st_city
			}
			scope:player = {
				pay_price = create_merc_state_price
			} 
		}
		
		option = {
			name = galatian_invasion.90.c
			trigger = {
				owns = 1941
			}
			p:1941 = {
				save_scope_as = merc_st_city
			}
			scope:player = {
				pay_price = create_merc_state_price
			} 
		}
		
		option = {
			name = galatian_invasion.90.d
			trigger = {
				any_owned_province = {
					has_city_status = yes
					NOR = {
						province_id = 194
						province_id = 189
						province_id = 1941
					}
				}
			}
			random_owned_province = {
				limit = {
					has_city_status = yes
					NOR = {
						province_id = 194
						province_id = 189
						province_id = 1941
					}
				}
			}
			scope:player = {
				pay_price = create_merc_state_price
			} 
		}
		
		after = {

			scope:merc_st_city = {
				owner = {
					save_scope_as = pParent
				}
				create_country = {
					create_character = {
						culture = root.dominant_province_culture
						religion = root.dominant_province_religion
						age = 30
						save_scope_as = saved_merc_leader
					}
					set_as_ruler = scope:saved_merc_leader
					save_scope_as = pChild
					scope:saved_merc_leader = {
						add_martial = 2
					}
				}
				scope:pParent = {
					make_subject = {
						target = scope:pChild
						type = subject_mercenary_city_state
					}
				}
			}
		}
	}

	galatian_invasion.100 = { # Javelin Throw
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		immediate = {
			c:X07.current_ruler = {
				save_scope_as = tourney_participant_1
			}
			c:X08.current_ruler = {
				save_scope_as = tourney_participant_2
			}
			c:X09.current_ruler = {
				save_scope_as = tourney_participant_3
			}	
		}
		
		random_character = {
			limit = {
				OR = {
					this = scope:tourney_participant_1
					this = scope:tourney_participant_2
					this = scope:tourney_participant_3
				}
			}
			weight = {
				base = 1
				modifier = {
					factor = 1
					martial > 2
				}
				modifier = {
					factor = 2
					martial > 4
				}
				modifier = {
					factor = 4
					martial > 8
				}
				# modifier = {
					# factor = 5
					# has_trait = aggressive
				# }
			}
			save_scope_as = javelin_victor
			set_variable = {
				name = tournament_points
				value = 1
			}
		}
		
		option = {
			name = galatian_invasion.100.a
			trigger_event = {
				id = galatian_invasion.101
			}
		}
		

		
	}
		
	galatian_invasion.101 = { # Javelin Throw - end
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		# right_portrait = c:X07.current_ruler
		# right_portrait = c:X08.current_ruler
		# right_portrait = c:X09.current_ruler
		right_portrait = scope:javelin_winner

		option = {
			name = galatian_invasion.101.a
			trigger_event = {
				id = galatian_invasion.102
			}
		}
	}
	
	galatian_invasion.102 = { # Hunt Begins
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = {
			name = galatian_invasion.102.a
			random_list = {
				20 = {
					trigger_event = {
						id = galatian_invasion.103
					}
				}
				80 = {
					trigger_event = {
						id = galatian_invasion.104
					}
				}
			}
		}
	}
	
	galatian_invasion.103 = { # Mid-Hunt Bear Attack
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = { # Run
			trigger = {
				
			}
			name = galatian_invasion.103.a
			save_scope_as = bear_fleer
			trigger_event = {
				id = galatian_invasion.104
			}
		}
		option = { # Stealth
			trigger = {
				not = { has_trait = coward }
			}
			name = galatian_invasion.103.b
			random_list = {
				80 = {save_scope_as = stealthy_bear_killer}
				20 = { }
			}
			trigger_event = {
				id = galatian_invasion.104
			}
		}
		option = { # Charge
			trigger = {
				OR = {
					has_trait = aggressive
					has_trait = brave
				}
				not = { has_trait = coward }
			}
			name = galatian_invasion.103.c
			save_scope_as = brash_bear_killer
			trigger_event = {
				id = galatian_invasion.104
			}
		}
	}
	
	galatian_invasion.104 = { # Hunt Ends
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		immediate = {
			if = {
				limit = {
					any_character = {
						this = scope:stealthy_bear_killer
					}
				}
				scope:stealthy_bear_killer = {
					save_scope_as = hunt_victor
					if = {
						limit = { has_variable = tournament_points }
						change_variable = {
							name = tournament_points
							add = 2
						}
					}
					else = {
						set_variable = {
							name = tournament_points
							value = 2
						}
					}
				}
			}
			else_if = {
				limit = {
					any_character = {
						this = scope:stealthy_bear_killer
					}
				}
				scope:stealthy_bear_killer = {
					save_scope_as = hunt_victor
					if = {
						limit = { has_variable = tournament_points }
						change_variable = {
							name = tournament_points
							add = 2
						}
					}
					else = {
						set_variable = {
							name = tournament_points
							value = 2
						}
					}
				}
			}
			else = {
				random_character = {
					limit = {
						OR = {
							this = scope:tourney_participant_1
							this = scope:tourney_participant_2
							this = scope:tourney_participant_3
						}
						not = scope:bear_fleer
					}
					weight = {
						base = 1
						modifier = {
							factor = 1
							martial > 2
						}
						modifier = {
							factor = 2
							martial > 4
						}
						modifier = {
							factor = 4
							martial > 8
						}
						# modifier = {
							# factor = 5
							# has_trait = aggressive
						# }
					}
					save_scope_as = hunt_victor
					if = {
						limit = { has_variable = tournament_points }
						change_variable = {
							name = tournament_points
							add = 2
						}
					}
					else = {
						set_variable = {
							name = tournament_points
							value = 2
						}
					}
				}	
			}
		}
		
		option = {
			name = galatian_invasion.104.a
			trigger_event = {
				id = galatian_invasion.105
			}
		}
	}
	
	galatian_invasion.105 = { # Chariot Race - Begin
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = {
			name = galatian_invasion.105.a
			trigger_event = {
				id = galatian_invasion.106
			}
		}
	}
	
	galatian_invasion.106 = { # Chariot Race - Middle
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = { # Break
			trigger = {
				
			}
			name = galatian_invasion.106.a
			save_scope_as = scared_rider
			trigger_event = {
				id = galatian_invasion.107
			}
		}
		option = { # Steady
			trigger = {
				not = { has_trait = coward }
			}
			name = galatian_invasion.106.b
			random_list = {
				80 = {save_scope_as = narrow_victorious}
				20 = {save_scope_as = disaster}
			}
			trigger_event = {
				id = galatian_invasion.107
			}
		}
		option = { # Surge
			trigger = {
				OR = {
					has_trait = aggressive
					has_trait = brave
				}
				not = { has_trait = coward }
			}
			name = galatian_invasion.106.c
			random_list = {
				60 = {save_scope_as = greatly_victorious}
				40 = {save_scope_as = disaster}
			}			trigger_event = {
				id = galatian_invasion.107
			}
		}
	}
	
	galatian_invasion.107 = { # Chariot Race - End
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		immediate = {
			if = {
				limit = {
					any_character = {
						this = scope:narrow_victorious
					}
				}
				scope:narrow_victorious = {
					save_scope_as = chariot_victor
					if = {
						limit = { has_variable = tournament_points }
						change_variable = {
							name = tournament_points
							add = 3
						}
					}
					else = {
						set_variable = {
							name = tournament_points
							value = 3
						}
					}
				}
			}
			else_if = {
				limit = {
					any_character = {
						this = scope:greatly_victorious
					}
				}
				scope:greatly_victorious = {
					save_scope_as = chariot_victor
					if = {
						limit = { has_variable = tournament_points }
						change_variable = {
							name = tournament_points
							add = 4
						}
					}
					else = {
						set_variable = {
							name = tournament_points
							value = 4
						}
					}
				}
			}
			else = {
				random_character = {
					limit = {
						OR = {
							this = scope:tourney_participant_1
							this = scope:tourney_participant_2
							this = scope:tourney_participant_3
						}
						not = scope:scared_rider
						not = scope:disaster
					}
					weight = {
						base = 1
						modifier = {
							factor = 1
							martial > 2
						}
						modifier = {
							factor = 2
							martial > 4
						}
						modifier = {
							factor = 2
							finesse > 4
						}
						modifier = {
							factor = 4
							martial > 8
						}
					}
					save_scope_as = chariot_victor
					if = {
						limit = { has_variable = tournament_points }
						change_variable = {
							name = tournament_points
							add = 3
						}
					}
					else = {
						set_variable = {
							name = tournament_points
							value = 3
						}
					}
				}	
			}
		}
		
		option = {
			name = galatian_invasion.107.a
			trigger_event = {
				id = galatian_invasion.110
			}
		}
	}
	
	galatian_invasion.110 = { # Tournament Winner Declared
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = {
			name = galatian_invasion.110.a
			trigger_event = {
				id = galatian_invasion.111
			}
		}
	}
	
	galatian_invasion.111 = { # Feast - Begin
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = {
			name = galatian_invasion.111.a
			trigger_event = {
				id = galatian_invasion.112
			}
		}
	}
	
	galatian_invasion.112 = { # Feast - Meat Allocation
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = {
			name = galatian_invasion.112.a
		}
	}
	
	galatian_invasion.113 = { # Feast - Victory
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = {
			name = galatian_invasion.113.a
		}
	}
	
	galatian_invasion.114 = { # Feast - Dispute
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = {
			name = galatian_invasion.114.a
		}
	}

	galatian_invasion.115 = { # Feast - Duel
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = {
			name = galatian_invasion.115.a
		}
	}
	
	galatian_invasion.116 = { # Duel - Victory
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = {
			name = galatian_invasion.116.a
		}
	}
	
	galatian_invasion.117 = { # Duel - Defeat and War
		type = country_event
		title = "galatian_invasion.90.t"
		desc = "galatian_invasion.90.desc"
		picture = "celtic_village"
		
		right_portrait = c:X07.current_ruler
		right_portrait = c:X08.current_ruler
		right_portrait = c:X09.current_ruler
		
		option = {
			name = galatian_invasion.117.a
		}
	}
	

}
