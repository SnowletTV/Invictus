namespace = me_greek_1_black_sea

me_greek_1_black_sea.3 = {							# Mission start
    type = country_event
    title = me_greek_1_black_sea.3.t
    desc = me_greek_1_black_sea.3.desc
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_1

    trigger = { has_land = yes }

    option = {      
        name = me_greek_1_black_sea.3.a
        add_country_modifier = {
        	name = me_gre_1_cmod
        	duration = 7300 #
        }
    }
}

me_greek_1_black_sea.4 = {							# Mission end
    type = country_event
    title = me_greek_1_black_sea.4.t
    desc = me_greek_1_black_sea.4.desc
    picture = greek_marketplace

    trigger = { has_land = yes }

    immediate = {
		current_ruler = { add_nickname = NICKNAME_THALASSOKRATIOS }
		add_2_free_province_investments = yes
    }

    option = {      
        name = me_greek_1_black_sea.4.a
        custom_tooltip = me_greek_1_black_sea.4.at
    }
}

me_greek_1_black_sea.5 = {							# 4 - Our Sea end
    type = country_event
    title = me_greek_1_black_sea.5.t
    desc = me_greek_1_black_sea.5.desc
    picture = greek_political_discussion

    trigger = { has_land = yes }

    immediate = {
    	current_ruler = { add_popularity = popularity_medium }
		add_country_modifier = {
			name = me_gre_1_4_cmod
			duration = 7300 #20 years
		}
    }

    option = {      
        name = me_greek_1_black_sea.5.a
        custom_tooltip = me_greek_1_black_sea.5.at
    }
}

me_greek_1_black_sea.6 = {							#	14 - Barbarian Bartering - Choice
    type = country_event
    title = me_greek_1_black_sea.6.t
    desc = me_greek_1_black_sea.6.desc
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_1

    trigger = { has_land = yes }

    immediate = {
		if = {		# Set variable used for refiring event with second list
			limit = { has_variable = gm_bartering_tracker }
		}
		else = {
			set_variable = {
				name = gm_bartering_tracker
				value = 1
			}
		}
		hidden_effect = {	
			while = {	# Save up to 6 barbarian owned Euxine ports
				limit = {
					any_in_list = {
						list = gm_1_list
						exists = owner
						owner = {
							NOR = { 
								this = root
								country_culture_group = hellenic
								war_with = root
                                opinion = { target = root value <= -50 }
							}
						}
						is_capital = no
						control_range = root
						NOR = {
							AND = {
								exists = scope:gm_1_bartering_scope_1
								this = scope:gm_1_bartering_scope_1
							}
							AND = {
								exists = scope:gm_1_bartering_scope_2
								this = scope:gm_1_bartering_scope_2
							}
							AND = {
								exists = scope:gm_1_bartering_scope_3
								this = scope:gm_1_bartering_scope_3
							}
							AND = {
								exists = scope:gm_1_bartering_scope_4
								this = scope:gm_1_bartering_scope_4
							}
							AND = {
								exists = scope:gm_1_bartering_scope_5
								this = scope:gm_1_bartering_scope_5
							}
							AND = {
								exists = scope:gm_1_bartering_scope_6
								this = scope:gm_1_bartering_scope_6
							}
						}
						NAND = {
							exists = scope:gm_1_bartering_scope_1
							exists = scope:gm_1_bartering_scope_2
							exists = scope:gm_1_bartering_scope_3
							exists = scope:gm_1_bartering_scope_4
							exists = scope:gm_1_bartering_scope_5
							exists = scope:gm_1_bartering_scope_6
						}
					}	
				}
				random_in_list = {
					list = gm_1_list
					limit = {
						exists = owner
						owner = {
							NOR = { 
								this = root
								country_culture_group = hellenic
							}
						}
						is_capital = no
						control_range = root
					}
					if = {
						limit = {
							NOT = { exists = scope:gm_1_bartering_scope_1 }
						}
						save_scope_as = gm_1_bartering_scope_1
					}
					else_if = {
						limit = {
							exists = scope:gm_1_bartering_scope_1
							NOR = { 
								exists = scope:gm_1_bartering_scope_2
								this = scope:gm_1_bartering_scope_1
							}
						}
						save_scope_as = gm_1_bartering_scope_2
					}
					else_if = {
						limit = {
							exists = scope:gm_1_bartering_scope_1
							exists = scope:gm_1_bartering_scope_2
							NOR = { 
								exists = scope:gm_1_bartering_scope_3
								this = scope:gm_1_bartering_scope_1
								this = scope:gm_1_bartering_scope_2
							}
						}
						save_scope_as = gm_1_bartering_scope_3
					}
					else_if = {
						limit = {
							exists = scope:gm_1_bartering_scope_1
							exists = scope:gm_1_bartering_scope_2
							exists = scope:gm_1_bartering_scope_3
							NOR = { 
								exists = scope:gm_1_bartering_scope_4
								this = scope:gm_1_bartering_scope_1
								this = scope:gm_1_bartering_scope_2
								this = scope:gm_1_bartering_scope_3
							}
						}
						save_scope_as = gm_1_bartering_scope_4
					}
					else_if = {
						limit = {
							exists = scope:gm_1_bartering_scope_1
							exists = scope:gm_1_bartering_scope_2
							exists = scope:gm_1_bartering_scope_3
							exists = scope:gm_1_bartering_scope_4
							NOR = { 
								exists = scope:gm_1_bartering_scope_5
								this = scope:gm_1_bartering_scope_1
								this = scope:gm_1_bartering_scope_2
								this = scope:gm_1_bartering_scope_3
								this = scope:gm_1_bartering_scope_4
							}
						}
						save_scope_as = gm_1_bartering_scope_5
					}
					else_if = {
						limit = {
							exists = scope:gm_1_bartering_scope_1
							exists = scope:gm_1_bartering_scope_2
							exists = scope:gm_1_bartering_scope_3
							exists = scope:gm_1_bartering_scope_4
							exists = scope:gm_1_bartering_scope_5
							NOR = { 
								exists = scope:gm_1_bartering_scope_6
								this = scope:gm_1_bartering_scope_1
								this = scope:gm_1_bartering_scope_2
								this = scope:gm_1_bartering_scope_3
								this = scope:gm_1_bartering_scope_4
								this = scope:gm_1_bartering_scope_5
							}
						}
						save_scope_as = gm_1_bartering_scope_6
					}
				}
			}
		}
    }

    option = {      # City 1
        name = me_greek_1_black_sea.6.a
        trigger = {
        	root.var:gm_bartering_tracker = 1
        	exists = scope:gm_1_bartering_scope_1
        }
        scope:gm_1_bartering_scope_1 = { gm_1_barter_territory_scope_effect = yes }
        gm_1_barter_territory_effect = yes
    }

    option = {  	# City 2    
        name = me_greek_1_black_sea.6.b
		trigger = {
        	root.var:gm_bartering_tracker = 1
        	exists = scope:gm_1_bartering_scope_2
        }
        scope:gm_1_bartering_scope_2 = { gm_1_barter_territory_scope_effect = yes }
        gm_1_barter_territory_effect = yes
    }

    option = {      # City 3
        name = me_greek_1_black_sea.6.c
        trigger = {
        	root.var:gm_bartering_tracker = 1
        	exists = scope:gm_1_bartering_scope_3
        }
        scope:gm_1_bartering_scope_3 = { gm_1_barter_territory_scope_effect = yes }
        gm_1_barter_territory_effect = yes
    }

    option = {      # City 4
        name = me_greek_1_black_sea.6.d
        trigger = {
        	OR = {
        		AND = {
        			root.var:gm_bartering_tracker = 2
        			exists = scope:gm_1_bartering_scope_4
        		}
        		AND = {
        			root.var:gm_bartering_tracker = 1
    				exists = scope:gm_1_bartering_scope_4
    				NOT = { exists = scope:gm_1_bartering_scope_5 }
        		}
        	}
        }
        scope:gm_1_bartering_scope_4 = { gm_1_barter_territory_scope_effect = yes }
        gm_1_barter_territory_effect = yes
    }

    option = {    	# City 5  
        name = me_greek_1_black_sea.6.e
        trigger = {
        	root.var:gm_bartering_tracker = 2
        	exists = scope:gm_1_bartering_scope_5
        }
        scope:gm_1_bartering_scope_5 = { gm_1_barter_territory_scope_effect = yes }
        gm_1_barter_territory_effect = yes
    }

    option = {      # City 6
        name = me_greek_1_black_sea.6.f
        trigger = {
        	root.var:gm_bartering_tracker = 2
        	exists = scope:gm_1_bartering_scope_6
        }
        scope:gm_1_bartering_scope_6 = { gm_1_barter_territory_scope_effect = yes }
        gm_1_barter_territory_effect = yes
    }

    option = {		# Next list
        name = me_greek_1_black_sea.6.g
        trigger = {
    		OR = {
        		AND = {
        			root.var:gm_bartering_tracker = 1
        			exists = scope:gm_1_bartering_scope_5
        		}
        		root.var:gm_bartering_tracker = 2
        	}
        }
        if = {
        	limit = { root.var:gm_bartering_tracker = 1 }	
        	change_variable = {
        		name = gm_bartering_tracker
        		add = 1
        	}
        }
        else_if = {
        	limit = { root.var:gm_bartering_tracker = 2 }	
        	change_variable = {
        		name = gm_bartering_tracker
        		subtract = 1
        	}
        }
        trigger_event = { id = me_greek_1_black_sea.6 }
        custom_tooltip = me_greek_1_black_sea.6.gt
    }

    option = {		#
        name = me_greek_1_black_sea.6.h
        change_variable = {
	    	name = gm_bartering_tracker
	    	add = 3
	    }
        custom_tooltip = me_greek_1_black_sea.6.ht
        if = {
        	limit = { 
        		exists = scope:gm_family_head_1
        		scope:gm_family_head_1 = { is_alive = yes }
        	}
        	scope:gm_family_head_1 = { add_loyalty = loyalty_encourager_dismissed }
        } 
    }

    after = {
    	if = {
    		limit = { root.var:gm_bartering_tracker > 2 }
    		remove_variable = gm_bartering_tracker
    	}
    }
}

me_greek_1_black_sea.7 = {							#	14 - Barbarian Bartering - Offer
    type = country_event
    title = me_greek_1_black_sea.7.t
    desc = "me_greek_1_black_sea.7.desc"
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_1
    goto_location = scope:gm_1_barter_target_territory

    trigger = { has_land = yes }

    immediate = {
		save_scope_as = gm_1_barter_target_country
    }

    option = {		# Accept
        name = me_greek_1_black_sea.7.a
		add_treasury = { value = gm_1_barter_territory_value }
		show_as_tooltip = {
			scope:gm_1_barter_target_territory = { set_conquered_by = scope:gm_1_greek_scope }
		}
		scope:gm_1_greek_scope = {
			set_variable = {
				name = gm_barter_response
				value = 1
			}
		}
		ai_chance = {
			base = 2
			modifier = {
				factor = 2
				scope:gm_1_greek_scope = { is_ai = no }
			}
			modifier = {
				factor = 2
				gm_1_barter_relative_territory_value < 10
			}
			modifier = {
				factor = 2
				opinion = { target = scope:gm_1_greek_scope value > 50 }
			}
			modifier = {
				factor = 2
				AND = {
					exists = scope:gm_family_head_1
					scope:gm_family_head_1.charisma >= 7
				}
			}
		}
    }
	
    option = {   	# Counter offer 
        name = me_greek_1_black_sea.7.b
        custom_tooltip = me_greek_1_black_sea.7.bt
        scope:gm_1_greek_scope = { 
			set_variable = {
				name = gm_barter_response
				value = 2
			}
		}
		ai_chance = {
			base = 2
			modifier = {
				factor = 2
				gm_1_barter_relative_territory_value < 10
				gm_1_barter_relative_territory_value > 5
			}
			modifier = {
				factor = 2
				opinion = { target = scope:gm_1_greek_scope value > 0 }
			}
			modifier = {
				factor = 2
				AND = {
					exists = scope:gm_family_head_1
					scope:gm_family_head_1.charisma >= 5
				}
			}
		}
	}

	option = {   	# Reject 
        name = me_greek_1_black_sea.7.c
        current_ruler = { add_popularity = popularity_small }
        custom_tooltip = me_greek_1_black_sea.7.ct
        show_as_tooltip = { 
        	add_opinion = { target = scope:gm_1_greek_scope modifier = me_gre_1_barter_rejection_opmod }
        	reverse_add_opinion = { target = scope:gm_1_greek_scope modifier = me_gre_1_barter_rejection_opmod }
        }
        scope:gm_1_greek_scope = { 
			set_variable = {
				name = gm_barter_response
				value = 3
			}
		}
		ai_chance = {
			base = 2
			modifier = {
				factor = 2
				gm_1_barter_relative_territory_value >= 10
			}
			modifier = {
				factor = 2
				opinion = { target = scope:gm_1_greek_scope value < 0 }
			}
			modifier = {
				factor = 2
				AND = {
					exists = scope:gm_family_head_1
					scope:gm_family_head_1.charisma >= 5
				}
			}
			modifier = {
				factor = 2
				scope:gm_1_greek_scope = { is_ai = yes }
			}
		}
	}

	after = {
		scope:gm_1_greek_scope = {
			trigger_event = {
				id = me_greek_1_black_sea.8
				days = { 5 10 }
			}
		}
	}
}

me_greek_1_black_sea.8 = {							#	14 - Barbarian Bartering - Response
    type = country_event
    title = me_greek_1_black_sea.8.t
    desc = {
    	desc = me_greek_1_black_sea.8.desc
		first_valid = {
			triggered_desc = {		# Accepted
				trigger = { root.var:gm_barter_response = 1 }
				desc = "me_greek_1_black_sea.8.desc_1"
			}
			triggered_desc = {		# Countered
				trigger = { root.var:gm_barter_response = 2 }
				desc = "me_greek_1_black_sea.8.desc_2"
			}
			triggered_desc = {		# Rejected
				trigger = { root.var:gm_barter_response = 3 }
				desc = "me_greek_1_black_sea.8.desc_3"
			}
		}
	}
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:gm_family_head_1
    right_portrait = scope:gm_1_barter_target_country.current_ruler
    goto_location = scope:gm_1_barter_target_territory

    trigger = { has_land = yes }

    immediate = {
		if = {		# Deduct price if offer accepted
			limit = { root.var:gm_barter_response = 1 }
			add_treasury = { subtract = gm_1_barter_territory_value }
		}
    }

    option = {      # Accepted - holy mackerel
        name = me_greek_1_black_sea.8.a
        trigger = { root.var:gm_barter_response = 1 }
        scope:gm_1_barter_target_territory = { 
        	set_variable = gm_1_bartered_flag
        	set_conquered_by = root
        }
    }
	
    option = {    # Counter offer - accept
        name = me_greek_1_black_sea.8.b
        trigger = { root.var:gm_barter_response = 2 }
	    add_treasury = { 	# Deduct double price
			value = gm_1_barter_territory_double_value
			multiply = -1
		}
		if = {
			limit = { exists = scope:gm_family_head_1 }
			scope:gm_family_head_1 = { add_loyalty = loyalty_defended_interests }
		}
		scope:gm_1_barter_target_territory = { 
			set_variable = gm_1_bartered_flag
			set_conquered_by = root
		}
		scope:gm_1_barter_target_country = {
   			trigger_event = { id = me_greek_1_black_sea.9 }
	    }
	}

	option = {    # Counter offer - reject
        name = me_greek_1_black_sea.8.c
        current_ruler = { add_popularity = popularity_small }
        trigger = { root.var:gm_barter_response = 2 }
	    scope:gm_1_barter_target_country = {
	   		trigger_event = { id = me_greek_1_black_sea.9 }
	    }
	    scope:gm_1_barter_target_territory = { add_claim = root }
	}

	option = {    # Rejected - goshed darn it
        name = me_greek_1_black_sea.8.d
        trigger = { root.var:gm_barter_response = 3 }
        if = {
        	limit = {
        		exists = scope:gm_family_head_1
        		scope:gm_family_head_1 = { is_alive = yes }
        	}
        	scope:gm_family_head_1 = { add_popularity = subtract_popularity_small }
        }
        scope:gm_1_barter_target_territory = { add_claim = root }
        add_opinion = { target = scope:gm_1_barter_target_country modifier = me_gre_1_barter_rejection_opmod }
    	reverse_add_opinion = { target = scope:gm_1_barter_target_country modifier = me_gre_1_barter_rejection_opmod }
	}

	after = { remove_variable = gm_barter_response }
}

me_greek_1_black_sea.9 = {							#	14 - Barbarian Bartering - Counter Offer Response
    type = country_event
    title = me_greek_1_black_sea.9.t
    desc = {
    	desc = me_greek_1_black_sea.9.desc
		first_valid = {
			triggered_desc = {		# Accepted
				trigger = { 
					NOT = { scope:gm_1_barter_target_territory = root }
				}
				desc = "me_greek_1_black_sea.9.desc_1"
			}
			triggered_desc = {		# Rejected
				trigger = { scope:gm_1_barter_target_territory = root }
				desc = "me_greek_1_black_sea.8.desc_2"
			}
		}

	}
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:gm_1_greek_scope.current_ruler
    goto_location = scope:gm_hellenic_reclamation_scope

    trigger = { has_land = yes }

    immediate = {

    }

    option = {      # Counter accepted 
        name = me_greek_1_black_sea.9.a			
        trigger = { 
        	NOT = { scope:gm_1_barter_target_territory.owner = root }
        }
        add_treasury = { 	# Add double price
			value = gm_1_barter_territory_double_value
		}
        show_as_tooltip = {
        	scope:gm_1_barter_target_territory = { set_conquered_by = scope:gm_1_greek_scope }
        }
    }

    option = {      # Counter rejected
        name = me_greek_1_black_sea.9.b
        trigger = { scope:gm_1_barter_target_territory.owner = root }
        show_as_tooltip = {
        	scope:gm_1_barter_target_territory = { add_claim = scope:gm_1_greek_scope }
        }
    }
}

me_greek_1_black_sea.10 = {							#	1 - Hellenic Reclamation end
    type = country_event
    title = me_greek_1_black_sea.10.t
    desc = me_greek_1_black_sea.10.desc
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_1.family.head_of_family
    goto_location = scope:gm_hellenic_reclamation_scope

    trigger = {
		has_land = yes
		exists = scope:gm_hellenic_reclamation_scope
		scope:gm_hellenic_reclamation_scope.owner = root
    }

    immediate = {
    	custom_tooltip = me_greek_1_black_sea.10.tt
    	if = {
    		limit = {
    			scope:gm_hellenic_reclamation_scope = {
    				OR = {
    					province_id = 4538
						province_id = 4536
						province_id = 4254
						province_id = 480
						province_id = 1453
						province_id = 207
						province_id = 208 
    				}
    			}
    			NOT = { tag = MGA }
    			c:MGA = { has_land = yes }
    		}
    		c:MGA = { save_scope_as = me_gre_6_metropolis }
    	}
    	else_if = {
    		limit = {
    			scope:gm_hellenic_reclamation_scope = {
    				OR = {
    					province_id = 4549
						province_id = 1743
						province_id = 1734
						province_id = 1812
						province_id = 240
						province_id = 4248
						province_id = 4529 
    				}
    			}
    			NOT = { tag = MLO }
    			c:MLO = { has_land = yes }
    		}
    		c:MLO = { save_scope_as = me_gre_6_metropolis }
    	}
    }

    option = {      # 
        name = me_greek_1_black_sea.10.a
        if = {
        	limit = { 
        		exists = scope:gm_family_head_1.family.head_of_family
        		scope:gm_family_head_1.family.head_of_family = { is_alive = yes }
        	}
        	scope:gm_family_head_1.family.head_of_family = { add_loyalty = me_gre_1_upset_family_loyalty }
        }
       	hidden_effect = {
	       	scope:gm_hellenic_reclamation_scope = {
		       	create_country = {
					save_scope_as = me_gre_1_6_scope
		       	}
		    }
		    if = {
		    	limit = { 
		    		scope:gm_hellenic_reclamation_scope = {
		    			NOT = { province_dominant_culture_group = hellenic }
		    		}
		    	}
		    	scope:me_gre_1_6_scope = {
					if = {
						limit = {
							NOT = {
								primary_culture = root.culture 
							}
						}
						set_primary_culture_cleanup_effect = {
							NEW_PRIMARY_CULTURE = root.culture 
							MAKE_OLD_CULTURE_INTEGRATED = yes
						}
					}
				}
				
		    }
		    scope:gm_hellenic_reclamation_scope = {
		    	every_pops_in_province = {
		    		limit = {
		    			OR = {
		    				pop_type = freemen
		    				pop_type = citizen
		    			}
		    		}
		    		random = {
		    			chance = 50
		    			set_pop_culture = scope:me_gre_1_6_scope.culture
		    			set_pop_religion = scope:me_gre_1_6_scope.religion
		    		}
		    	}
		    	create_state_pop = citizen
		    	create_state_pop = freemen
		    }
		    if = {
		    	limit = { government = plutocratic_republic }
		    	scope:me_gre_1_6_scope = { change_government = plutocratic_republic }
		    }
		    else_if = {
		    	limit = { government = aristocratic_republic }
		    	scope:me_gre_1_6_scope = { change_government = aristocratic_republic }
		    }
		    else_if = {
		    	limit = { government = theocratic_republic }
		    	scope:me_gre_1_6_scope = { change_government = theocratic_republic }
		    }
		    else_if = {
		    	limit = { government = oligarchic_republic }
		    	scope:me_gre_1_6_scope = { change_government = oligarchic_republic }
		    }
		    else_if = {
		    	limit = { government = democratic_republic }
		    	scope:me_gre_1_6_scope = { change_government = democratic_republic }
		    }
		    scope:me_gre_1_6_scope = {
		    	add_treasury = { value = 50 }
		    	create_character = {
					culture = root.culture
					age = 40
					female = no
					no_traits = yes
		            add_trait = corrupt
		            add_trait = submissive
		            add_corruption = 20
					save_scope_as = me_gre_1_6_scope_leader
				}
				set_as_ruler = scope:me_gre_1_6_scope_leader	
			}
		    make_subject = {
		    	target = scope:me_gre_1_6_scope
		    	type = feudatory
		    }
		}
		custom_tooltip = me_greek_1_black_sea.10.at
		if = {
        	limit = { exists = scope:me_gre_6_metropolis }
        	scope:me_gre_6_metropolis = { 
        		add_opinion = { target = root modifier = me_gre_1_happy_metropolis_opmod }
        	}
        	if = {
        		limit = {
        			scope:gm_hellenic_reclamation_scope = {
	    				OR = {
	    					province_id = 4538
							province_id = 4536
							province_id = 4254
							province_id = 480
							province_id = 1453
							province_id = 207
							province_id = 208 
	    				}
	    			}
	    			any_country = {
	    				primary_culture = athenian
	    				has_land = yes
	    				NOT = {
	    					this = root
	    				}
	    			}
	    			NOT = { tag = MGA }
        		}
        		every_country = {
        			limit = {
        				primary_culture = athenian
	    				has_land = yes
	    				NOR = {
	    					tag = MGA
	    					this = root
	    				}
        			}
        			add_opinion = { target = root modifier = me_gre_1_happy_metro_type_opmod }
        		}
        	}
        	else_if = {
        		limit = {
        			scope:gm_hellenic_reclamation_scope = {
	    				OR = {
	    					province_id = 4549
							province_id = 1743
							province_id = 1734
							province_id = 1812
							province_id = 240
							province_id = 4248
							province_id = 4529 
	    				}
	    			}
	    			any_country = {
	    				primary_culture = ionian
	    				has_land = yes
	    				NOT = {
	    					this = root
	    				}
	    			}
	    			NOT = { tag = MLO }
        		}
        		every_country = {
        			limit = {
        				primary_culture = ionian
	    				has_land = yes
	    				NOR = {
	    					tag = MLO
	    					this = root
	    				}
        			}
        			add_opinion = { target = root modifier = me_gre_1_happy_metro_type_opmod }
        		}
        	}
       	}
    }

    option = {      # 
        name = me_greek_1_black_sea.10.b
        trigger = { exists = scope:gm_family_head_1.family.head_of_family }
        if = {
        	limit = {
        		NOT = {
        			any_character = { has_holding_in = scope:gm_hellenic_reclamation_scope }
	       	 	}
	       	 }
	       	 scope:gm_family_head_1.family.head_of_family = { add_holding = scope:gm_hellenic_reclamation_scope }
	    }
        if = {
        	limit = { exists = scope:me_gre_6_metropolis }
        	scope:me_gre_6_metropolis = { 
        		add_opinion = { target = root modifier = me_gre_1_sad_metropolis_opmod }
        	}
        }
    	if = {
    		limit = {
    			scope:gm_hellenic_reclamation_scope = {
    				OR = {
    					province_id = 4538
						province_id = 4536
						province_id = 4254
						province_id = 480
						province_id = 1453
						province_id = 207
						province_id = 208 
    				}
    			}
    			any_country = {
    				primary_culture = athenian
    				has_land = yes
    				NOT = {
    					this = root
    				}
    			}
    			NOT = { tag = MGA }
    		}
    		every_country = {
    			limit = {
    				primary_culture = athenian
    				has_land = yes
    				NOR = {
    					tag = MGA
    					this = root
    				}
    			}
    			add_opinion = { target = root modifier = me_gre_1_sad_metro_type_opmod }
    		}
    	}
    	else_if = {
    		limit = {
    			scope:gm_hellenic_reclamation_scope = {
    				OR = {
    					province_id = 4549
						province_id = 1743
						province_id = 1734
						province_id = 1812
						province_id = 240
						province_id = 4248
						province_id = 4529 
    				}
    			}
    			any_country = {
    				primary_culture = ionian
    				has_land = yes
    				NOT = {
    					this = root
    				}
    			}
    			NOT = { tag = MLO }
    		}
    		every_country = {
    			limit = {
    				primary_culture = ionian
    				has_land = yes
    				NOR = {
    					tag = MLO
    					this = root
    				}
    			}
    			add_opinion = { target = root modifier = me_gre_1_sad_metro_type_opmod }
    		}
    	}
    }
}

me_greek_1_black_sea.11 = {							#	14 - Barbarian Bartering start
    type = country_event
    title = me_greek_1_black_sea.11.t
    desc = me_greek_1_black_sea.11.desc
    picture = celtic_village
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_1

    trigger = { has_land = yes }

    option = {      # 
        name = me_greek_1_black_sea.11.a
        custom_tooltip = me_greek_1_black_sea.11.at
    }
}

me_greek_1_black_sea.12 = {							#	5 - Approach Colonies start
    type = country_event
    title = me_greek_1_black_sea.12.t
    desc = {
    	desc = me_greek_1_black_sea.12.desc_1
    	desc = me_greek_1_black_sea.12.desc
    }
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_1

    trigger = { has_land = yes }

    option = {      # 
        name = me_greek_1_black_sea.12.a
        custom_tooltip = me_greek_1_black_sea.12.at
    }
}

me_greek_1_black_sea.13 = {							#	1 - Family Head Replacement
    type = country_event
    title = me_greek_1_black_sea.13.t
    desc = {
    	first_valid = {
			triggered_desc = {		# Dead
				trigger = { 
					scope:gm_old_family_head = { is_alive = no }
				}
				desc = "me_greek_1_black_sea.13.desc_1"
			}
			triggered_desc = {		# Alive abroad
				trigger = { 
					scope:gm_old_family_head = { 
						is_alive = yes 
						NOT = { employer = root }
					}
				}
				desc = "me_greek_1_black_sea.13.desc_2"
			}
			triggered_desc = {		# Alive prison
				trigger = { 
					scope:gm_old_family_head = { 
						is_alive = yes 
						prisoner = yes
					}
				}
				desc = "me_greek_1_black_sea.13.desc_3"
			}
		}
		first_valid = {
			triggered_desc = {		# Same family
				trigger = { scope:gm_family_head_1.family = scope:gm_old_family_head.family }
				desc = "me_greek_1_black_sea.13.desc_5"
			}
			triggered_desc = {		# New family
				trigger = { 
					NOT = { scope:gm_family_head_1.family = scope:gm_old_family_head.family }
				}
				desc = "me_greek_1_black_sea.13.desc_4"
			}
		}
	}
    picture = greek_home
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_1
    right_portrait = scope:gm_old_family_head

    trigger = { has_land = yes }

    immediate = {
    	scope:gm_old_family_head = {
			if = {
				limit = {
					OR = {
						is_alive = no
						NOT = { employer = root }
					}
					exists = family
					family = {
						num_of_members > 0
						any_family_member = {
							is_alive = yes
							employer = root
							NOT = { this = scope:gm_old_family_head }
							trigger_if = {
								limit = {
									employer = { gender_equality = no }
								}
								is_female = no
							}
						}
					}
				}
				family = {
					ordered_family_member = {
						limit = {
							NOT = { this = scope:gm_old_family_head }
							trigger_if = {
								limit = {
									employer = { gender_equality = no }
								}
								is_female = no
							}
						}
						order_by = prominence
						save_scope_as = gm_family_head_1
						set_variable = gm_family_head_1_flag
					}
				}
			}
			else_if = {
				limit = {
					is_alive = yes
					OR = {
						NOT = { employer = root }
						prisoner = yes
					}
				}
				family = {
					ordered_family_member = {
						limit = {
							NOT = { this = scope:gm_old_family_head }
							trigger_if = {
								limit = {
									employer = { gender_equality = no }
								}
								is_female = no
							}
						}
						order_by = prominence
						save_scope_as = gm_family_head_1
						set_variable = gm_family_head_1_flag
					}
				}	
			}
			else = {
				ROOT = {
					random_character = {
						limit = { is_head_of_family = yes }
						weight = {
							modifier = {
								factor = 5
								has_culture_group = hellenic
							}
							modifier = {
								factor = 10
							 	character_traditionalist_party_trigger = yes
							}
							modifier = {
								factor = 20
								is_party_leader = yes
								character_traditionalist_party_trigger = yes
							}
						}
						save_scope_as = gm_family_head_1
						set_variable = gm_family_head_1_flag
					}
				}
			}
		}
    }

    option = {      # 
        name = me_greek_1_black_sea.13.a
        trigger = { scope:gm_family_head_1.family = scope:gm_old_family_head.family }
    }

    option = {      #  
        name = me_greek_1_black_sea.13.b
        trigger = { 
			NOT = { scope:gm_family_head_1.family = scope:gm_old_family_head.family }
		}
    }
}

me_greek_1_black_sea.14 = {							#	1 - Bithynia Coast/Crack the Khersonesos/Coast of Getes/Aeetes Garden
    type = country_event
    title = {
    	first_valid = {
			triggered_desc = {		# Bithynia Coast
				trigger = { root.var:gm_1_path = 1 }
				desc = "me_greek_1_black_sea.14.t_1"
			}
			triggered_desc = {		# Crack the Khersonesos
				trigger = { root.var:gm_1_path = 2 }
				desc = "me_greek_1_black_sea.14.t_2"
			}
			triggered_desc = {		# Coast of the Getes
				trigger = { root.var:gm_1_path = 3 }
				desc = "me_greek_1_black_sea.14.t_3"
			}
			triggered_desc = {		# Aeetes Garden
				trigger = { root.var:gm_1_path = 4 }
				desc = "me_greek_1_black_sea.14.t_4"
			}
		}
	}
	#me_greek_1_black_sea.14.t
    desc = {
    	desc = "me_greek_1_black_sea.14.desc"
    	first_valid = {
			triggered_desc = {		# Bithynia Coast
				trigger = { root.var:gm_1_path = 1 }
				desc = "me_greek_1_black_sea.14.desc_1"
			}
			triggered_desc = {		# Crack the Khersonesos
				trigger = { root.var:gm_1_path = 2 }
				desc = "me_greek_1_black_sea.14.desc_2"
			}
			triggered_desc = {		# Coast of the Getes
				trigger = { root.var:gm_1_path = 3 }
				desc = "me_greek_1_black_sea.14.desc_3"
			}
			triggered_desc = {		# Aeetes Garden
				trigger = { root.var:gm_1_path = 4 }
				desc = "me_greek_1_black_sea.14.desc_4"
			}
		}
    }
    picture = greek_marketplace
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_1

    trigger = { has_land = yes }

    immediate = {
    	if = {
    		limit = {
    			exists = scope:gm_family_head_1
    			scope:gm_family_head_1 = { is_alive = yes }
    		}
    		custom_tooltip = greek_1_loyalty_reward_tt
    		hidden_effect = {
	    		scope:gm_family_head_1.family = {
	    			every_family_member = { add_loyalty = loyalty_gm_1_pleased_family }
	    		}
	    	}
    	}
    	if = {
        	limit = { root.var:gm_1_path = 1 }
        	custom_tooltip = me_greek_1_black_sea.14.at1
        }
       	else_if = {
        	limit = { root.var:gm_1_path = 2 }
        	custom_tooltip = me_greek_1_black_sea.14.at2
        }
        else_if = {
        	limit = { root.var:gm_1_path = 3 }
        	custom_tooltip = me_greek_1_black_sea.14.at3
        }
        else_if = {
        	limit = { root.var:gm_1_path = 4 }
        	custom_tooltip = me_greek_1_black_sea.14.at4
        }
    }

    option = {      # 
        name = me_greek_1_black_sea.14.a
        if = {
        	limit = { root.var:gm_1_path = 1 }
    		custom_tooltip = me_greek_4_west.14.tt
            p:207.state = { me_gre_new_markets_effect = yes }
            hidden_effect = {
                p:1812.state = { me_gre_new_markets_effect = yes }
                p:1807.state = { me_gre_new_markets_effect = yes }
                p:1734.state = { me_gre_new_markets_effect = yes }
            }
        }
       	else_if = {
        	limit = { root.var:gm_1_path = 2 }
        	custom_tooltip = me_greek_4_west.14.tt
            p:4549.state = { me_gre_new_markets_effect = yes }
            hidden_effect = {
                p:4544.state = { me_gre_new_markets_effect = yes }
                p:4538.state = { me_gre_new_markets_effect = yes }
                p:4536.state = { me_gre_new_markets_effect = yes }
            }
        }
        else_if = {
        	limit = { root.var:gm_1_path = 3 }
        	custom_tooltip = me_greek_4_west.14.tt
            p:4529.state = { me_gre_new_markets_effect = yes }
            hidden_effect = {
                p:4526.state = { me_gre_new_markets_effect = yes }
                p:4513.state = { me_gre_new_markets_effect = yes }
                p:481.state = { me_gre_new_markets_effect = yes }
            }
        }
        else_if = {
        	limit = { root.var:gm_1_path = 4 }
        	custom_tooltip = me_greek_4_west.14.tt
            p:1725.state = { me_gre_new_markets_effect = yes }
            hidden_effect = {
                p:1720.state = { me_gre_new_markets_effect = yes }
                p:1730.state = { me_gre_new_markets_effect = yes }
                p:1738.state = { me_gre_new_markets_effect = yes }
            }
        }
        else = { custom_tooltip = me_greek_1_black_sea.14.tt }
    }
}

me_greek_1_black_sea.15 = {							#	Euxine Patrols
    type = country_event
    title = "me_greek_1_black_sea.15.t"
    desc = "me_greek_1_black_sea.15.desc"
    picture = grand_ship
    left_portrait = current_ruler
    right_portrait = scope:gm_1_euxine_admiral

    trigger = { has_land = yes }

    immediate = {
    	if = {
            limit = { exists = scope:gm_1_euxine_admiral }
            scope:gm_1_euxine_admiral = { add_loyalty = loyalty_family_admiral }
        }
    	custom_tooltip = me_greek_1_black_sea.15.tt
    }

    option = {      # 
        name = me_greek_1_black_sea.15.a
        scope:gm_1_euxine_navy = {
        	add_unit_modifier = {
        		name = gm_1_hardy_navy
        		duration = 7300
        	}
        }
    }

    option = {      #  
        name = me_greek_1_black_sea.15.b
        scope:gm_1_euxine_navy = {
        	add_unit_modifier = {
        		name = gm_1_swift_navy
        		duration = 7300
        	}
        }
    }
}

me_greek_1_black_sea.16 = {							#	Secure Cattle Passage
    type = country_event
    title = "me_greek_1_black_sea.16.t"
    desc = "me_greek_1_black_sea.16.desc"
    picture = greek_city

    trigger = { has_land = yes }

    immediate = {
    	me_gre_1_3_effect = yes
    }

    option = {      # 
        name = me_greek_1_black_sea.16.a
        custom_tooltip = me_greek_1_black_sea.16.at
    }
}

me_greek_1_black_sea.17 = {							#	2 - Argonaut Haven
    type = country_event
    title = "me_greek_1_black_sea.17.t"
    desc = "me_greek_1_black_sea.17.desc"
    picture = greek_city
    goto_location = scope:me_gre_1_argo_scope

    trigger = { has_land = yes }

    immediate = {
    	ordered_owned_province = {
			limit = { me_gre_1_2_argo_trigger = yes }
			order_by = total_population
			save_scope_as = me_gre_1_argo_scope
		}
    	custom_tooltip = me_greek_1_black_sea.17.tt
    	add_1_free_province_investments = yes
    }

    option = {      # 
        name = me_greek_1_black_sea.17.a
        scope:me_gre_1_argo_scope = {
        	add_province_modifier = {
        		name = me_gre_1_2_pmod_1
        	}
        }
    }

    option = {      #  
        name = me_greek_1_black_sea.17.b
        scope:me_gre_1_argo_scope = {
        	add_province_modifier = {
        		name = me_gre_1_2_pmod_2
        	}
        }
    }
}

me_greek_1_black_sea.18 = {							#	5 - Approach Colonies - Choice
    type = country_event
    title = me_greek_1_black_sea.18.t
    desc = "me_greek_1_black_sea.18.desc"
    picture = greek_city

    trigger = { has_land = yes }

    immediate = {
		if = {		# Set variable used for refiring event with second list
			limit = {
				NOT = { has_variable = gm_colony_tracker }
			}
			set_variable = {
				name = gm_colony_tracker
				value = 1
			}
		}
		hidden_effect = {	
			while = {	# Save up to 6 colonies
				limit = {
					any_country = {
						gm_1_colony_trigger = yes
						NOR = {
							AND = {
								exists = scope:gm_1_colony_scope_1
								this = scope:gm_1_colony_scope_1
							}
							AND = {
								exists = scope:gm_1_colony_scope_2
								this = scope:gm_1_colony_scope_2
							}
							AND = {
								exists = scope:gm_1_colony_scope_3
								this = scope:gm_1_colony_scope_3
							}
							AND = {
								exists = scope:gm_1_colony_scope_4
								this = scope:gm_1_colony_scope_4
							}
							AND = {
								exists = scope:gm_1_colony_scope_5
								this = scope:gm_1_colony_scope_5
							}
							AND = {
								exists = scope:gm_1_colony_scope_6
								this = scope:gm_1_colony_scope_6
							}
							this = root
						}				
					}
				}
				ordered_country = {
					limit = {
						gm_1_colony_trigger = yes
						NOR = {
							AND = {
								exists = scope:gm_1_colony_scope_1
								this = scope:gm_1_colony_scope_1
							}
							AND = {
								exists = scope:gm_1_colony_scope_2
								this = scope:gm_1_colony_scope_2
							}
							AND = {
								exists = scope:gm_1_colony_scope_3
								this = scope:gm_1_colony_scope_3
							}
							AND = {
								exists = scope:gm_1_colony_scope_4
								this = scope:gm_1_colony_scope_4
							}
							AND = {
								exists = scope:gm_1_colony_scope_5
								this = scope:gm_1_colony_scope_5
							}
							AND = {
								exists = scope:gm_1_colony_scope_6
								this = scope:gm_1_colony_scope_6
							}
							this = root
						}	
					}
					if = {
						limit = {
							NOT = { exists = scope:gm_1_colony_scope_1 }
						}
						save_scope_as = gm_1_colony_scope_1
					}
					else_if = {
						limit = {
							exists = scope:gm_1_colony_scope_1
							NOR = { 
								exists = scope:gm_1_colony_scope_2
								this = scope:gm_1_colony_scope_1
							}
						}
						save_scope_as = gm_1_colony_scope_2
					}
					else_if = {
						limit = {
							exists = scope:gm_1_colony_scope_1
							exists = scope:gm_1_colony_scope_2
							NOR = { 
								exists = scope:gm_1_colony_scope_3
								this = scope:gm_1_colony_scope_1
								this = scope:gm_1_colony_scope_2
							}
						}
						save_scope_as = gm_1_colony_scope_3
					}
					else_if = {
						limit = {
							exists = scope:gm_1_colony_scope_1
							exists = scope:gm_1_colony_scope_2
							exists = scope:gm_1_colony_scope_3
							NOR = { 
								exists = scope:gm_1_colony_scope_4
								this = scope:gm_1_colony_scope_1
								this = scope:gm_1_colony_scope_2
								this = scope:gm_1_colony_scope_3
							}
						}
						save_scope_as = gm_1_colony_scope_4
					}
					else_if = {
						limit = {
							exists = scope:gm_1_colony_scope_1
							exists = scope:gm_1_colony_scope_2
							exists = scope:gm_1_colony_scope_3
							exists = scope:gm_1_colony_scope_4
							NOR = { 
								exists = scope:gm_1_colony_scope_5
								this = scope:gm_1_colony_scope_1
								this = scope:gm_1_colony_scope_2
								this = scope:gm_1_colony_scope_3
								this = scope:gm_1_colony_scope_4
							}
						}
						save_scope_as = gm_1_colony_scope_5
					}
					else_if = {
						limit = {
							exists = scope:gm_1_colony_scope_1
							exists = scope:gm_1_colony_scope_2
							exists = scope:gm_1_colony_scope_3
							exists = scope:gm_1_colony_scope_4
							exists = scope:gm_1_colony_scope_5
							NOR = { 
								exists = scope:gm_1_colony_scope_6
								this = scope:gm_1_colony_scope_1
								this = scope:gm_1_colony_scope_2
								this = scope:gm_1_colony_scope_3
								this = scope:gm_1_colony_scope_4
								this = scope:gm_1_colony_scope_5
							}
						}
						save_scope_as = gm_1_colony_scope_6
					}
				}
			}
		}
    }

    option = {      # City 1
        name = me_greek_1_black_sea.18.a
        trigger = {
        	root.var:gm_colony_tracker = 1
        	exists = scope:gm_1_colony_scope_1
        }
        scope:gm_1_colony_scope_1 = { gm_1_colony_scope_effect = yes }
        gm_1_colony_option_effect = yes
    }

    option = {  	# City 2    
        name = me_greek_1_black_sea.18.b
		trigger = {
        	root.var:gm_colony_tracker = 1
        	exists = scope:gm_1_colony_scope_2
        }
        scope:gm_1_colony_scope_2 = { gm_1_colony_scope_effect = yes }
        gm_1_colony_option_effect = yes
    }

    option = {      # City 3
        name = me_greek_1_black_sea.18.c
        trigger = {
        	root.var:gm_colony_tracker = 1
        	exists = scope:gm_1_colony_scope_3
        }
        scope:gm_1_colony_scope_3 = { gm_1_colony_scope_effect = yes }
        gm_1_colony_option_effect = yes
    }

    option = {      # City 4
        name = me_greek_1_black_sea.18.d
        trigger = {
        	OR = {
        		AND = {
        			root.var:gm_colony_tracker = 2
        			exists = scope:gm_1_colony_scope_4
        		}
        		AND = {
        			root.var:gm_colony_tracker = 1
    				exists = scope:gm_1_colony_scope_4
    				NOT = { exists = scope:gm_1_colony_scope_5 }
        		}
        	}
        }
        scope:gm_1_colony_scope_4 = { gm_1_colony_scope_effect = yes }
        gm_1_colony_option_effect = yes
    }

    option = {    	# City 5  
        name = me_greek_1_black_sea.18.e
        trigger = {
        	root.var:gm_colony_tracker = 2
        	exists = scope:gm_1_colony_scope_5
        }
        scope:gm_1_colony_scope_5 = { gm_1_colony_scope_effect = yes }
        gm_1_colony_option_effect = yes
    }

    option = {      # City 6
        name = me_greek_1_black_sea.18.f
        trigger = {
        	root.var:gm_colony_tracker = 2
        	exists = scope:gm_1_colony_scope_6
        }
        scope:gm_1_colony_scope_6 = { gm_1_colony_scope_effect = yes }
        gm_1_colony_option_effect = yes
    }

    option = {		# Next list
        name = me_greek_1_black_sea.18.g
        trigger = {
    		OR = {
        		AND = {
        			root.var:gm_colony_tracker = 1
        			exists = scope:gm_1_colony_scope_5
        		}
        		root.var:gm_colony_tracker = 2
        	}
        }
        if = {
        	limit = { root.var:gm_colony_tracker = 1 }	
        	change_variable = {
        		name = gm_colony_tracker
        		add = 1
        	}
        }
        else_if = {
        	limit = { root.var:gm_colony_tracker = 2 }	
        	change_variable = {
        		name = gm_colony_tracker
        		subtract = 1
        	}
        }
        trigger_event = { id = me_greek_1_black_sea.18 }
        custom_tooltip = me_greek_1_black_sea.18.gt
    }

    option = {		# End
        name = me_greek_1_black_sea.18.h
		change_variable = {
    		name = gm_colony_tracker
    		add = 3
    	}
        custom_tooltip = me_greek_1_black_sea.18.ht
    }

    after = {
    	if = {
    		limit = { root.var:gm_colony_tracker > 2 }
    		remove_variable = gm_colony_tracker
    	}
    }
}

me_greek_1_black_sea.19 = {							#	5 - Approach Colony - Offer
    type = country_event
    title = me_greek_1_black_sea.19.t
    desc = "me_greek_1_black_sea.19.desc"
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:gm_1_greek_scope.current_ruler

    trigger = { has_land = yes }

    immediate = {
		save_scope_as = gm_1_colony_target_country
    }

    option = {		# Accept
        name = me_greek_1_black_sea.19.a
		add_treasury = { value = gm_1_colony_value }
		show_as_tooltip = {
			scope:gm_1_greek_scope = {
				make_subject = {
					target = root
					type = feudatory
				}
			}
		}
		scope:gm_1_greek_scope = {
			set_variable = {
				name = gm_colony_response
				value = 1
			}
		}
		ai_chance = {
			base = 2
			modifier = {
				factor = 2
				scope:gm_1_greek_scope = { is_ai = no }
			}
			modifier = {
				factor = 2
				gm_1_colony_relative_value < 30
			}
			modifier = {
				factor = 2
				opinion = { target = scope:gm_1_greek_scope value > 50 }
			}
			modifier = {
				factor = 2
				scope:gm_family_head_1.charisma >= 7
			}
		}
		ai_chance = {
			base = 2
		}
    }
	
    option = {   	# Counter offer 
        name = me_greek_1_black_sea.19.b
        custom_tooltip = me_greek_1_black_sea.19.bt
        scope:gm_1_greek_scope = { 
			set_variable = {
				name = gm_colony_response
				value = 2
			}
		}
		ai_chance = {
			base = 2
			modifier = {
				factor = 2
				gm_1_colony_relative_value < 30
				gm_1_colony_relative_value > 15
			}
			modifier = {
				factor = 2
				opinion = { target = scope:gm_1_greek_scope value > 0 }
			}
			modifier = {
				factor = 2
				scope:gm_family_head_1.charisma >= 5
			}
		}
		ai_chance = {
			base = 2
		}
	}

	option = {   	# Reject 
        name = me_greek_1_black_sea.19.c
        current_ruler = { add_popularity = popularity_small }
        custom_tooltip = me_greek_1_black_sea.19.ct
        show_as_tooltip = { 
        	reverse_add_opinion = { target = scope:gm_1_greek_scope modifier = me_gre_1_barter_rejection_opmod }
        }
        scope:gm_1_greek_scope = { 
			set_variable = {
				name = gm_colony_response
				value = 3
			}
		}
		ai_chance = {
			base = 2
			modifier = {
				factor = 2
				gm_1_colony_relative_value >= 30
			}
			modifier = {
				factor = 2
				opinion = { target = scope:gm_1_greek_scope value < 0 }
			}
			modifier = {
				factor = 2
				scope:gm_family_head_1.charisma < 5
			}
			modifier = {
				factor = 2
				scope:gm_1_greek_scope = { is_ai = yes }
			}
		}
	}

	after = {
		scope:gm_1_greek_scope = {
			trigger_event = {
				id = me_greek_1_black_sea.20
				days = { 5 10 }
			}
		}
	}
}

me_greek_1_black_sea.20 = {							#	5 - Approach Colony - Response
    type = country_event
    title = me_greek_1_black_sea.20.t
    desc = {
    	desc = me_greek_1_black_sea.20.desc
		first_valid = {
			triggered_desc = {		# Accepted
				trigger = { root.var:gm_colony_response = 1 }
				desc = "me_greek_1_black_sea.20.desc_1"
			}
			triggered_desc = {		# Countered
				trigger = { root.var:gm_colony_response = 2 }
				desc = "me_greek_1_black_sea.20.desc_2"
			}
			triggered_desc = {		# Rejected
				trigger = { root.var:gm_colony_response = 3 }
				desc = "me_greek_1_black_sea.20.desc_3"
			}
		}
	}
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:gm_family_head_1
    right_portrait = scope:gm_1_colony_target_scope.current_ruler
    goto_location = scope:gm_1_colony_target_scope.capital_scope

    trigger = { has_land = yes }

    immediate = {
		if = {		# Deduct price if offer accepted
			limit = { root.var:gm_colony_response = 1 }
			custom_tooltip = me_greek_1_black_sea.20.tt
			add_treasury = { subtract = gm_1_colony_value }
			make_subject = {
				target = scope:gm_1_colony_target_country
				type = feudatory
			}
		}
    }

    option = {      # Accepted - holy mackerel
        name = me_greek_1_black_sea.20.a
        trigger = { root.var:gm_colony_response = 1 }
    }
	
    option = {    # Counter offer - accept
        name = me_greek_1_black_sea.20.b
        trigger = { root.var:gm_colony_response = 2 }
	    add_treasury = { 	# Deduct double price
			value = gm_1_colony_double_value
			multiply = -1
		}
		make_subject = {
			target = scope:gm_1_colony_target_country
			type = feudatory
		}
		scope:gm_family_head_1 = { add_loyalty = loyalty_defended_interests }
		scope:gm_1_colony_target_country = {
   			trigger_event = { id = me_greek_1_black_sea.21 }
	    }
	}

	option = {    # Counter offer - reject
        name = me_greek_1_black_sea.20.c
        current_ruler = { add_popularity = popularity_small }
        trigger = { root.var:gm_colony_response = 2 }
	    scope:gm_1_colony_target_country = {
	   		trigger_event = { id = me_greek_1_black_sea.21 }
        	every_owned_province = { add_claim = root }
        }
	}

	option = {    # Rejected - goshed darn it
        name = me_greek_1_black_sea.20.d
        trigger = { root.var:gm_colony_response = 3 }
        scope:gm_family_head_1 = { add_popularity = subtract_popularity_small }
        scope:gm_1_colony_target_country = { 
        	every_owned_province = { add_claim = root }
        }
	}

	after = { remove_variable = gm_colony_response }
}

me_greek_1_black_sea.21 = {							#	5 - Approach Colony - Counter Offer Response
    type = country_event
    title = me_greek_1_black_sea.21.t
    desc = {
    	desc = me_greek_1_black_sea.21.desc
		first_valid = {
			triggered_desc = {		# Accepted
				trigger = { 
					is_subject_of = scope:gm_1_greek_scope
				}
				desc = "me_greek_1_black_sea.21.desc_1"
			}
			triggered_desc = {		# Rejected
				trigger = { 
					NOT = { is_subject_of = scope:gm_1_greek_scope }
				}
				desc = "me_greek_1_black_sea.20.desc_2"
			}
		}

	}
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:gm_1_greek_scope.current_ruler
    right_portrait = scope:gm_family_head_1

    trigger = { has_land = yes }

    option = {      # Counter accepted 
        name = me_greek_1_black_sea.21.a			
        trigger = { is_subject_of = scope:gm_1_greek_scope }
        add_treasury = { 	# Add double price
			value = gm_1_colony_double_value
		}
        show_as_tooltip = {
        	scope:gm_1_greek_scope = {
	        	make_subject = {
					target = scope:gm_1_colony_target_country
					type = feudatory
				}
			}
        }
    }

    option = {      # Counter rejected
        name = me_greek_1_black_sea.21.b
        trigger = { 
        	NOT = { is_subject_of = scope:gm_1_greek_scope }
        }
        custom_tooltip = me_greek_1_black_sea.19.ct
    }
}

me_greek_1_black_sea.22 = {							#	19 - Maiotic Ambition
    type = country_event
    title = "me_greek_1_black_sea.22.t"
    desc = "me_greek_1_black_sea.22.desc"
    picture = greek_marketplace

    trigger = { has_land = yes }

    immediate = {
    	p:4557 = {
    		create_state_pop = citizen
			create_state_pop = freemen
			add_province_modifier = {
		    	name = me_gre_1_19_pmod
		    	duration = 7300 # 20 years
		    }
		}
    }

    option = {      # 
        name = me_greek_1_black_sea.22.a
        custom_tooltip = me_greek_1_black_sea.22.at
    }
}

me_greek_1_black_sea.23 = {							#	12 - Megaran Ambition
    type = country_event
    title = "me_greek_1_black_sea.23.t"
    desc = "me_greek_1_black_sea.23.desc"
    picture = greek_marketplace

    trigger = { has_land = yes }

    immediate = {
    	p:4538 = { create_state_pop = citizen }
		p:4536 = { create_state_pop = citizen }
		p:4254 = { create_state_pop = citizen }
		p:480 = { create_state_pop = citizen }
		p:1453 = { create_state_pop = citizen }
		p:207 = { create_state_pop = citizen }
		p:208 = { create_state_pop = citizen }
    }

    option = {      # 
        name = me_greek_1_black_sea.23.a
        add_country_modifier = {
        	name = me_gre_1_12_pmod
        	duration = 7300 # 20 years
        }
        custom_tooltip = me_greek_1_black_sea.23.at
    }
}

me_greek_1_black_sea.24 = {							#	13 - Milesian Dream
    type = country_event
    title = "me_greek_1_black_sea.24.t"
    desc = "me_greek_1_black_sea.24.desc"
    picture = greek_marketplace

    trigger = { has_land = yes }

    immediate = {
    	p:4549 = { create_state_pop = citizen }
		p:1743 = { create_state_pop = citizen }
		p:1734 = { create_state_pop = citizen }
		p:1812 = { create_state_pop = citizen }
		p:240 = { create_state_pop = citizen }
		p:4248 = { create_state_pop = citizen }
		p:4529 = { create_state_pop = citizen }
	}

    option = {      # 
        name = me_greek_1_black_sea.24.a
        add_country_modifier = {
        	name = me_gre_1_13_pmod
        	duration = 7300 # 20 years
        }
        custom_tooltip = me_greek_1_black_sea.24.at
    }
}

me_greek_1_black_sea.25 = {							#	15 - Root Out Piracy
    type = country_event
    title = "me_greek_1_black_sea.25.t"
    desc = "me_greek_1_black_sea.25.desc"
    picture = greek_political_discussion

    trigger = { has_land = yes }

    immediate = {
    	add_country_modifier = {
			name = me_gre_1_15_cmod
			duration = -1
		}
	}	

    option = {      # 
        name = me_greek_1_black_sea.25.a
        custom_tooltip = me_greek_1_black_sea.25.at
    }
}

me_greek_1_black_sea.26 = {							#	16 - Shepherd Corsairs
    type = country_event
    title = "me_greek_1_black_sea.26.t"
    desc = "me_greek_1_black_sea.26.desc"
    picture = ship_in_storm

    trigger = { has_land = yes }

    immediate = {
    	if = {
    		limit = {
    			var:value_of_pirate_havens > 0
    		}
    		add_treasury = { 
    			value = 0
				subtract = var:value_of_pirate_havens
			}
    	}
    	hidden_effect = {
    		every_owned_province = {
    			limit = {
    				has_province_modifier = pirate_haven_modifier
    				OR = {
    					is_in_region = bithynia_region
    					is_in_region = colchis_region
    					is_in_region = taurica_region
    					is_in_area = olbia_area
    					is_in_area = scythia_area
    					is_in_area = moesia_orientalis_area
    					is_in_area = haemimontus_area
    					is_in_area = europa_area
    				}
    			}
    			remove_province_modifier = pirate_haven_modifier
    		}
	    	while = {
	    		limit = {
	    			root.var:me_gre_1_16_pirate_counter > 0
	    		}
	    		random_ownable_province = {
	    			limit = {
	    				is_port = yes
	    				has_owner = yes
	    				NOT = { owner = root }
	    				OR = {
	    					is_in_region = macedonia_region
	    					is_in_region = asia_region
	    					is_in_region = greece_region
	    					is_in_region = cyrenaica_region
	    					is_in_region = lower_egypt_region
	    					is_in_region = cilicia_region
	    					is_in_region = syria_region
	    					is_in_region = palestine_region
	    					is_in_region = illyria_region
	    					is_in_region = magna_graecia_region
	    				}
	    				NOT = { has_province_modifier = pirate_haven_modifier }
	    			}
	    			weight = {
	    				base = 1
	    				modifier = {
	    					owner = { country_culture_group = hellenic }
	    					factor = 100
	    				}
	    				modifier = {
	    					owner = {
	    						NOT = {
	    							any_owned_province = { has_province_modifier = pirate_haven_modifier }
	    						}
	    					}
	    					factor = 5
	    				}
	    				modifier = {
	    					owner = { is_ai = no }
	    					factor = 10
	    				}
	    				modifier = {
	    					total_population > 10
	    					factor = 10
	    				}
	    				modifier = {
	    					civilization_value > 30
	    					factor = 10
	    				}
	    				modifier = {
	    					has_variable = me_gre_16_ping_flag
	    					factor = 0.1
	    				}
	    			}
	    			add_province_modifier = { name = pirate_haven_modifier }
	    			if = {
	    				limit = {
	    					NOT = {
	    						owner = { 
	    							any_owned_province = { has_variable = me_gre_16_ping_flag }
	    						}
	    					}
	    				}
						owner = {
							trigger_event = { id = me_greek_1_black_sea.29 }
						}
	    			}
	    			set_variable = me_gre_16_ping_flag
	    			root = {
	    				change_variable = {
	    					name = me_gre_1_16_pirate_counter
	    					subtract = 1
	    				}
	    			}
	    		}
	    	}
    		remove_variable = me_gre_1_16_pirate_counter
    	}
    	add_country_modifier = {
			name = me_gre_1_16_cmod
			duration = -1
		}
		every_country = {
			limit = {
				any_owned_province = { has_variable = me_gre_16_ping_flag }
				NOT = { this = root }
			}
			add_opinion = { target = root modifier = me_gre_1_16_bad_opmod }
		}
	}

    option = {      # 
        name = me_greek_1_black_sea.26.a
        custom_tooltip = me_greek_1_black_sea.26.at
    }

    after = {
    	if = {
    		limit = {
    			has_variable = value_of_pirate_havens
    		}
    		remove_variable = value_of_pirate_havens
    	}
    }
}

me_greek_1_black_sea.27 = {							#	17 - Resurgent Phokis
    type = country_event
    title = "me_greek_1_black_sea.27.t"
    desc = "me_greek_1_black_sea.27.desc"
    picture = greek_political_discussion

    trigger = { has_land = yes }

    immediate = {
    	current_ruler = { add_popularity = popularity_medium }
    	add_treasury = -200
		add_country_modifier = { 
			name = me_gre_1_17_cmod
			duration = -1
		}
    	if = {
    		limit = {
    			owns_or_subject_owns = 285
    		}
    		p:285 = {
				create_state_pop = citizen
				create_state_pop = citizen
				add_province_modifier = { name = me_gre_4_17_pmod }
				change_province_name = "Phokis"
			}
    	}
	}

    option = {      # 
        name = me_greek_1_black_sea.27.a
        custom_tooltip = me_greek_1_black_sea.27.at
    }
}

me_greek_1_black_sea.28 = { 						# 	5 - Approach Colonies bypass
    type = country_event
    title = me_greek_1_black_sea.28.t
    desc = me_greek_1_black_sea.28.desc
    picture = greek_political_discussion

    trigger = { has_land = yes }

    option = {      
        name = me_greek_1_black_sea.28.a
        custom_tooltip = me_greek_1_black_sea.28.at
    }
}

me_greek_1_black_sea.29 = {							#	16 - Shepherd Corsairs ping
    type = country_event
    title = "me_greek_1_black_sea.29.t"
    desc = "me_greek_1_black_sea.29.desc"
    picture = ship_in_storm
    left_portrait = root.current_ruler
    right_portrait = scope:gm_1_greek_scope.current_ruler

    trigger = { has_land = yes }

    immediate = {
    	show_as_tooltip = {
    		random_owned_province = {
    			limit = { has_variable = me_gre_16_ping_flag }
    			add_province_modifier = { name = pirate_haven_modifier }
    		}
    		add_opinion = { target = scope:gm_1_greek_scope modifier = me_gre_1_16_bad_opmod }
    	}
	}

    option = {      # 
        name = me_greek_1_black_sea.29.a
        hidden_effect = {
    		random_owned_province = {
    			limit = { has_variable = me_gre_16_ping_flag }
    			remove_variable = me_gre_16_ping_flag
    		}
        }
    }
}

me_greek_1_black_sea.30 = { 						# 	5 - Barbarian bartering bypass
    type = country_event
    title = me_greek_1_black_sea.30.t
    desc = me_greek_1_black_sea.30.desc
    picture = greek_political_discussion

    trigger = { has_land = yes }

    option = {      
        name = me_greek_1_black_sea.30.a
        custom_tooltip = me_greek_1_black_sea.30.at
    }
}

me_greek_1_black_sea.31 = { 						# 	18 - Skythoi Security end
    type = country_event
    title = me_greek_1_black_sea.31.t
    desc = me_greek_1_black_sea.31.desc
    picture = celtic_diplomacy

    trigger = { has_land = yes }

    immediate = {
    	add_country_modifier = {
    		name = me_gre_1_18_cmod
    		duration = 3650 # 10 years
    	}
    }

    option = {      
        name = me_greek_1_black_sea.31.a
        custom_tooltip = me_greek_1_black_sea.31.at
    }
}
