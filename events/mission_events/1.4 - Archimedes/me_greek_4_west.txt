namespace = me_greek_4_west

me_greek_4_west.1 = {                           # Mission start
    type = country_event
    title = me_greek_4_west.1.t
    desc = me_greek_4_west.1.desc
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_4

    trigger = { has_land = yes }

    option = {      
        name = me_greek_4_west.1.a
        add_country_modifier = {
           name = me_gre_4_cmod
           duration = 7300 #
        }
    }
}

me_greek_4_west.2 = {                           # Mission end
    type = country_event
    title = me_greek_4_west.2.t
    desc = me_greek_4_west.2.desc
    picture = greek_marketplace

    trigger = { has_land = yes }

    immediate = {

    }

    option = {      
        name = me_greek_4_west.2.a
        custom_tooltip = me_greek_4_west.2.at
    }
}

me_greek_4_west.3 = {                           # Family Head replacement
    type = country_event
    title = me_greek_4_west.3.t
    desc = {
        first_valid = {
            triggered_desc = {      # Dead
                trigger = { 
                    scope:gm_old_family_head = { is_alive = no }
                }
                desc = "me_greek_4_west.3.desc_1"
            }
            triggered_desc = {      # Alive abroad
                trigger = { 
                    scope:gm_old_family_head = { 
                        is_alive = yes 
                        NOT = { employer = root }
                    }
                }
                desc = "me_greek_4_west.3.desc_2"
            }
            triggered_desc = {      # Alive prison
                trigger = { 
                    scope:gm_old_family_head = { 
                        is_alive = yes 
                        prisoner = yes
                    }
                }
                desc = "me_greek_4_west.3.desc_3"
            }
        }
        first_valid = {
            triggered_desc = {      # Same family
                trigger = { scope:gm_family_head_4.family = scope:gm_old_family_head.family }
                desc = "me_greek_4_west.3.desc_5"
            }
            triggered_desc = {      # New family
                trigger = { 
                    NOT = { scope:gm_family_head_4.family = scope:gm_old_family_head.family }
                }
                desc = "me_greek_4_west.3.desc_4"
            }
        }
    }
    picture = greek_home
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_4
    right_portrait = scope:gm_old_family_head

    trigger = { has_land = yes }

    immediate = {
        scope:gm_old_family_head = {
            if = {
                limit = {
                    OR = {
                        is_alive = no
                        NOT = { employer = root }
                    }
                    exists = family
                    family = {
                        num_of_members > 0
                        any_family_member = {
                            is_alive = yes
                            employer = root
                            NOT = { this = scope:gm_old_family_head }
                            trigger_if = {
                                limit = {
                                    employer = { gender_equality = no }
                                }
                                is_female = no
                            }
                        }
                    }
                }
                family = {
                    ordered_family_member = {
                        limit = {
                            NOT = { this = scope:gm_old_family_head }
                            trigger_if = {
                                limit = {
                                    employer = { gender_equality = no }
                                }
                                is_female = no
                            }
                        }
                        order_by = prominence
                        save_scope_as = gm_family_head_4
                        set_variable = gm_family_head_4_flag
                    }
                }
            }
            else_if = {
                limit = {
                    is_alive = yes
                    OR = {
                        NOT = { employer = root }
                        prisoner = yes
                    }
                }
                family = {
                    ordered_family_member = {
                        limit = {
                            NOT = { this = scope:gm_old_family_head }
                            trigger_if = {
                                limit = {
                                    employer = { gender_equality = no }
                                }
                                is_female = no
                            }
                        }
                        order_by = prominence
                        save_scope_as = gm_family_head_4
                        set_variable = gm_family_head_4_flag
                    }
                }   
            }
            else = {
                ROOT = {
                    random_character = {
                        limit = { is_head_of_family = yes }
                        weight = {
                            modifier = {
                                factor = 5
                                has_culture_group = hellenic
                            }
                            modifier = {
                                factor = 10
                                character_traditionalist_party_trigger = yes
                            }
                            modifier = {
                                factor = 20
                                is_party_leader = yes
                                character_traditionalist_party_trigger = yes
                            }
                        }
                        save_scope_as = gm_family_head_4
                        set_variable = gm_family_head_4_flag
                    }
                }  
            }
        }
    }

    option = {      # 
        name = me_greek_1_black_sea.13.a
        trigger = { scope:gm_family_head_4.family = scope:gm_old_family_head.family }
    }

    option = {      #  
        name = me_greek_1_black_sea.13.b
        trigger = { 
            NOT = { scope:gm_family_head_4.family = scope:gm_old_family_head.family }
        }
    }
}

me_greek_4_west.5 = {                           # 4 - Trading Block end
    type = country_event
    title = me_greek_4_west.5.t
    desc = me_greek_4_west.5.desc
    picture = greek_political_discussion

    trigger = { has_land = yes }

    immediate = {
        current_ruler = { add_popularity = popularity_medium }
        add_country_modifier = {
            name = me_gre_4_4_cmod
            duration = 7300 #20 years
        }
    }

    option = {      
        name = me_greek_1_black_sea.5.a
        custom_tooltip = me_greek_4_west.5.at
    }
}

me_greek_4_west.6 = {                           #   14 - Barbarian Bartering - Choice
    type = country_event
    title = me_greek_1_black_sea.6.t
    desc = me_greek_4_west.6.desc
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_4

    trigger = { has_land = yes }

    immediate = {
        if = {      # Set variable used for refiring event with second list
            limit = { has_variable = gm_bartering_tracker }
        }
        else = {
            set_variable = {
                name = gm_bartering_tracker
                value = 1
            }
        }
        hidden_effect = {   
            while = {   # Save up to 6 barbarian owned ports
                limit = {
                    any_in_list = {
                        list = gm_4_list
                        has_owner = yes
                        owner = {
                            NOR = { 
                                this = root
                                country_culture_group = hellenic
                                is_tribal = no
                                war_with = root
                                opinion = { target = root value <= -50 }
                            }
                        }
                        is_capital = no
                        control_range = root   
                        NOR = {
                            AND = {
                                exists = scope:gm_4_bartering_scope_1
                                this = scope:gm_4_bartering_scope_1
                            }
                            AND = {
                                exists = scope:gm_4_bartering_scope_2
                                this = scope:gm_4_bartering_scope_2
                            }
                            AND = {
                                exists = scope:gm_4_bartering_scope_3
                                this = scope:gm_4_bartering_scope_3
                            }
                            AND = {
                                exists = scope:gm_4_bartering_scope_4
                                this = scope:gm_4_bartering_scope_4
                            }
                            AND = {
                                exists = scope:gm_4_bartering_scope_5
                                this = scope:gm_4_bartering_scope_5
                            }
                            AND = {
                                exists = scope:gm_4_bartering_scope_6
                                this = scope:gm_4_bartering_scope_6
                            }
                        }
                        NAND = {
                            exists = scope:gm_4_bartering_scope_1
                            exists = scope:gm_4_bartering_scope_2
                            exists = scope:gm_4_bartering_scope_3
                            exists = scope:gm_4_bartering_scope_4
                            exists = scope:gm_4_bartering_scope_5
                            exists = scope:gm_4_bartering_scope_6
                        }
                    }
                }
                random_in_list = {
                    list = gm_4_list
                    limit = {
                        owner = {
                            NOR = { 
                                this = root
                                country_culture_group = hellenic
                                is_tribal = no
                                war_with = root
                                opinion = { target = root value <= -50 }
                            }
                        }
                        is_capital = no
                        control_range = root 
                    }
                    if = {
                        limit = {
                            NOT = { exists = scope:gm_4_bartering_scope_1 }
                        }
                        save_scope_as = gm_4_bartering_scope_1
                    }
                    else_if = {
                        limit = {
                            exists = scope:gm_4_bartering_scope_1
                            NOR = { 
                                exists = scope:gm_4_bartering_scope_2
                                this = scope:gm_4_bartering_scope_1
                            }
                        }
                        save_scope_as = gm_4_bartering_scope_2
                    }
                    else_if = {
                        limit = {
                            exists = scope:gm_4_bartering_scope_1
                            exists = scope:gm_4_bartering_scope_2
                            NOR = { 
                                exists = scope:gm_4_bartering_scope_3
                                this = scope:gm_4_bartering_scope_1
                                this = scope:gm_4_bartering_scope_2
                            }
                        }
                        save_scope_as = gm_4_bartering_scope_3
                    }
                    else_if = {
                        limit = {
                            exists = scope:gm_4_bartering_scope_1
                            exists = scope:gm_4_bartering_scope_2
                            exists = scope:gm_4_bartering_scope_3
                            NOR = { 
                                exists = scope:gm_4_bartering_scope_4
                                this = scope:gm_4_bartering_scope_1
                                this = scope:gm_4_bartering_scope_2
                                this = scope:gm_4_bartering_scope_3
                            }
                        }
                        save_scope_as = gm_4_bartering_scope_4
                    }
                    else_if = {
                        limit = {
                            exists = scope:gm_4_bartering_scope_1
                            exists = scope:gm_4_bartering_scope_2
                            exists = scope:gm_4_bartering_scope_3
                            exists = scope:gm_4_bartering_scope_4
                            NOR = { 
                                exists = scope:gm_4_bartering_scope_5
                                this = scope:gm_4_bartering_scope_1
                                this = scope:gm_4_bartering_scope_2
                                this = scope:gm_4_bartering_scope_3
                                this = scope:gm_4_bartering_scope_4
                            }
                        }
                        save_scope_as = gm_4_bartering_scope_5
                    }
                    else_if = {
                        limit = {
                            exists = scope:gm_4_bartering_scope_1
                            exists = scope:gm_4_bartering_scope_2
                            exists = scope:gm_4_bartering_scope_3
                            exists = scope:gm_4_bartering_scope_4
                            exists = scope:gm_4_bartering_scope_5
                            NOR = { 
                                exists = scope:gm_4_bartering_scope_6
                                this = scope:gm_4_bartering_scope_1
                                this = scope:gm_4_bartering_scope_2
                                this = scope:gm_4_bartering_scope_3
                                this = scope:gm_4_bartering_scope_4
                                this = scope:gm_4_bartering_scope_5
                            }
                        }
                        save_scope_as = gm_4_bartering_scope_6
                    }
                }
            }
        }
    }

    option = {      # City 1
        name = me_greek_4_west.6.a
        trigger = {
            root.var:gm_bartering_tracker = 1
            exists = scope:gm_4_bartering_scope_1
        }
        scope:gm_4_bartering_scope_1 = { gm_4_barter_territory_scope_effect = yes }
        gm_4_barter_territory_effect = yes
    }

    option = {      # City 2    
        name = me_greek_4_west.6.b
        trigger = {
            root.var:gm_bartering_tracker = 1
            exists = scope:gm_4_bartering_scope_2
        }
        scope:gm_4_bartering_scope_2 = { gm_4_barter_territory_scope_effect = yes }
        gm_4_barter_territory_effect = yes
    }

    option = {      # City 3
        name = me_greek_4_west.6.c
        trigger = {
            root.var:gm_bartering_tracker = 1
            exists = scope:gm_4_bartering_scope_3
        }
        scope:gm_4_bartering_scope_3 = { gm_4_barter_territory_scope_effect = yes }
        gm_4_barter_territory_effect = yes
    }

    option = {      # City 4
        name = me_greek_4_west.6.d
        trigger = {
            OR = {
                AND = {
                    root.var:gm_bartering_tracker = 2
                    exists = scope:gm_4_bartering_scope_4
                }
                AND = {
                    root.var:gm_bartering_tracker = 1
                    exists = scope:gm_4_bartering_scope_4
                    NOT = { exists = scope:gm_4_bartering_scope_5 }
                }
            }
        }
        scope:gm_4_bartering_scope_4 = { gm_4_barter_territory_scope_effect = yes }
        gm_4_barter_territory_effect = yes
    }

    option = {      # City 5  
        name = me_greek_4_west.6.e
        trigger = {
            root.var:gm_bartering_tracker = 2
            exists = scope:gm_4_bartering_scope_5
        }
        scope:gm_4_bartering_scope_5 = { gm_4_barter_territory_scope_effect = yes }
        gm_4_barter_territory_effect = yes
    }

    option = {      # City 6
        name = me_greek_4_west.6.f
        trigger = {
            root.var:gm_bartering_tracker = 2
            exists = scope:gm_4_bartering_scope_6
        }
        scope:gm_4_bartering_scope_6 = { gm_4_barter_territory_scope_effect = yes }
        gm_4_barter_territory_effect = yes
    }

    option = {      # Next list
        name = me_greek_1_black_sea.6.g
        trigger = {
            OR = {
                AND = {
                    root.var:gm_bartering_tracker = 1
                    exists = scope:gm_4_bartering_scope_5
                }
                root.var:gm_bartering_tracker = 2
            }
        }
        if = {
            limit = { root.var:gm_bartering_tracker = 1 }   
            change_variable = {
                name = gm_bartering_tracker
                add = 1
            }
        }
        else_if = {
            limit = { root.var:gm_bartering_tracker = 2 }   
            change_variable = {
                name = gm_bartering_tracker
                subtract = 1
            }
        }
        trigger_event = { id = me_greek_4_west.6 }
        custom_tooltip = me_greek_1_black_sea.6.gt
    }

    option = {      #
        name = me_greek_1_black_sea.6.h
        change_variable = {
            name = gm_bartering_tracker
            add = 3
        }
        custom_tooltip = me_greek_4_west.6.ht
        scope:gm_family_head_4 = { add_loyalty = loyalty_encourager_dismissed }
    }

    after = {
        if = {
            limit = { root.var:gm_bartering_tracker > 2 }
            remove_variable = gm_bartering_tracker
        }
    }
}

me_greek_4_west.7 = {                           #   14 - Barbarian Bartering - Offer
    type = country_event
    title = me_greek_4_west.7.t
    desc = "me_greek_4_west.7.desc"
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_4
    goto_location = scope:gm_4_barter_target_territory

    trigger = { has_land = yes }

    immediate = {
        save_scope_as = gm_4_barter_target_country
    }

    option = {      # Accept
        name = me_greek_1_black_sea.7.a
        add_treasury = { value = gm_4_barter_territory_value }
        show_as_tooltip = {
            scope:gm_4_barter_target_territory = { set_conquered_by = scope:gm_4_greek_scope }
        }
        scope:gm_4_greek_scope = {
            set_variable = {
                name = gm_barter_response
                value = 1
            }
        }
        ai_chance = {
            base = 2
            modifier = {
                factor = 2
                scope:gm_4_greek_scope = { is_ai = no }
            }
            modifier = {
                factor = 2
                gm_4_barter_relative_territory_value < 10
            }
            modifier = {
                factor = 2
                opinion = { target = scope:gm_4_greek_scope value > 50 }
            }
            modifier = {
                factor = 2
                AND = {
                    exists = scope:gm_family_head_4
                    scope:gm_family_head_4.charisma >= 7
                }
            }
        }
    }
    
    option = {      # Counter offer 
        name = me_greek_1_black_sea.7.b
        custom_tooltip = me_greek_4_west.7.bt
        scope:gm_4_greek_scope = { 
            set_variable = {
                name = gm_barter_response
                value = 2
            }
        }
        ai_chance = {
            base = 2
            modifier = {
                factor = 2
                gm_4_barter_relative_territory_value < 10
                gm_4_barter_relative_territory_value > 5
            }
            modifier = {
                factor = 2
                opinion = { target = scope:gm_4_greek_scope value > 0 }
            }
            modifier = {
                factor = 2
                AND = {
                    exists = scope:gm_family_head_4
                    scope:gm_family_head_4.charisma >= 5
                }
            }
        }
    }

    option = {      # Reject 
        name = me_greek_1_black_sea.7.c
        current_ruler = { add_popularity = popularity_small }
        custom_tooltip = me_greek_4_west.7.ct
        show_as_tooltip = { 
            add_opinion = { target = scope:gm_4_greek_scope modifier = me_gre_1_barter_rejection_opmod }
            reverse_add_opinion = { target = scope:gm_4_greek_scope modifier = me_gre_1_barter_rejection_opmod }
        }
        scope:gm_4_greek_scope = { 
            set_variable = {
                name = gm_barter_response
                value = 3
            }
        }
        ai_chance = {
            base = 2
            modifier = {
                factor = 2
                gm_4_barter_relative_territory_value >= 10
            }
            modifier = {
                factor = 2
                opinion = { target = scope:gm_4_greek_scope value < 0 }
            }
            modifier = {
                factor = 2
                AND = {
                    exists = scope:gm_family_head_4
                    scope:gm_family_head_4.charisma >= 5
                }
            }
            modifier = {
                factor = 2
                scope:gm_4_greek_scope = { is_ai = yes }
            }
        }
    }

    after = {
        scope:gm_4_greek_scope = {
            trigger_event = {
                id = me_greek_4_west.8
                days = { 5 10 }
            }
        }
    }
}

me_greek_4_west.8 = {                           #   14 - Barbarian Bartering - Response
    type = country_event
    title = me_greek_4_west.8.t
    desc = {
        desc = me_greek_4_west.8.desc
        first_valid = {
            triggered_desc = {      # Accepted
                trigger = { root.var:gm_barter_response = 1 }
                desc = "me_greek_4_west.8.desc_1"
            }
            triggered_desc = {      # Countered
                trigger = { root.var:gm_barter_response = 2 }
                desc = "me_greek_4_west.8.desc_2"
            }
            triggered_desc = {      # Rejected
                trigger = { root.var:gm_barter_response = 3 }
                desc = "me_greek_4_west.8.desc_3"
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:gm_family_head_4
    right_portrait = scope:gm_4_barter_target_country.current_ruler
    goto_location = scope:gm_4_barter_target_territory

    trigger = { has_land = yes }

    immediate = {
        if = {      # Deduct price if offer accepted
            limit = { root.var:gm_barter_response = 1 }
            add_treasury = { subtract = gm_4_barter_territory_value }
        }
    }

    option = {      # Accepted - holy mackerel
        name = me_greek_1_black_sea.8.a
        trigger = { root.var:gm_barter_response = 1 }
        scope:gm_4_barter_target_territory = { 
            set_variable = gm_4_bartered_flag
            set_conquered_by = root
        }
    }
    
    option = {    # Counter offer - accept
        name = me_greek_1_black_sea.8.b
        trigger = { root.var:gm_barter_response = 2 }
        add_treasury = {    # Deduct double price
            value = gm_4_barter_territory_double_value
            multiply = -1
        }
        scope:gm_family_head_4 = { add_loyalty = loyalty_defended_interests }
        scope:gm_4_barter_target_territory = { 
            set_variable = gm_4_bartered_flag
            set_conquered_by = root
        }
        scope:gm_4_barter_target_country = {
            trigger_event = { id = me_greek_4_west.9 }
        }
    }

    option = {    # Counter offer - reject
        name = me_greek_1_black_sea.8.c
        current_ruler = { add_popularity = popularity_small }
        trigger = { root.var:gm_barter_response = 2 }
        scope:gm_4_barter_target_country = {
            trigger_event = { id = me_greek_4_west.9 }
        }
        scope:gm_4_barter_target_territory = { add_claim = root }
    }

    option = {    # Rejected - goshed darn it
        name = me_greek_1_black_sea.8.d
        trigger = { root.var:gm_barter_response = 3 }
        if = {
            limit = { 
                exists = scope:gm_family_head_4 
                scope:gm_family_head_4 = { is_alive = yes }
            }
            scope:gm_family_head_4 = { add_popularity = subtract_popularity_small }
        }
        scope:gm_4_barter_target_territory = { add_claim = root }
        add_opinion = { target = scope:gm_4_barter_target_country modifier = me_gre_1_barter_rejection_opmod }
        reverse_add_opinion = { target = scope:gm_4_barter_target_country modifier = me_gre_1_barter_rejection_opmod }
    }

    after = { remove_variable = gm_barter_response }
}

me_greek_4_west.9 = {                           #   14 - Barbarian Bartering - Counter Offer Response
    type = country_event
    title = me_greek_4_west.9.t
    desc = {
        desc = me_greek_4_west.9.desc
        first_valid = {
            triggered_desc = {      # Accepted
                trigger = { 
                    NOT = { scope:gm_4_barter_target_territory = root }
                }
                desc = "me_greek_1_black_sea.9.desc_1"
            }
            triggered_desc = {      # Rejected
                trigger = { scope:gm_4_barter_target_territory = root }
                desc = "me_greek_1_black_sea.8.desc_2"
            }
        }

    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:gm_4_greek_scope.current_ruler
    goto_location = scope:gm_hellenic_reclamation_scope

    trigger = { has_land = yes }

    immediate = {

    }

    option = {      # Counter accepted 
        name = me_greek_1_black_sea.9.a          
        trigger = { 
            NOT = { scope:gm_4_barter_target_territory.owner = root }
        }
        add_treasury = {    # Add double price
            value = gm_4_barter_territory_double_value
        }
        show_as_tooltip = {
            scope:gm_4_barter_target_territory = { set_conquered_by = scope:gm_4_greek_scope }
        }
    }

    option = {      # Counter rejected
        name = me_greek_1_black_sea.9.b
        trigger = { scope:gm_4_barter_target_territory.owner = root }
        show_as_tooltip = {
            scope:gm_4_barter_target_territory = { add_claim = scope:gm_4_greek_scope }
        }
    }
}

me_greek_4_west.10 = {                          #   1 - Hellenic Reclamation end
    type = country_event
    title = me_greek_1_black_sea.10.t
    desc = me_greek_4_west.10.desc
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_4
    goto_location = scope:gm_hellenic_reclamation_scope

    trigger = {
        has_land = yes
        exists = scope:gm_hellenic_reclamation_scope
        scope:gm_hellenic_reclamation_scope.owner = root
    }

    immediate = {
        custom_tooltip = me_greek_1_black_sea.10.tt
    }

    option = {      # 
        name = me_greek_1_black_sea.10.a
        if = {
            limit = {
                exists = scope:gm_family_head_4
                scope:gm_family_head_4 = { is_alive = yes }
            }
            scope:gm_family_head_4 = { add_loyalty = me_gre_1_upset_family_loyalty }
        }
        hidden_effect = {
            scope:gm_hellenic_reclamation_scope = {
                create_country = {
					if = {
						limit = {
							NOT = {
								primary_culture = root.culture 
							}
						}
						set_primary_culture_cleanup_effect = {
							NEW_PRIMARY_CULTURE = root.culture 
							MAKE_OLD_CULTURE_INTEGRATED = yes
						}
					}
                    save_scope_as = me_gre_4_6_scope
                }
            }
            if = {
                limit = { 
                    scope:gm_hellenic_reclamation_scope = {
                        NOT = { province_dominant_culture_group = hellenic }
                    }
                }
                scope:me_gre_4_6_scope = {
                    if = {
						limit = {
							NOT = {
								primary_culture = root.culture 
							}
						}
						set_primary_culture_cleanup_effect = {
							NEW_PRIMARY_CULTURE = root.culture 
							MAKE_OLD_CULTURE_INTEGRATED = yes
						}
					}
                }
            }
            scope:gm_hellenic_reclamation_scope = {
                every_pops_in_province = {
                    limit = {
                        OR = {
                            pop_type = freemen
                            pop_type = citizen
                        }
                    }
                    random = {
                        chance = 50
                        set_pop_culture = scope:me_gre_4_6_scope.culture
                        set_pop_religion = scope:me_gre_4_6_scope.religion
                    }
                }
                create_state_pop = citizen
                create_state_pop = freemen
            }
            if = {
                limit = { government = plutocratic_republic }
                scope:me_gre_4_6_scope = { change_government = plutocratic_republic }
            }
            else_if = {
                limit = { government = aristocratic_republic }
                scope:me_gre_4_6_scope = { change_government = aristocratic_republic }
            }
            else_if = {
                limit = { government = theocratic_republic }
                scope:me_gre_4_6_scope = { change_government = theocratic_republic }
            }
            else_if = {
                limit = { government = oligarchic_republic }
                scope:me_gre_4_6_scope = { change_government = oligarchic_republic }
            }
            else_if = {
                limit = { government = democratic_republic }
                scope:me_gre_4_6_scope = { change_government = democratic_republic }
            }
            scope:me_gre_4_6_scope = {
                add_treasury = { value = 50 }
                create_character = {
                    culture = root.culture
                    age = 52
                    female = no
                    no_traits = yes
                    add_trait = corrupt
                    add_trait = submissive
                    add_corruption = 20
                    save_scope_as = me_gre_4_6_scope_leader
                }
                set_as_ruler = scope:me_gre_4_6_scope_leader    
            }
            make_subject = {
                target = scope:me_gre_4_6_scope
                type = feudatory
            }
        }
        custom_tooltip = me_greek_1_black_sea.10.at
        if = {
            limit = {
                any_country = {
                    has_land = yes
                    OR = {
                        tag = ELE
                        primary_culture = massalian
                    }
                    NOT = { this = root }
                }
            }
            hidden_effect = {
                every_country = {
                    limit = {
                        has_land = yes
                        OR = {
                            tag = ELE
                            primary_culture = massalian
                        }
                        NOT = { this = root }
                    }
                    add_opinion = { target = root modifier = me_gre_4_13_opmod }
                }
            }
            custom_tooltip = me_greek_4_west.23.tt
        }
    }

    option = {      # 
        name = me_greek_4_west.10.b
        if = {
            limit = {
                NOT = {
                    any_character = { has_holding_in = scope:gm_hellenic_reclamation_scope }
                }
             }
             scope:gm_family_head_4 = { add_holding = scope:gm_hellenic_reclamation_scope }
        }
    }
}

me_greek_4_west.11 = {                          #   14 - Barbarian Bartering start
    type = country_event
    title = me_greek_1_black_sea.11.t
    desc = me_greek_4_west.11.desc
    picture = celtic_village
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_4

    trigger = { has_land = yes }

    option = {      # 
        name = me_greek_1_black_sea.11.a
        custom_tooltip = me_greek_4_west.11.at
    }
}

me_greek_4_west.12 = {                          #   5 - Approach Massalian Colony start
    type = country_event
    title = me_greek_4_west.12.t
    desc = {
        desc = me_greek_4_west.12.desc_1
        desc = me_greek_4_west.12.desc
    }
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_4

    trigger = { has_land = yes }

    option = {      # 
        name = me_greek_4_west.12.a
        custom_tooltip = me_greek_4_west.12.at
    }
}

me_greek_4_west.14 = {                          #   7 - Local Coast
    type = country_event
    title = me_greek_4_west.14.t
    desc = {
        desc = "me_greek_4_west.14.desc"
        first_valid = {
            triggered_desc = {      #
                trigger = { root.var:gm_4_path = 1 }
                desc = "me_greek_4_west.14.desc_1"
            }
            triggered_desc = {      #
                trigger = { root.var:gm_4_path = 2 }
                desc = "me_greek_4_west.14.desc_2"
            }
            triggered_desc = {      #
                trigger = { root.var:gm_4_path = 3 }
                desc = "me_greek_4_west.14.desc_3"
            }
            triggered_desc = {      #
                trigger = { root.var:gm_4_path = 4 }
                desc = "me_greek_4_west.14.desc_4"
            }
            triggered_desc = {      #
                trigger = { root.var:gm_4_path = 5 }
                desc = "me_greek_4_west.14.desc_5"
            }
        }
    }
    picture = greek_marketplace
    left_portrait = current_ruler
    right_portrait = scope:gm_family_head_4

    trigger = { has_land = yes }

    immediate = {
        custom_tooltip = greek_4_loyalty_reward_tt
        hidden_effect = {
            scope:gm_family_head_4.family = {
                every_family_member = { add_loyalty = loyalty_gm_1_pleased_family }
            }
        }
        custom_tooltip = me_greek_4_west.14.at1
    }

    option = {      # 
        name = me_greek_4_west.14.a
        if = {
            limit = { root.var:gm_4_path = 1 }
            custom_tooltip = me_greek_4_west.14.tt
            p:3543.state = { me_gre_new_markets_effect = yes }
            hidden_effect = {
                p:2325.state = { me_gre_new_markets_effect = yes }
                p:2319.state = { me_gre_new_markets_effect = yes }
                p:2256.state = { me_gre_new_markets_effect = yes }
            }
        }
        else_if = {
            limit = { root.var:gm_4_path = 2 }
            custom_tooltip = me_greek_4_west.14.tt
            p:1001.state = { me_gre_new_markets_effect = yes }
            hidden_effect = {
                p:1001.state = { me_gre_new_markets_effect = yes }
                p:1001.state = { me_gre_new_markets_effect = yes }
                p:1001.state = { me_gre_new_markets_effect = yes }
            }
        }
        else_if = {
            limit = { root.var:gm_4_path = 3 }
            custom_tooltip = me_greek_4_west.14.tt
            p:1032.state = { me_gre_new_markets_effect = yes }
            hidden_effect = {
                p:1031.state = { me_gre_new_markets_effect = yes }
                p:1033.state = { me_gre_new_markets_effect = yes }
                p:1036.state = { me_gre_new_markets_effect = yes }
            }
        }
        else_if = {
            limit = { root.var:gm_4_path = 4 }
            custom_tooltip = me_greek_4_west.14.tt
            p:1342.state = { me_gre_new_markets_effect = yes }
            hidden_effect = {
                p:1334.state = { me_gre_new_markets_effect = yes }
                p:1362.state = { me_gre_new_markets_effect = yes }
                p:1347.state = { me_gre_new_markets_effect = yes }
            }
        }
        else_if = {
            limit = { root.var:gm_4_path = 5 }
            custom_tooltip = me_greek_4_west.14.tt
            p:3504.state = { me_gre_new_markets_effect = yes }
            hidden_effect = {
                p:3515.state = { me_gre_new_markets_effect = yes }
                p:96.state = { me_gre_new_markets_effect = yes }
                p:3481.state = { me_gre_new_markets_effect = yes }
            }
        }
        else = { custom_tooltip = me_greek_1_black_sea.14.tt }
    }
}

me_greek_4_west.15 = {                          #   Mediterranean Patrols
    type = country_event
    title = "me_greek_4_west.15.t"
    desc = "me_greek_1_black_sea.15.desc"
    picture = grand_ship
    left_portrait = current_ruler
    right_portrait = scope:gm_4_euxine_admiral

    trigger = { has_land = yes }

    immediate = {
        if = {
            limit = { exists = scope:gm_4_euxine_admiral }
            scope:gm_4_euxine_admiral = { add_loyalty = loyalty_family_admiral }
        }
        custom_tooltip = me_greek_4_west.15.tt
    }

    option = {      # 
        name = me_greek_1_black_sea.15.a
        scope:gm_4_euxine_navy = {
            add_unit_modifier = {
                name = gm_1_hardy_navy
                duration = 7300
            }
        }
    }

    option = {      #  
        name = me_greek_1_black_sea.15.b
        scope:gm_4_euxine_navy = {
            add_unit_modifier = {
                name = gm_1_swift_navy
                duration = 7300
            }
        }
    }
}

me_greek_4_west.16 = {                          #   3 - The Pillars of Herakles
    type = country_event
    title = "me_greek_4_west.16.t"
    desc = "me_greek_4_west.16.desc"
    picture = grand_ship

    trigger = { has_land = yes }

    immediate = {
        if = {
            limit = {
                p:137.state = { has_state_modifier = me_gre_1_7_smod }
            }
            p:137.state = { remove_state_modifier = me_gre_1_7_smod }
        }
        me_gre_4_3_effect = yes
        if = {
            limit = {
                any_country = {
                    tag = CAR
                    has_land = yes
                }
            }
            c:CAR = { 
                add_opinion = { target = root modifier = me_gre_4_3_opmod }
            }
        }
    }

    option = {      # 
        name = me_greek_4_west.16.a
        custom_tooltip = me_greek_4_west.16.at
    }
}

me_greek_4_west.17 = {                          #   2 - Massalian Hub
    type = country_event
    title = "me_greek_4_west.17.t"
    desc = "me_greek_4_west.17.desc"
    picture = greek_city

    trigger = { has_land = yes }

    immediate = {
        custom_tooltip = me_greek_4_west.17.tt
        ordered_owned_province = {
            limit = { gm_4_hub_trigger = yes }
            save_scope_as = me_gre_4_hub_scope
        }
        add_1_free_province_investments = yes
    }

    option = {      # 
        name = me_greek_4_west.17.a
        scope:me_gre_4_hub_scope = {
            add_province_modifier = {
                name = me_gre_4_2_pmod_1
            }
        }
    }

    option = {      #  
        name = me_greek_4_west.17.b
        scope:me_gre_4_hub_scope = {
            add_province_modifier = {
                name = me_gre_4_2_pmod_2
            }
        }
    }
}

me_greek_4_west.18 = {                          #   5 - Approach Massalian Colony - Choice
    type = country_event
    title = me_greek_4_west.18.t
    desc = "me_greek_4_west.18.desc"
    picture = greek_city

    trigger = { has_land = yes }

    immediate = {
        if = {      # Set variable used for refiring event with second list
            limit = {
                NOT = { has_variable = gm_colony_tracker }
            }
            set_variable = {
                name = gm_colony_tracker
                value = 1
            }
        }
        hidden_effect = {   
            while = {   # Save up to 6 colonies
                limit = {
                    any_country = {
                        gm_4_colony_trigger = yes
                        NOR = {
                            AND = {
                                exists = scope:gm_4_colony_scope_1
                                this = scope:gm_4_colony_scope_1
                            }
                            AND = {
                                exists = scope:gm_4_colony_scope_2
                                this = scope:gm_4_colony_scope_2
                            }
                            AND = {
                                exists = scope:gm_4_colony_scope_3
                                this = scope:gm_4_colony_scope_3
                            }
                            AND = {
                                exists = scope:gm_4_colony_scope_4
                                this = scope:gm_4_colony_scope_4
                            }
                            AND = {
                                exists = scope:gm_4_colony_scope_5
                                this = scope:gm_4_colony_scope_5
                            }
                            AND = {
                                exists = scope:gm_4_colony_scope_6
                                this = scope:gm_4_colony_scope_6
                            }
                        }               
                    }
                }
                ordered_country = {
                    limit = {
                        gm_4_colony_trigger = yes
                        NOR = {
                            AND = {
                                exists = scope:gm_4_colony_scope_1
                                this = scope:gm_4_colony_scope_1
                            }
                            AND = {
                                exists = scope:gm_4_colony_scope_2
                                this = scope:gm_4_colony_scope_2
                            }
                            AND = {
                                exists = scope:gm_4_colony_scope_3
                                this = scope:gm_4_colony_scope_3
                            }
                            AND = {
                                exists = scope:gm_4_colony_scope_4
                                this = scope:gm_4_colony_scope_4
                            }
                            AND = {
                                exists = scope:gm_4_colony_scope_5
                                this = scope:gm_4_colony_scope_5
                            }
                            AND = {
                                exists = scope:gm_4_colony_scope_6
                                this = scope:gm_4_colony_scope_6
                            }
                        }   
                    }
                    if = {
                        limit = {
                            NOT = { exists = scope:gm_4_colony_scope_1 }
                        }
                        save_scope_as = gm_4_colony_scope_1
                    }
                    else_if = {
                        limit = {
                            exists = scope:gm_4_colony_scope_1
                            NOR = { 
                                exists = scope:gm_4_colony_scope_2
                                this = scope:gm_4_colony_scope_1
                            }
                        }
                        save_scope_as = gm_4_colony_scope_2
                    }
                    else_if = {
                        limit = {
                            exists = scope:gm_4_colony_scope_1
                            exists = scope:gm_4_colony_scope_2
                            NOR = { 
                                exists = scope:gm_4_colony_scope_3
                                this = scope:gm_4_colony_scope_1
                                this = scope:gm_4_colony_scope_2
                            }
                        }
                        save_scope_as = gm_4_colony_scope_3
                    }
                    else_if = {
                        limit = {
                            exists = scope:gm_4_colony_scope_1
                            exists = scope:gm_4_colony_scope_2
                            exists = scope:gm_4_colony_scope_3
                            NOR = { 
                                exists = scope:gm_4_colony_scope_4
                                this = scope:gm_4_colony_scope_1
                                this = scope:gm_4_colony_scope_2
                                this = scope:gm_4_colony_scope_3
                            }
                        }
                        save_scope_as = gm_4_colony_scope_4
                    }
                    else_if = {
                        limit = {
                            exists = scope:gm_4_colony_scope_1
                            exists = scope:gm_4_colony_scope_2
                            exists = scope:gm_4_colony_scope_3
                            exists = scope:gm_4_colony_scope_4
                            NOR = { 
                                exists = scope:gm_4_colony_scope_5
                                this = scope:gm_4_colony_scope_1
                                this = scope:gm_4_colony_scope_2
                                this = scope:gm_4_colony_scope_3
                                this = scope:gm_4_colony_scope_4
                            }
                        }
                        save_scope_as = gm_4_colony_scope_5
                    }
                    else_if = {
                        limit = {
                            exists = scope:gm_4_colony_scope_1
                            exists = scope:gm_4_colony_scope_2
                            exists = scope:gm_4_colony_scope_3
                            exists = scope:gm_4_colony_scope_4
                            exists = scope:gm_4_colony_scope_5
                            NOR = { 
                                exists = scope:gm_4_colony_scope_6
                                this = scope:gm_4_colony_scope_1
                                this = scope:gm_4_colony_scope_2
                                this = scope:gm_4_colony_scope_3
                                this = scope:gm_4_colony_scope_4
                                this = scope:gm_4_colony_scope_5
                            }
                        }
                        save_scope_as = gm_4_colony_scope_6
                    }
                }
            }
        }
    }

    option = {      # City 1
        name = me_greek_4_west.18.a
        trigger = {
            root.var:gm_colony_tracker = 1
            exists = scope:gm_4_colony_scope_1
        }
        scope:gm_4_colony_scope_1 = { gm_4_colony_scope_effect = yes }
        gm_4_colony_option_effect = yes
    }

    option = {      # City 2    
        name = me_greek_4_west.18.b
        trigger = {
            root.var:gm_colony_tracker = 1
            exists = scope:gm_4_colony_scope_2
        }
        scope:gm_4_colony_scope_2 = { gm_4_colony_scope_effect = yes }
        gm_4_colony_option_effect = yes
    }

    option = {      # City 3
        name = me_greek_4_west.18.c
        trigger = {
            root.var:gm_colony_tracker = 1
            exists = scope:gm_4_colony_scope_3
        }
        scope:gm_4_colony_scope_3 = { gm_4_colony_scope_effect = yes }
        gm_4_colony_option_effect = yes
    }

    option = {      # City 4
        name = me_greek_4_west.18.d
        trigger = {
            OR = {
                AND = {
                    root.var:gm_colony_tracker = 2
                    exists = scope:gm_4_colony_scope_4
                }
                AND = {
                    root.var:gm_colony_tracker = 1
                    exists = scope:gm_4_colony_scope_4
                    NOT = { exists = scope:gm_4_colony_scope_5 }
                }
            }
        }
        scope:gm_4_colony_scope_4 = { gm_4_colony_scope_effect = yes }
        gm_4_colony_option_effect = yes
    }

    option = {      # City 5  
        name = me_greek_4_west.18.e
        trigger = {
            root.var:gm_colony_tracker = 2
            exists = scope:gm_4_colony_scope_5
        }
        scope:gm_4_colony_scope_5 = { gm_4_colony_scope_effect = yes }
        gm_4_colony_option_effect = yes
    }

    option = {      # City 6
        name = me_greek_4_west.18.f
        trigger = {
            root.var:gm_colony_tracker = 2
            exists = scope:gm_4_colony_scope_6
        }
        scope:gm_4_colony_scope_6 = { gm_4_colony_scope_effect = yes }
        gm_4_colony_option_effect = yes
    }

    option = {      # Next list
        name = me_greek_4_west.18.g
        trigger = {
            OR = {
                AND = {
                    root.var:gm_colony_tracker = 1
                    exists = scope:gm_4_colony_scope_5
                }
                root.var:gm_colony_tracker = 2
            }
        }
        if = {
            limit = { root.var:gm_colony_tracker = 1 }  
            change_variable = {
                name = gm_colony_tracker
                add = 1
            }
        }
        else_if = {
            limit = { root.var:gm_colony_tracker = 2 }  
            change_variable = {
                name = gm_colony_tracker
                subtract = 1
            }
        }
        trigger_event = { id = me_greek_4_west.18 }
        custom_tooltip = me_greek_4_west.18.gt
    }

    option = {      # End
        name = me_greek_1_black_sea.18.h
        change_variable = {
            name = gm_colony_tracker
            add = 3
        }
        custom_tooltip = me_greek_4_west.18.ht
    }

    after = {
        if = {
            limit = { root.var:gm_colony_tracker > 2 }
            remove_variable = gm_colony_tracker
        }
    }
}

me_greek_4_west.19 = {                          #   5 - Approach Massalian Colony - Offer
    type = country_event
    title = me_greek_4_west.19.t
    desc = "me_greek_4_west.19.desc"
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:gm_4_greek_scope.current_ruler

    trigger = { has_land = yes }

    immediate = {
        save_scope_as = gm_4_colony_target_country
    }

    option = {      # Accept
        name = me_greek_1_black_sea.19.a
        add_treasury = { value = gm_4_colony_value }
        show_as_tooltip = {
            scope:gm_4_greek_scope = {
                make_subject = {
                    target = root
                    type = feudatory
                }
            }
        }
        scope:gm_4_greek_scope = {
            set_variable = {
                name = gm_colony_response
                value = 1
            }
        }
        ai_chance = {
            base = 2
            modifier = {
                factor = 2
                scope:gm_4_greek_scope = { is_ai = no }
            }
            modifier = {
                factor = 2
                gm_4_colony_relative_value < 30
            }
            modifier = {
                factor = 2
                opinion = { target = scope:gm_4_greek_scope value > 50 }
            }
            modifier = {
                factor = 2
                scope:gm_family_head_4.charisma >= 7
            }
        }
        ai_chance = {
            base = 2
        }
    }
    
    option = {      # Counter offer 
        name = me_greek_1_black_sea.19.b
        custom_tooltip = me_greek_4_west.19.bt
        scope:gm_4_greek_scope = { 
            set_variable = {
                name = gm_colony_response
                value = 2
            }
        }
        ai_chance = {
            base = 2
            modifier = {
                factor = 2
                gm_4_colony_relative_value < 30
                gm_4_colony_relative_value > 15
            }
            modifier = {
                factor = 2
                opinion = { target = scope:gm_4_greek_scope value > 0 }
            }
            modifier = {
                factor = 2
                scope:gm_family_head_4.charisma >= 5
            }
        }
        ai_chance = {
            base = 2
        }
    }

    option = {      # Reject 
        name = me_greek_1_black_sea.19.c
        current_ruler = { add_popularity = popularity_small }
        custom_tooltip = me_greek_4_west.19.ct
        show_as_tooltip = { 
            reverse_add_opinion = { target = scope:gm_4_greek_scope modifier = me_gre_1_barter_rejection_opmod }
        }
        scope:gm_4_greek_scope = { 
            set_variable = {
                name = gm_colony_response
                value = 3
            }
        }
        ai_chance = {
            base = 2
            modifier = {
                factor = 2
                gm_4_colony_relative_value >= 30
            }
            modifier = {
                factor = 2
                opinion = { target = scope:gm_4_greek_scope value < 0 }
            }
            modifier = {
                factor = 2
                scope:gm_family_head_4.charisma < 5
            }
            modifier = {
                factor = 2
                scope:gm_4_greek_scope = { is_ai = yes }
            }
        }
    }

    after = {
        scope:gm_4_greek_scope = {
            trigger_event = {
                id = me_greek_4_west.20
                days = { 5 10 }
            }
        }
    }
}

me_greek_4_west.20 = {                          #   5 - Approach Massalian Colony - Response
    type = country_event
    title = me_greek_4_west.20.t
    desc = {
        desc = me_greek_4_west.20.desc
        first_valid = {
            triggered_desc = {      # Accepted
                trigger = { root.var:gm_colony_response = 1 }
                desc = "me_greek_4_west.20.desc_1"
            }
            triggered_desc = {      # Countered
                trigger = { root.var:gm_colony_response = 2 }
                desc = "me_greek_4_west.20.desc_2"
            }
            triggered_desc = {      # Rejected
                trigger = { root.var:gm_colony_response = 3 }
                desc = "me_greek_4_west.20.desc_3"
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:gm_family_head_4
    right_portrait = scope:gm_4_colony_target_scope.current_ruler
    goto_location = scope:gm_4_colony_target_scope.capital_scope

    trigger = { has_land = yes }

    immediate = {
        if = {      # Deduct price if offer accepted
            limit = { root.var:gm_colony_response = 1 }
            custom_tooltip = me_greek_4_west.20.tt
            add_treasury = { subtract = gm_4_colony_value }
            make_subject = {
                target = scope:gm_4_colony_target_country
                type = feudatory
            }
        }
    }

    option = {      # Accepted - holy mackerel
        name = me_greek_1_black_sea.20.a
        trigger = { root.var:gm_colony_response = 1 }
    }
    
    option = {    # Counter offer - accept
        name = me_greek_1_black_sea.20.b
        trigger = { root.var:gm_colony_response = 2 }
        add_treasury = {    # Deduct double price
            value = gm_4_colony_double_value
            multiply = -1
        }
        make_subject = {
            target = scope:gm_4_colony_target_country
            type = feudatory
        }
        scope:gm_family_head_4 = { add_loyalty = loyalty_defended_interests }
        scope:gm_4_colony_target_country = {
            trigger_event = { id = me_greek_4_west.21 }
        }
    }

    option = {    # Counter offer - reject
        name = me_greek_1_black_sea.20.c
        current_ruler = { add_popularity = popularity_small }
        trigger = { root.var:gm_colony_response = 2 }
        scope:gm_4_colony_target_country = {
            trigger_event = { id = me_greek_4_west.21 } 
            every_owned_province = { add_claim = root }
        }
    }

    option = {    # Rejected - goshed darn it
        name = me_greek_1_black_sea.20.d
        trigger = { root.var:gm_colony_response = 3 }
        scope:gm_family_head_4 = { add_popularity = subtract_popularity_small }
        scope:gm_4_colony_target_country = { 
            every_owned_province = { add_claim = root }
        }
    }

    after = { remove_variable = gm_colony_response }
}

me_greek_4_west.21 = {                          #   1 - Approach Colony - Counter Offer Response
    type = country_event
    title = me_greek_4_west.21.t
    desc = {
        desc = me_greek_4_west.21.desc
        first_valid = {
            triggered_desc = {      # Accepted
                trigger = { 
                    is_subject_of = scope:gm_4_greek_scope
                }
                desc = "me_greek_4_west.21.desc_1"
            }
            triggered_desc = {      # Rejected
                trigger = { 
                    NOT = { is_subject_of = scope:gm_4_greek_scope }
                }
                desc = "me_greek_1_black_sea.20.desc_2"
            }
        }

    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:gm_4_greek_scope.current_ruler
    right_portrait = scope:gm_family_head_4

    trigger = { has_land = yes }

    option = {      # Counter accepted 
        name = me_greek_1_black_sea.21.a         
        trigger = { is_subject_of = scope:gm_4_greek_scope }
        add_treasury = {    # Add double price
            value = gm_4_colony_double_value
        }
        show_as_tooltip = {
            scope:gm_4_greek_scope = {
                make_subject = {
                    target = scope:gm_4_colony_target_country
                    type = feudatory
                }
            }
        }
    }

    option = {      # Counter rejected
        name = me_greek_1_black_sea.21.b
        trigger = { 
            NOT = { is_subject_of = scope:gm_4_greek_scope }
        }
        custom_tooltip = me_greek_4_west.19.ct
    }
}

me_greek_4_west.22 = {                          #   19 - Olisipan Ambition
    type = country_event
    title = "me_greek_4_west.22.t"
    desc = "me_greek_4_west.22.desc"
    picture = greek_marketplace

    trigger = { has_land = yes }

    immediate = {
        p:1319 = {
            create_state_pop = citizen
            create_state_pop = freemen
            add_province_modifier = {
                name = me_gre_4_19_pmod
            }
        }
    }

    option = {      # 
        name = me_greek_4_west.22.a
        custom_tooltip = me_greek_4_west.22.at
    }
}

me_greek_4_west.23 = {                          #   12 - Reclaim Alalia
    type = country_event
    title = "me_greek_4_west.23.t"
    desc = "me_greek_4_west.23.desc"
    picture = great_city

    trigger = { has_land = yes }

    immediate = {
        add_country_modifier = {
            name = me_gre_4_12_pmod
            duration = 7300 # 20 years
        }
        if = {
            limit = {
                any_country = {
                    has_land = yes
                    OR = {
                        tag = ELE
                        primary_culture = massalian
                    }
                    NOT = { this = root }
                }
            }
            hidden_effect = {
                every_country = {
                    limit = {
                        any_country = {
                            has_land = yes
                            OR = {
                                tag = ELE
                                primary_culture = massalian
                            }
                            NOT = { this = root }
                        }
                    }
                    add_opinion = { target = root modifier = me_gre_4_13_opmod }
                }
            }
            custom_tooltip = me_greek_4_west.23.tt
        }
    }

    option = {      # 
        name = me_greek_4_west.23.a
        custom_tooltip = me_greek_4_west.23.at
    }
}

me_greek_4_west.24 = {                          #   13 - Phokaean Revenge
    type = country_event
    title = "me_greek_4_west.24.t"
    desc = "me_greek_4_west.24.desc"
    picture = greeks_marching

    trigger = { has_land = yes }

    immediate = {
        add_country_modifier = {
            name = me_gre_4_13_cmod
            duration = 7300 # 20 years
        }
    }

    option = {      # 
        name = me_greek_4_west.24.a
        custom_tooltip = me_greek_4_west.24.at
    }
}

me_greek_4_west.25 = {                          #   15 - Aggressive Markets
    type = country_event
    title = "me_greek_4_west.25.t"
    desc = "me_greek_4_west.25.desc"
    picture = greek_political_discussion

    trigger = { has_land = yes }

    immediate = {
        add_country_modifier = {
            name = me_gre_4_15_cmod
            duration = 3650
        }
    }   

    option = {      # 
        name = me_greek_4_west.25.a
        custom_tooltip = me_greek_4_west.25.at
    }
}

me_greek_4_west.26 = {                          #   16 - Phocaean League
    type = country_event
    title = "me_greek_4_west.26.t"
    desc = "me_greek_4_west.26.desc"
    picture = greek_political_discussion

    trigger = { has_land = yes }

    immediate = {
        current_ruler = { add_nickname = NICKNAME_OMAGYRIOS }
        change_country_name = "PHK"
        hidden_effect = {  
            change_country_adjective = "PHK_ADJ"
            change_country_flag = PHK_FLAG
            change_country_tag = PHK 
            change_country_color = phokaian_blue
            every_in_list = {
                list = gm_4_hellenic_liberation_list
                limit = { 
                    NOT = { owned_or_subject_owned = root }
                }
                add_claim = root
            }
            p:285 = { add_claim = root }
        }
        capital_scope = {
            capital_formable_small_effect = yes
            formable_capital_modifier_normal_effect = yes
        }
        add_2_free_province_investments = yes
        custom_tooltip = "form_phokaean_league_claims_tooltip"
    }

    option = {      # 
        name = me_greek_4_west.26.a
        custom_tooltip = me_greek_4_west.26.at
    }
}

me_greek_4_west.27 = {                          #   17 - Resurgent Phokaia
    type = country_event
    title = "me_greek_4_west.27.t"
    desc = "me_greek_4_west.27.desc"
    picture = city_construction

    trigger = { has_land = yes }

    immediate = {
        custom_tooltip = me_greek_4_west.27.at
    }

    option = {      # 
        name = me_greek_4_west.27.a
        current_ruler = { add_popularity = popularity_medium }
        p:285 = {
            create_state_pop = citizen
            create_state_pop = citizen
            add_province_modifier = { name = me_gre_4_17_pmod }
            change_province_name = "Phokaia"
        }
    }
}

me_greek_4_west.28 = {                      #   5 - Approach Colonies bypass
    type = country_event
    title = me_greek_4_west.28.t
    desc = me_greek_1_black_sea.28.desc
    picture = greek_political_discussion

    trigger = { has_land = yes }

    option = {      
        name = me_greek_1_black_sea.28.a
        custom_tooltip = me_greek_4_west.28.at
    }
}

me_greek_4_west.29 = {                      #   Abort ping
    type = country_event
    title = me_greek_4_west.29.t
    desc = me_greek_4_west.29.desc
    picture = greek_political_discussion

    trigger = { has_land = yes }

    option = {      
        name = me_greek_4_west.29.a
        custom_tooltip = me_greek_4_west.29.at
    }
}


me_greek_4_west.30 = {                      #   5 - Barbarian bartering bypass
    type = country_event
    title = me_greek_4_west.30.t
    desc = me_greek_1_black_sea.30.desc
    picture = greek_political_discussion

    trigger = { has_land = yes }

    option = {      
        name = me_greek_1_black_sea.30.a
        custom_tooltip = me_greek_4_west.30.at
    }
}

me_greek_4_west.31 = {                      #   18 - Backs to the Land end
    type = country_event
    title = me_greek_4_west.31.t
    desc = me_greek_1_black_sea.31.desc
    picture = celtic_diplomacy

    trigger = { has_land = yes }

    immediate = {
        add_country_modifier = {
            name = me_gre_1_18_cmod
            duration = 3650 # 10 years
        }
    }

    option = {      
        name = me_greek_1_black_sea.31.a
        custom_tooltip = me_greek_4_west.31.at
    }
}
