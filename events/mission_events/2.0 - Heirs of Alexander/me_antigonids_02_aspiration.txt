namespace = me_antigonid_2_aspiration

me_antigonid_2_aspiration.1 = {                          # Macedonian Aspiration - START
    type = country_event
    title = me_antigonid_2_aspiration.1.t
    desc = me_antigonid_2_aspiration.1.desc
    picture = diadochi_surrender_general
    left_portrait = current_ruler
    right_portrait = char:37

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {      
        name = me_antigonid_2_aspiration.1.a
        add_country_modifier = {
            name = me_epi_2_cmod
            duration = 9125 # 25 years
        }
    }
}

me_antigonid_2_aspiration.2 = {                          # Macedonian Aspiration - END
    type = country_event
    title = me_antigonid_2_aspiration.2.t
    desc = me_antigonid_2_aspiration.2.desc
    picture = throneroom

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {      
        name = me_antigonid_2_aspiration.2.a
        custom_tooltip = me_antigonid_2_aspiration.2.at
        add_country_modifier = {
            name = me_ant_2_end_cmod
            duration = 7300 # 20 years
        }
    }
}

me_antigonid_2_aspiration.11 = {                            # Greek Dominion - START
    type = country_event
    title = me_antigonid_2_aspiration.11.t
    desc = me_antigonid_2_aspiration.11.desc
    picture = greek_city

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {      
        name = me_antigonid_2_aspiration.11.a
        custom_tooltip = me_antigonid_2_aspiration.11.at
    }
}

me_antigonid_2_aspiration.12 = {                            # Greek Dominion - END
    type = country_event
    title = me_antigonid_2_aspiration.12.t
    desc = me_antigonid_2_aspiration.12.desc
    picture = hellenistic_army
    left_portrait = current_ruler
    right_portrait = scope:greek_scope_1

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        hidden_effect = {
            region:greece_region = {
                every_region_province = {
                    limit = {
                        exists = area
                        NOR = {
                            is_in_area = aegean_islands_area
                            is_in_area = crete_area
                            is_in_area = epirus_area
                            is_in_area = aetolia_area
                        }
                        is_uninhabitable = no
                        has_owner = yes
                        owner = {
                            OR = {
                                ant_other_diad_owner_subject_trigger = yes
                                ant_monarchy_oligarchy_trigger = yes
								government = spartan_monarchy
                            }
                        }
                    }
                    add_claim = ROOT
                }
            }
        }
        if = {
            limit = {
                region:greece_region = {
                    any_region_province = {
                        ant_hellas_trigger = yes
                        is_uninhabitable = no
                        has_owner = yes
                        owner = { ant_monarchy_oligarchy_trigger = yes }
                    }
                }
            }
            ordered_country = {
                limit = {
                    country_culture_group = hellenic
                    capital_scope = {
                        is_in_region = greece_region
                        ant_hellas_trigger = yes
                    }
                    ant_monarchy_oligarchy_trigger = yes
                }
                max = 3
                check_range_bounds = no
                order_by = country_population
                save_scope_as = greek_scope_1
            }
        }
    }

    option = {      
        name = me_antigonid_2_aspiration.12.a
        add_manpower = 5
        custom_tooltip = me_antigonid_2_aspiration.12.at
    }
}

me_antigonid_2_aspiration.21 = {                            # Dominate Epirus - END
    type = country_event
    title = me_antigonid_2_aspiration.21.t
    desc = me_antigonid_2_aspiration.21.desc
    picture = epirote_phalanx

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_antigonid_2_aspiration.21.tt }

    option = {      
        name = me_antigonid_2_aspiration.21.a
        current_ruler = { add_popularity = popularity_medium }
        add_country_modifier = {
            name = me_ant_02_2_cmod
            duration = 3650 # 10 years
        }
    }
}

me_antigonid_2_aspiration.31 = {                            #  Recover Kilikia - END
    type = country_event
    title = me_antigonid_2_aspiration.31.t
    desc = me_antigonid_2_aspiration.31.desc
    picture = hellenistic_army

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_antigonid_2_aspiration.31.tt }

    option = {      
        name = me_antigonid_2_aspiration.31.a
        add_country_modifier = {
            name = me_ant_02_3_cmod
            duration = 3650 # 10 years
        }
    }
}

me_antigonid_2_aspiration.41 = {                            # Dynastic Relevance - START
    type = country_event
    title = me_antigonid_2_aspiration.41.t
    desc = {
        first_valid = {
            triggered_desc = {
                trigger = { has_variable = ant_2_marriage_first_time_flag }
                desc = me_antigonid_2_aspiration.41.desc_1 # First time
            }
            triggered_desc = {
                trigger = {
                    OR = {
                        has_variable = ant_2_marriage_country_1
                        has_variable = ant_2_marriage_country_2
                        has_variable = ant_2_marriage_country_3
                    }
                }
                desc = me_antigonid_2_aspiration.41.desc_2 # Other times
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = me_antigonid_2_aspiration.41.desc_3 # None left
            }
        }
    }
    picture = throneroom
    left_portrait = current_ruler
    left_portrait = scope:ant_2_marriage_bride_scope
    right_portrait = var:ant_2_marriage_country_1.current_ruler
    right_portrait = var:ant_2_marriage_country_2.current_ruler
    right_portrait = var:ant_2_marriage_country_3.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        if = {
            limit = { has_variable = ant_2_marriage_first_time_flag } # Is this the first time the event fires?
            custom_tooltip = me_antigonid_2_aspiration.41.tt
            add_political_influence = -50 # Cost of task
            if = {
                limit = {
                    char:191 = { # Stratonike (historical)
                        is_alive = yes
                        employer = ROOT
                        is_adult = yes
                        age <= 30
                    }
                }
                char:191 = { save_scope_as = ant_2_marriage_bride_scope }
            }
            else = {
                ordered_character = { # Fallback
                    limit = {
                        is_adult = yes
                        is_female = yes
                        is_close_relative = ROOT.current_ruler
                        age <= 30
                    }
                    order_by = {
                        value = 0
                        subtract = age
                    }
                    save_scope_as = ant_2_marriage_bride_scope
                }
            }
            c:EGY = {
                if = {
                    limit = { ant_2_marriage_allow_trigger = yes } # Exists, eligible for marriage
                    add_to_list = ant_2_marriage_country_list
                }
            }
            c:TRE = {
                if = {
                    limit = { ant_2_marriage_allow_trigger = yes }
                    add_to_list = ant_2_marriage_country_list
                }
            }
            c:SEL = {
                if = {
                    limit = { ant_2_marriage_allow_trigger = yes }
                    add_to_list = ant_2_marriage_country_list
                }
            }
            if ={ # Favour Seleukids (historical)
                limit = {
                    any_in_list = {
                        list = ant_2_marriage_country_list
                        tag = SEL
                    }
                }
                set_variable = {
                    name = ant_2_marriage_country_1
                    value = c:SEL
                }
            }
            ordered_in_list = { # Other options
                list = ant_2_marriage_country_list
                order_by = num_of_cities
                max = 3
                check_range_bounds = no
                if = {
                    limit = {
                        ROOT = {
                            NOT = { has_variable = ant_2_marriage_country_1 }
                        }
                    }
                    ROOT = {
                        set_variable = {
                            name = ant_2_marriage_country_1
                            value = PREV
                        }
                    }
                }
                else_if = {
                    limit = {
                        ROOT = {
                            has_variable = ant_2_marriage_country_1
                            NOT = { has_variable = ant_2_marriage_country_2 }
                        }
                        NOT = {
                            THIS = ROOT.var:ant_2_marriage_country_1
                        }       
                    }
                    ROOT = {
                        set_variable = {
                            name = ant_2_marriage_country_2
                            value = PREV
                        }
                    }
                }
                else_if = {
                    limit = {
                        ROOT = {
                            has_variable = ant_2_marriage_country_1
                            has_variable = ant_2_marriage_country_2
                            NOT = { has_variable = ant_2_marriage_country_3 }
                        }
                        NOR = {
                            THIS = ROOT.var:ant_2_marriage_country_1
                            THIS = ROOT.var:ant_2_marriage_country_2
                        }
                    }
                    ROOT = {
                        set_variable = {
                            name = ant_2_marriage_country_3
                            value = PREV
                        }
                    }
                }
            }
        }
    }

    option = {      
        name = me_antigonid_2_aspiration.41.a # First option
        trigger = { has_variable = ant_2_marriage_country_1 }
        var:ant_2_marriage_country_1 = { save_scope_as = ant_2_marriage_country_scope }
        remove_variable = ant_2_marriage_country_1
        ant_2_4_effect = yes
    }

    option = {      
        name = me_antigonid_2_aspiration.41.b # Second option
        trigger = { has_variable = ant_2_marriage_country_2 }
        var:ant_2_marriage_country_2 = { save_scope_as = ant_2_marriage_country_scope }
        remove_variable = ant_2_marriage_country_2
        ant_2_4_effect = yes
    }

    option = {      
        name = me_antigonid_2_aspiration.41.c # Third option
        trigger = { has_variable = ant_2_marriage_country_3 }
        var:ant_2_marriage_country_3 = { save_scope_as = ant_2_marriage_country_scope }
        remove_variable = ant_2_marriage_country_3
        ant_2_4_effect = yes
    }

    option = {
        name = me_antigonid_2_aspiration.41.d # Cancel
        trigger = {
            OR = {
                has_variable = ant_2_marriage_first_time_flag
                has_variable = ant_2_marriage_country_1
                has_variable = ant_2_marriage_country_2
                has_variable = ant_2_marriage_country_3
            }
        }
        custom_tooltip = me_epirus_1_epirus.20.bt
        current_ruler = { add_popularity = subtract_popularity_medium }
        if = {
            limit = { has_variable = ant_2_marriage_first_time_flag }
            add_political_influence = 50
        }
        else = {
            add_political_influence = 25
        }
    }

    option = {      
        name = me_antigonid_2_aspiration.41.e # Ran out of candidates
        trigger = {
            NOR = {
                has_variable = ant_2_marriage_first_time_flag
                has_variable = ant_2_marriage_country_1
                has_variable = ant_2_marriage_country_2
                has_variable = ant_2_marriage_country_3
            }
        }
        custom_tooltip = me_epirus_1_epirus.20.bt
        add_political_influence = 25
    }

    after = { remove_variable = ant_2_marriage_first_time_flag } # So there can be second times
}

me_antigonid_2_aspiration.42 = {                            # Dynastic Relevance - OFFER
    type = country_event
    title = me_antigonid_2_aspiration.42.t
    desc = me_antigonid_2_aspiration.42.desc
    picture = throneroom
    left_portrait = current_ruler
    left_portrait = primary_heir
    right_portrait = scope:me_antigonids_scope.current_ruler
    right_portrait = scope:ant_2_marriage_bride_scope
    goto_location = scope:me_antigonids_scope.capital_scope
    
    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        primary_heir = { save_scope_as = ant_2_primary_heir } # For loc
    }

    option = {      
        name = me_antigonid_2_aspiration.42.a # Accept
        trigger = {
            current_ruler = {
                is_adult = yes
                is_female = no
            }
        }
        ant_2_move_bride_effect = yes # Divorce, fire, move
        current_ruler = {
            if = {
                limit = { is_married = yes }
                hidden_effect = {
                    THIS.spouse = { add_loyalty = loyalty_consort_cast_aside } # scorned
                }
                divorce_character = THIS.spouse                
            }
            if = {
                limit = { has_variable = betrothed_flag }
                var:betrothed_flag = { remove_variable = betrothed_flag }
                remove_variable = betrothed_flag
            }
            save_scope_as = ant_2_marriage_groom_scope
            marry_character = scope:ant_2_marriage_bride_scope
        }
        ant_2_ally_effect = yes # Opinion, truce, etc.
        ai_chance = {
            factor = 5
        }
    }

    option = {      
        name = me_antigonid_2_aspiration.42.b # Accept
        trigger = {
            primary_heir = {
                is_adult = yes
                is_female = no
            }
        }
        ant_2_move_bride_effect = yes # Divorce, fire, move
        primary_heir = {
            if = {
                limit = { is_married = yes }
                hidden_effect = {
                    THIS.spouse = { add_loyalty = loyalty_consort_cast_aside } # scorned
                }
                divorce_character = THIS.spouse
            }
            if = {
                limit = { has_variable = betrothed_flag }
                var:betrothed_flag = { remove_variable = betrothed_flag }
                remove_variable = betrothed_flag
            }
            save_scope_as = ant_2_marriage_groom_scope
            marry_character = scope:ant_2_marriage_bride_scope
        }
        ant_2_ally_effect = yes # Opinion, truce, etc.
        ai_chance = {
            factor = 5
        }
    }

    option = {      
        name = me_antigonid_2_aspiration.42.c # Reject
        custom_tooltip = me_antigonid_2_aspiration.42.ct
        scope:me_antigonids_scope = {
            trigger_event = {
                id = me_antigonid_2_aspiration.41
                days = 10
            }
        }
        ai_chance = {
            factor = 5
        }
    }
}

me_antigonid_2_aspiration.43 = {                            # Dynastic Relevance - SUCCESS
    type = country_event
    title = me_antigonid_2_aspiration.42.t
    desc = me_antigonid_2_aspiration.43.desc
    picture = diadochi_greek_royal_wedding
    left_portrait = current_ruler
    left_portrait = scope:ant_2_marriage_bride_scope
    right_portrait = scope:ant_2_marriage_country_scope.current_ruler
    right_portrait = scope:ant_2_marriage_groom_portrait_scope
    goto_location = scope:ant_2_marriage_country_scope.capital_scope
    
    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        if = {
            limit = {
                scope:ant_2_marriage_bride_scope = {
                    is_married = yes
                    NOT = { spouse = scope:ant_2_marriage_country_scope.current_ruler }
                }
            }
            scope:ant_2_marriage_bride_scope.spouse = { save_scope_as = ant_2_marriage_groom_portrait_scope }
        }
        current_ruler.family = { add_prestige = prestige_large }
        add_legitimacy = legitimacy_medium
        show_as_tooltip = {
            scope:ant_2_marriage_bride_scope = { move_country = scope:ant_2_marriage_groom_scope.employer }
            scope:ant_2_marriage_groom_scope = { marry_character = scope:ant_2_marriage_bride_scope }
            reverse_add_opinion = { target = scope:ant_2_marriage_country_scope modifier = ant_2_marriage_opmod }
            add_truce = {
                target = scope:ant_2_marriage_country_scope
                duration = 7300 # 20 years
            }
            scope:ant_2_marriage_country_scope = {
                add_truce = {
                    target = ROOT
                    duration = 7300 # 20 years
                }
            }
        }
    }

    option = { name = me_antigonid_2_aspiration.43.a }
}

me_antigonid_2_aspiration.51 = {                            # Strategic Fastness - END
    type = country_event
    title = me_antigonid_2_aspiration.51.t
    desc = me_antigonid_2_aspiration.51.desc
    picture = city_siege
    goto_location = p:418
    
    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_antigonid_2_aspiration.51.at
    }

    option = {      
        name = me_antigonid_2_aspiration.51.a
        p:418 = { ant_fortress_effect = yes }
        if = {
            limit = {
                NOT = { has_country_modifier = ant_01_4_cmod }
            }
            add_country_modifier = {
                name = ant_01_4_cmod
                duration = 1825 # 5 years
            }
        }
    }
}

me_antigonid_2_aspiration.61 = {                            # Blades of Tainaron - START
    type = country_event
    title = me_antigonid_2_aspiration.61.t
    desc = me_antigonid_2_aspiration.61.desc
    picture = hellenic_marketplace 

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        add_treasury = -75
    }

    option = {      
        name = me_antigonid_2_aspiration.61.a
        custom_tooltip = me_antigonid_2_aspiration.61.at
    }
}

me_antigonid_2_aspiration.62 = {                            # Blades of Tainaron - END
    type = country_event
    title = me_antigonid_2_aspiration.62.t
    desc = me_antigonid_2_aspiration.62.desc
    picture = greeks_marching

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_antigonid_2_aspiration.62.tt }

    option = {      
        name = me_antigonid_2_aspiration.62.a
        add_country_modifier = {
            name = me_ant_2_6_2_cmod
            duration = 7300 # 20 years
        }
    }

    option = {      
        name = me_antigonid_2_aspiration.62.b
        add_country_modifier = {
            name = me_ant_2_6_1_cmod
            duration = 7300 # 20 years
        }
    }
}

me_antigonid_2_aspiration.63 = {                            # Blades of Tainaron - GENERAL
    type = country_event
    title = me_antigonid_2_aspiration.63.t
    desc = me_antigonid_2_aspiration.63.desc
    picture = greek_home
    left_portrait = scope:antigonid_general_1
    right_portrait = scope:antigonid_general_2
    fire_only_once = yes

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        hidden_effect = {
            create_character = {
                female = no
                culture = peloponnesian
                religion = roman_pantheon
                age = adult_character_age_range_svalue
                no_traits = yes
                no_stats = yes
                amazing_martial_effect = yes
                good_charisma_effect = yes
                average_finesse_effect = yes
                average_zeal_effect = yes
                random_list = {
                    2 = { add_trait = steadfast }
                    2 = { add_trait = tactician }
                    2 = { add_trait = brave }
                    2 = { add_trait = confident }
                    2 = { add_trait = disciplined }
                    2 = { add_trait = original_thinker }
                    2 = { add_trait = aggressive }
                }
                save_scope_as = antigonid_general_1
            }
        }
        hidden_effect = {
            create_character = {
                female = no
                culture = ionian
                religion = roman_pantheon
                age = adult_character_age_range_svalue
                no_traits = yes
                no_stats = yes
                amazing_martial_effect = yes
                good_charisma_effect = yes
                average_finesse_effect = yes
                average_zeal_effect = yes
                random_list = {
                    2 = { add_trait = steadfast }
                    2 = { add_trait = tactician }
                    2 = { add_trait = brave }
                    2 = { add_trait = confident }
                    2 = { add_trait = disciplined }
                    2 = { add_trait = original_thinker }
                    2 = { add_trait = aggressive }
                }
                save_scope_as = antigonid_general_2
            }
        }
    }

    option = {
        name = me_antigonid_2_aspiration.63.a
        add_treasury = -25
        scope:antigonid_general_1 = { save_scope_as = accepted_general }
        scope:antigonid_general_2 = { save_scope_as = rejected_general }
        custom_tooltip = me_antigonid_2_aspiration.63.tt
        hidden_effect = {
            scope:rejected_general = {
                death = { death_reason = death_obscurity }
            }
        }
    }

    option = {
        name = me_antigonid_2_aspiration.63.b
        add_treasury = -25
        scope:antigonid_general_2 = { save_scope_as = accepted_general }
        scope:antigonid_general_1 = { save_scope_as = rejected_general }
        custom_tooltip = me_antigonid_2_aspiration.63.tt
        hidden_effect = {
            scope:rejected_general = {
                death = { death_reason = death_obscurity }
            }
        }
    }

    option = {
        name = me_antigonid_2_aspiration.63.c
        hidden_effect = {
            scope:antigonid_general_1 = {
                death = { death_reason = death_obscurity }
            }
            scope:antigonid_general_2 = {
                death = { death_reason = death_obscurity }
            }
        }
        custom_tooltip = me_antigonid_2_aspiration.63.ct
    }
}

me_antigonid_2_aspiration.71 = {                            # Hellenic Hegemon - END
    type = country_event
    title = me_antigonid_2_aspiration.71.t
    desc = me_antigonid_2_aspiration.71.desc
    picture = greek_political_discussion

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {  custom_tooltip = me_antigonid_2_aspiration.71.tt }

    option = {      
        name = me_antigonid_2_aspiration.71.a
        custom_tooltip = antigonid_02_aspiration_7_claims_tt
        add_country_modifier = {
            name = me_ant_2_7_cmod
            duration = 10950
        }
    }
}

me_antigonid_2_aspiration.81 = {                             # Alkimachid Heartland - END
    type = country_event
    title = me_antigonid_2_aspiration.81.t
    desc = me_antigonid_2_aspiration.81.desc
    picture = greek_siege
    goto_location = p:350

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_antigonid_2_aspiration.81.tt }

    option = {      
        name = me_antigonid_2_aspiration.81.a
        add_country_modifier = {
            name = me_epi_2_8_cmod
            duration = 7300 # 20 years
        }
        hidden_effect = {
            region:asia_region = {
                every_region_province = {
                    limit = {
                        OR = {
                            is_in_area = mysia_area
                            is_in_area = bithynia_inferior_area
                        }
                    }
                    add_claim = ROOT
                }
            }
        }
        custom_tooltip = me_antigonid_2_aspiration.81.at
    }
}

me_antigonid_2_aspiration.91 = {                            # Throne of Alexander - END
    type = country_event
    title = me_antigonid_2_aspiration.91.t
    desc = me_antigonid_2_aspiration.91.desc
    picture = diadochi_coronation

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_antigonid_2_aspiration.91.tt
        monarchy_formable_government_change_effect = yes
        if = {
            limit = {
                NOT = { primary_culture = macedonian }
            }
            set_primary_culture_cleanup_effect = {
                NEW_PRIMARY_CULTURE = macedonian
                MAKE_OLD_CULTURE_INTEGRATED = yes
            }
        }
        if = {
            limit = {
                p:379 = { is_capital = no }
            }
            set_capital = 379
            hidden_effect = {
                p:379.state = {
                    set_state_capital = 379
                }
            }
            capital_scope = {
                establish_city_effect = yes
            }
        }
        p:379 = {
            capital_formable_medium_effect = yes
            formable_capital_modifier_normal_effect = yes
        }
        custom_tooltip = macedon_claims_tooltip
        hidden_effect = {
            region:macedonia_region = { formable_region_province_effect = yes }
        }
        add_3_free_province_investments = yes
    }

    option = {      
        name = me_antigonid_2_aspiration.91.a
        custom_tooltip = me_antigonid_2_aspiration.91.at
        hidden_effect = {
            change_country_color = "blue_macedon"
            change_country_flag = MAC
        }
        ai_chance = { factor = 10 }
    }

    option = {      
        name = me_antigonid_2_aspiration.91.b
        custom_tooltip = me_antigonid_2_aspiration.91.bt
        ai_chance = { factor = 0 }
    }

    option = {      
        name = me_antigonid_2_aspiration.91.c
        custom_tooltip = me_antigonid_2_aspiration.91.ct
        hidden_effect = {
            change_country_color = "blue_macedon"
            change_country_flag = PRY_MAC
        }
        ai_chance = { factor = 0 }
    }

    option = {      
        name = me_antigonid_2_aspiration.91.d
        custom_tooltip = me_antigonid_2_aspiration.91.dt
        hidden_effect = { change_country_flag = MAC_PRY }
        ai_chance = { factor = 0 }
    }

    after = {
        change_country_name = "MACEDONIA_NAME"
        hidden_effect = {
            change_country_adjective = "MACEDONIA_ADJECTIVE"
            change_country_tag = MAC
        }
    }
}

me_antigonid_2_aspiration.101 = {                            # Thessalian Fetter - START
    type = country_event
    title = me_antigonid_2_aspiration.101.t
    desc = me_antigonid_2_aspiration.101.desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:demetrios_scope
    right_portrait = char:37

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        if = {
            limit = {
                NOT = { current_ruler = char:38 }
            }
            char:38 = { save_scope_as = demetrios_scope }
        }
        add_treasury = -100
    }

    option = {      
        name = me_antigonid_2_aspiration.101.a
        custom_tooltip = me_antigonid_2_aspiration.101.at
    }
}

me_antigonid_2_aspiration.102 = {                            # Thessalian Fetter - END
    type = country_event
    title = me_antigonid_2_aspiration.102.t
    desc = me_antigonid_2_aspiration.102.desc
    picture = diadochi_new_city_founded
    left_portrait = current_ruler
    right_portrait = scope:demetrios_scope
    right_portrait = char:37

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_antigonid_2_aspiration.102.tt
        if = {
            limit = {
                NOT = { current_ruler = char:38 }
            }
            char:38 = { save_scope_as = demetrios_scope }
        }
    }

    option = {      
        name = me_antigonid_2_aspiration.102.a
        p:390 = {
            if = {
                limit = {
                    total_population > p:391.total_population
                    p:391.total_population > 3
                }
                custom_tooltip = antigonid_02_aspiration_10_pop_tt
                set_variable = {
                    name = me_ant_2_10_counter
                    value = me_ant_2_10_svalue
                }
                hidden_effect = {
                    while = {
                        limit = { var:me_ant_2_10_counter > 0 }
                        p:390 = {
                            random_pops_in_province = {
                                weight = {
                                    modifier = {
                                        pop_culture_group = hellenic
                                        factor = 100
                                    }
                                    modifier = {
                                        pop_type = freemen
                                        factor = 100
                                    }
                                    modifier = {
                                        pop_type = citizen
                                        factor = 50
                                    }
                                }
                                move_pop = p:391
                            }
                        }
                        change_variable = {
                            name = me_ant_2_10_counter
                            subtract = 1
                        }
                    }
                }
                if = {
                    limit = { has_city_status = yes }
                    set_city_status = settlement
                }
            }
        }
        p:391 = {
            if = {
                limit = { has_city_status = no }
                set_city_status = city
            }
            while = {
                limit = { num_of_fortress_building < 2 }
                if = {
                    limit = { free_building_slots < 1 }
                    destroy_building_effect = yes
                }
                add_building_level = fortress_building
            }
            add_permanent_province_modifier = { name = me_ant_02_10_pmod }
            change_province_name = "Demetrias"
        }
    }
}

me_antigonid_2_aspiration.103 = {                            # Thessalian Fetter - BYPASS
    type = country_event
    title = me_antigonid_2_aspiration.103.t
    desc = me_antigonid_2_aspiration.103.desc
    picture = greek_court

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        add_treasury = 50
    }

    option = {      
        name = me_antigonid_2_aspiration.103.a
        custom_tooltip = me_antigonid_2_aspiration.103.at
    }
}

me_antigonid_2_aspiration.111 = {                            # Antigonid Royalty - END
    type = country_event
    title = me_antigonid_2_aspiration.111.t
    desc = me_antigonid_2_aspiration.111.desc
    picture = diadochi_coronation

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_antigonid_2_aspiration.111.at }

    option = {      
        name = me_antigonid_2_aspiration.111.a
        random_unit = {
            limit = { legion = ROOT.capital_scope.governorship.legion }
            add_unit_modifier = {
                name = ant_2_11_umod
                duration = -1
            }
        }
    }
}

me_antigonid_2_aspiration.121 = {                            # Fourth Fetter - START
    type = country_event
    title = me_antigonid_2_aspiration.121.t
    desc = me_antigonid_2_aspiration.121.desc
    picture = road_construction
    goto_location = p:431

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        add_treasury = -75
    }

    option = {      
        name = me_antigonid_2_aspiration.121.a
        custom_tooltip = me_antigonid_2_aspiration.121.at
    }
}

me_antigonid_2_aspiration.122 = {                            # Fourth Fetter - END
    type = country_event
    title = me_antigonid_2_aspiration.122.t
    desc = me_antigonid_2_aspiration.122.desc
    picture = city_siege
    goto_location = p:431

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_antigonid_2_aspiration.122.tt
    }

    option = {      
        name = me_antigonid_2_aspiration.122.a
        set_variable = fourth_fetter_flag
        p:431 = {
            add_permanent_province_modifier = { name = ant_2_12_pmod }
            ant_fortress_effect = yes
        }
    }
}

me_antigonid_2_aspiration.123 = {                            # Fourth Fetter - BYPASS
    type = country_event
    title = me_antigonid_2_aspiration.123.t
    desc = me_antigonid_2_aspiration.123.desc
    picture = greek_court
    goto_location = p:431

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_antigonid_2_aspiration.123.tt }

    option = {      
        name = me_antigonid_2_aspiration.123.a
    }
}

me_antigonid_2_aspiration.131 = {                            # Poseidon's Throne - START
    type = country_event
    title = me_antigonid_2_aspiration.131.t
    desc = me_antigonid_2_aspiration.131.desc
    picture = diadochi_demetrius_navy

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {      
        name = me_antigonid_2_aspiration.131.a
        custom_tooltip = me_antigonid_2_aspiration.131.at
    }
}

me_antigonid_2_aspiration.132 = {                            # Poseidon's Throne - END
    type = country_event
    title = me_antigonid_2_aspiration.132.t
    desc = me_antigonid_2_aspiration.132.desc
    picture = grand_ship
    goto_location = scope:polyreme_scope.unit_location

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        hidden_effect = {
            if = {
                limit = {
                    any_navy = { unit_size > 0 }
                }
                ordered_navy = {
                    order_by = unit_size
                    save_scope_as = polyreme_scope
                }
            }
            else = {
                create_unit = {
                    navy = yes
                    sub_unit = liburnian
                    save_scope_as = polyreme_scope
                }
            }
        }
        custom_tooltip = me_antigonid_2_aspiration.132.tt
    }

    option = {      
        name = me_antigonid_2_aspiration.132.a
        scope:polyreme_scope = {
            while = {
                count = 3
                add_subunit = mega_galley
                #add_subunit = mega_galley
                #add_subunit = mega_galley
            }
        }
    }

    option = {      
        name = me_antigonid_2_aspiration.132.b
        add_country_modifier = {
            name = me_ant_02_13_cmod
            duration = 7300 # 20 years
        }
    }
}

me_antigonid_2_aspiration.133 = {                            # Poseidon's Throne - ADMIRAL
    type = country_event
    title = me_antigonid_2_aspiration.133.t
    desc = me_antigonid_2_aspiration.133.desc
    picture = trade_port
    left_portrait = scope:antigonid_admiral_1
    right_portrait = scope:antigonid_admiral_2
    fire_only_once = yes

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        hidden_effect = {
            create_character = {
                female = no
                culture = macedonian
                religion = roman_pantheon
                age = adult_character_age_range_svalue
                no_traits = yes
                no_stats = yes
                amazing_martial_effect = yes
                good_charisma_effect = yes
                average_finesse_effect = yes
                average_zeal_effect = yes
                random_list = {
                    2 = { add_trait = oarmaster }
                    2 = { add_trait = seadog }
                    2 = { add_trait = improviser }
                    2 = { add_trait = squadron_leader }
                    2 = { add_trait = princeps }
                    2 = { add_trait = coastal_raider }
                    2 = { add_trait = daring }
                    2 = { add_trait = tough }
                }
                save_scope_as = antigonid_admiral_1
            }
        }
        hidden_effect = {
            create_character = {
                female = no
                culture = macedonian
                religion = roman_pantheon
                age = adult_character_age_range_svalue
                no_traits = yes
                no_stats = yes
                amazing_martial_effect = yes
                good_charisma_effect = yes
                average_finesse_effect = yes
                average_zeal_effect = yes
                random_list = {
                    2 = { add_trait = oarmaster }
                    2 = { add_trait = seadog }
                    2 = { add_trait = improviser }
                    2 = { add_trait = squadron_leader }
                    2 = { add_trait = princeps }
                    2 = { add_trait = coastal_raider }
                    2 = { add_trait = daring }
                    2 = { add_trait = tough }
                }
                save_scope_as = antigonid_admiral_2
            }
        }
    }

    option = {
        name = me_antigonid_2_aspiration.133.a
        scope:antigonid_admiral_1 = { save_scope_as = accepted_admiral }
        scope:antigonid_admiral_2 = { save_scope_as = rejected_admiral }
        custom_tooltip = me_antigonid_2_aspiration.133.tt
    }

    option = {
        name = me_antigonid_2_aspiration.133.b
        scope:antigonid_admiral_2 = { save_scope_as = accepted_admiral }
        scope:antigonid_admiral_1 = { save_scope_as = rejected_admiral }
        custom_tooltip = me_antigonid_2_aspiration.133.tt
    }

    after = {
        if = {
            limit = { exists = scope:rejected_admiral }
            scope:rejected_admiral = {
                death = { death_reason = death_obscurity }
            }
        }
    }
}

me_antigonid_2_aspiration.134 = {                            # Poseidon's Throne - BYPASS
    type = country_event
    title = me_antigonid_2_aspiration.134.t
    desc = me_antigonid_2_aspiration.134.desc
    picture = ship_in_storm 

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_antigonid_2_aspiration.134.tt }

    option = { name = me_antigonid_2_aspiration.134.a }
}

me_antigonid_2_aspiration.141 = {                            # Stable Dynasty - END
    type = country_event
    title = me_antigonid_2_aspiration.141.t
    desc = me_antigonid_2_aspiration.141.desc
    picture = throneroom

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_antigonid_2_aspiration.141.at
    }

    option = {      
        name = me_antigonid_2_aspiration.141.a
        current_ruler = { add_nickname = NICKNAME_ANIKETOS }
    }

    option = {      
        name = me_antigonid_2_aspiration.141.b
        trigger = {
            current_ruler = { has_nickname = yes }
        }
        current_ruler = {
           if = {
                limit = { number_of_personality_traits <= 2 }
                add_trait = humble
            }
        }
    }

    after = {      
        current_ruler = {
            add_popularity = popularity_medium
        }
        add_legitimacy = legitimacy_large
        add_stability_effect = yes
    }
}