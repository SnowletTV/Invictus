namespace = me_thrace_3_new_philhellene_policy

me_thrace_3_new_philhellene_policy.1 = {                          # Philhellene Policy - START
    type = country_event
    title = me_thrace_3_new_philhellene_policy.1.t
    desc = me_thrace_3_new_philhellene_policy.1.desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = c:ISO.current_ruler
    right_portrait = c:KTS.current_ruler
    right_portrait = c:APL.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.1.a
        add_country_modifier = {
            name = me_tre_3_cmod
            duration = 9125 # 25 years
        }
    }
}

me_thrace_3_new_philhellene_policy.2 = {                          # Philhellene Policy - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.2.t
    desc = me_thrace_3_new_philhellene_policy.2.desc
    picture = diadochi_greek_royal_wedding

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.2.a
        add_country_modifier = {
            name = me_tre_3_end_cmod
            duration = 7300 # 20 years
        }
        custom_tooltip = me_thrace_3_new_philhellene_policy.2.tt
    }
}

me_thrace_3_new_philhellene_policy.11 = {                            # West-Pontic Colonies - START
    type = country_event
    title = me_thrace_3_new_philhellene_policy.11.t
    desc = me_thrace_3_new_philhellene_policy.11.desc
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.11.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.11.at
    }
}

me_thrace_3_new_philhellene_policy.12 = {                            # West-Pontic Colonies - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.12.t
    desc = me_thrace_3_new_philhellene_policy.12.desc
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_thrace_3_new_philhellene_policy.12.tt
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.12.a
        every_country_state = {
            limit = {
                any_state_province = {
                    OR = {
                        is_in_area = scythia_area
                        is_in_area = moesia_orientalis_area
                        is_in_area = haemimontus_area
                    }
                }
            }
            add_state_modifier = {
                name = state_improvement_civic
                duration = -1
                mode = add
            }
        }
        hidden_effect = {
            every_subject = {
                limit = {
                    any_country_state = {
                        any_state_province = {
                            OR = {
                                is_in_area = scythia_area
                                is_in_area = moesia_orientalis_area
                                is_in_area = haemimontus_area
                            }
                        }
                    }
                }
                trigger_event = me_thrace_3_new_philhellene_policy.13
                every_country_state = {
                    limit = {
                        any_state_province = {
                            OR = {
                                is_in_area = scythia_area
                                is_in_area = moesia_orientalis_area
                                is_in_area = haemimontus_area
                            }
                        }
                    }
                    add_state_modifier = {
                        name = state_improvement_civic
                        duration = -1
                        mode = add
                    }
                }
            }
        }
        custom_tooltip = thrace_03_philhellene_1_reward_tt
    }
}

me_thrace_3_new_philhellene_policy.13 = {                            # West-Pontic Colonies - PING
    type = country_event
    title = me_thrace_3_new_philhellene_policy.13.t
    desc = me_thrace_3_new_philhellene_policy.13.desc
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler
    goto_location = capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
        is_ai = no
    }

    immediate = {
        show_as_tooltip = {
            every_country_state = {
                limit = {
                    any_state_province = {
                        OR = {
                            is_in_area = scythia_area
                            is_in_area = moesia_orientalis_area
                            is_in_area = haemimontus_area
                        }
                    }
                }
                add_state_modifier = {
                    name = state_improvement_civic
                    duration = -1
                    mode = add
                }
            }
        }
    }

    option = { name = me_thrace_3_new_philhellene_policy.13.a }
}

me_thrace_3_new_philhellene_policy.14 = {                            # West-Pontic Colonies - BYPASS
    type = country_event
    title = {
        first_valid = {
            triggered_desc = {
                trigger = { has_variable = thrace_03_philhellene_1_bypass_flag } # not enough greek cities, but it's West-Pontic Cities
                desc = me_thrace_3_new_philhellene_policy.14.t
            }
            triggered_desc = {
                trigger = { has_variable = thrace_03_philhellene_7_bypass_flag } # not enough greek cities, but it's Condone Local Mints
                desc = me_thrace_3_new_philhellene_policy.74.t
            }
            triggered_desc = {
                trigger = { has_variable = thrace_03_philhellene_13_bypass_flag } # not enough greek cities, but it's Invest in the Poleis
                desc = me_thrace_3_new_philhellene_policy.134.t
            }
            triggered_desc = {
                trigger = { has_variable = thrace_03_philhellene_15_bypass_flag } # not enough greek cities, but it's Formalize Autonomy
                desc = me_thrace_3_new_philhellene_policy.154.t
            }
            triggered_desc = {
                trigger = { has_variable = thrace_03_philhellene_9_bypass_flag } # not enough greek cities, but it's Garrison the Poleis
                desc = me_thrace_3_new_philhellene_policy.94.t
            }
            triggered_desc = {
                trigger = { has_variable = thrace_03_philhellene_10_bypass_flag } # not enough greek cities, but it's Enforce Royal Coinage
                desc = me_thrace_3_new_philhellene_policy.104.t
            }
            triggered_desc = {
                trigger = { has_variable = thrace_03_philhellene_14_bypass_flag } # not enough greek cities, but it's Solidify Control
                desc = me_thrace_3_new_philhellene_policy.144.t
            }
        }
    }
    desc = me_thrace_3_new_philhellene_policy.14.desc
    picture = greek_court

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
        is_ai = no
    }

    immediate = {
        if = {
            limit = { has_variable = thrace_03_philhellene_1_bypass_flag } # West-Pontic Cities
            custom_tooltip = me_thrace_3_new_philhellene_policy.14.tt
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_7_bypass_flag } # Condone Local Mints
            custom_tooltip = me_thrace_3_new_philhellene_policy.74.tt
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_13_bypass_flag } # Invest in the Poleis
            custom_tooltip = me_thrace_3_new_philhellene_policy.134.tt
            add_treasury = 150
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_15_bypass_flag } # Formalize Autonomy
            custom_tooltip = me_thrace_3_new_philhellene_policy.154.tt
            add_political_influence = 50
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_9_bypass_flag } # Garrison the Poleis
            custom_tooltip = me_thrace_3_new_philhellene_policy.94.tt
            add_manpower = 5
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_10_bypass_flag } # Enforce Royal Coinage
            custom_tooltip = me_thrace_3_new_philhellene_policy.104.tt
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_14_bypass_flag } # Solidify Control
            custom_tooltip = me_thrace_3_new_philhellene_policy.144.tt
        }
    }

    option = { name = me_thrace_3_new_philhellene_policy.14.a }

    after = {
        if = {
            limit = { has_variable = thrace_03_philhellene_1_bypass_flag } # West-Pontic Cities
            remove_variable = thrace_03_philhellene_1_bypass_flag
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_7_bypass_flag } # Condone Local Mints
            remove_variable = thrace_03_philhellene_7_bypass_flag
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_13_bypass_flag } # Invest in the Poleis
            remove_variable = thrace_03_philhellene_13_bypass_flag
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_15_bypass_flag } # Formalize Autonomy
            remove_variable = thrace_03_philhellene_15_bypass_flag
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_9_bypass_flag } # Garrison the Poleis
            remove_variable = thrace_03_philhellene_9_bypass_flag
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_10_bypass_flag } # Enforce Royal Coinage
            remove_variable = thrace_03_philhellene_10_bypass_flag
        }
        if = {
            limit = { has_variable = thrace_03_philhellene_14_bypass_flag } # Solidify Control
            remove_variable = thrace_03_philhellene_14_bypass_flag
        }
    }
}

me_thrace_3_new_philhellene_policy.21 = {                            # Philhellenic Euergetism - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.21.t
    desc = me_thrace_3_new_philhellene_policy.21.desc
    picture = war_chest
    left_portrait = current_ruler
    right_portrait = scope:euergetism_1
    right_portrait = scope:euergetism_2
    right_portrait = scope:euergetism_3
    goto_location = p:418

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {  
        add_treasury = -1000
        current_ruler = { add_popularity = popularity_large }
        custom_tooltip = me_thrace_3_new_philhellene_policy.21.tt
        ordered_country = {
            limit = {
                country_culture_group = hellenic
                NOT = { primary_culture = macedonian }
                capital_scope = {   
                    is_in_region = greece_region
                    NOR = {
                        is_in_area = crete_area
                        is_in_area = epirus_area
                    }
                }
            }
            max = 3
            check_range_bounds = no
            order_by = country_population
            if = {
                limit = {
                    NOT = { exists = scope:euergetism_1 }
                }
                save_scope_as = euergetism_1
            }
            else_if = {
                limit = {
                    exists = scope:euergetism_1
                    NOT = { THIS = scope:euergetism_1 }
                }
                save_scope_as = euergetism_2
            }
            else_if = {
                limit = {
                    exists = scope:euergetism_1
                    exists = scope:euergetism_2
                    NOR = {
                        THIS = scope:euergetism_1
                        THIS = scope:euergetism_2
                    }
                }
                save_scope_as = euergetism_3
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.21.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.21.at
    }

    after = {
        hidden_effect = {
            every_country = {
                limit = {
                    country_culture_group = hellenic
                    NOT = { primary_culture = macedonian }
                    capital_scope = {   
                        is_in_region = greece_region
                        NOR = {
                            is_in_area = crete_area
                            is_in_area = epirus_area
                        }
                    }
                    NOT = {
                        has_opinion = { modifier = tre_euergetism_opmod target = ROOT }
                    }
                }
                add_treasury = tre_mis_3_2_gold_svalue
                add_opinion = { target = scope:me_thrace_scope modifier = tre_euergetism_opmod }
                trigger_event = me_thrace_3_new_philhellene_policy.22
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.22 = {                            # Philhellenic Euergetism - PING
    type = country_event
    title = me_thrace_3_new_philhellene_policy.22.t
    desc = me_thrace_3_new_philhellene_policy.22.desc
    picture = war_chest
    left_portrait = current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler
    goto_location = scope:me_thrace_scope.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
        is_ai = no
    }

    immediate = {
        show_as_tooltip = { add_treasury = tre_mis_3_2_gold_svalue }
    }

    option = { name = me_thrace_3_new_philhellene_policy.22.a }
}

me_thrace_3_new_philhellene_policy.31 = {                            # Cult of Personality - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.31.t
    desc = me_thrace_3_new_philhellene_policy.31.desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = primary_heir

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_thrace_3_new_philhellene_policy.31.tt }

    option = {      
        name = me_thrace_3_new_philhellene_policy.31.a
        current_ruler = { add_popularity = popularity_large }
        primary_heir = { add_popularity = popularity_medium }
        add_stability_effect = yes
    }
}

me_thrace_3_new_philhellene_policy.41 = {                            # Divine Founder - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.41.t
    desc = me_thrace_3_new_philhellene_policy.41.desc
    picture = greek_religious_rite

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        add_political_influence = -50
        add_treasury = -50
        custom_tooltip = me_thrace_3_new_philhellene_policy.41.tt
        if = {
            limit = {
                char:41 = { is_deified = no }
            }
            char:41 = { save_scope_as = deified_char }
        }
        else_if = {
            limit = {
                current_ruler = {
                    NOT = { THIS = char:41 }
                }
            }
            current_ruler = { save_scope_as = deified_char }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.41.a
        if = {
            limit = {
                exists = scope:deified_char
                scope:deified_char = { is_deified = no }
            }
            scope:deified_char = {
                deify_character = {
                    deity = deity:omen_zeus
                    country = ROOT
                }
            }
        }
        else = {
            add_country_modifier = {
                name = me_tre_3_4_cmod
                duration = 3650 # 10 years
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.51 = {                            # Benefactor of Athens - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.51.t
    desc = me_thrace_3_new_philhellene_policy.51.desc
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = c:ATH.current_ruler
    right_portrait = c:ATH.overlord.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_thrace_3_new_philhellene_policy.51.tt }

    option = {      
        name = me_thrace_3_new_philhellene_policy.51.a
        custom_tooltip = thrace_03_philhellene_5_reward_tt
        show_as_tooltip = {
            add_treasury = -200
            reverse_add_opinion = { target = c:ATH modifier = tre_benefactor_athens_opmod }
            if = {
                limit = {
                    c:ATH = { is_subject = yes }
                }
                c:ATH.overlord = { release_subject = c:ATH }
                custom_tooltip = thrace_03_philhellene_5_claims_tt
            }
            custom_tooltip = thrace_03_philhellene_5_reward_tt1
        }   
    }

    after = {
        hidden_effect = {
            c:ATH = {
                overlord = { save_scope_as = athens_overlord_scope }
                trigger_event = {
                    id = me_thrace_3_new_philhellene_policy.52
                    days = 15
                }
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.52 = {                            # Benefactor of Athens - OFFER
    type = country_event
    title = me_thrace_3_new_philhellene_policy.52.t
    desc = {
        desc = me_thrace_3_new_philhellene_policy.52.desc
        triggered_desc = {
            trigger = { 
                c:ATH = {
                    is_subject = yes
                }
            }
            desc = me_thrace_3_new_philhellene_policy.52.desc_1
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:athens_overlord_scope.current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.52.a
        set_variable = athens_benefacted_flag
        add_treasury = 200
        add_opinion = { target = scope:me_thrace_scope modifier = tre_benefactor_athens_opmod }
        if = {
            limit = { is_subject = yes }
            overlord = { release_subject = ROOT }
            custom_tooltip = thrace_03_philhellene_5_claims_tt
        }
        add_alliance = scope:me_thrace_scope
        ai_chance = {
            factor = 6
            modifier = {
                factor = 0.5
                opinion = {
                    target = scope:me_thrace_scope
                    value <= 0
                }
            }
            modifier = {
                factor = 0.1
                opinion = {
                    target = scope:me_thrace_scope
                    value <= -100
                }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.52.b
        set_variable = athens_benefacted_flag
        add_treasury = 200
        add_opinion = { target = scope:me_thrace_scope modifier = tre_benefactor_athens_opmod }
        if = {
            limit = { is_subject = yes }
            overlord = { release_subject = ROOT }
            custom_tooltip = thrace_03_philhellene_5_claims_tt
        }
        ai_chance = { factor = 2 }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.52.c
        custom_tooltip = no_effect_tooltip
        ai_chance = {
            factor = 2
            modifier = {
                factor = 2
                opinion = {
                    target = scope:me_thrace_scope
                    value <= 0
                }
            }
            modifier = {
                factor = 10
                opinion = {
                    target = scope:me_thrace_scope
                    value <= -100
                }
            }
        }
    }

    after = {
        if = {
            limit = { exists = scope:athens_overlord_scope }
            scope:athens_overlord_scope = {
                trigger_event = me_thrace_3_new_philhellene_policy.53
            }
        }
        else = {
            scope:me_thrace_scope = {
                trigger_event = me_thrace_3_new_philhellene_policy.54
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.53 = {                            # Benefactor of Athens - OVERLORD PING
    type = country_event
    title = me_thrace_3_new_philhellene_policy.53.t
    desc = {
        desc = me_thrace_3_new_philhellene_policy.53.desc
        first_valid = {
            triggered_desc = {
                trigger = { 
                    c:ATH = {
                        has_variable = athens_benefacted_flag
                        alliance_with = scope:me_thrace_scope
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.53.desc_1 # allies
            }
            triggered_desc = {
                trigger = {
                    c:ATH = {
                        has_variable = athens_benefacted_flag
                        NOT = { alliance_with = scope:me_thrace_scope }
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.53.desc_2 # free
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = me_thrace_3_new_philhellene_policy.53.desc_3 # loyal
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = c:ATH.current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        c:ATH = {
            if = {
                limit = {
                    has_variable = athens_benefacted_flag
                    alliance_with = scope:me_thrace_scope
                }
                show_as_tooltip = {
                    add_treasury = 200
                    add_opinion = { target = scope:me_thrace_scope modifier = tre_benefactor_athens_opmod }
                    custom_tooltip = me_thrace_3_new_philhellene_policy.53.tt
                    add_alliance = scope:me_thrace_scope
                }
            }
            else_if = {
                limit = { has_variable = athens_benefacted_flag }
                show_as_tooltip = {
                    add_treasury = 200
                    add_opinion = { target = scope:me_thrace_scope modifier = tre_benefactor_athens_opmod }
                    custom_tooltip = me_thrace_3_new_philhellene_policy.53.tt
                }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.53.a
        trigger = {
            c:ATH = {
                has_variable = athens_benefacted_flag
                alliance_with = scope:me_thrace_scope
            }
        }
        if = {
            limit = { tag = PRY }
            custom_tooltip = me_thrace_3_new_philhellene_policy.53.bt
            trigger_event = {
                id = diadochi_flavor.86
                days = { 14 28 }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.53.b
        trigger = {
            c:ATH = {
                has_variable = athens_benefacted_flag
                NOT = { alliance_with = scope:me_thrace_scope }
            }
        }
        if = {
            limit = { tag = PRY }
            custom_tooltip = me_thrace_3_new_philhellene_policy.53.ct
            trigger_event = {
                id = diadochi_flavor.86
                days = { 14 28 }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.53.c
        custom_tooltip = me_thrace_3_new_philhellene_policy.53.ct
        trigger = {
            c:ATH = {
                NOT = { has_variable = athens_benefacted_flag }
            }
        }
    }

    after = {
        scope:me_thrace_scope = { trigger_event = me_thrace_3_new_philhellene_policy.54 }
    }
}

me_thrace_3_new_philhellene_policy.54 = {                            # Benefactor of Athens - TRE PING
    type = country_event
    title = me_thrace_3_new_philhellene_policy.54.t
    desc = {
        desc = me_thrace_3_new_philhellene_policy.54.desc
        first_valid = {
            triggered_desc = {
                trigger = { 
                    c:ATH = {
                        has_variable = athens_benefacted_flag
                        alliance_with = scope:me_thrace_scope
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.54.desc_1 # allies
            }
            triggered_desc = {
                trigger = {
                    c:ATH = {
                        has_variable = athens_benefacted_flag
                        NOT = { alliance_with = scope:me_thrace_scope }
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.54.desc_2 # free
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = me_thrace_3_new_philhellene_policy.54.desc_3 # loyal
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = c:ATH.current_ruler
    right_portrait = scope:athens_overlord_scope.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        ROOT = { add_treasury = -200 }
        c:ATH = {
            show_as_tooltip = {
                add_treasury = 200
                add_opinion = { target = scope:me_thrace_scope modifier = tre_benefactor_athens_opmod }
                if = {
                    limit = { exists = scope:athens_overlord_scope }
                    custom_tooltip = me_thrace_3_new_philhellene_policy.54.tt
                }
                if = {
                    limit = { alliance_with = scope:me_thrace_scope }
                    show_as_tooltip = { add_alliance = scope:me_thrace_scope }
                }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.54.a
        trigger = {
            c:ATH = {
                has_variable = athens_benefacted_flag
                alliance_with = scope:me_thrace_scope
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.54.b
        trigger = {
            c:ATH = {
                has_variable = athens_benefacted_flag
                NOT = { alliance_with = scope:me_thrace_scope }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.54.c
        trigger = {
            c:ATH = {
                NOT = { has_variable = athens_benefacted_flag }
            }
        }
    }

    after = {
        c:ATH = {
            if = {
                limit = { has_variable = athens_benefacted_flag }
                remove_variable = athens_benefacted_flag
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.61 = {                            # Peloponnesian Overtures - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.61.t
    desc = me_thrace_3_new_philhellene_policy.61.desc
    picture = greek_court
    left_portrait = current_ruler
    right_portrait = c:SPA.current_ruler
    right_portrait = c:SPA.overlord.current_ruler
    goto_location = c:SPA.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_thrace_3_new_philhellene_policy.61.tt }

    option = {      
        name = me_thrace_3_new_philhellene_policy.61.a
        custom_tooltip = thrace_03_philhellene_6_reward_tt
        show_as_tooltip = {
            add_treasury = -150
            reverse_add_opinion = { target = c:SPA modifier = tre_6_opmod }
            if = {
                limit = {
                    c:SPA = { is_subject = yes }
                }
                c:SPA.overlord = { release_subject = c:SPA }
                custom_tooltip = thrace_03_philhellene_6_claims_tt
            }
            custom_tooltip = thrace_03_philhellene_6_reward_tt1
        }   
    }

    after = {
        hidden_effect = {
            c:SPA = {
                if = {
                    limit = { is_subject = yes }
                    overlord = { save_scope_as = sparta_overlord_scope }
                }
                trigger_event = {
                    id = me_thrace_3_new_philhellene_policy.62
                    days = 15
                }
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.62 = {                            # Pelopponese - OFFER
    type = country_event
    title = me_thrace_3_new_philhellene_policy.62.t
    desc = {
        desc = me_thrace_3_new_philhellene_policy.62.desc
        triggered_desc = {
            trigger = { 
                c:SPA = {
                    is_subject = yes
                }
            }
            desc = me_thrace_3_new_philhellene_policy.62.desc_1
        }
    }
    picture = greek_court
    left_portrait = current_ruler
    left_portrait = scope:boeotia_overlord_scope.current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.62.a
        set_variable = tre_6_flag
        add_treasury = 150
        add_opinion = { target = scope:me_thrace_scope modifier = tre_6_opmod }
        if = {
            limit = { is_subject = yes }
            overlord = { release_subject = ROOT }
            custom_tooltip = thrace_03_philhellene_6_claims_tt
        }
        add_alliance = scope:me_thrace_scope
        ai_chance = { factor = 8 }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.62.b
        set_variable = tre_6_flag
        add_treasury = 150
        add_opinion = { target = scope:me_thrace_scope modifier = tre_6_opmod }
        if = {
            limit = { is_subject = yes }
            overlord = { release_subject = ROOT }
            custom_tooltip = thrace_03_philhellene_6_claims_tt
        }
        ai_chance = { factor = 2 }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.62.c
        custom_tooltip = no_effect_tooltip
        ai_chance = {
            factor = 2
            modifier = {
                factor = 2
                opinion = {
                    target = scope:me_thrace_scope
                    value <= 0
                }
            }
            modifier = {
                factor = 10
                opinion = {
                    target = scope:me_thrace_scope
                    value <= -100
                }
            }
        }
    }

    after = {
        if = {
            limit = { exists = scope:sparta_overlord_scope }
            scope:sparta_overlord_scope = { trigger_event = me_thrace_3_new_philhellene_policy.63 }
        }
        else = {
            scope:me_thrace_scope = { trigger_event = me_thrace_3_new_philhellene_policy.64 }
        }
    }
}

me_thrace_3_new_philhellene_policy.63 = {                            # Pelopponese - OVERLORD PING
    type = country_event
    title = me_thrace_3_new_philhellene_policy.63.t
    desc = {
        desc = me_thrace_3_new_philhellene_policy.63.desc
        first_valid = {
            triggered_desc = {
                trigger = { 
                    c:SPA = {
                        has_variable = tre_6_flag
                        alliance_with = scope:me_thrace_scope
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.63.desc_1 # allies
            }
            triggered_desc = {
                trigger = {
                    c:SPA = {
                        has_variable = tre_6_flag
                        NOT = { alliance_with = scope:me_thrace_scope }
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.63.desc_2 # free
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = me_thrace_3_new_philhellene_policy.63.desc_3 # loyal
            }
        }
    }
    picture = greek_court
    left_portrait = current_ruler
    right_portrait = c:SPA.current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        c:SPA = {
            if = {
                limit = {
                    has_variable = tre_6_flag
                    alliance_with = scope:me_thrace_scope
                }
                show_as_tooltip = {
                    add_treasury = 150
                    add_opinion = { target = scope:me_thrace_scope modifier = tre_6_opmod }
                    custom_tooltip = me_thrace_3_new_philhellene_policy.63.tt
                    add_alliance = scope:me_thrace_scope
                }
            }
            else_if = {
                limit = { has_variable = tre_6_flag }
                show_as_tooltip = {
                    add_treasury = 150
                    add_opinion = { target = scope:me_thrace_scope modifier = tre_6_opmod }
                    custom_tooltip = me_thrace_3_new_philhellene_policy.63.tt
                }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.53.a
        trigger = {
            c:SPA = {
                has_variable = tre_6_flag
                alliance_with = scope:me_thrace_scope
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.53.b
        trigger = {
            c:SPA = {
                has_variable = tre_6_flag
                NOT = { alliance_with = scope:me_thrace_scope }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.53.c
        trigger = {
            c:SPA = {
                NOT = { has_variable = tre_6_flag }
            }
        }
    }

    after = {
        scope:me_thrace_scope = { trigger_event = me_thrace_3_new_philhellene_policy.64 }
    }
}

me_thrace_3_new_philhellene_policy.64 = {                            # Pelopponese - TRE PING
    type = country_event
    title = me_thrace_3_new_philhellene_policy.64.t
    desc = {
        desc = me_thrace_3_new_philhellene_policy.64.desc
        first_valid = {
            triggered_desc = {
                trigger = { 
                    c:SPA = {
                        has_variable = tre_6_flag
                        alliance_with = scope:me_thrace_scope
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.64.desc_1 # allies
            }
            triggered_desc = {
                trigger = {
                    c:SPA = {
                        has_variable = tre_6_flag
                        NOT = { alliance_with = scope:me_thrace_scope }
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.64.desc_2 # free
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = me_thrace_3_new_philhellene_policy.64.desc_3 # loyal
            }
        }
    }
    picture = greek_court
    left_portrait = current_ruler
    right_portrait = c:SPA.current_ruler
    right_portrait = scope:sparta_overlord_scope.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        c:SPA = {
            if = {
                limit = {
                    has_variable = tre_6_flag
                    alliance_with = scope:me_thrace_scope
                }
                ROOT = { add_treasury = -150 }
                show_as_tooltip = {
                    add_treasury = 150
                    add_opinion = { target = scope:me_thrace_scope modifier = tre_6_opmod }
                    if = {
                        limit = { exists = scope:sparta_overlord_scope }
                        custom_tooltip = me_thrace_3_new_philhellene_policy.64.tt
                    }
                    add_alliance = scope:me_thrace_scope
                }
            }
            else_if = {
                limit = { has_variable = tre_6_flag }
                ROOT = { add_treasury = -150 }
                show_as_tooltip = {
                    add_treasury = 150
                    add_opinion = { target = scope:me_thrace_scope modifier = tre_6_opmod }
                    if = {
                        limit = { exists = scope:sparta_overlord_scope }
                        custom_tooltip = me_thrace_3_new_philhellene_policy.64.tt
                    }
                }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.64.a
        trigger = {
            c:SPA = {
                has_variable = tre_6_flag
                alliance_with = scope:me_thrace_scope
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.64.b
        trigger = {
            c:SPA = {
                has_variable = tre_6_flag
                NOT = { alliance_with = scope:me_thrace_scope }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.64.c
        trigger = {
            c:SPA = {
                NOT = { has_variable = tre_6_flag }
            }
        }
    }

    after = {
        c:SPA = {
            if = {
                limit = { has_variable = tre_6_flag }
                remove_variable = tre_6_flag
            }
        }   
    }
}

me_thrace_3_new_philhellene_policy.71 = {                            # Condone Local Mints - START
    type = country_event
    title = me_thrace_3_new_philhellene_policy.71.t
    desc = me_thrace_3_new_philhellene_policy.71.desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.71.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.71.at
    }
}

me_thrace_3_new_philhellene_policy.72 = {                            # Condone Local Mints - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.72.t
    desc = me_thrace_3_new_philhellene_policy.72.desc
    picture = hellenic_marketplace
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_thrace_3_new_philhellene_policy.72.tt
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.72.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.72.at
        every_country_state = {
            limit = {
                any_state_province = {
                    OR = {
                        is_in_area = scythia_area
                        is_in_area = moesia_orientalis_area
                        is_in_area = haemimontus_area
                    }
                }
            }
            add_state_modifier = {
                name = state_improvement_oratory
                duration = -1
                mode = add
            }
        }
        hidden_effect = {
            every_subject = {
                limit = {
                    country_culture_group = hellenic
                    any_country_state = {
                        any_state_province = {
                            OR = {
                                is_in_area = scythia_area
                                is_in_area = moesia_orientalis_area
                                is_in_area = haemimontus_area
                            }
                        }
                    }
                }
                add_opinion = { target = overlord modifier = tre_3_7_opmod }
                trigger_event = me_thrace_3_new_philhellene_policy.73
                every_country_state = {
                    limit = {
                        any_state_province = {
                            OR = {
                                is_in_area = scythia_area
                                is_in_area = moesia_orientalis_area
                                is_in_area = haemimontus_area
                            }
                        }
                    }
                    add_state_modifier = {
                        name = state_improvement_oratory
                        duration = -1
                        mode = add
                    }
                }
            }
        }
        custom_tooltip = thrace_03_philhellene_7_reward_tt
    }
}

me_thrace_3_new_philhellene_policy.73 = {                            # Condone Local Mints - PING
    type = country_event
    title = me_thrace_3_new_philhellene_policy.73.t
    desc = me_thrace_3_new_philhellene_policy.73.desc
    picture = hellenic_marketplace
    left_portrait = current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler
    goto_location = capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
        is_ai = no
    }

    immediate = {
        show_as_tooltip = {
            every_country_state = {
                limit = {
                    any_state_province = {
                        OR = {
                            is_in_area = scythia_area
                            is_in_area = moesia_orientalis_area
                            is_in_area = haemimontus_area
                        }
                    }
                }
                add_state_modifier = {
                    name = state_improvement_oratory
                    duration = -1
                    mode = add
                }
            }
        }
    }

    option = { name = me_thrace_3_new_philhellene_policy.13.a }
}

me_thrace_3_new_philhellene_policy.81 = {                             # Champion of the Greeks - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.81.t
    desc = me_thrace_3_new_philhellene_policy.81.desc
    picture = throneroom
    left_portrait = current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_thrace_3_new_philhellene_policy.81.tt }

    option = {      
        name = me_thrace_3_new_philhellene_policy.81.a
        add_political_influence = 100
        add_country_modifier = {
            name = me_tre_3_8_cmod
            duration = 9125 # 25 years
        }
    }
}

me_thrace_3_new_philhellene_policy.91 = {                            # Garrison the Poleis - START
    type = country_event
    title = me_thrace_3_new_philhellene_policy.91.t
    desc = me_thrace_3_new_philhellene_policy.91.desc
    picture = greeks_marching
    left_portrait = current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { add_manpower = -10 }

    option = {      
        name = me_thrace_3_new_philhellene_policy.91.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.91.at
    }
}

me_thrace_3_new_philhellene_policy.92 = {                            # Garrison the Poleis - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.92.t
    desc = me_thrace_3_new_philhellene_policy.92.desc
    picture = greeks_marching
    left_portrait = current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_thrace_3_new_philhellene_policy.92.tt }

    option = {      
        name = me_thrace_3_new_philhellene_policy.92.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.72.at
        custom_tooltip = thrace_03_philhellene_9_reward_tt
        hidden_effect = {
            every_subject = {
                limit = {
                    country_culture_group = hellenic
                    any_country_state = {
                        any_state_province = {
                            OR = {
                                is_in_area = scythia_area
                                is_in_area = moesia_orientalis_area
                                is_in_area = haemimontus_area
                            }
                        }
                    }
                }
                add_opinion = { target = overlord modifier = tre_3_9_opmod }
            }
        }
        add_country_modifier = {
            name = me_tre_3_9_cmod
            duration = 7300 # 20 years
        }
    }
}

me_thrace_3_new_philhellene_policy.101 = {                            # Enforce Royal Coinage - START
    type = country_event
    title = me_thrace_3_new_philhellene_policy.101.t
    desc = me_thrace_3_new_philhellene_policy.101.desc
    picture = greeks_marching
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.101.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.101.at
    }
}

me_thrace_3_new_philhellene_policy.102 = {                            # Enforce Royal Coinage - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.102.t
    desc = me_thrace_3_new_philhellene_policy.102.desc
    picture = diadochi_treasury_plundered
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_thrace_3_new_philhellene_policy.102.tt
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.102.a
        add_treasury = tre_mis_3_10_cash_svalue
        hidden_effect = {
            every_in_list = {
                list = tre_7_list
                add_opinion = { modifier = tre_10_opmod target = ROOT }
            }
        }
        custom_tooltip = thrace_03_philhellene_10_reward_tt
    }
}

me_thrace_3_new_philhellene_policy.111 = {                            # Securing Central Greece - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.111.t
    desc = me_thrace_3_new_philhellene_policy.111.desc
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = c:BOE.current_ruler
    right_portrait = c:BOE.overlord.current_ruler
    goto_location = c:BOE.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = { custom_tooltip = me_thrace_3_new_philhellene_policy.111.tt }

    option = {      
        name = me_thrace_3_new_philhellene_policy.111.a
        custom_tooltip = thrace_03_philhellene_11_reward_tt
        show_as_tooltip = {
            add_treasury = -150
            reverse_add_opinion = { target = c:BOE modifier = tre_11_opmod }
            if = {
                limit = {
                    c:BOE = { is_subject = yes }
                }
                c:BOE.overlord = { release_subject = c:BOE }
                custom_tooltip = thrace_03_philhellene_11_claims_tt
            }
            custom_tooltip = thrace_03_philhellene_11_reward_tt1
        }   
    }

    after = {
        hidden_effect = {
            c:BOE = {
                overlord = { save_scope_as = boeotia_overlord_scope }
                trigger_event = {
                    id = me_thrace_3_new_philhellene_policy.112
                    days = 15
                }
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.112 = {                            # Securing Central Greece - OFFER
    type = country_event
    title = me_thrace_3_new_philhellene_policy.112.t
    desc = me_thrace_3_new_philhellene_policy.112.desc
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:boeotia_overlord_scope.current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.112.a
        set_variable = tre_11_flag
        add_treasury = 150
        add_opinion = { target = scope:me_thrace_scope modifier = tre_11_opmod }
        if = {
            limit = { is_subject = yes }
            overlord = { release_subject = ROOT }
            custom_tooltip = thrace_03_philhellene_11_claims_tt
        }
        add_alliance = scope:me_thrace_scope
        ai_chance = { factor = 8 }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.112.b
        set_variable = tre_11_flag
        add_treasury = 150
        add_opinion = { target = scope:me_thrace_scope modifier = tre_11_opmod }
        if = {
            limit = { is_subject = yes }
            overlord = { release_subject = ROOT }
            custom_tooltip = thrace_03_philhellene_11_claims_tt
        }
        ai_chance = { factor = 2 }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.112.c
        custom_tooltip = no_effect_tooltip
        ai_chance = {
            factor = 2
            modifier = {
                factor = 2
                opinion = {
                    target = scope:me_thrace_scope
                    value <= 0
                }
            }
            modifier = {
                factor = 10
                opinion = {
                    target = scope:me_thrace_scope
                    value <= -100
                }
            }
        }
    }

    after = {
        if = {
            limit = { exists = scope:boeotia_overlord_scope }
            scope:boeotia_overlord_scope = { trigger_event = me_thrace_3_new_philhellene_policy.113 }
        }
        else = {
            scope:me_thrace_scope = { trigger_event = me_thrace_3_new_philhellene_policy.114 }
        }
    }
}

me_thrace_3_new_philhellene_policy.113 = {                            # Securing Central Greece - OVERLORD PING
    type = country_event
    title = me_thrace_3_new_philhellene_policy.113.t
    desc = {
        desc = me_thrace_3_new_philhellene_policy.113.desc
        first_valid = {
            triggered_desc = {
                trigger = { 
                    c:BOE = {
                        has_variable = tre_11_flag
                        alliance_with = scope:me_thrace_scope
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.113.desc_1 # allies
            }
            triggered_desc = {
                trigger = {
                    c:BOE = {
                        has_variable = tre_11_flag
                        NOT = { alliance_with = scope:me_thrace_scope }
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.113.desc_2 # free
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = me_thrace_3_new_philhellene_policy.113.desc_3 # loyal
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = c:BOE.current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        c:BOE = {
            if = {
                limit = {
                    has_variable = tre_11_flag
                    alliance_with = scope:me_thrace_scope
                }
                show_as_tooltip = {
                    add_treasury = 150
                    add_opinion = { target = scope:me_thrace_scope modifier = tre_11_opmod }
                    custom_tooltip = me_thrace_3_new_philhellene_policy.113.tt
                    add_alliance = scope:me_thrace_scope
                }
            }
            else_if = {
                limit = { has_variable = tre_11_flag }
                show_as_tooltip = {
                    add_treasury = 150
                    add_opinion = { target = scope:me_thrace_scope modifier = tre_11_opmod }
                    custom_tooltip = me_thrace_3_new_philhellene_policy.113.tt
                }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.113.a
        trigger = {
            c:BOE = {
                has_variable = tre_11_flag
                alliance_with = scope:me_thrace_scope
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.113.b
        trigger = {
            c:BOE = {
                has_variable = tre_11_flag
                NOT = { alliance_with = scope:me_thrace_scope }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.113.c
        trigger = {
            c:BOE = {
                NOT = { has_variable = tre_11_flag }
            }
        }
    }

    after = {
        scope:me_thrace_scope = { trigger_event = me_thrace_3_new_philhellene_policy.114 }
    }
}

me_thrace_3_new_philhellene_policy.114 = {                            # Securing Central Greece - TRE PING
    type = country_event
    title = me_thrace_3_new_philhellene_policy.114.t
    desc = {
        desc = me_thrace_3_new_philhellene_policy.114.desc
        first_valid = {
            triggered_desc = {
                trigger = { 
                    c:BOE = {
                        has_variable = tre_11_flag
                        alliance_with = scope:me_thrace_scope
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.114.desc_1 # allies
            }
            triggered_desc = {
                trigger = {
                    c:BOE = {
                        has_variable = tre_11_flag
                        NOT = { alliance_with = scope:me_thrace_scope }
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.114.desc_2 # free
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = me_thrace_3_new_philhellene_policy.114.desc_3 # loyal
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = c:BOE.current_ruler
    right_portrait = scope:boeotia_overlord_scope.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        c:BOE = {
            if = {
                limit = {
                    has_variable = tre_11_flag
                    alliance_with = scope:me_thrace_scope
                }
                ROOT = { add_treasury = -150 }
                show_as_tooltip = {
                    add_treasury = 150
                    add_opinion = { target = scope:me_thrace_scope modifier = tre_11_opmod }
                    if = {
                        limit = { exists = scope:boeotia_overlord_scope }
                        custom_tooltip = me_thrace_3_new_philhellene_policy.114.tt
                    }
                    add_alliance = scope:me_thrace_scope
                }
            }
            else_if = {
                limit = { has_variable = tre_11_flag }
                ROOT = { add_treasury = -150 }
                show_as_tooltip = {
                    add_treasury = 150
                    add_opinion = { target = scope:me_thrace_scope modifier = tre_11_opmod }
                    if = {
                        limit = { exists = scope:boeotia_overlord_scope }
                        custom_tooltip = me_thrace_3_new_philhellene_policy.114.tt
                    }
                }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.114.a
        trigger = {
            c:BOE = {
                has_variable = tre_11_flag
                alliance_with = scope:me_thrace_scope
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.114.b
        trigger = {
            c:BOE = {
                has_variable = tre_11_flag
                NOT = { alliance_with = scope:me_thrace_scope }
            }
        }
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.114.c
        trigger = {
            c:BOE = {
                NOT = { has_variable = tre_11_flag }
            }
        }
    }

    after = {
        c:BOE = {
            if = {
                limit = { has_variable = tre_11_flag }
                remove_variable = tre_11_flag
            }
        }   
    }
}

me_thrace_3_new_philhellene_policy.121 = {                            # Hellenic League - START
    type = country_event
    title = me_thrace_3_new_philhellene_policy.121.t
    desc = me_thrace_3_new_philhellene_policy.121.desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:league_1.current_ruler
    right_portrait = scope:league_2.current_ruler
    right_portrait = scope:league_3.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        ordered_country = {
            limit = {
                country_culture_group = hellenic
                NOT = { primary_culture = macedonian }
                capital_scope = {   
                    is_in_region = greece_region
                    NOR = {
                        is_in_area = crete_area
                        is_in_area = epirus_area
                    }
                }
            }
            max = 3
            check_range_bounds = no
            order_by = country_population
            if = {
                limit = {
                    NOT = { exists = scope:league_1 }
                }
                save_scope_as = league_1
            }
            else_if = {
                limit = {
                    exists = scope:league_1
                    NOT = { THIS = scope:league_1 }
                }
                save_scope_as = league_2
            }
            else_if = {
                limit = {
                    exists = scope:league_1
                    exists = scope:league_2
                    NOR = {
                        THIS = scope:league_1
                        THIS = scope:league_2
                    }
                }
                save_scope_as = league_3
            }
        }
        add_political_influence = -150
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.121.a
        custom_tooltip = thrace_03_philhellene_12_reward_tt
    }

    after = {
        every_in_list = {
            list = hellenic_league_list
            trigger_event = me_thrace_3_new_philhellene_policy.122
        }
    }
}

me_thrace_3_new_philhellene_policy.122 = {                            # Hellenic League - OFFER
    type = country_event
    title = me_thrace_3_new_philhellene_policy.122.t
    desc = me_thrace_3_new_philhellene_policy.122.desc
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler
    goto_location = scope:me_thrace_scope.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {
        name = me_thrace_3_new_philhellene_policy.122.a
        set_variable = subject_league_flag
        if = {
            limit = { is_ai = no  }
            custom_tooltip = me_thrace_3_new_philhellene_policy.122.at
        }
        ai_chance = {
            factor = 6
            modifier = {
                factor = 1.5
                opinion = { target = scope:me_thrace_scope value >= 50 }
            }
            modifier = {
                factor = 1.5
                opinion = { target = scope:me_thrace_scope value >= 100 }
            }
            modifier = {
                factor = 1.5
                opinion = { target = scope:me_thrace_scope value >= 150 }
            }
            modifier = {
                factor = 1.5
                alliance_with = scope:me_thrace_scope
            }
        }
    }

    option = {
        name = me_thrace_3_new_philhellene_policy.122.b
        custom_tooltip = no_effect_tooltip
        ai_chance = {
            factor = 4
            modifier = {
                factor = 1.5
                opinion = { target = scope:me_thrace_scope value <= 0 }
            }
            modifier = {
                factor = 1.5
                opinion = { target = scope:me_thrace_scope value <= 50 }
            }
            modifier = {
                factor = 1.5
                opinion = { target = scope:me_thrace_scope value <= 100 }
            }
            modifier = {
                factor = 1.5
                opinion = { target = scope:me_thrace_scope value <= 150 }
            }
            modifier = {
                factor = 0
                is_subject_of = scope:me_thrace_scope
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.123 = {                            # Hellenic League - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.123.t
    desc = {
        desc = me_thrace_3_new_philhellene_policy.123.desc
        first_valid = {
            triggered_desc = {
                trigger = {
                    any_in_list = {
                        list = hellenic_league_list
                        has_variable = subject_league_flag
                    }  
                }
                desc = me_thrace_3_new_philhellene_policy.123.desc_1 # someone said yes
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = me_thrace_3_new_philhellene_policy.123.desc_2 # noone said yes
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:league_head_scope.current_ruler
    goto_location = scope:league_head_scope.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_thrace_3_new_philhellene_policy.123.tt
        if = {
            limit = {
                any_in_list = {
                    list = hellenic_league_list
                    has_variable = subject_league_flag
                }
            }
            if = {
                limit = {
                    any_in_list = {
                        list = hellenic_league_list
                        has_variable = subject_league_flag
                        is_ai = no
                    }   
                }
                random_in_list = {
                    list = hellenic_league_list
                    limit = {
                        has_variable = subject_league_flag
                        is_ai = no
                    }
                    save_scope_as = league_head_scope
                }
            }
            else = {
                ordered_in_list = {
                    list = hellenic_league_list
                    limit = { has_variable = subject_league_flag }
                    order_by = country_population
                    save_scope_as = league_head_scope
                }
            }
            set_variable = {
                name = league_counter_var
                value = 0
            }
            every_in_list = {
                list = hellenic_league_list
                limit = {
                    has_variable = subject_league_flag
                    NOT = { THIS = scope:league_head_scope }
                }
                ROOT = {
                    change_variable = {
                        name = league_counter_var
                        add = 1
                    }
                }
                remove_variable = subject_league_flag
                every_owned_province = { set_conquered_by = scope:league_head_scope }
            }
            hidden_effect = {
                scope:league_head_scope = {
                    change_country_name = HELLENIC_LEAGUE_NAME
                    change_country_adjective = HELLENIC_LEAGUE_ADJECTIVE
                    change_country_color =  "helvetia_color"
                    change_country_tag = HLA
                    change_country_flag = HELLENIC_LEAGUE_FLAG
                    if = {
                        limit = { is_subject = no }
                        ROOT = {
                            make_subject = {
                                target = scope:league_head_scope
                                type = feudatory
                            }
                        }
                    }
					if = {
						limit = {
							NOT = { primary_culture = boeotian }
							any_country_culture = { is_culture = boeotian }
						}
						random_country_culture = {
							limit = { is_culture = boeotian }
							ROOT = { integrate_country_culture = PREV }
						}
					}
					if = {
						limit = {
							NOT = { primary_culture = peloponnesian }
							any_country_culture = { is_culture = peloponnesian }
						}
						random_country_culture = {
							limit = { is_culture = peloponnesian }
							ROOT = { integrate_country_culture = PREV }
						}
					}
					if = {
						limit = {
							NOT = { primary_culture = athenian }
							any_country_culture = { is_culture = athenian }
						}
						random_country_culture = {
							limit = { is_culture = athenian }
							ROOT = { integrate_country_culture = PREV }
						}
					}
					if = {
						limit = {
							NOT = { primary_culture = achaean }
							any_country_culture = { is_culture = achaean }
						}
						random_country_culture = {
							limit = { is_culture = achaean }
							ROOT = { integrate_country_culture = PREV }
						}
					}
					if = {
						limit = {
							NOT = { primary_culture = arcadian }
							any_country_culture = { is_culture = arcadian }
						}
						random_country_culture = {
							limit = { is_culture = arcadian }
							ROOT = { integrate_country_culture = PREV }
						}
					}
					every_country_treasure = { transfer_treasure_to_country = c:TRE }
                }
            }
        }
        else = { custom_tooltip = me_thrace_3_new_philhellene_policy.123.tt1 }
    }

    option = {
        name = me_thrace_3_new_philhellene_policy.123.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.123.at
    }

    after = {
        remove_variable = league_counter_var
    }
}

me_thrace_3_new_philhellene_policy.131 = {                            # Invest in the Poleis - START
    type = country_event
    title = me_thrace_3_new_philhellene_policy.131.t
    desc = me_thrace_3_new_philhellene_policy.131.desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        add_treasury = -300
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.131.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.131.at
    }
}

me_thrace_3_new_philhellene_policy.132 = {                            # Invest in the Poleis - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.132.t
    desc = me_thrace_3_new_philhellene_policy.132.desc
    picture = hellenic_marketplace
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_thrace_3_new_philhellene_policy.132.tt
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.132.a
        every_country_state = {
            limit = {
                any_state_province = {
                    OR = {
                        is_in_area = scythia_area
                        is_in_area = moesia_orientalis_area
                        is_in_area = haemimontus_area
                    }
                }
            }
            add_state_modifier = {
                name = state_improvement_religious
                duration = -1
                mode = add
            }
        }
        hidden_effect = {
            every_subject = {
                limit = {
                    country_culture_group = hellenic
                    any_country_state = {
                        any_state_province = {
                            OR = {
                                is_in_area = scythia_area
                                is_in_area = moesia_orientalis_area
                                is_in_area = haemimontus_area
                            }
                        }
                    }
                }
                add_opinion = { target = overlord modifier = tre_3_13_opmod }
                trigger_event = me_thrace_3_new_philhellene_policy.133
                every_country_state = {
                    limit = {
                        any_state_province = {
                            OR = {
                                is_in_area = scythia_area
                                is_in_area = moesia_orientalis_area
                                is_in_area = haemimontus_area
                            }
                        }
                    }
                    add_state_modifier = {
                        name = state_improvement_religious
                        duration = -1
                        mode = add
                    }
                }
            }
        }
        custom_tooltip = thrace_03_philhellene_13_reward_tt
    }
}

me_thrace_3_new_philhellene_policy.133 = {                            # Invest in the Poleis - PING
    type = country_event
    title = me_thrace_3_new_philhellene_policy.133.t
    desc = me_thrace_3_new_philhellene_policy.133.desc
    picture = hellenic_marketplace
    left_portrait = current_ruler
    right_portrait = scope:me_thrace_scope.current_ruler
    goto_location = capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
        is_ai = no
    }

    immediate = {
        show_as_tooltip = {
            every_country_state = {
                limit = {
                    any_state_province = {
                        OR = {
                            is_in_area = scythia_area
                            is_in_area = moesia_orientalis_area
                            is_in_area = haemimontus_area
                        }
                    }
                }
                add_state_modifier = {
                    name = state_improvement_religious
                    duration = -1
                    mode = add
                }
            }
        }
    }

    option = { name = me_thrace_3_new_philhellene_policy.133.a }
}

me_thrace_3_new_philhellene_policy.141 = {                            # Solidify Control - START
    type = country_event
    title = me_thrace_3_new_philhellene_policy.141.t
    desc = me_thrace_3_new_philhellene_policy.141.desc
    picture = greeks_marching
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.141.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.141.at
    }
}

me_thrace_3_new_philhellene_policy.142 = {                            # Solidify Control - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.142.t
    desc = me_thrace_3_new_philhellene_policy.142.desc
    picture = greeks_marching
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_thrace_3_new_philhellene_policy.142.tt
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.142.a
        hidden_effect = {
            every_in_list = {
                list = tre_7_list
                every_owned_province = { set_conquered_by = ROOT }
            }
        }
        custom_tooltip = thrace_03_philhellene_14_reward_tt
    }
}

me_thrace_3_new_philhellene_policy.151 = {                            # Formalize Autonomy - START
    type = country_event
    title = me_thrace_3_new_philhellene_policy.151.t
    desc = me_thrace_3_new_philhellene_policy.151.desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.151.a
        add_political_influence = -100
        custom_tooltip = me_thrace_3_new_philhellene_policy.151.at
    }
}

me_thrace_3_new_philhellene_policy.152 = {                            # Formalize Autonomy - END
    type = country_event
    title = me_thrace_3_new_philhellene_policy.152.t
    desc = me_thrace_3_new_philhellene_policy.152.desc
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:colonies_1.current_ruler
    right_portrait = scope:colonies_2.current_ruler
    goto_location = scope:colonies_1.capital_scope

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_thrace_3_new_philhellene_policy.152.tt
        every_subject = {
            limit = { thrace_black_sea_city_trigger = yes }
            add_to_list = tre_7_list
        }
        tre_pont_portraits_effect = yes
    }

    option = {      
        name = me_thrace_3_new_philhellene_policy.152.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.152.at
        show_as_tooltip = {
            ordered_in_list = {
                list = tre_7_list
                order_by = country_population
                add_opinion = { modifier = tre_15_opmod target = ROOT }
            }
        }
        hidden_effect = {
            every_in_list = {
                list = tre_7_list
                add_opinion = { modifier = tre_15_opmod target = ROOT }
            }
        }
        custom_tooltip = thrace_03_philhellene_13_reward_tt
    }
}

me_thrace_3_new_philhellene_policy.201 = { # Event for Thrace's enemy - Foment Black Sea revolt?
    type = country_event
    title = me_thrace_3_new_philhellene_policy.201.t
    desc = me_thrace_3_new_philhellene_policy.201.desc
    picture = greek_political_discussion
    left_portrait = current_ruler
    right_portrait = scope:black_sea_portrait_scope.current_ruler
    right_portrait = c:TRE.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
        c:TRE = {
            any_subject = {
                thrace_black_sea_city_trigger = yes
                is_subject_type = feudatory
                NOT = {
                    any_current_war = {
                        any_war_participant = { THIS = ROOT }
                    }
                }
            }
        }
        NOT = {
            any_current_war = {
                any_war_participant = {
                    war_with = ROOT
                    thrace_black_sea_city_trigger = yes
                }
            }
        }
        NOT = { has_global_variable = me_tre_autonomy_flag }
        NOT = { has_global_variable = me_tre_pontic_cooldown }
    }

    immediate = {
        set_global_variable = {
            name = me_tre_pontic_cooldown
            days = 2555 # 7 years
        }
        hidden_effect = {
            c:TRE = {
                while = {
                    count = 3
                    random_subject = {
                        limit = {
                            thrace_black_sea_city_trigger = yes
                            is_subject_type = feudatory
                            NOT = {
                                any_current_war = {
                                    any_war_participant = { THIS = ROOT }
                                }
                            }
                            NOT = { is_in_list = thrace_black_sea_list }
                        }
                        add_to_list = thrace_black_sea_list
                    }
                }
            }
        }
        ordered_in_list = {
            list = thrace_black_sea_list
            order_by = country_population
            save_scope_as = black_sea_portrait_scope
        }
    }

    option = { # Good idea
        name = me_thrace_3_new_philhellene_policy.201.a
        add_treasury = {
            value = -500
        }
        save_scope_as = black_sea_revolt_supporter
        custom_tooltip = me_thrace_3_new_philhellene_policy.201.at # more likely tt
    }

    option = { # Nah, too much of a hassle
        name = me_thrace_3_new_philhellene_policy.201.b
        ai_chance = {
            factor = 0
        }
        custom_tooltip = me_thrace_3_new_philhellene_policy.201.bt # less likely tt
    }

    after = {
        every_in_list = {
            list = thrace_black_sea_list
            trigger_event = me_thrace_3_new_philhellene_policy.202
        }
        c:TRE = {
            trigger_event = {
                id = me_thrace_3_new_philhellene_policy.204
                days = 30
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.202 = { # Event for Black Sea city - Revolt with support or not?
    type = country_event
    title = me_thrace_3_new_philhellene_policy.202.t
    desc = {
        first_valid = {
            triggered_desc = {
                trigger = { exists = scope:black_sea_revolt_supporter }
                desc = me_thrace_3_new_philhellene_policy.202.desc_1 # foreign supported
            }
            triggered_desc = {
                trigger = {
                    NOT = { exists = scope:black_sea_revolt_supporter }
                }
                desc = me_thrace_3_new_philhellene_policy.202.desc_2 # no foreign support
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:black_sea_revolt_supporter.current_ruler
    right_portrait = c:TRE.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = { # Good idea
        name = me_thrace_3_new_philhellene_policy.202.a
        custom_tooltip = me_thrace_3_new_philhellene_policy.202.at # soon, along with any others
        show_as_tooltip = {
            declare_war_with_wargoal = {
                war_goal = independence_wargoal
                province = c:TRE.capital_scope
                target = c:TRE
            }
        }
        if = {
            limit = {
                exists = scope:black_sea_revolt_supporter
            }
            scope:black_sea_revolt_supporter = {
                add_treasury = -100
            }
            add_treasury = 100
        }
        set_variable = black_sea_revolter
        ai_chance = {
            factor = 2
            modifier = {
                factor = 2
                exists = scope:black_sea_revolt_supporter
            }
            modifier = {
                factor = 2
                has_subject_loyalty <= 50
            }
            modifier = {
                factor = 2
                opinion = { target = c:TRE value <= 0 }
            }
        }
    }

    option = { # No, we will stay loyal
        name = me_thrace_3_new_philhellene_policy.202.b
        custom_tooltip = no_effect_tooltip
        ai_chance = {
            factor = 4
            modifier = {
                factor = 0.5
                overlord = { has_variable = me_tre_mints_flag }
            }
            modifier = {
                factor = 0.5
                overlord = { has_variable = me_tre_garrison_flag }
            }
            modifier = {
                factor = 0.5
                opinion = { target = c:TRE value >= 100 }
            }
            modifier = {
                factor = 0.8
                has_subject_loyalty > 75
            }
            modifier = {
                factor = 0.5
                has_subject_loyalty > 90
            }
            modifier = {
                factor = 0
                has_subject_loyalty > 99
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.203 = { # Event for Thrace's enemy - Black Sea revolt summary
    type = country_event
    title = {
        first_valid = {
            triggered_desc = {
                trigger = { exists = scope:black_sea_revolt_leader }
                desc = me_thrace_3_new_philhellene_policy.203.t_1 # revolt
            }
            triggered_desc = {
                trigger = {
                    NOT = { exists = scope:black_sea_revolt_leader }
                }
                desc = me_thrace_3_new_philhellene_policy.203.t_2 # no revolt
            }
        }
    }
    desc = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    exists = scope:black_sea_revolt_supporter
                    any_in_list = {
                       list = thrace_black_sea_list
                       count >= 1
                       has_variable = black_sea_revolter
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.203.desc_5 # foreign supported
            }
            triggered_desc = {
                trigger = {
                    NOT = { exists = scope:black_sea_revolt_supporter }
                }
                desc = me_thrace_3_new_philhellene_policy.203.desc_4 # no foreign support
            }
            triggered_desc = {
                trigger = {
                    exists = scope:black_sea_revolt_supporter
                    any_in_list = {
                       list = thrace_black_sea_list
                       count < 1
                       has_variable = black_sea_revolter
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.203.desc_6 # Foreign support, but no revolt
            }
        }
        first_valid = {
            triggered_desc = {
                trigger = {
                    any_in_list = {
                       list = thrace_black_sea_list
                       count = 1
                       has_variable = black_sea_revolter
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.203.desc_1 # one revolter
            }
            triggered_desc = {
                trigger = {
                    any_in_list = {
                       list = thrace_black_sea_list
                       count > 1
                       has_variable = black_sea_revolter
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.203.desc_2 # multiple revolters
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = me_thrace_3_new_philhellene_policy.203.desc_3 # no revolt
            }
        }
    }
    picture = greek_siege
    left_portrait = current_ruler
    left_portrait = scope:black_sea_revolt_leader.current_ruler
    right_portrait = c:TRE.current_ruler

    trigger = {
        has_dlc = "Heirs of Alexander"
        has_land = yes
    }

    option = {
        name = me_thrace_3_new_philhellene_policy.203.a # revolt
        trigger = {
            any_in_list = {
               list = thrace_black_sea_list
               has_variable = black_sea_revolter
            }
        }  
    }

    option = {
        name = me_thrace_3_new_philhellene_policy.203.b # no revolt
        trigger = {
            NOT = {
                any_in_list = {
                   list = thrace_black_sea_list
                   has_variable = black_sea_revolter
                }
            }
        }
    }
}

me_thrace_3_new_philhellene_policy.204 = { # Event for Thrace - Black Sea revolt summary
    type = country_event
    title = {
        first_valid = {
            triggered_desc = {
                trigger = { exists = scope:black_sea_revolt_leader }
                desc = me_thrace_3_new_philhellene_policy.203.t_1 # revolt
            }
            triggered_desc = {
                trigger = {
                    NOT = { exists = scope:black_sea_revolt_leader }
                }
                desc = me_thrace_3_new_philhellene_policy.203.t_2 # no revolt
            }
        }
    }
    desc = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    any_in_list = {
                       list = thrace_black_sea_list
                       count = 1
                       has_variable = black_sea_revolter
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.204.desc_1 # one revolter
            }
            triggered_desc = {
                trigger = {
                    any_in_list = {
                       list = thrace_black_sea_list
                       count > 1
                       has_variable = black_sea_revolter
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.204.desc_2 # multiple revolters
            }
            triggered_desc = {
                trigger = { always = yes }
                desc = me_thrace_3_new_philhellene_policy.204.desc_3 # no revolt
            }
        }
        first_valid = {
            triggered_desc = {
                trigger = {
                    exists = scope:black_sea_revolt_supporter
                }
                desc = me_thrace_3_new_philhellene_policy.204.desc_5 # foreign supported
            }
            triggered_desc = {
                trigger = {
                    NOT = {
                        exists = scope:black_sea_revolt_supporter
                        any_in_list = {
                           list = thrace_black_sea_list
                           count >= 1
                           has_variable = black_sea_revolter
                        }
                    }
                }
                desc = me_thrace_3_new_philhellene_policy.204.desc_4 # no foreign support
            }
        }
    }
    picture = greek_siege
    left_portrait = current_ruler
    right_portrait = scope:black_sea_revolt_leader.current_ruler
    right_portrait = scope:black_sea_revolt_supporter.current_ruler

    trigger = { 
        has_dlc = "Heirs of Alexander"
        has_land = yes
        any_in_list = {
            list = thrace_black_sea_list
            has_variable = black_sea_revolter
            NOT = { war_with = c:TRE }
        }
    }

    immediate = {
        if = {
            limit = {
                any_in_list = {
                    list = thrace_black_sea_list
                    has_variable = black_sea_revolter
                    NOT = { war_with = c:TRE }
                    is_ai = no
                }
            }
            ordered_in_list = {
                list = thrace_black_sea_list
                limit = {
                    has_variable = black_sea_revolter
                    NOT = { war_with = c:TRE }
                    is_ai = no
                }
                order_by = country_population
                save_scope_as = black_sea_revolt_leader
            }
        }
        else = {
            ordered_in_list = {
                list = thrace_black_sea_list
                limit = {
                    has_variable = black_sea_revolter
                    NOT = { war_with = c:TRE }
                }
                order_by = country_population
                save_scope_as = black_sea_revolt_leader
            }
        }
    }

    option = { # Subjects revolting
        name = me_thrace_3_new_philhellene_policy.204.a
        trigger = {
            any_in_list = {
               list = thrace_black_sea_list
               has_variable = black_sea_revolter
               NOT = { war_with = c:TRE }
            }
        }
        show_as_tooltip = { # Show who will join war
            every_in_list = {
                list = thrace_black_sea_list
                limit = {
                    has_variable = black_sea_revolter
                    NOT = { war_with = c:TRE }
                }
                declare_war_with_wargoal = {
                    war_goal = independence_wargoal
                    province = c:TRE.capital_scope
                    target = c:TRE
                }
            }
        }   
    }

    option = { # Subjects not revolting
        name = me_thrace_3_new_philhellene_policy.204.b
        trigger = {
            NOT = {
                any_in_list = {
                   list = thrace_black_sea_list
                   has_variable = black_sea_revolter
                   NOT = { war_with = c:TRE }
                }
            }
        }
    }

    after = {
        hidden_effect = {
            every_in_list = {
                list = thrace_black_sea_list
                limit = {
                    has_variable = black_sea_revolter
                    NOT = { war_with = c:TRE }
                }
                hidden_effect = {
                    overlord = { release_subject = PREV }
                }
            }
            scope:black_sea_revolt_leader = {
                every_current_war = {
                    limit = {
                        any_war_participant = { tag = TRE }
                    }
                    remove_from_war = PREV
                }
                declare_war_with_wargoal = {
                    war_goal = independence_wargoal
                    province = scope:black_sea_revolt_leader.capital_scope
                    target = c:TRE
                }
                if = {
                    limit = {
                        any_current_war = {
                            any_war_attacker = { THIS = scope:black_sea_revolt_leader }
                            any_war_defender = { THIS = c:TRE }
                            is_war_leader = scope:black_sea_revolt_leader
                            is_war_leader = c:TRE
                        }
                    }
                    random_current_war = {
                        limit = {
                            any_war_attacker = { THIS = scope:black_sea_revolt_leader }
                            any_war_defender = { THIS = c:TRE }
                            is_war_leader = scope:black_sea_revolt_leader
                            is_war_leader = c:TRE
                        }
                        save_scope_as = black_sea_war
                    }
                    every_in_list = {
                        list = thrace_black_sea_list
                        limit = {
                            has_variable = black_sea_revolter
                            NOT = { war_with = c:TRE }
                        }
                        every_current_war = {
                            limit = {
                                any_war_participant = { tag = TRE }
                            }
                            remove_from_war = PREV
                        }
                        add_to_war = {
                            target = scope:black_sea_war
                            attacker = yes
                            leader = no
                        }
                    }
                }
            }
        }
        scope:black_sea_revolt_supporter = { trigger_event = me_thrace_3_new_philhellene_policy.203 }
    }
}