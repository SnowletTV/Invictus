namespace = me_epirus_2_magna

me_epirus_2_magna.111 = {							#
    type = country_event
    title = me_epirus_2_magna.111.t
    desc = me_epirus_2_magna.111.desc
    picture = greek_city

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    option = {
        name = me_epirus_2_magna.111.a
        custom_tooltip = me_epirus_2_magna.111.tt
    }
}

me_epirus_2_magna.1 = {							    # Avenge Alexandros - End
    type = country_event
    title = me_epirus_2_magna.1.t
    desc = me_epirus_2_magna.1.desc
    picture = epirote_phalanx

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { custom_tooltip = me_epirus_2_magna.1.tt }

    option = {
        name = me_epirus_2_magna.1.a
        add_country_modifier = {
            name = epirus_2_1_cmod
            duration = 7300 # 20 years
        }
    }
}

me_epirus_2_magna.2 = {							    # Benevolent Moves - Start/Selection
    type = country_event
    title = me_epirus_2_magna.2.t
    desc = me_epirus_2_magna.2.desc
    picture = greek_city
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = root.var:me_epi_2_aid_1.current_ruler
    right_portrait = root.var:me_epi_2_aid_2.current_ruler
    right_portrait = root.var:me_epi_2_aid_3.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = { has_variable = epi_2_2_first_choice }
            add_treasury = -25
        }
        custom_tooltip = me_epirus_2_magna.2.tt
        hidden_effect = {
            if = {
                limit = {
                    any_in_list = {
                        list = me_epi_2_italiote_list
                        has_variable = me_epi_2_aid_declined
                    }
                }
                every_in_list = {
                    limit = { has_variable = me_epi_2_aid_declined }
                    list = me_epi_2_italiote_list
                    remove_from_list = me_epi_2_italiote_list
                }
            }
            if = {
                limit = {
                    any_in_list = {
                        list = me_epi_2_italiote_list
                        tag = TAR
                    }
                }
                set_variable = {
                    name = me_epi_2_aid_1
                    value = c:TAR
                }
            }
            ordered_in_list = {
                list = me_epi_2_italiote_list
                order_by = country_population
                max = 4
                check_range_bounds = no
                me_epi_2_aid_scope_effect = yes
            }
            me_epi_1_kineas_effect = yes
        }
    }

    option = {
        name = me_epirus_2_magna.2.a
        root.var:me_epi_2_aid_1 = { me_epi_2_aid_effect = yes }
    }

    option = {
        name = me_epirus_2_magna.2.b
        trigger = { has_variable = me_epi_2_aid_2 }
        root.var:me_epi_2_aid_2 = { me_epi_2_aid_effect = yes }
    }

    option = {
        name = me_epirus_2_magna.2.c
        trigger = { has_variable = me_epi_2_aid_3 }
        root.var:me_epi_2_aid_3 = { me_epi_2_aid_effect = yes }
    }

    option = {
        name = me_epirus_2_magna.2.d
        trigger = {
            has_variable = me_epi_2_aid_4
            NOT = { has_variable = epi_2_2_first_choice }
        }
        root.var:me_epi_2_aid_4 = { me_epi_2_aid_effect = yes }
    }

    option = {
        name = me_epirus_2_magna.2.e
        trigger = { has_variable = epi_2_2_first_choice }
        add_treasury = 25
        me_epi_remove_diplo_flag_effect = yes
    }

    after = {
        remove_variable = me_epi_2_aid_1
        if = {
            limit = { has_variable = me_epi_2_aid_2 }
            remove_variable = me_epi_2_aid_2
        }
        if = {
            limit = { has_variable = me_epi_2_aid_3 }
            remove_variable = me_epi_2_aid_3
        }
        if = {
            limit = { has_variable = me_epi_2_aid_4 }
            remove_variable = me_epi_2_aid_4
        }
        if = {
            limit = { has_variable = epi_2_2_first_choice }
            remove_variable = epi_2_2_first_choice
        }
    }
}

me_epirus_2_magna.3 = {							    # Audacious Italics - Start/End
    type = country_event
    title = me_epirus_2_magna.3.t
    desc = {
        desc = me_epirus_2_magna.3.desc
        first_valid = {
            triggered_desc = { #
                trigger = { exists = scope:italiote_threatened_scope }
                desc = "me_epirus_2_magna.3.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.3.desc_2"
            }
        }
    }
    picture = romans_marching
    left_portrait = current_ruler
    left_portrait = scope:italiote_threatened_scope.current_ruler
    right_portrait = scope:italiote_threat_scope.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        me_epi_1_kineas_effect = yes
        if = {
            limit = {
                scope:italiote_threat_scope = {
                    any_countries_at_war_with = {
                        country_culture_group = hellenic
                        capital_scope = {
                            OR = {
                                is_in_region = central_italy_region
                                is_in_region = magna_graecia_region
                            }
                        }
                    }
                }
            }
            scope:italiote_threat_scope = {
                every_countries_at_war_with = {
                    limit = {
                        country_culture_group = hellenic
                        capital_scope = {
                            OR = {
                                is_in_region = central_italy_region
                                is_in_region = magna_graecia_region
                            }
                        }
                    }
                    save_scope_as = italiote_threatened_scope
                }
            }
        }
        custom_tooltip = me_epirus_2_magna.3.tt
        hidden_effect = {
            scope:italiote_threat_scope = {
                every_owned_province = {
                    limit = { is_in_region = magna_graecia_region }
                    add_claim = root
                }
            }
        }
    }

    option = {
        name = me_epirus_2_magna.3.a
        trigger = { exists = scope:italiote_threatened_scope }
        custom_tooltip = me_epirus_2_magna.3.at
        scope:italiote_threatened_scope = {
            trigger_event = {
                id = me_epirus_2_magna.23
                days = 10
            }
        }
        me_epi_2_3_aid_effect = yes
    }

    option = {
        name = me_epirus_2_magna.3.a
        trigger = {
            NOT = { exists = scope:italiote_threatened_scope }
        }
        custom_tooltip = me_epirus_2_magna.3.bt
        me_epi_2_3_aid_effect = yes
    }
}

me_epirus_2_magna.4 = {							    # Italiote Leadership - End
    type = country_event
    title = me_epirus_2_magna.4.t
    desc = me_epirus_2_magna.4.desc
    picture = epirote_phalanx

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { custom_tooltip = me_epirus_2_magna.4.tt }

    option = {
        name = me_epirus_2_magna.4.a
        random_owned_province = {
            limit = { is_in_region = magna_graecia_region }
            save_scope_as = italiote_governorship_province
        }
        scope:italiote_governorship_province.governorship = {
            every_governorship_state = {
                limit = {
                    any_state_province = {
                        NOR = {
                            is_in_area = syracuse_area
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                        }
                    }
                }
                custom = epirus_2_magna_4_reward_tt
                add_state_modifier = {
                    name = me_epi_2_4_smod
                    duration = 7300 # 20 years
                }
            }
        }
    }

    option = {
        name = me_epirus_2_magna.4.b
        custom_tooltip = me_epirus_2_magna.4.bt
        hidden_effect = {
            random_owned_province = {
                limit = { is_in_region = magna_graecia_region }
                weight = {
                    modifier = {
                        factor = 10000
                        dominant_province_culture = italiotian
                    }
                }
                save_scope_as = italiote_governorship_province
            }
            scope:italiote_governorship_province = {
                create_country = {
                    name = {
                        name = MAGNA_GRAECIA_NAME
                        adjective = MAGNA_GRAECIA_ADJECTIVE
                    }
                    change_country_flag = MG_EPI_FLAG
                    save_scope_as = epi_mg_scope
                    change_country_color = yellowish_grey
                    set_country_heritage = italiote_heritage
                    create_character = {
                        culture = italiotian
                        save_scope_as = italiote_governor
                    }
                    set_as_ruler = scope:italiote_governor
					if = {
						limit = {
							NOT = {
								primary_culture = italiotian
							}
						}
						set_primary_culture_cleanup_effect = {
							NEW_PRIMARY_CULTURE = italiotian
							MAKE_OLD_CULTURE_INTEGRATED = yes
						}
					}
                }
            }
            every_owned_province = {
                limit = {
                    is_in_region = magna_graecia_region
                    NOR = {
                        is_in_area = syracuse_area
                        is_in_area = east_sicily_area
                        is_in_area = west_sicily_area
                    }
                }
                set_owned_by = scope:epi_mg_scope
            }
            every_subject = {
                limit = {
                    capital_scope = {
                        is_in_region = magna_graecia_region
                        NOR = {
                            is_in_area = syracuse_area
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                        }
                    }
                    country_culture_group = hellenic
                    is_ai = yes
                }
                every_owned_province = {
                    limit = { is_in_region = magna_graecia_region }
                    set_owned_by = scope:epi_mg_scope
                }
            }
            make_subject = {
                target = scope:epi_mg_scope
                type = satrapy
            }
        }
    }
}

me_epirus_2_magna.5 = {							    # Pax Epirum - Start/End
    type = country_event
    title = me_epirus_2_magna.5.t
    desc = me_epirus_2_magna.5.desc
    picture = romans_marching
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:epi_2_5_rome_scope.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        add_treasury = -50
        me_epi_1_kineas_effect = yes
    }

    option = {
        name = me_epirus_2_magna.5.a
        custom_tooltip = me_epirus_2_magna.5.at
        scope:epi_2_5_rome_scope  = {
            trigger_event = {
                id = me_epirus_2_magna.18
                days = 15
            }
        }
    }

    option = {
        name = me_epirus_2_magna.5.b
        add_treasury = 50
        custom_tooltip = me_epirus_2_magna.5.bt
    }
}

me_epirus_2_magna.6 = {							    # Lay Rome Low - End
    type = country_event
    title = me_epirus_2_magna.6.t
    desc = me_epirus_2_magna.6.desc
    picture = looting
    left_portrait = current_ruler
    right_portrait = scope:roma_owner.current_ruler
    goto_location = root.var:me_epi_2_rome_cap_flag

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_epirus_2_magna.6.tt
        if = {
            limit = {
                NOT = { root.var:me_epi_2_rome_cap_flag.owner = scope:me_epirus_scope }
            }
            root.var:me_epi_2_rome_cap_flag.owner = { save_scope_as = roma_owner }
        }
        current_ruler = { add_popularity = popularity_medium }
        add_country_modifier = {
            name = me_epi_2_6_cmod
            duration = 7300 # 20 years
        }
    }

    option = {
        name = me_epirus_2_magna.6.a
    }
}

me_epirus_2_magna.7 = {							    # African Ambition - End
    type = country_event
    title = me_epirus_2_magna.7.t
    desc = me_epirus_2_magna.7.desc
    picture = pyrrhus
    left_portrait = current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { custom_tooltip = me_epirus_2_magna.7.tt }

    option = {
        name = me_epirus_2_magna.7.a
        current_ruler = {
            if = {
                limit = {
                    NOT = { has_trait = victorious }
                }
                add_trait = victorious
            }
        }
        add_country_modifier = {
            name = me_epi_2_7_cmod
            duration = 7300
        }
    }
}

me_epirus_2_magna.8 = {							    # An Ionian Fleet - End
    type = country_event
    title = me_epirus_2_magna.8.t
    desc = me_epirus_2_magna.8.desc
    picture = ship_in_storm

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { custom_tooltip = me_epirus_2_magna.8.tt }

    option = {
        name = me_epirus_2_magna.8.a
        add_country_modifier = {
            name = epirus_2_8_cmod
            duration = 7300 # 20 years
        }
    }
}

me_epirus_2_magna.9 = {							    # Round on the Cities - Start/End
    type = country_event
    title = me_epirus_2_magna.9.t
    desc = me_epirus_2_magna.9.desc
    picture = greek_court
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:epi_2_double_1_scope.current_ruler
    right_portrait = scope:epi_2_double_2_scope.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        add_aggressive_expansion = 5
        custom_tooltip = me_epirus_2_magna.9.tt
        me_epi_1_kineas_effect = yes
        p:67 = {
            set_owned_by = EPI
        }
        create_unit = {
            navy = no
            location = p:67
            while = {
                count = 5
                add_subunit = heavy_infantry
            }
            while = {
                count = 3
                add_subunit = light_infantry
            }
            while = {
                count = 2
                add_subunit = supply_train
            }
            add_food = 50
            add_morale = 2
        }
        every_country = {
            limit = {
                has_land = yes
                primary_culture = italiotian
                is_subject = no
                capital_scope = {
                    OR = {
                        is_in_region = central_italy_region
                        is_in_region = magna_graecia_region
                    }
                }
                num_of_cities <= 5
                NOR = {
                    alliance_with = root
                    war_with = root
                    opinion = { target = root value < -50 }
                    has_variable = me_epi_2_aid_declined
                }
            }
            add_to_list = epirus_2_magna_9_list
        }
        ordered_in_list = {
            list = epirus_2_magna_9_list
            order_by = country_population
            max = 2
            check_range_bounds = no
            me_epi_2_double_scope_effect = yes
        }
    }

    option = {
        name = me_epirus_2_magna.9.a
        if = {
            limit = { epirus_2_magna_9_list_svalue > 1 }
            custom_tooltip = me_epirus_2_magna.9.at1
        }
        else = { custom_tooltip = me_epirus_2_magna.9.at2 }
        hidden_effect = {
            if = {
                limit = {
                    any_in_list = {
                        list = epirus_2_magna_9_list
                        is_ai = no
                    }
                }
                every_in_list = {
                    list = epirus_2_magna_9_list
                    trigger_event = { id = me_epirus_2_magna.16 }
                }
                trigger_event = {
                    id = me_epirus_2_magna.17
                    days = { 30 40 }
                }
            }
            else = {
                if = {
                    limit = {
                        is_ai = yes
                    }
                    every_in_list = {
                        list = epirus_2_magna_9_list
                        random = {
                            chance = 90
                            set_variable = epirus_2_magna_9_flag
                        }
                    }
                }
                every_in_list = {
                    list = epirus_2_magna_9_list
                    random = {
                        chance = 50
                        set_variable = epirus_2_magna_9_flag
                    }
                }
                trigger_event = {
                    id = me_epirus_2_magna.17
                    days = 15
                }
            }
        }
    }
}

me_epirus_2_magna.10 = {							# Reclaim Possessions - End
    type = country_event
    title = me_epirus_2_magna.10.t
    desc = me_epirus_2_magna.10.desc
    picture = greek_city

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { custom_tooltip = me_epirus_2_magna.10.at }

    option = {
        name = me_epirus_2_magna.10.a
        custom_tooltip = epirus_2_magna_10_reward_tt
        p:76 = { me_epi_2_10_effect = yes }
        hidden_effect = {
            p:54 = { me_epi_2_10_effect = yes }
            p:38 = { me_epi_2_10_effect = yes }
        }
    }
}

me_epirus_2_magna.11 = {							# Western Hegemon - End
    type = country_event
    title = me_epirus_2_magna.11.t
    desc = me_epirus_2_magna.11.desc
    picture = greek_city

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        custom_tooltip = me_epirus_2_magna.11.tt
        if = {
            limit = {
                region:magna_graecia_region = {
                    any_region_province = {
                        NOT = { owned_or_subject_owned = root }
                    }
                }
            }
            hidden_effect = {
                region:magna_graecia_region = {
                    every_region_province = {
                        limit = {
                            NOT = { owned_or_subject_owned = root }
                        }
                        add_claim = root
                    }
                }
            }
            custom_tooltip = epirus_2_magna_11_reward_tt_2
        }
        add_country_modifier = {
            name = me_epi_2_11_cmod
            duration = 8125
        }
    }

    option = {
        name = me_epirus_2_magna.11.a
        current_ruler = {
            add_nickname = "NICKNAME_THE_GREAT"
            if = {
                limit = { has_trait = humble }
                remove_trait = humble
            }
            else_if = {
                limit = {
                    NOT = { has_trait = proud }
                }
                add_trait = proud
            }
        }
    }

    option = {
        name = me_epirus_2_magna.11.b
        current_ruler = {
            if = {
                limit = { has_trait = proud }
                remove_trait = proud
            }
            else_if = {
                limit = {
                    NOT = { has_trait = humble }
                }
                add_trait = humble
            }
        }
    }
}

me_epirus_2_magna.12 = {							# Siceliote Succors - Start/End
    type = country_event
    title = me_epirus_2_magna.12.t
    desc = me_epirus_2_magna.12.desc
    picture = greek_siege
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:me_epi_2_12_syr_scope.current_ruler
    right_portrait = c:CAR.current_ruler
    goto_location = p:94

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        me_epi_1_kineas_effect = yes
        set_variable = epi_diplo_task_active
        if = {
            limit = {
                any_country = {
                    has_variable = me_syracuse_start_flag
                    has_land = yes
                    capital_scope = {
                        OR = {
                            is_in_area = syracuse_area
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                        }
                    }
                }
            }
            random_country = {
                limit = {
                    has_variable = me_syracuse_start_flag
                    has_land = yes
                    capital_scope= {
                        OR = {
                            is_in_area = syracuse_area
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                        }
                    }
                }
                save_scope_as = me_epi_2_12_syr_scope
            }
        }
        hidden_effect = {
            area:syracuse_area = {
                every_area_province = {
                    limit = {
                        has_owner = yes
                        OR = {
                            owner = { primary_culture = carthaginian }
                            AND = {
                                owner = { is_subject = yes }
                                owner.overlord = { primary_culture = carthaginian }
                            }
                        }
                    }
                    add_claim = root
                }
            }
            area:west_sicily_area = {
                every_area_province = {
                    limit = {
                        has_owner = yes
                        OR = {
                            owner = { primary_culture = carthaginian }
                            AND = {
                                owner = { is_subject = yes }
                                owner.overlord = { primary_culture = carthaginian }
                            }
                        }
                    }
                    add_claim = root
                }
            }
            area:east_sicily_area = {
                every_area_province = {
                    limit = {
                        has_owner = yes
                        OR = {
                            owner = { primary_culture = carthaginian }
                            AND = {
                                owner = { is_subject = yes }
                                owner.overlord = { primary_culture = carthaginian }
                            }
                        }
                    }
                    add_claim = root
                }
            }
        }
        custom_tooltip = me_epirus_2_magna.12.tt
    }

    option = {
        name = me_epirus_2_magna.12.a
        if = {
            limit = {
                exists = scope:me_epi_2_12_syr_scope
                scope:me_epi_2_12_syr_scope = {
                    NOR = {
                        war_with = root
                        alliance_with = root
                        alliance_with = c:CAR
                        is_subject_of = root
                    }
                }
            }
            if = {
                limit = {
                    any_country = {
                        primary_culture = syracusan
                        capital_scope = {
                            OR = {
                                is_in_area = syracuse_area
                                is_in_area = east_sicily_area
                                is_in_area = west_sicily_area
                            }
                        }
                        is_subject = no
                        NOT = { has_variable = me_syracuse_start_flag }
                    }
                }
                custom_tooltip = me_epirus_2_magna.12.at2
            }
            if = {
                limit = {
                    scope:me_epi_2_12_syr_scope = { war_with = c:CAR }
                }
                c:CAR = {
                    ordered_owned_province = {
                        limit = {
                            OR = {
                                is_in_area = syracuse_area
                                is_in_area = east_sicily_area
                                is_in_area = west_sicily_area
                            }
                        }
                        save_scope_as = epi_car_wargoal
                    }
                }
                show_as_tooltip = {
                    scope:me_epirus_scope = {
                        declare_war_with_wargoal = {
                            war_goal = conquer_wargoal
                            province = scope:epi_car_wargoal
                            target = scope:epi_car_wargoal.owner
                        }
                    }
                }
            }
            scope:me_epi_2_12_syr_scope = {
                if = {
                    limit = { is_ai = no }
                    trigger_event = { id = dhe_dde_pyrrhus.18 }
                }
                else = {
                    hidden_effect = {
                        random = {
                            chance = 75
                            set_variable = epirus_2_magna_12_flag
                        }
                    }
                    root = {
                        trigger_event = {
                            id = me_epirus_2_magna.29
                            days = 5
                        }
                    }
                }
            }
        }
        if = {
            limit = {
                any_country = {
                    primary_culture = syracusan
                    capital_scope = {
                        OR = {
                            is_in_area = syracuse_area
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                        }
                    }
                    num_of_cities <= 5
                    is_subject = no
                    NOT = { this = scope:me_epi_2_12_syr_scope }
                }
            }
            custom_tooltip = me_epirus_2_magna.12.at
            ordered_country = {
                limit = {
                    primary_culture = syracusan
                    capital_scope = {
                        OR = {
                            is_in_area = syracuse_area
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                        }
                    }
                    num_of_cities <= 5
                    is_subject = no
                    NOT = { this = scope:me_epi_2_12_syr_scope }
                }
                order_by = country_population
                max = 5
                check_range_bounds = no
                add_to_list = epi_2_30_list
                if = {
                    limit = { is_ai = no }
                    trigger_event = { id = me_epirus_2_magna.30 }
                }
                else = {
                    hidden_effect = {
                        random = {
                            chance = 50
                            modifier = {
                                any_in_list = {
                                    list = epi_2_30_list
                                    has_variable = epirus_2_magna_12_flag
                                    count = 1
                                }
                                factor = 0.5
                            }
                            modifier = {
                                any_in_list = {
                                    list = epi_2_30_list
                                    count >= 2
                                    has_variable = epirus_2_magna_12_flag
                                }
                                factor = 0.2
                            }
                            set_variable = epirus_2_magna_12_flag
                        }
                    }
                }
            }
            if = {
                limit = {
                    any_in_list = {
                        list = epi_2_30_list
                        is_ai = no
                    }
                }
                trigger_event = {
                    id = me_epirus_2_magna.31
                    days = { 30 40 }
                }
            }
            else = {
                trigger_event = {
                    id = me_epirus_2_magna.31
                    days = 10
                }
            }
        }
    }
}

me_epirus_2_magna.13 = {							# Siceliote Champion - End/Start
    type = country_event
    title = me_epirus_2_magna.13.t
    desc = {
        desc = me_epirus_2_magna.13.desc
        first_valid = {
            triggered_desc = { #
                trigger = { exists = scope:syracuse_scope }
                desc = "me_epirus_2_magna.13.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.13.desc_2"
            }
        }
    }
    picture = greek_city
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:syracuse_scope.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        me_epi_1_kineas_effect = yes
        custom_tooltip = me_epirus_2_magna.13.tt
        custom_tooltip = epirus_2_magna_13_reward_tt
        hidden_effect = {
            area:syracuse_area = {
                every_area_province = {
                    limit = {
                        has_owner = yes
                        NOR = {
                            owner = root
                            owner = { is_subject_of = root }
                        }
                    }
                    add_claim = root
                }
            }
            area:east_sicily_area = {
                every_area_province = {
                    limit = {
                        has_owner = yes
                        NOR = {
                            owner = root
                            owner = { is_subject_of = root }
                        }
                    }
                    add_claim = root
                }
            }
            area:west_sicily_area = {
                every_area_province = {
                    limit = {
                        has_owner = yes
                        NOR = {
                            owner = root
                            owner = { is_subject_of = root }
                        }
                    }
                    add_claim = root
                }
            }
        }
        if = {
            limit = { exists = scope:epirote_diplomat_scope }
            me_epi_1_kineas_effect = yes
        }
    }

    option = {
        name = me_epirus_2_magna.13.a
        trigger = { exists = scope:syracuse_scope }
        custom_tooltip = me_epirus_2_magna.13.at
        scope:syracuse_scope = {
            if = {
                limit = {
                    scope:syracuse_scope = { is_ai = no }
                }
                trigger_event = {
                    id = me_epirus_2_magna.21
                    days = 15
                }
            }
            else = {
                hidden_effect = {
                    random = {
                        chance = 50
                        modifier = {
                            factor = 0.1
                            scope:syracuse_scope.num_of_cities >= scope:me_epirus_scope.num_of_cities
                        }
                        modifier = {
                            factor = 0.1
                            scope:syracuse_scope.num_of_cohorts >= scope:me_epirus_scope.num_of_cohorts
                        }
						modifier = {
							factor = 100
							AND = {
								is_ai = yes
								scope:syracuse_scope.num_of_cohorts >= scope:me_epirus_scope.num_of_cohorts
							}
						}
                        set_variable = syr_vassal_flag
                    }
                }
                root = {
                    trigger_event = {
                        id = me_epirus_2_magna.22
                        days = 20
                    }
                }
            }
        }
    }

    option = {
        name = me_epirus_2_magna.13.b
        trigger = { exists = scope:syracuse_scope }
        ai_chance = {
            factor = 0
        }
    }

    option = {
        name = me_epirus_2_magna.13.c
        trigger = {
            NOT = { exists = scope:syracuse_scope }
        }
    }
}

me_epirus_2_magna.14 = {							# Master of Sicily - End
    type = country_event
    title = me_epirus_2_magna.14.t
    desc = me_epirus_2_magna.14.desc
    picture = greek_siege

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { custom_tooltip = me_epirus_2_magna.14.tt }

    option = {
        name = me_epirus_2_magna.14.a
        random_owned_province = {
            limit = { is_in_region = magna_graecia_region }
            save_scope_as = italiote_governorship_province
        }
        scope:italiote_governorship_province.governorship = {
            every_governorship_state = {
                limit = {
                    any_state_province = {
                        OR = {
                            is_in_area = syracuse_area
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                        }
                    }
                }
                custom = epirus_2_magna_14_reward_tt
                add_state_modifier = {
                    name = me_epi_2_4_smod
                    duration = 7300 # 20 years
                }
            }
        }
    }

    option = {
        name = me_epirus_2_magna.14.b
        custom_tooltip = me_epirus_2_magna.4.bt
        hidden_effect = {
            if = {
                limit = {
                    any_owned_province = {
                        OR = {
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                            is_in_area = syracuse_area
                        }
                    }
                }
                random_owned_province = {
                    limit = {
                        OR = {
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                            is_in_area = syracuse_area
                        }
                    }
                    save_scope_as = siceliote_governorship_province
                }
            }
            else = {
                random_subject = {
                    limit = {
                        any_owned_province = {
                            OR = {
                                is_in_area = east_sicily_area
                                is_in_area = west_sicily_area
                                is_in_area = syracuse_area
                            }
                        }
                    }
                    random_owned_province = {
                        limit = {
                            OR = {
                                is_in_area = east_sicily_area
                                is_in_area = west_sicily_area
                                is_in_area = syracuse_area
                            }
                        }
                        save_scope_as = siceliote_governorship_province
                    }
                }
            }
            scope:siceliote_governorship_province = {
                create_country = {
                    name = {
                        name = SIKELIA_NAME
                        adjective = SIKELIA_ADJ
                    }
					if = {
						limit = {
							NOT = {
								primary_culture = syracusan
							}
						}
						set_primary_culture_cleanup_effect = {
							NEW_PRIMARY_CULTURE = syracusan
							MAKE_OLD_CULTURE_INTEGRATED = yes
						}
					}
                    change_country_flag = MG_SIC_FLAG
                    save_scope_as = epi_sic_scope
                    change_country_color = syracuse_yellow
                    set_country_heritage = siceliote_heritage
                    set_variable = form_sicily_block_flag
                }
            }
            every_owned_province = {
                limit = {
                        OR = {
                        is_in_area = east_sicily_area
                        is_in_area = west_sicily_area
                        is_in_area = syracuse_area
                    }
                }
                set_owned_by = scope:epi_sic_scope
            }
            every_subject = {
                limit = {
                    capital_scope = {
                        OR = {
                            is_in_area = syracuse_area
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                        }
                    }
                    country_culture_group = hellenic
                    is_ai = yes
                }
                every_owned_province = {
                    limit = {
                        OR = {
                            is_in_area = syracuse_area
                            is_in_area = east_sicily_area
                            is_in_area = west_sicily_area
                        }
                    }
                    set_owned_by = scope:epi_sic_scope
                }
            }
            make_subject = {
                target = scope:epi_sic_scope
                type = satrapy
            }
        }
    }
}

me_epirus_2_magna.15 = {							# Divide and Conquer - Start/End
    type = country_event
    title = me_epirus_2_magna.15.t
    desc = me_epirus_2_magna.15.desc
    picture = celtic_chiefs
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = root.var:me_epi_2_15_aid_1.current_ruler
    right_portrait = root.var:me_epi_2_15_aid_2.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        me_epi_1_kineas_effect = yes
        custom_tooltip = me_epirus_2_magna.15.tt
        hidden_effect = {
            ordered_in_list = {
                list = me_epi_2_15_list
                limit = {
                    NOR = {
                        has_variable = me_epi_2_15_ally_declined
                        alliance_with = root
                        war_with = root
                    }
                }
                order_by = country_population
                max = 4
                check_range_bounds = no
                me_epi_2_15_aid_scope_effect = yes
            }
        }
        if = {
            limit = { has_variable = epi_2_15_first_choice }
            add_treasury = -25
        }
    }

    option = {
        name = me_epirus_2_magna.15.a
        root.var:me_epi_2_15_aid_1 = { me_epi_2_15_ally_effect = yes }
    }

    option = {
        name = me_epirus_2_magna.15.b
        trigger = { has_variable = me_epi_2_15_aid_2 }
        root.var:me_epi_2_15_aid_2 = { me_epi_2_15_ally_effect = yes }
    }

    option = {
        name = me_epirus_2_magna.15.c
        trigger = { has_variable = me_epi_2_15_aid_3 }
        root.var:me_epi_2_15_aid_3 = { me_epi_2_15_ally_effect = yes }
    }

    option = {
        name = me_epirus_2_magna.15.d
        trigger = {
            has_variable = me_epi_2_15_aid_4
            NOT = { has_variable = epi_2_15_first_choice }
        }
        root.var:me_epi_2_15_aid_4 = { me_epi_2_15_ally_effect = yes }
    }

    option = {
        name = me_epirus_2_magna.15.e
        trigger = { has_variable = epi_2_15_first_choice }
        add_treasury = 25
        me_epi_remove_diplo_flag_effect = yes
    }

    after = {
        remove_variable = me_epi_2_15_aid_1
        if = {
            limit = { has_variable = me_epi_2_15_aid_2 }
            remove_variable = me_epi_2_15_aid_2
        }
        if = {
            limit = { has_variable = me_epi_2_15_aid_3 }
            remove_variable = me_epi_2_15_aid_3
        }
        if = {
            limit = { has_variable = me_epi_2_15_aid_4 }
            remove_variable = me_epi_2_15_aid_4
        }
        if = {
            limit = { has_variable = epi_2_15_first_choice }
            remove_variable = epi_2_15_first_choice
        }
    }
}

me_epirus_2_magna.16 = {                            # Round on the Cities - Demand
    type = country_event
    title = me_epirus_2_magna.16.t
    desc = me_epirus_2_magna.16.desc
    picture = council_country
    left_portrait = current_ruler
    right_portrait = scope:me_epirus_scope.current_ruler
    right_portrait = scope:epirote_diplomat_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    option = {
        name = me_epirus_2_magna.16.a
        set_variable = epirus_2_magna_9_flag
    }
}

me_epirus_2_magna.17 = {                            # Round on the Cities - Responses
    type = country_event
    title = me_epirus_2_magna.17.t
    desc = {
        desc = me_epirus_2_magna.17.desc
        first_valid = {
            triggered_desc = { #
                trigger = {
                    any_in_list = {
                        list = epirus_2_magna_9_list
                        has_variable = epirus_2_magna_9_flag
                    }
                }
                desc = "me_epirus_2_magna.17.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.17.desc_2"
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:epi_2_double_1_scope.current_ruler
    right_portrait = scope:epi_2_double_2_scope.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = {
                any_in_list = {
                    list = epirus_2_magna_9_list
                    has_variable = epirus_2_magna_9_flag
                }
            }
            ordered_in_list = {
                list = epirus_2_magna_9_list
                limit = { has_variable = epirus_2_magna_9_flag }
                order_by = country_population
                max = 2
                check_range_bounds = no
                me_epi_2_double_scope_effect = yes
            }
        }
        else = {
            ordered_in_list = {
                list = epirus_2_magna_9_list
                order_by = country_population
                max = 2
                check_range_bounds = no
                me_epi_2_double_scope_effect = yes
            }
        }
    }

    option = {
        name = me_epirus_2_magna.17.a
        trigger = {
            any_in_list = {
                list = epirus_2_magna_9_list
                has_variable = epirus_2_magna_9_flag
            }
        }
        every_in_list = {
            list = epirus_2_magna_9_list
            if = {
                limit = { has_variable = epirus_2_magna_9_flag }
                root = {
                    make_subject = {
                        type = feudatory
                        target = prev
                    }
                }
            }
        }
        if = {
            limit = {
                any_in_list = {
                    list = epirus_2_magna_9_list
                    NOT = { has_variable = epirus_2_magna_9_flag }
                }
            }
            custom_tooltip = me_epirus_2_magna.17.at
            hidden_effect = {
                every_in_list = {
                    list = epirus_2_magna_9_list
                    limit = {
                        NOT = { is_subject_of = root }
                    }
                    every_owned_province = { add_claim = root }
                }
            }
        }
    }

    option = {
        name = me_epirus_2_magna.17.b
        trigger = {
            NOT = {
                any_in_list = {
                    list = epirus_2_magna_9_list
                    has_variable = epirus_2_magna_9_flag
                }
            }
        }
        hidden_effect = {
            every_in_list = {
                list = epirus_2_magna_9_list
                every_owned_province = { add_claim = root }
            }
        }
        custom_tooltip = me_epirus_2_magna.17.bt
    }

    after = {
        me_epi_remove_diplo_flag_effect = yes
    }
}

me_epirus_2_magna.18 = {                            # Pax Epirum - Offer
    type = country_event
    title = me_epirus_2_magna.18.t
    desc = me_epirus_2_magna.18.desc
    picture = oration
    left_portrait = current_ruler
    left_portrait = scope:epi_2_5_caecus
    right_portrait = scope:me_epirus_scope.current_ruler
    right_portrait = scope:epirote_diplomat_scope
    goto_location = scope:me_epirus_scope.capital_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        scope:me_epirus_scope = {
            ordered_owned_province = {
                limit = {
                    OR = {
                        is_in_region = magna_graecia_region
                        is_in_region = central_italy_region
                    }
                }
                order_by = total_population
                save_scope_as = me_epi_2_5_wargoal
            }
        }
        if = {
            limit = {
                char:313 = {
                    is_alive = yes
                    employer = root
                    prisoner = no
                }
            }
            char:313 = { save_scope_as = epi_2_5_caecus }
        }
        else = {
            ordered_character = {
                limit = {
                    is_adult = yes
                    prisoner = no
                    trigger_if = {
                        limit = {
                            employer = {
                                gender_equality = no
                            }
                        }
                        is_female = no
                    }
                }
                order_by = {
                    value = 0
                    subtract = age
                }
                save_scope_as = epi_2_5_caecus
            }
        }
    }

    option = {
        name = me_epirus_2_magna.18.a
        add_manpower = 10
        declare_war_with_wargoal = {
            war_goal = conquer_wargoal
            province = scope:me_epi_2_5_wargoal
            target = scope:me_epirus_scope
        }
        custom_tooltip = me_epirus_2_magna.18.at
        hidden_effect = {
            scope:me_epirus_scope = {
                every_owned_province = {
                    limit = {
                        OR = {
                            is_in_region = magna_graecia_region
                            is_in_region = central_italy_region
                        }
                    }
                    add_claim = root
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 1.5
                scope:epi_2_5_caecus = char:313
            }
        }
    }

    option = {
        name = me_epirus_2_magna.18.b
        show_as_tooltip = {
            add_truce = {
                target = scope:me_epirus_scope
                duration = 7300
            }
            scope:me_epirus_scope = {
                add_truce = {
                    target = scope:me_epirus_scope
                    duration = 7300
                }
            }
        }
        set_variable = me_epi_2_15_flag
        ai_chance = {
            factor = 50
            modifier = {
                factor = 1.75
                scope:epirote_diplomat_scope = {
                    OR = {
                        has_trait = orator
                        has_trait = silver_tongued
                        has_trait = cultured
                        charisma >= 8
                        has_trait = ambitious
                    }
                }
            }
        }
    }

    after = {
        scope:me_epirus_scope = {
            trigger_event = {
                id = me_epirus_2_magna.38
                days = 10
            }
        }
    }
}

me_epirus_2_magna.19 = {                            # Benevolent Moves - Offer
    type = country_event
    title = me_epirus_2_magna.19.t
    desc = me_epirus_2_magna.19.desc
    picture = council_country
    left_portrait = current_ruler
    right_portrait = scope:me_epirus_scope.current_ruler
    right_portrait = scope:epirote_diplomat_scope
    goto_location = scope:me_epirus_scope.capital_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    option = { # Yep
        name = me_epirus_2_magna.19.a
        set_variable = me_epi_2_19_flag
        show_as_tooltip = {
            scope:me_epirus_scope = {
                make_subject = {
                    target = root
                    type = feudatory
                }
            }
        }
        ai_chance = {
            factor = 40
            modifier = {
                factor = 2
                any_neighbour_country = {
                    country_culture_group = latin
                    num_of_cohorts > root.num_of_cohorts
                }
            }
            modifier = {
                factor = 100
                c:EPI = {
                    is_ai = yes
                }
            }
            modifier = {
                factor = 4
                scope:epirote_diplomat_scope = {
                    OR = {
                        has_trait = orator
                        has_trait = silver_tongued
                        has_trait = cultured
                        charisma >= 8
                        has_trait = ambitious
                    }
                }
            }
        }
    }

    option = { # Nope
        name = me_epirus_2_magna.19.b
        custom_tooltip = me_epirus_2_magna.19.bt
        set_variable = me_epi_2_aid_declined
        ai_chance = {
            factor = 40
            modifier = {
                factor = 2
                tag = TAR
            }
            modifier = {
                factor = 0
                c:EPI = {
                    is_ai = yes
                }
            }
        }
    }

    after = {
        scope:me_epirus_scope = {
            trigger_event = { id = me_epirus_2_magna.20 }
        }
    }
}

me_epirus_2_magna.20 = {                            # Benevolent Moves - End/Reponse
    type = country_event
    title = me_epirus_2_magna.20.t
    desc = {
        desc = me_epirus_2_magna.20.desc
        first_valid = {
            triggered_desc = { #
                trigger = {
                    scope:me_epi_2_aid_scope = { has_variable = me_epi_2_19_flag }
                }
                desc = "me_epirus_2_magna.20.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.20.desc_2"
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:me_epi_2_aid_scope.current_ruler
    goto_location = scope:me_epi_2_aid_scope.capital_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if ={
            limit = {
                NOT = {
                    scope:me_epi_2_aid_scope = { has_variable = me_epi_2_19_flag }
                }
            }
            custom_tooltip = me_epirus_2_magna.20.tt
            hidden_effect = {
                scope:me_epi_2_aid_scope = {
                    every_owned_province = { add_claim = scope:me_epirus_scope }
                }
            }
        }
    }

    option = { # Yepped
        name = me_epirus_2_magna.20.a
        trigger = {
            scope:me_epi_2_aid_scope = { has_variable = me_epi_2_19_flag }
        }
        me_epi_kineas_charisma_effect = yes
        make_subject = {
            target = scope:me_epi_2_aid_scope
            type = feudatory
        }
        scope:me_epi_2_aid_scope = { remove_variable = me_epi_2_19_flag }
        me_epi_remove_diplo_flag_effect = yes
    }

    option = { # Noped
        name = me_epirus_2_magna.20.b
        trigger = {
            NOT = {
                scope:me_epi_2_aid_scope = { has_variable = me_epi_2_19_flag }
            }
            any_country = {
                has_land = yes
                primary_culture = italiotian
                is_subject = no
                capital_scope = {
                    OR = {
                        is_in_region = central_italy_region
                        is_in_region = magna_graecia_region
                    }
                }
                num_of_cities <= 5
                NOR = {
                    alliance_with = root
                    war_with = root
                    opinion = { target = root value < -50 }
                    has_variable = me_epi_2_aid_declined
                }
            }
        }
        custom_tooltip = me_epirus_2_magna.20.bt
        trigger_event = {
            id = me_epirus_2_magna.2
            days = 3
        }
    }

    option = { # Give up
        name = me_epirus_2_magna.20.c
        trigger = {
            NOT = {
                scope:me_epi_2_aid_scope = { has_variable = me_epi_2_19_flag }
            }
            NOT = {
                any_country = {
                    has_land = yes
                    primary_culture = italiotian
                    is_subject = no
                    capital_scope = {
                        OR = {
                            is_in_region = central_italy_region
                            is_in_region = magna_graecia_region
                        }
                    }
                    num_of_cities <= 5
                    NOR = {
                        alliance_with = root
                        war_with = root
                        opinion = { target = root value < -50 }
                        has_variable = me_epi_2_aid_declined
                    }
                }
            }
        }
        custom_tooltip = me_epirus_2_magna.20.ct
        me_epi_remove_diplo_flag_effect = yes
    }
}

me_epirus_2_magna.21 = {                            # Sicilian Champion - Offer
    type = country_event
    title = me_epirus_2_magna.21.t
    desc = me_epirus_2_magna.21.desc
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:me_epirus_scope.current_ruler
    right_portrait = scope:epirote_diplomat_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { custom_tooltip = epirus_2_magna_13_reward_tt }

    option = { # Yep
        name = me_epirus_2_magna.21.a
        set_variable = syr_vassal_flag
        show_as_tooltip = {
            if = {
                limit = {
                    root = { is_subject = yes }
                    root.overlord = { is_ai = yes }
                }
                root.overlord = { release_subject = root }
            }
            scope:me_epirus_scope = {
                make_subject = {
                    type = feudatory
                    target = root
                }
            }
        }
        ai_chance = {
            factor = 25
            modifier = {
                is_republic = yes
                factor = 0.5
            }
            modifier = {
                factor = 4
                scope:epirote_diplomat_scope = {
                    OR = {
                        has_trait = orator
                        has_trait = silver_tongued
                        has_trait = cultured
                        charisma >= 8
                        has_trait = ambitious
                    }
                }
            }
            modifier = {
                factor = 100
                c:EPI = {
                    is_ai = yes
                }
            }
            modifier = {
                factor = 0.8
                any_subject = { has_land = yes }
            }
        }
    }

    option = { # Nope
        name = me_epirus_2_magna.21.b
        custom_tooltip = me_epirus_2_magna.21.bt
        ai_chance = {
            factor = 25
            modifier = {
                factor = 0
                c:EPI = {
                    is_ai = yes
                }
            }
        }
    }

    after = {
        scope:me_epirus_scope = {
            trigger_event = { id = me_epirus_2_magna.22 }
        }
    }
}

me_epirus_2_magna.22 = {                            # Sicilian Champion - Response
    type = country_event
    title = me_epirus_2_magna.22.t
    desc = {
        desc = me_epirus_2_magna.22.desc
        first_valid = {
            triggered_desc = { #
                trigger = {
                    scope:syracuse_scope = { has_variable = syr_vassal_flag }
                }
                desc = "me_epirus_2_magna.22.desc_1"
            }
            triggered_desc = { #
                trigger = {
                    NOT = {
                        scope:syracuse_scope = { has_variable = syr_vassal_flag }
                    }
                }
                desc = "me_epirus_2_magna.22.desc_2"
            }
        }
    }
    picture = greek_court
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:syracuse_scope.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { me_epi_remove_diplo_flag_effect = yes }

    option = { # Yepped
        name = me_epirus_2_magna.22.a
        trigger = {
            scope:syracuse_scope = { has_variable = syr_vassal_flag }
        }
        make_subject = {
            target = scope:syracuse_scope
            type = feudatory
        }
        scope:syracuse_scope = { remove_variable = syr_vassal_flag }
    }

    option = { # Noped
        name = me_epirus_2_magna.22.b
        trigger = {
            NOT = {
                scope:syracuse_scope = { has_variable = syr_vassal_flag }
            }
        }
        custom_tooltip = me_epirus_2_magna.22.bt
    }
}

me_epirus_2_magna.23 = {                            # Audacious Italiotes - Offer
    type = country_event
    title = me_epirus_2_magna.23.t
    desc = {
        desc = me_epirus_2_magna.23.desc
        first_valid = {
            triggered_desc = { #
                trigger = {
                    tag = TAR
                    exists = scope:meton_scope
                }
                desc = "me_epirus_2_magna.23.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.23.desc_2"
            }
        }
        desc = me_epirus_2_magna.23.desc_3
    }
    picture = council_country
    left_portrait = current_ruler
    left_portrait = scope:meton_scope
    right_portrait = scope:me_epirus_scope.current_ruler
    right_portrait = scope:epirote_diplomat_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = { tag = TAR }
            hidden_effect = {
                create_character = { # Create Meton
                    first_name ="Meton"
                    female = no
                    age = 51
                    no_traits = yes
                    add_trait = wise
                    save_scope_as = meton_scope
                }
            }
            custom_tooltip = me_epirus_2_magna.23.tt1
        }
        custom_tooltip = me_epirus_2_magna.23.tt2
        random_current_war = {
            limit = {
                OR = {
                    AND = {
                        any_war_attacker = { this = scope:italiote_threat_scope }
                        any_war_defender = { this = root }
                    }
                    AND = {
                        any_war_defender = { this = scope:italiote_threat_scope }
                        any_war_attacker = { this = root }
                    }
                }
            }
            save_scope_as = audacious_italics_war
        }
    }

    option = { # Yep
        name = me_epirus_2_magna.23.a
        scope:me_epirus_scope = {
            make_subject = {
                target = root
                type = feudatory
            }
        }
        add_to_war = {
            target = scope:me_epirus_scope
            attacker = no
            leader = no
        }
        custom_tooltip = me_epirus_2_magna.23.at
        ai_chance = {
            factor = 40
            modifier = {
                factor = 2
                war = yes
            }
            modifier = {
                factor = 2
                any_neighbour_country = {
                    country_culture_group = latin
                    num_of_cohorts > root.num_of_cohorts
                }
            }
            modifier = {
                factor = 100
                c:EPI = {
                    is_ai = yes
                }
            }
            modifier = {
                factor = 4
                scope:epirote_diplomat_scope = {
                    OR = {
                        has_trait = orator
                        has_trait = silver_tongued
                        has_trait = cultured
                        charisma >= 8
                        has_trait = ambitious
                    }
                }
            }
        }
    }

    option = { # Nope
        name = me_epirus_2_magna.23.b
        custom_tooltip = me_epirus_2_magna.23.bt
        set_variable = me_epi_2_aid_declined
        ai_chance = {
            factor = 20
            modifier = {
                factor = 0
                c:EPI = {
                    is_ai = yes
                }
            }
        }
    }

    after = {
        scope:me_epirus_scope = {
            trigger_event = { id = me_epirus_2_magna.24 }
        }
    }
}

me_epirus_2_magna.24 = {                            # Audacious Italiotes - End/Reponse
    type = country_event
    title = me_epirus_2_magna.24.t
    desc = {
        desc = me_epirus_2_magna.24.desc
        first_valid = {
            triggered_desc = { # Meton
                trigger = {
                    scope:italiote_threatened_scope = { tag = TAR }
                    exists = scope:meton_scope
                }
                desc = "me_epirus_2_magna.24.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.24.desc_2"
            }
        }
        first_valid = {
            triggered_desc = { # Accepted/rejected
                trigger = {
                    scope:italiote_threatened_scope = { is_subject_of = root }
                }
                desc = "me_epirus_2_magna.24.desc_3"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.24.desc_4"
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:italiote_threatened_scope.current_ruler
    right_portrait = scope:italiote_threat_scope.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = {
                NOR = {
                    any_country = {
                        primary_culture = italiotian
                        capital_scope = {
                            OR = {
                                is_in_region = magna_graecia_region
                                is_in_region = central_italy_region
                            }
                        }
                        num_of_cities <= 5
                        is_subject = no
                        NOR = {
                            this = scope:italiote_threatened_scope
                            alliance_with = scope:italiote_threat_scope
                        }
                    }
                    any_country = {
                        country_culture_group = latin
                        capital_scope = {
                            OR = {
                                is_in_region = magna_graecia_region
                                is_in_region = central_italy_region
                            }
                        }
                        num_of_cities <= 10
                        is_subject = no
                        NOR = {
                            this = scope:italiote_threat_scope
                            alliance_with = scope:italiote_threat_scope
                        }
                    }
                }
            }
            custom_tooltip = me_epirus_2_magna.35.tt
        }
        if ={
            limit = {
                scope:italiote_threatened_scope = { is_subject_of = root }
            }
            show_as_tooltip = {
                make_subject = {
                    target = scope:italiote_threatened_scope
                    type = feudatory
                }
            }
        }
    }

    option = { # Yepped
        name = me_epirus_2_magna.24.a
        trigger = {
            scope:italiote_threatened_scope = { is_subject_of = root }
        }
        if = {
            limit = {
                scope:audacious_italics_war = {
                    any_war_attacker = { this = scope:italiote_threat_scope }
                }
            }
            add_to_war = {
                target = scope:audacious_italics_war
                leader = yes
                attacker = no
            }
            hidden_effect = {
                scope:italiote_threatened_scope = {
                    add_to_war = {
                        target = scope:audacious_italics_war
                        attacker = no
                    }
                }
            }
        }
        else = {
            add_to_war = {
                target = scope:audacious_italics_war
                leader = yes
                attacker = yes
            }
            hidden_effect = {
                scope:italiote_threatened_scope = {
                    add_to_war = {
                        target = scope:audacious_italics_war
                        attacker = yes
                    }
                }
            }
        }
        me_epi_kineas_charisma_effect = yes
        ai_chance = {
            factor = 75
            modifier = {
                num_of_cities > scope:me_epirus_scope.num_of_cities
                factor = 0
            }
        }
    }

    option = { # Noped
        name = me_epirus_2_magna.24.b
        trigger = {
            NOT = {
                scope:italiote_threatened_scope = { is_subject_of = root }
            }
        }
        custom_tooltip = me_epirus_2_magna.24.bt
        ai_chance = {
            factor = 25
        }
    }

    after = {
        scope:italiote_threat_scope = {
            trigger_event = { id = me_epirus_2_magna.25 }
        }
    }
}

me_epirus_2_magna.25 = {                            # Audacious Italiotes - Rome Ping
    type = country_event
    title = me_epirus_2_magna.25.t
    desc = {
        desc = me_epirus_2_magna.25.desc
        first_valid = {
            triggered_desc = { #
                trigger = {
                    scope:italiote_threatened_scope = { is_subject_of = scope:me_epirus_scope }
                }
                desc = "me_epirus_2_magna.24.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.24.desc_2"
            }
        }
    }
    picture = epirote_phalanx
    left_portrait = current_ruler
    right_portrait = scope:me_epirus_scope.current_ruler
    right_portrait = scope:italiote_threatened_scope.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = {
                scope:italiote_threatened_scope = { is_subject_of = scope:me_epirus_scope }
            }
            show_as_tooltip = {
                if = {
                    limit = {
                        scope:audacious_italics_war = {
                            any_war_attacker = { this = scope:italiote_threat_scope }
                        }
                    }
                    add_to_war = {
                        target = scope:audacious_italics_war
                        leader = yes
                        attacker = no
                    }
                    hidden_effect = {
                        scope:italiote_threatened_scope = {
                            add_to_war = {
                                target = scope:audacious_italics_war
                                attacker = no
                            }
                        }
                    }
                }
                else = {
                    add_to_war = {
                        target = scope:audacious_italics_war
                        leader = yes
                        attacker = yes
                    }
                    hidden_effect = {
                        scope:italiote_threatened_scope = {
                            add_to_war = {
                                target = scope:audacious_italics_war
                                attacker = yes
                            }
                        }
                    }
                }
            }
        }
    }

    option = { # Yepped
        name = me_epirus_2_magna.24.a
        trigger = {
            scope:italiote_threatened_scope = { is_subject_of = scope:me_epirus_scope }
        }
    }

    option = { # Noped
        name = me_epirus_2_magna.24.b
        trigger = {
            NOT = {
                scope:italiote_threatened_scope = { is_subject_of = scope:me_epirus_scope }
            }
        }
    }
}

me_epirus_2_magna.26 = {                            # Audacious Italiotes - Threatened Ping
    type = country_event
    title = me_epirus_2_magna.26.t
    desc = {
        first_valid = {
            triggered_desc = { # Accepted/rejected
                trigger = {
                    scope:italiote_threatened_scope = { is_subject_of = root }
                }
                desc = "me_epirus_2_magna.26.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.26.desc_2"
            }
        }
    }
    picture = epirote_phalanx
    left_portrait = current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = {
                scope:italiote_threatened_scope = { is_subject_of = scope:me_epirus_scope }
            }
            scope:italiote_threat_scope = {
                random_owned_province = {
                    limit = { is_in_region = magna_graecia_region }
                    save_scope_as = me_epi_2_wargoal_scope
                }
            }
            show_as_tooltip = {
                scope:me_epirus_scope = {
                    declare_war_with_wargoal = {
                        war_goal = conquer_wargoal
                        province = scope:me_epi_2_wargoal_scope
                        target = scope:italiote_threat_scope
                    }
                }
            }
        }
        if = {
            limit = {
                any_in_list = {
                    list = epi_2_30_greek_list
                    is_subject_of = scope:me_epirus_scope
                }
            }
            every_in_list = {
                list = epi_2_30_greek_list
                limit = { is_subject_of = scope:me_epirus_scope }
                show_as_tooltip = {
                    scope:me_epirus_scope = {
                        make_subject = {
                            type = feudatory
                            target = prev
                        }
                    }
                }
            }
        }
        if = {
            limit = {
                any_in_list = {
                    list = epi_2_3_latin_list
                    alliance_with = scope:me_epirus_scope
                }
            }
            every_in_list = {
                list = epi_2_3_latin_list
                limit = { alliance_with = scope:me_epirus_scope }
                show_as_tooltip = {
                    scope:me_epirus_scope = {
                        add_alliance = prev
                    }
                }
            }
        }
    }

    option = { #
        name = me_epirus_2_magna.26.a
    }
}

me_epirus_2_magna.27 = {                            # Italiote Doubts
    type = country_event
    title = me_epirus_2_magna.27.t
    desc = "me_epirus_2_magna.27.desc"
    picture = epirote_phalanx
    left_portrait = current_ruler
    right_portrait = scope:epi_2_double_1_scope.current_ruler
    right_portrait = scope:epi_2_double_2_scope.current_ruler
    goto_location = scope:epi_2_double_1_scope.capital_scope
    fire_only_once = yes

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
        any_subject = {
            is_subject_type = feudatory
            country_culture_group = hellenic
            capital_scope = {
                OR = {
                    is_in_region = magna_graecia_region
                    is_in_region = central_italy_region
                }
            }
        }
        NOT = { has_completed_mission = epirus_2_magna }
    }

    immediate = {
        every_subject = {
            limit = {
                is_subject_type = feudatory
                country_culture_group = hellenic
                capital_scope = {
                    OR = {
                        is_in_region = magna_graecia_region
                        is_in_region = central_italy_region
                    }
                }
            }
            add_to_list = me_epi_2_27_list
        }
        ordered_in_list = {
            list = me_epi_2_27_list
            order_by = country_population
            max = 2
            check_range_bounds = no
            me_epi_2_double_scope_effect = yes
        }
    }

    option = { #
        name = me_epirus_2_magna.27.a
        every_subject = {
            limit = {
                is_subject_type = feudatory
                country_culture_group = hellenic
                capital_scope = {
                    OR = {
                        is_in_region = magna_graecia_region
                        is_in_region = central_italy_region
                    }
                }
            }
            add_country_modifier = {
                name = me_epi_2_27_cmod
                duration = 7300 # 20 years
            }
            if = {
                limit = { is_ai = no }
                trigger_event = { id = me_epirus_2_magna.28 }
            }
        }
    }
}

me_epirus_2_magna.28 = {                            # Italiote Doubts - Ping
    type = country_event
    title = me_epirus_2_magna.27.t
    desc = "me_epirus_2_magna.28.desc"
    picture = epirote_phalanx
    left_portrait = current_ruler
    right_portrait = scope:me_epirus_scope.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
        is_ai = no
    }

    option = { #
        name = me_epirus_2_magna.28.a
        show_as_tooltip = {
            add_country_modifier = {
                name = me_epi_2_27_cmod
                duration = 7300 # 20 years
            }
        }
    }
}

me_epirus_2_magna.29 = {                            # Siceliote Succors - Syracuse response ping
    type = country_event
    title = me_epirus_2_magna.29.t
    desc = {
        desc = "me_epirus_2_magna.29.desc"
        first_valid = {
            triggered_desc = { #
                trigger = {
                    scope:me_epi_2_12_syr_scope = { has_variable = epirus_2_magna_12_flag }
                }
                desc = "me_epirus_2_magna.29.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.29.desc_2"
            }
        }
    }
    picture = epirote_phalanx
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:me_epi_2_12_syr_scope.current_ruler

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = {
                NOT = {
                    any_country = {
                        primary_culture = syracusan
                        capital_scope = {
                            OR = {
                                is_in_area = syracuse_area
                                is_in_area = east_sicily_area
                                is_in_area = west_sicily_area
                            }
                        }
                        num_of_cities <= 5
                        is_subject = no
                        NOT = { this = scope:me_epi_2_12_syr_scope }
                    }
                }
            }
            me_epi_remove_diplo_flag_effect = yes
        }
    }

    option = { #
        name = me_epirus_2_magna.29.a
        trigger = {
            scope:me_epi_2_12_syr_scope = { has_variable = epirus_2_magna_12_flag }
        }
        add_alliance = scope:me_epi_2_12_syr_scope
        scope:me_epi_2_12_syr_scope = { remove_variable = epirus_2_magna_12_flag }
    }

    option = { #
        name = me_epirus_2_magna.29.b
        trigger = {
            NOT = {
                scope:me_epi_2_12_syr_scope = { has_variable = epirus_2_magna_12_flag }
            }
        }
        custom_tooltip = me_epirus_2_magna.29.bt
    }
}

me_epirus_2_magna.30 = {                            # Siceliote Succors - Siceliote offer ping
    type = country_event
    title = me_epirus_2_magna.30.t
    desc = "me_epirus_2_magna.30.desc"
    picture = epirote_phalanx
    left_portrait = current_ruler
    right_portrait = scope:me_epirus_scope.current_ruler
    right_portrait = scope:epirote_diplomat_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { custom_tooltip = dhe_dde_pyrrhus.18.tt }

    option = { #
        name = me_epirus_2_magna.30.a
        show_as_tooltip = {
            scope:me_epirus_scope = {
                make_subject = {
                    type = feudatory
                    target = root
                }
            }
        }
        set_variable = epirus_2_magna_12_flag
    }

    option = { #
        name = me_epirus_2_magna.30.b
        custom_tooltip = me_epirus_2_magna.30.bt
    }
}

me_epirus_2_magna.31 = {                            # Siceliote Succors - Siceliote response ping
    type = country_event
    title = me_epirus_2_magna.31.t
    desc = {
        first_valid = {
            triggered_desc = { #
                trigger = {
                    any_in_list = {
                        list = epi_2_30_list
                        has_variable = epirus_2_magna_12_flag
                    }
                }
                desc = "me_epirus_2_magna.31.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.31.desc_2"
            }
        }
    }
    picture = epirote_phalanx
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:epi_2_double_1_scope.current_ruler
    right_portrait = scope:epi_2_double_2_scope.current_ruler
    goto_location = scope:epi_2_double_1_scope.capital_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = {
                any_in_list = {
                    list = epi_2_30_list
                    has_variable = epirus_2_magna_12_flag
                }
            }
            ordered_in_list = {
                list = epi_2_30_list
                order_by = country_population
                max = 2
                check_range_bounds = no
                me_epi_2_double_scope_effect = yes
            }
        }
        me_epi_remove_diplo_flag_effect = yes
    }

    option = { #
        name = me_epirus_2_magna.31.a
        trigger = {
            any_in_list = {
                list = epi_2_30_list
                has_variable = epirus_2_magna_12_flag
            }
        }
        every_in_list = {
            list = epi_2_30_list
            limit = { has_variable = epirus_2_magna_12_flag }
            root = {
                make_subject = {
                    type = feudatory
                    target = prev
                }
            }
            remove_variable = epirus_2_magna_12_flag
        }
    }

    option = { #
        name = me_epirus_2_magna.31.b
        trigger = {
            NOT = {
                any_in_list = {
                    list = epi_2_30_list
                    has_variable = epirus_2_magna_12_flag
                }
            }
        }
        custom_tooltip = me_epirus_2_magna.31.bt
    }
}

me_epirus_2_magna.32 = {                            # Audacious Italics - Italiote offer ping
    type = country_event
    title = me_epirus_2_magna.32.t
    desc = "me_epirus_2_magna.32.desc"
    picture = epirote_phalanx
    left_portrait = current_ruler
    right_portrait = scope:me_epirus_scope.current_ruler
    right_portrait = scope:epirote_diplomat_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { custom_tooltip = me_epirus_2_magna.32.tt }

    option = { #
        name = me_epirus_2_magna.32.a
        show_as_tooltip = {
            scope:me_epirus_scope = {
                make_subject = {
                    type = feudatory
                    target = root
                }
            }
        }
        set_variable = me_epi_2_30_flag
    }

    option = { #
        name = me_epirus_2_magna.32.b
        custom_tooltip = me_epirus_2_magna.32.bt
    }
}

me_epirus_2_magna.33 = {                            # Audacious Italics - Italiote response ping
    type = country_event
    title = me_epirus_2_magna.33.t
    desc = {
        first_valid = {
            triggered_desc = { #
                trigger = {
                    any_in_list = {
                        list = epi_2_30_greek_list
                        has_variable = me_epi_2_30_flag
                    }
                }
                desc = "me_epirus_2_magna.33.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.33.desc_2"
            }
        }
    }
    picture = greek_siege
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:epi_2_double_1_scope.current_ruler
    right_portrait = scope:epi_2_double_2_scope.current_ruler
    goto_location = scope:epi_2_double_1_scope.capital_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = {
                any_in_list = {
                    list = epi_2_30_greek_list
                    has_variable = me_epi_2_30_flag
                }
            }
            ordered_in_list = {
                list = epi_2_30_greek_list
                limit = { has_variable = me_epi_2_30_flag }
                order_by = country_population
                max = 2
                check_range_bounds = no
                me_epi_2_double_scope_effect = yes
            }
        }
        else = {
            ordered_in_list = {
                list = epi_2_30_greek_list
                order_by = country_population
                max = 2
                check_range_bounds = no
                me_epi_2_double_scope_effect = yes
            }
        }
        if = {
            limit = {
                NOT = {
                    any_country = {
                        country_culture_group = latin
                        capital_scope = {
                            OR = {
                                is_in_region = magna_graecia_region
                                is_in_region = central_italy_region
                            }
                        }
                        num_of_cities <= 10
                        is_subject = no
                        NOR = {
                            this = scope:italiote_threat_scope
                            alliance_with = scope:italiote_threat_scope
                        }
                    }
                }
            }
            custom_tooltip = me_epirus_2_magna.35.tt
            me_epi_remove_diplo_flag_effect = yes
            if = {
                limit = { exists = scope:italiote_threatened_scope }
                scope:italiote_threatened_scope = {
                    trigger_event = { id = me_epirus_2_magna.26 }
                }
            }
        }
        scope:me_epirus_scope = {
            random_current_war = {
                limit = {
                    OR = {
                        AND = {
                            any_war_attacker = { this = scope:italiote_threat_scope }
                            any_war_defender = { this = scope:me_epirus_scope }
                        }
                        AND = {
                            any_war_defender = { this = scope:italiote_threat_scope }
                            any_war_attacker = { this = scope:me_epirus_scope }
                        }
                    }
                }
                save_scope_as = audacious_italics_war
            }
        }
    }

    option = { #
        name = me_epirus_2_magna.33.a
        trigger = {
            any_in_list = {
                list = epi_2_30_greek_list
                has_variable = me_epi_2_30_flag
            }
        }
        every_in_list = {
            list = epi_2_30_greek_list
            limit = { has_variable = me_epi_2_30_flag }
            root = {
                make_subject = {
                    type = feudatory
                    target = prev
                }
            }
            remove_variable = me_epi_2_30_flag
            if = {
                limit = {
                    scope:audacious_italics_war = {
                        any_war_attacker = { this = scope:italiote_threat_scope }
                    }
                }
                add_to_war = {
                    target = scope:audacious_italics_war
                    leader = no
                    attacker = no
                }
            }
            else = {
                add_to_war = {
                    target = scope:audacious_italics_war
                    leader = no
                    attacker = yes
                }
            }
        }
    }

    option = { #
        name = me_epirus_2_magna.33.b
        trigger = {
            NOT = {
                any_in_list = {
                    list = epi_2_30_greek_list
                    has_variable = me_epi_2_30_flag
                }
            }
        }
        custom_tooltip = me_epirus_2_magna.33.bt
    }
}

me_epirus_2_magna.34 = {                            # Audacious Italics - Italic offer ping
    type = country_event
    title = me_epirus_2_magna.34.t
    desc = "me_epirus_2_magna.34.desc"
    picture = epirote_phalanx
    left_portrait = current_ruler
    right_portrait = scope:me_epirus_scope.current_ruler
    right_portrait = scope:epirote_diplomat_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = { custom_tooltip = me_epirus_2_magna.32.tt }

    option = { #
        name = me_epirus_2_magna.34.a
        show_as_tooltip = {
            scope:me_epirus_scope = { add_alliance = root }
        }
        set_variable = me_epi_2_30_flag
    }

    option = { #
        name = me_epirus_2_magna.34.b
        custom_tooltip = me_epirus_2_magna.34.bt
    }
}

me_epirus_2_magna.35 = {                            # Audacious Italics - Italic response ping
    type = country_event
    title = me_epirus_2_magna.35.t
    desc = {
        first_valid = {
            triggered_desc = { #
                trigger = {
                    any_in_list = {
                        list = epi_2_3_latin_list
                        has_variable = me_epi_2_30_flag
                    }
                }
                desc = "me_epirus_2_magna.35.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.35.desc_2"
            }
        }
    }
    picture = epirote_phalanx
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:epi_2_double_1_scope.current_ruler
    right_portrait = scope:epi_2_double_2_scope.current_ruler
    goto_location = scope:epi_2_double_1_scope.capital_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = {
                any_in_list = {
                    list = epi_2_3_latin_list
                    has_variable = me_epi_2_30_flag
                }
            }
            ordered_in_list = {
                list = epi_2_3_latin_list
                limit = { has_variable = me_epi_2_30_flag }
                order_by = country_population
                max = 2
                check_range_bounds = no
                me_epi_2_double_scope_effect = yes
            }
        }
        else = {
            ordered_in_list = {
                list = epi_2_3_latin_list
                order_by = country_population
                max = 2
                check_range_bounds = no
                me_epi_2_double_scope_effect = yes
            }
        }
        if = {
            limit = { exists = scope:italiote_threatened_scope }
            scope:italiote_threatened_scope = {
                trigger_event = { id = me_epirus_2_magna.26 }
            }
        }
        custom_tooltip = me_epirus_2_magna.35.tt
        me_epi_remove_diplo_flag_effect = yes
        scope:me_epirus_scope = {
            random_current_war = {
                limit = {
                    OR = {
                        AND = {
                            any_war_attacker = { this = scope:italiote_threat_scope }
                            any_war_defender = { this = scope:me_epirus_scope }
                        }
                        AND = {
                            any_war_defender = { this = scope:italiote_threat_scope }
                            any_war_attacker = { this = scope:me_epirus_scope }
                        }
                    }
                }
                save_scope_as = audacious_italics_war
            }
        }
    }

    option = { #
        name = me_epirus_2_magna.35.a
        trigger = {
            any_in_list = {
                list = epi_2_3_latin_list
                has_variable = me_epi_2_30_flag
            }
        }
        every_in_list = {
            list = epi_2_3_latin_list
            limit = { has_variable = me_epi_2_30_flag }
            if = {
                limit = {
                    scope:audacious_italics_war = {
                        any_war_attacker = { this = scope:italiote_threat_scope }
                    }
                }
                add_to_war = {
                    target = scope:audacious_italics_war
                    leader = no
                    attacker = no
                }
            }
            else = {
                add_to_war = {
                    target = scope:audacious_italics_war
                    leader = no
                    attacker = yes
                }
            }
            root = {
                add_alliance = prev
            }
            remove_variable = me_epi_2_30_flag
        }
    }

    option = { #
        name = me_epirus_2_magna.33.b
        trigger = {
            NOT = {
                any_in_list = {
                    list = epi_2_3_latin_list
                    has_variable = me_epi_2_30_flag
                }
            }
        }
        custom_tooltip = me_epirus_2_magna.35.bt
    }
}

me_epirus_2_magna.36 = {                            # Divide and Conquer - Offer
    type = country_event
    title = me_epirus_2_magna.36.t
    desc = me_epirus_2_magna.36.desc
    picture = council_country
    left_portrait = current_ruler
    right_portrait = scope:me_epirus_scope.current_ruler
    right_portrait = scope:epirote_diplomat_scope
    goto_location = scope:me_epirus_scope.capital_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    option = { # Yep
        name = me_epirus_2_magna.36.a
        show_as_tooltip = {
            scope:me_epirus_scope = { add_alliance = root }
        }
        set_variable = me_epi_2_15_flag
        ai_chance = {
            factor = 40
            modifier = {
                factor = 2
                any_neighbour_country = {
                    country_culture_group = latin
                    num_of_cohorts > root.num_of_cohorts
                }
            }
            modifier = {
                factor = 4
                scope:epirote_diplomat_scope = {
                    OR = {
                        has_trait = orator
                        has_trait = silver_tongued
                        has_trait = cultured
                        charisma >= 8
                        has_trait = ambitious
                    }
                }
            }
            modifier = {
                factor = 100
                c:EPI = {
                    is_ai = yes
                }
            }
        }
    }

    option = { # Nope
        name = me_epirus_2_magna.36.b
        custom_tooltip = me_epirus_2_magna.36.bt
        set_variable = me_epi_2_15_ally_declined
        ai_chance = {
            factor = 40
            modifier = {
                factor = 0
                c:EPI = {
                    is_ai = yes
                }
            }
        }
    }

    after = {
        scope:me_epirus_scope = {
            trigger_event = { id = me_epirus_2_magna.37 }
        }
    }
}

me_epirus_2_magna.37 = {                            # Divide and Conquer - End/Reponse
    type = country_event
    title = me_epirus_2_magna.37.t
    desc = {
        desc = me_epirus_2_magna.37.desc
        first_valid = {
            triggered_desc = { #
                trigger = {
                    scope:me_epi_2_15_ally_scope = { has_variable = me_epi_2_15_flag }
                }
                desc = "me_epirus_2_magna.37.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.37.desc_2"
            }
        }
    }
    picture = greek_political_discussion
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:me_epi_2_15_ally_scope.current_ruler
    goto_location = scope:me_epi_2_15_ally_scope.capital_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = { exists = scope:me_epi_2_15_ally_scope }
            if ={
                limit = {
                    NOT = {
                        scope:me_epi_2_15_ally_scope = { has_variable = me_epi_2_15_flag }
                    }
                }
                custom_tooltip = me_epirus_2_magna.37.tt
                hidden_effect = {
                    scope:me_epi_2_15_ally_scope = {
                        every_owned_province = { add_claim = scope:me_epirus_scope }
                    }
                }
            }
        }    
    }

    option = { # Yepped
        name = me_epirus_2_magna.37.a
        trigger = {
            scope:me_epi_2_15_ally_scope = { has_variable = me_epi_2_15_flag }
        }
        me_epi_kineas_charisma_effect = yes
        add_alliance = scope:me_epi_2_15_ally_scope
        scope:me_epi_2_15_ally_scope = { remove_variable = me_epi_2_15_flag }
        me_epi_remove_diplo_flag_effect = yes
    }

    option = { # Noped
        name = me_epirus_2_magna.37.b
        trigger = {
            NOT = {
                scope:me_epi_2_15_ally_scope = { has_variable = me_epi_2_15_flag }
            }
            any_country = {
                has_land = yes
                primary_culture = italiotian
                is_subject = no
                capital_scope = {
                    OR = {
                        is_in_region = central_italy_region
                        is_in_region = magna_graecia_region
                    }
                }
                num_of_cities <= 5
                NOR = {
                    alliance_with = root
                    war_with = root
                    opinion = { target = root value < -50 }
                    has_variable = me_epi_2_15_ally_declined
                }
            }
        }
        custom_tooltip = me_epirus_2_magna.37.bt
        trigger_event = {
            id = me_epirus_2_magna.15
            days = 3
        }
    }

    option = { # Give up
        name = me_epirus_2_magna.37.c
        trigger = {
            NOT = {
                scope:me_epi_2_15_ally_scope = { has_variable = me_epi_2_15_flag }
            }
            NOT = {
                any_country = {
                    has_land = yes
                    primary_culture = italiotian
                    is_subject = no
                    capital_scope = {
                        OR = {
                            is_in_region = central_italy_region
                            is_in_region = magna_graecia_region
                        }
                    }
                    num_of_cities <= 5
                    NOR = {
                        alliance_with = root
                        war_with = root
                        opinion = { target = root value < -50 }
                        has_variable = me_epi_2_15_ally_declined
                    }
                }
            }
        }
        custom_tooltip = me_epirus_2_magna.37.ct
        me_epi_remove_diplo_flag_effect = yes
    }
}

me_epirus_2_magna.38 = {                            # Pax Epirum - Response
    type = country_event
    title = me_epirus_2_magna.38.t
    desc = {
        desc = me_epirus_2_magna.38.desc
        first_valid = {
            triggered_desc = { #
                trigger = {
                    scope:epi_2_5_rome_scope = { has_variable = me_epi_2_15_flag }
                }
                desc = "me_epirus_2_magna.38.desc_1"
            }
            triggered_desc = { #
                trigger = { always = yes }
                desc = "me_epirus_2_magna.38.desc_2"
            }
        }
    }
    picture = senate_debate
    left_portrait = current_ruler
    left_portrait = scope:epirote_diplomat_scope
    right_portrait = scope:epi_2_5_rome_scope.current_ruler
    right_portrait = scope:epi_2_5_caecus
    goto_location = scope:epi_2_5_rome_scope.capital_scope

    trigger = {
        has_dlc = "Epirus Flavor Pack"
        has_land = yes
    }

    immediate = {
        if = {
            limit = { exists = scope:me_epi_2_15_ally_scope }
            if ={
                limit = {
                    NOT = {
                        scope:me_epi_2_15_ally_scope = { has_variable = me_epi_2_15_flag }
                    }
                }
                custom_tooltip = me_epirus_2_magna.37.tt
                hidden_effect = {
                    scope:me_epi_2_15_ally_scope = {
                        every_owned_province = { add_claim = scope:me_epirus_scope }
                    }
                }
            }
        }  
    }

    option = { # Yepped
        trigger = {
            scope:me_epi_2_15_ally_scope = { has_variable = me_epi_2_15_flag }
        }
        me_epi_kineas_charisma_effect = yes
        add_truce = {
            target = scope:epi_2_5_rome_scope
            duration = 7300
        }
        scope:epi_2_5_rome_scope = {
            add_truce = {
                target = root
                duration = 7300
            }
        }
    }

    option = { # Noped
        name = me_epirus_2_magna.37.b
        trigger = {
            NOT = {
                scope:me_epi_2_15_ally_scope = { has_variable = me_epi_2_15_flag }
            }
        }
        show_as_tooltip = {
            if = {
                limit = { exists = scope:me_epi_2_15_ally_scope }
                scope:me_epi_2_15_ally_scope = {
                    declare_war_with_wargoal = {
                        war_goal = conquer_wargoal
                        province = scope:me_epi_2_5_wargoal
                        target = scope:me_epirus_scope
                    }
                }
            }
        }
        add_country_modifier = {
            name = me_epi_2_5_cmod
            duration = 3650
        }
    }
}