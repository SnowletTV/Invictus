namespace = me_caria

me_caria.1 = { #Strength in Service
    type = country_event
    title = me_caria_1_title
    desc = me_caria_1_desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = root.overlord.current_ruler
    goto_location = capital_scope

    immediate = {
        custom_tooltip = me_caria_1_tooltip
    }
 
    option = {
        name = me_caria_1.a
        add_country_modifier = {
            name = loyal_to_overlord
            duration = -1
        }
    }
}

me_caria.2 = {
    type = country_event
    title = me_caria_2_title
    desc = me_caria_2_desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:caria_ally_country.current_ruler
    goto_location = capital_scope

    immediate = {
        save_scope_as = caria_old_overlord
    }
 
    option = {
        name = me_caria_2.a
        show_as_tooltip = {
            release_subject = scope:caria_ally_country
            add_alliance = scope:caria_ally_country
        }
        scope:caria_ally_country = {
            trigger_event = {
                id = me_caria.201
            }
        }
        ai_chance = { factor = 100 }
    }

    option = {
        name = me_caria_2.b
        add_political_influence = -50
        scope:caria_ally_country = {
            trigger_event = {
                id = me_caria.202
            }
        }
        ai_chance = { factor = 1 }
    }
}

me_caria.201 = { #Proving Our Worth - success
    type = country_event
    title = me_caria_201_title
    desc = me_caria_201_desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:caria_old_overlord.current_ruler
    goto_location = capital_scope

    immediate = {
        custom_tooltip = me_caria_2_tooltip
    }
 
    option = {
        name = me_caria_201.a
        scope:caria_old_overlord = {
            release_subject = scope:caria_ally_country
            add_alliance = scope:caria_ally_country
        }
    }
}

me_caria.202 = { #Proving Our Worth - failure
    type = country_event
    title = me_caria_202_title
    desc = me_caria_202_desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:caria_old_overlord.current_ruler
    goto_location = capital_scope

    immediate = {
        custom_tooltip = me_caria_2_tooltip
    }
 
    option = {
        name = me_caria_202.a
        add_stability = 5
    }
}

me_caria.3 = { # Maritime Training
    type = country_event

    title = me_caria_3_title
    desc = me_caria_3_desc
    picture = diadochi_demetrius_navy

    option = {
        name = "me_caria_3.a"
        custom_tooltip = me_caria_3_tooltip
        add_military_experience = -40
        add_country_modifier = {
            name = maritime_training
            duration = -1
        }
    }
}

me_caria.4 = { # Royal Fleet
    type = country_event

    title = me_caria_4_title
    desc = me_caria_4_desc
    picture = ship_in_storm

    option = {
        name = "me_caria_4.a"
        custom_tooltip = me_caria_4_tooltip
        add_country_modifier = {
            name = caria_navy
            duration = 7000
        }
    }
}

me_caria.5 = { # Construction of a Flagship
    type = country_event

    title = me_caria_5_title
    desc = me_caria_5_desc
    picture = diadochi_demetrius_navy

    left_portrait = current_ruler
    right_portrait = scope:sailor_man

    immediate = {
        hidden_effect = {
            create_character = {
                culture = phoenician
                amazing_martial_effect = yes
                add_trait = oarmaster
                add_trait = seadog
                add_trait = sarcastic
                female = no
                save_scope_as = sailor_man
            }
        }
    }

    option = {
        name = "me_caria_5.a"
        custom_tooltip = me_caria_5_tooltip
        add_treasury = -100
        add_political_influence = -20
        create_unit = {
            navy = yes
            name = ARTEMISIA
            save_scope_as = artemisia
            location = root.capital_scope
            hidden_effect = {
                add_subunit = mega_galley
            }
        }
        hidden_effect = {
            scope:artemisia = {
                set_as_commander = scope:sailor_man
            } 
        }
    }
}

me_caria.6 = { # Donning the Diadem
    type = country_event

    title = me_caria_6_title
    desc = me_caria_6_desc
    picture = diadochi_coronation

    left_portrait = current_ruler
    right_portrait = current_ruler.father

    option = {
        name = "me_caria_6.a"
        custom_tooltip = me_caria_6_tooltip
        change_government = aristocratic_monarchy
        add_political_influence = 100
        add_country_modifier = {
            name = donned_diadem_mod
            duration = -1
        } 
    }
}

me_caria.7 = { # The Pleistarchid Kingdom
    type = country_event

    title = me_caria_7_title
    desc = me_caria_7_desc
    picture = diadochi_coronation

    left_portrait = current_ruler
    right_portrait = current_ruler.father

    fire_only_once = yes

    immediate = {
        custom_tooltip = me_caria_7_tooltip
    }

    option = {
        name = "me_caria_7.a"
        change_country_name = PLEISTARCHID_KINGDOM
        hidden_effect = { change_country_adjective = PLEISTARCHID_ADJ }
        add_stability = 10
        add_legitimacy = 25
        ai_chance = { factor = 75 } 
    }

    option = {
        name = "me_caria_7.b"
        add_stability = 10
        add_legitimacy = 25
        ai_chance = { factor = 25 } 
    }
}

me_caria.8 = { # Correcting Chios
    type = country_event

    title = me_caria_8_title
    desc = me_caria_8_desc
    picture = greek_city

    left_portrait = current_ruler
    right_portrait = scope:chios_country.current_ruler
    goto_location = p:268

    immediate = {
        custom_tooltip = me_caria_8_tooltip
        add_manpower = -2
        hidden_effect = {
            area:ionia_area = {
                every_area_province = {add_claim = ROOT}
            }
            area:aeolia_area = {
                every_area_province = {add_claim = ROOT}
            } 
            save_scope_as = chios_new_master
            if = {
                limit = {
                    p:286.owner = { is_subject = yes }
                }
                p:286.owner.overlord = { save_scope_as = chios_old_master }
            }
            else_if= {
                limit = {
                    p:286.owner = { num_of_cities > 1 }
                }
                p:286.owner = { save_scope_as = chios_old_master }
            }
            if = {#tooltip somewhere
                limit = {
                    any_country = {
                        tag = CHO
                    }
                }
                random_country = {
                    limit = {   
                        tag = CHO
                    }
                    save_scope_as = chios_country           
                }
                if = {
                    limit = {
                        scope:chios_country = {
                            is_subject = yes
                        }
                    }
                    hidden_effect = {
                        scope:chios_country.overlord = { release_subject = scope:chios_country }
                    }
                }
            }
            else = {
                p:286 = { #Chios
                    create_country = {
                        name = {
                            name = CHIOS_NAME
                            adjective = CHIOS_ADJECTIVE
                        }
                        hidden_effect = {
                            set_country_religion = roman_pantheon
                            change_government = oligarchic_republic
                            change_country_color = chios_color
                            change_country_flag = CHIOS_FLAG
                            change_country_tag = CHO
                            save_scope_as = chios_country
                        }
                    }
                }
            }
        }
    }

    option = {
        name = "me_caria_8.a"
        scope:chios_country = {
            change_government = oligarchic_republic
        }
        make_subject = {
            type = feudatory
            target = scope:chios_country
        }   
        p:289 = { #Erythrai
            set_owned_by = scope:chios_country
        }
        add_aggressive_expansion = 10
        ai_chance = { factor = 50 } 
    }

    option = {
        name = "me_caria_8.b"
        scope:chios_country = {
            change_government = oligarchic_republic
        }
        make_subject = {
            type = feudatory
            target = scope:chios_country
        }  
        add_aggressive_expansion = 5
        ai_chance = { factor = 25 } 
    }

    after = {
        every_country = {
            limit = {
                NOT = { THIS = ROOT }
                country_culture_group = hellenic
                OR = {
                    THIS = scope:chios_old_master
                    tag = SEL
                    tag = EGY
                    tag = MAC
                    tag = PRY
                    capital_scope = {
                        OR = {
                            is_in_region = greece_region
                            is_in_region = asia_region
                            is_in_region = macedonia_region
                            is_in_region = cilicia_region
                            is_in_region = palestine_region
                            is_in_region = thrace_region
                            is_in_region = syria_region
                        }
                    }
                }
            }
            trigger_event = { 
                id = me_caria.8001
                days = 3
            }
        }
    }
}

me_caria.8001 = { # Oligarchs Seize Chios
    type = country_event

    title = me_caria_8001_title
    desc = me_caria_8001_desc
    picture = greek_city

    left_portrait = current_ruler
    left_portrait = scope:chios_old_master.current_ruler
    right_portrait = scope:chios_new_master.current_ruler
    right_portrait = scope:chios_country.current_ruler
    goto_location = p:268

    immediate = {
        show_as_tooltip = {
            scope:chios_old_master = {
                scope:chios_country = {
                    change_government = oligarchic_republic
                }
                make_subject = {
                    type = feudatory
                    target = scope:chios_country
                }  
            }
        }
    }

    option = {
        name = "me_caria_8001.a"
        ai_chance = { factor = 1 } 
    }

    option = {
        name = "me_caria_8001.b"
        trigger = {
            THIS = scope:chios_old_master
        }
        scope:chios_country = {
         every_owned_province = {
                add_claim = ROOT
            }
        }
        ai_chance = { factor = 100 } 
    }

    option = {
        name = "me_caria_8001.c"
        trigger = {
            NOT = { THIS = scope:chios_old_master }
        }
        scope:chios_country = {
         every_owned_province = {
                add_claim = ROOT
            }
        }
        ai_chance = { factor = 0 } 
    }
}

me_caria.9 = { # Prince of Priene
    type = country_event

    title = me_caria_9_title
    desc = me_caria_9_desc
    picture = greek_city
    left_portrait = current_ruler
    right_portrait = scope:hieron_scope
    goto_location = p:1972

    immediate = {
        custom_tooltip = me_caria_9_tooltip
        add_aggressive_expansion = 10
        add_manpower = -4
        hidden_effect = {
            save_scope_as = priene_new_master
            if = {
                limit = {
                    p:286.owner = { is_subject = yes }
                }
                p:286.owner.overlord = { save_scope_as = priene_old_master }
            }
            else_if= {
                limit = {
                    p:286.owner = { num_of_cities > 1 }
                }
                p:286.owner = { save_scope_as = priene_old_master }
            }
            p:1972 = { #Priene
                create_country = {
                    name = {
                        name = PRIENE_NAME
                        adjective = PRIENE_ADJECTIVE
                    }
                    hidden_effect = {
                        set_country_religion = roman_pantheon
                        change_government = aristocratic_monarchy
                        change_country_color = priene_extra_orange
                        change_country_flag = PRIENE_FLAG
                        change_country_tag = PRI
                        save_scope_as = priene_country
                    }
                }
            }
            scope:priene_country = {
                create_character = {
                    first_name="Hieron"
                    family_name="Hieronomid"
                    culture = ionian
                    religion = roman_pantheon
                    female = no
                    age = 35
                    save_scope_as = hieron_scope       
                }       
                create_family = scope:hieron_scope
                set_as_ruler = scope:hieron_scope
            }
        }
    }

    option = {
        name = "me_caria_9.a"
        scope:priene_country = {
            set_as_ruler = scope:hieron_scope
            change_government = aristocratic_monarchy
        }
        make_subject = {
            type = feudatory
            target = scope:priene_country
        }   
        ai_chance = { factor = 100 } 
    }

    after = {
        every_country = {
            limit = {
                NOT = { THIS = ROOT }
                country_culture_group = hellenic
                OR = {
                    THIS = scope:priene_old_master
                    tag = SEL
                    tag = EGY
                    tag = MAC
                    tag = PRY
                    capital_scope = {
                        OR = {
                            is_in_region = greece_region
                            is_in_region = asia_region
                            is_in_region = macedonia_region
                            is_in_region = cilicia_region
                            is_in_region = palestine_region
                            is_in_region = thrace_region
                            is_in_region = syria_region
                        }
                    }
                }
            }
            trigger_event = { 
                id = me_caria.8001
                days = 3
            }
        }
    }
}

me_caria.9001 = { # Prince of Priene (notifcation)
    type = country_event
    title = me_caria_9001_title
    desc = me_caria_9001_desc
    picture = greek_city
    left_portrait = current_ruler
    left_portrait = scope:priene_old_master.current_ruler
    right_portrait = scope:priene_new_master.current_ruler
    right_portrait = scope:hieron_scope
    goto_location = p:1972

    immediate = {
        show_as_tooltip = {
            scope:priene_old_master = {
                scope:priene_country = {
                    set_as_ruler = scope:hieron_scope
                    change_government = aristocratic_monarchy
                }
                make_subject = {
                    type = feudatory
                    target = scope:priene_country
                }    
            }
        }
    }

    option = {
        name = "me_caria_9001.a"
        ai_chance = { factor = 25 } 
    }

    option = {
        name = "me_caria_9001.b"
        trigger = {
            OR = {
                THIS = scope:priene_old_master
                capital_scope = {
                   is_in_region = asia_region
                }
            }
                
        }
        scope:priene_country = {
         every_owned_province = {
                add_claim = ROOT
            }
        }
        ai_chance = { factor = 75 } 
    }
}
