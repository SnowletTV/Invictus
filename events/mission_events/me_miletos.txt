namespace = miletos_event

miletos_event.1 = {
    type = country_event
    title = miletos_event.1.t
    desc = miletos_event.1.desc
    picture = greek_home

    left_portrait = current_ruler

    immediate = {
        custom_tooltip = miletos_claims_tt
        hidden_effect = {
            every_province = {
                limit = {
                    is_in_list = miletos_colonies_list
                }
                add_claim = root
            }
        }
    }

    option = {
        name = miletos_event.1.a
        custom_tooltip = miletos_empire_path_tt
    }

    option = {
        name = miletos_event.1.b
        custom_tooltip = miletos_feud_path_tt
        set_variable = miletos_feudatory_path_var
    }
}

miletos_event.2 = {
    type = country_event
    title = miletos_event.2.t
    desc = miletos_event.2.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.2.a
        add_treasury = 300
		add_aggressive_expansion = -10
        custom_tooltip = miletos_asia_tt
        show_as_tooltip = {
            p:252 = {
                save_scope_as = miletos_showcase_scope
                miletos_mission_reward_effect = {
                    PROVINCE = miletos_showcase_scope
                }
            }
        }
        hidden_effect = {
            every_in_list = { 
				list = miletos_colonies_list
				limit = {
					is_in_region = asia_region
					NOT = {
						has_province_modifier = miletos_positive_pmod
					}
				}
				save_scope_as = mil_colony_scope
				miletos_mission_reward_effect = {
					PROVINCE = mil_colony_scope
				}
			}
        }
    }
}

miletos_event.3 = {
    type = country_event
    title = miletos_event.3.t
    desc = miletos_event.3.desc
    picture = greek_home

    left_portrait = current_ruler

    option = { # force assimilation
        name = miletos_event.3.a
        add_treasury = 500
        add_military_experience = 25
        add_country_modifier = {
            name = consolidating_asia_cmod
            duration = 5475 # 15 years
        }
    }

    option = { # integrate
        name = miletos_event.3.b
        add_political_influence = 25
        add_country_modifier = {
            name = integrating_asia_cmod
            duration = 5475 # 15 years
        }
        custom_tooltip = access_anatolian_mil_trad_tt
        set_variable = unlock_anatolian_lydian_var
    }
}

miletos_event.4 = {
    type = country_event
    title = miletos_event.4.t
    desc = miletos_event.4.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.4.a
        every_in_list = { 
            list = miletos_colonies_list
            limit = {
                OR = {
                    is_in_area = europa_area
                    is_in_area = bithynia_inferior_area
                }
                NOT = {
                    has_province_modifier = miletos_positive_pmod
                }
            }
            save_scope_as = mil_colony_scope
            miletos_mission_reward_effect = {
                PROVINCE = mil_colony_scope
            }
        }
        if = {
            limit = {
                owns = 240
                owns = 1453
            }
            custom_tooltip = additional_objective_reached_tt
            add_treasury = 250
            add_political_influence = 25
        }
        else_if = {
            limit = { owns = 1453 }
            custom_tooltip = additional_objective_reached_tt
            add_political_influence = 25
        }
        else_if = {
            limit = { owns = 240 }
            custom_tooltip = additional_objective_reached_tt
            add_treasury = 250
        }
    }
}


miletos_event.5 = {
    type = country_event
    title = miletos_event.5.t
    desc = miletos_event.5.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.5.a
        if = {
            limit = {
                has_variable = miletos_feudatory_path_var
            }
            custom_tooltip = miletos_pontus_feud_tt
        }
        else = {
            custom_tooltip = miletos_pontus_tt
            show_as_tooltip = {
                p:1812 = {
                    save_scope_as = miletos_showcase_scope
                    miletos_mission_reward_effect = {
                        PROVINCE = miletos_showcase_scope
                    }
                }
            }
        }
        hidden_effect = {
            every_in_list = { 
				list = miletos_colonies_list
				limit = {
					OR = {
                        is_in_region = bithynia_region
                        is_in_region = cappadocia_pontica_region
                    }
					NOT = {
						has_province_modifier = miletos_positive_pmod
					}
				}
				save_scope_as = mil_colony_scope
				miletos_mission_reward_effect = {
					PROVINCE = mil_colony_scope
				}
			}
        }
        random_owned_province = {
            limit = {
                is_port = yes
            }
            owner = {
                create_unit = {
                    navy = yes
                    location = prev.prev
                    add_subunit = octere
                    add_subunit = hexere
                    add_subunit = hexere
                    add_subunit = trireme
                    add_subunit = trireme
                    add_subunit = trireme
                    add_subunit = trireme
                    add_subunit = liburnian
                    add_subunit = liburnian
                }
            }
        }
    }
}

miletos_event.6 = {
    type = country_event
    title = miletos_event.6.t
    desc = miletos_event.6.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.6.a
        every_in_list = { 
            list = miletos_colonies_list
            limit = {
                OR = {
                    is_in_region = colchis_region
                }
                NOT = {
                    has_province_modifier = miletos_positive_pmod
                }
            }
            save_scope_as = mil_colony_scope
            miletos_mission_reward_effect = {
                PROVINCE = mil_colony_scope
            }
        }
        if = {
            limit = {
                OR = {
                    any_country_treasure = {
                        this = treasure:treasure_golden_fleece_strand
                    }
                    any_holy_site = {
                        any_province_treasure = {
                            this = treasure:treasure_golden_fleece_strand
                        }
                    }
                }
            }
            custom_tooltip = additional_objective_reached_tt
            add_country_modifier = {
                name = found_golden_fleece
                duration = 1825 # 5 years
            }
        }
    }
}


miletos_event.7 = {
    type = country_event
    title = miletos_event.7.t
    desc = miletos_event.7.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.7.a
        every_in_list = { 
            list = miletos_colonies_list
            limit = {
                OR = {
                    is_in_region = scythia_region
                }
                NOT = {
                    has_province_modifier = miletos_positive_pmod
                }
            }
            save_scope_as = mil_colony_scope
            miletos_mission_reward_effect = {
                PROVINCE = mil_colony_scope
            }
        }
        if = {
            limit = {
                any_country_culture = {
                    is_integrated = yes
                    this.culture.culture_group = culture_group:scythian_east
                }
            }
            custom_tooltip = additional_objective_reached_tt
            add_country_modifier = {
                name = mlo_scythian_experts
                duration = -1
            }
            custom_tooltip = "create_high_martial_rising_star"
            hidden_effect = {
                create_character = {
                    culture = scythian
                    age = 30
                    add_martial = 8
                    add_trait = confident
                }
            }
        }
    }
}

miletos_event.8 = {
    type = country_event
    title = miletos_event.8.t
    desc = miletos_event.8.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.8.a
        if = {
            limit = {
                has_variable = miletos_feudatory_path_var
            }
            custom_tooltip = miletos_thrace_feud_tt
        }
        else = {
            custom_tooltip = miletos_thrace_tt
            show_as_tooltip = {
                p:480 = {
                    save_scope_as = miletos_showcase_scope
                    miletos_mission_reward_effect = {
                        PROVINCE = miletos_showcase_scope
                    }
                }
            }
        }
        hidden_effect = {
            every_in_list = { 
				list = miletos_colonies_list
				limit = {
					OR = {
                        is_in_region = thrace_region
                        is_in_region = moesia_region
                    }
                    NOT = {
                        province_id = 350
                    }
					NOT = {
						has_province_modifier = miletos_positive_pmod
					}
				}
				save_scope_as = mil_colony_scope
				miletos_mission_reward_effect = {
					PROVINCE = mil_colony_scope
				}
			}
        }
        if = {
            limit = {
                any_country_culture = {
                    is_integrated = yes
                    this.culture.culture_group = culture_group:thrace_group
                }
            }
            custom_tooltip = additional_objective_reached_tt
            custom_tooltip = miletos_thracian_mil_trad_tt
            set_variable = mission_thracian_mil_trad_var
        }
    }
}

miletos_event.9 = {
    type = country_event
    title = miletos_event.9.t
    desc = miletos_event.9.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.9.a
        if = {
            limit = {
                has_variable = miletos_feudatory_path_var
            }
            custom_tooltip = miletos_taurica_feud_tt
        }
        else = {
            custom_tooltip = miletos_taurica_tt
            p:4549 = {
                save_scope_as = miletos_showcase_scope
                miletos_mission_reward_effect = {
                    PROVINCE = miletos_showcase_scope
                }
            }
        }
        hidden_effect = {
            every_in_list = { 
                list = miletos_colonies_list
                limit = {
                    OR = {
                        is_in_region = taurica_region
                    }
                    NOT = {
                        has_province_modifier = miletos_positive_pmod
                    }
                }
                save_scope_as = mil_colony_scope
                miletos_mission_reward_effect = {
                    PROVINCE = mil_colony_scope
                }
            }
        }
        add_country_modifier = {
            name = dominion_over_the_pontos_euxinos
            duration = -1
        }
    }
}

miletos_event.10 = {
    type = country_event
    title = miletos_event.10.t
    desc = miletos_event.10.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.10.a
        add_political_influence = -25
        add_treasury = -25
        p:417 = {
            add_claim = root
        }
        random_owned_province = {
            limit = {
                is_port = yes
            }
            owner = {
                create_unit = {
                    navy = yes
                    location = prev.prev
                    add_subunit = octere
                    add_subunit = octere
                    add_subunit = hexere
                    add_subunit = hexere
                    add_subunit = hexere
                    add_subunit = trireme
                    add_subunit = trireme
                    add_subunit = trireme
                    add_subunit = trireme
                    add_subunit = liburnian
                    add_subunit = liburnian
                    add_subunit = liburnian
                    add_subunit = liburnian
                    add_subunit = liburnian
                }
            }
        }
    }
}  

miletos_event.11 = {
    type = country_event
    title = miletos_event.11.t
    desc = miletos_event.11.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.11.a
        p:417 = {
            add_province_modifier = {
                name = megara_beachhead
                duration = 3650
            }
        }
        mission_claim_area_effect = { AREA = central_greece_area }
        mission_claim_area_effect = { AREA = boeotia_area }
        mission_claim_area_effect = { AREA = achaea_area }
        mission_claim_area_effect = { AREA = arcadia_area }
    }
} 

miletos_event.12 = {
    type = country_event
    title = miletos_event.12.t
    desc = miletos_event.12.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.12.a
        mission_claim_region_effect = { REGION = greece_region }
        if = {
            limit = {
                owns = 439
                owns = 424
            }
            custom_tooltip = additional_objective_reached_tt
            add_political_influence = 100
        }
        else_if = {
            limit = {
                owns = 439
            }
            custom_tooltip = additional_objective_reached_tt
            add_political_influence = 25
        }
        else_if = {
            limit = {
                owns = 424
            }
            custom_tooltip = additional_objective_reached_tt
            add_political_influence = 25
        }
    }
} 

miletos_event.13 = {
    type = country_event
    title = miletos_event.13.t
    desc = miletos_event.13.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.13.a
        p:263 = {
            state = {
                add_state_modifier = {
                    name = trading_hub_smod
                    duration = -1
                }
            }
        }
    }
} 

miletos_event.14 = {
    type = country_event
    title = miletos_event.14.t
    desc = miletos_event.14.desc
    picture = greek_home

    left_portrait = current_ruler

    option = {
        name = miletos_event.14.a
    }
}