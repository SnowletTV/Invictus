namespace = me_parthia

me_parthia.1 = {
	type = country_event

	title = "me_parthia.1.t"
	desc = "me_parthia.1.desc"

	left_portrait = current_ruler
	right_portrait = scope:peaceful_politician_dahae
	right_portrait = scope:warlike_politician_dahae

	picture = council_country

	immediate = {
		if = {
			limit = {
				NOT = {
					exists = scope:peaceful_politician_dahae
				}
			}
			random_character = {
				limit = {
					has_any_position = yes
					is_ruler = no
				}
				weight = {
					modifier = {
						factor = 2
						charisma > 8
					}
				}
				save_scope_as = peaceful_politician_dahae
			}
		}
		if = {
			limit = {
				NOT = {
					exists = scope:warlike_politician_dahae
				}
			}
			random_character = {
				limit = {
					has_any_position = yes
					is_ruler = no
					NOT = {
						this = scope:peaceful_politician_dahae
					}
				}
				weight = {
					modifier = {
						factor = 2
						martial > 8
					}
				}
				save_scope_as = warlike_politician_dahae
			}
		}
	}

	option = {
		name = "me_parthia.1.a"
		scope:warlike_politician_dahae = {
			add_loyalty = loyalty_feudatory_settlers_ignored_advisor
		}
	}

	option = {
		name = "me_parthia.1.b"
		scope:peaceful_politician_dahae = {
			add_loyalty = loyalty_feudatory_settlers_ignored_advisor
		}
		add_dahae_help_plus_effect = yes
		add_treasury = -25
		c:PAR = {
			add_treasury = 25
		}
	}
}

me_parthia.2 = {
	type = country_event

	title = "me_parthia.2.t"
	desc = "me_parthia.2.desc"

	left_portrait = current_ruler
	right_portrait = scope:peaceful_politician_dahae
	right_portrait = scope:warlike_politician_dahae

	picture = council_country

	immediate = {
		if = {
			limit = {
				NOT = {
					exists = scope:peaceful_politician_dahae
				}
			}
			random_character = {
				limit = {
					has_any_position = yes
					is_ruler = no
				}
				weight = {
					modifier = {
						factor = 2
						charisma > 8
					}
				}
				save_scope_as = peaceful_politician_dahae
			}
		}
		if = {
			limit = {
				NOT = {
					exists = scope:warlike_politician_dahae
				}
			}
			random_character = {
				limit = {
					has_any_position = yes
					is_ruler = no
					NOT = {
						this = scope:peaceful_politician_dahae
					}
				}
				weight = {
					modifier = {
						factor = 2
						martial > 8
					}
				}
				save_scope_as = warlike_politician_dahae
			}
		}
	}

	option = {
		name = "me_parthia.2.a"
		scope:warlike_politician_dahae = {
			add_loyalty = loyalty_feudatory_settlers_ignored_advisor
		}
	}

	option = {
		name = "me_parthia.2.b"
		scope:peaceful_politician_dahae = {
			add_loyalty = loyalty_feudatory_settlers_ignored_advisor
		}
		add_dahae_help_plus_effect = yes
		add_political_influence = -25
		c:PAR = {
			add_political_influence = 25
		}
	}
}

me_parthia.3 = {
	type = country_event

	title = "me_parthia.3.t"
	desc = "me_parthia.3.desc"

	left_portrait = current_ruler
	right_portrait = scope:peaceful_politician_dahae
	right_portrait = scope:warlike_politician_dahae

	picture = council_country

	immediate = {
		if = {
			limit = {
				NOT = {
					exists = scope:peaceful_politician_dahae
				}
			}
			random_character = {
				limit = {
					has_any_position = yes
					is_ruler = no
				}
				weight = {
					modifier = {
						factor = 2
						charisma > 8
					}
				}
				save_scope_as = peaceful_politician_dahae
			}
		}
		if = {
			limit = {
				NOT = {
					exists = scope:warlike_politician_dahae
				}
			}
			random_character = {
				limit = {
					has_any_position = yes
					is_ruler = no
					NOT = {
						this = scope:peaceful_politician_dahae
					}
				}
				weight = {
					modifier = {
						factor = 2
						martial > 8
					}
				}
				save_scope_as = warlike_politician_dahae
			}
		}
	}

	option = {
		name = "me_parthia.3.a"
		scope:warlike_politician_dahae = {
			add_loyalty = loyalty_feudatory_settlers_ignored_advisor
		}
	}

	option = {
		name = "me_parthia.3.b"
		scope:peaceful_politician_dahae = {
			add_loyalty = loyalty_feudatory_settlers_ignored_advisor
		}
		add_dahae_help_plus_effect = yes
		add_manpower = -2
		c:PAR = {
			add_manpower = 2
		}
	}
}

me_parthia.4 = {
	type = country_event
	title = "me_parthia.4.t"
	desc = "me_parthia.4.desc"

	picture = council_country
	
	immediate = {
		set_variable = {
			name = reward_roll
			value = {
				integer_range = { min = 0 max = 2 }
			}
		}
		change_variable = {
			name = dahae_help_var
			add = {
				value = var:reward_roll
			}
		}
	}

	option = {
		name = "me_parthia.4.a"
		c:PAR = {
			trigger_event = {
				id = me_parthia.4000
				days = 10
			}
		}
		custom_tooltip = me_parthia.4.tt.1
	}
}

me_parthia.4000 = {
	type = country_event
	title = "me_parthia.4000.t"
	desc = "me_parthia.4000.desc"
	picture = council_country
	left_portrait = current_ruler
	right_portrait = scope:dahae_host

	option = { #Independence
		name = me_parthia.4000.a
		custom_tooltip = "me_parthia.4000.a.tt"
		c:DHE = {
			trigger_event = {
				id = me_parthia.4001
			}
		}
		c:SEL = {
			trigger_event = {
				id = me_parthia.4002
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				var:dahae_help_var >= 2
			}
        }
	}
	
	option = { #Remain loyal to SEL
		name = me_parthia.4000.b
		custom_tooltip = "me_parthia.4000.b.tt"
		ai_chance = {
			base = 1
			modifier = {
				add = -1
				var:dahae_help_var < 2
			}
		}
		c:DHE = {
			trigger_event = {
				id = me_parthia.4003
			}
		}
	}
}

me_parthia.4001 = {
	type = country_event

	title = "me_parthia.4001.t"
	desc = "me_parthia.4001.desc"
	picture = council_country
	left_portrait = current_ruler

	option = {
		name = me_parthia.4001.a
		custom_tooltip = "me_parthia.4001.a.tt"
	}
}

me_parthia.4002 = {
	type = country_event

	title = "me_parthia.4002.t"
	desc = "me_parthia.4002.desc"
	picture = council_country
	left_portrait = current_ruler

	option = {
		name = me_parthia.4002.a
		custom_tooltip = "me_parthia.4002.a.tt"
		hidden_effect = {
			every_province = {
				limit = {
					owner = c:PAR
				}
				add_claim = ROOT
			}
		}
	}
}

me_parthia.4003 = {
	type = country_event

	title = "me_parthia.4003.t"
	desc = "me_parthia.4003.desc"
	picture = council_country
	left_portrait = current_ruler

	option = {
		name = me_parthia.4003.a
		custom_tooltip = "me_parthia.4003.a.tt"
		hidden_effect = {
			every_province = {
				limit = {
					owner = c:PAR
				}
				add_claim = ROOT
			}
		}
	}
}

me_parthia.5 = {
	type = country_event

	title = "me_parthia.5.t"
	desc = "me_parthia.5.desc"
	picture = council_country
	left_portrait = current_ruler

	immediate = {
		c:BAC = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = ROOT.capital_scope
				target = ROOT
			}
		}
#		ROOT = {
#			declare_war_with_wargoal = {
#				war_goal = conquer_wargoal
#				province = p:6668
#				target = c:BAC
#			}
#		}
	}
	
	option = {
		name = me_parthia.5.a
		custom_tooltip = "me_parthia.5.a.tt"
	}
}

me_parthia.6 = {
	type = country_event

	title = "me_parthia.6.t"
	desc = "me_parthia.6.desc"
	picture = council_country
	left_portrait = current_ruler

	immediate = {
		every_province = {
			limit = {
				has_owner = yes
				OR = {
					is_in_area = margiana_area
					province_id = 6683
					province_id = 6671
					province_id = 6662
					province_id = 6661		
				}
			}
			add_to_list = dahae_margiana_list
		}
	}
	
	option = {
		name = me_parthia.6.a
		custom_tooltip = "me_parthia.6.a.tt"
		trigger = {
			p:6668 = {
				owner = c:BAC
				controller = ROOT
			}
		}
		every_province = {
			limit = {
				is_in_list = dahae_margiana_list
			}
			set_conquered_by = ROOT
		}
		set_variable = {
			name = parthia_dahae_bactrian_ally_var
		}
		every_current_war = {
			limit = {
				is_war_leader = ROOT
				is_war_leader = c:BAC
			}
			force_white_peace = THIS
		}
	}
	
	option = {
		name = me_parthia.6.b
		custom_tooltip = "me_parthia.6.b.tt"
		trigger = {
			p:6668 = {
				owner = c:BAC
				controller = c:BAC
			}
		}
		every_current_war = {
			limit = {
				is_war_leader = ROOT
				is_war_leader = c:BAC
			}
			force_white_peace = THIS
		}
	}
}

me_parthia.7 = {
	type = country_event

	title = "me_parthia.7.t"
	desc = "me_parthia.7.desc"
	picture = council_country
	left_portrait = current_ruler

	immediate = {
		set_variable = {
			name = number_pops_steppe
			value = 0
		}	    	
		every_owned_province = {
		    limit = {
				is_in_region = sakia_region
		    }
		    ROOT = {
			    change_variable = {
			    	name = number_pops_steppe
			    	add = 1
			    }
			}
		}
		every_owned_province = {
			limit = { 
				is_in_region = parthia_region 
				NOT = { THIS = p:3435 }
			}
			add_to_list = parthia_settling_list
		}
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_1
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_2
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_3
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_4
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_5
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_6
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_7
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_8
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_9
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_10
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_11
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_12
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_13
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_14
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_15
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_16
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_17
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_18
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_19
            remove_from_list = parthia_settling_list
        }
        random_in_list = {
            list = parthia_settling_list
            save_scope_as = parthia_settling_prov_20
            remove_from_list = parthia_settling_list
        }
	}
	
	option = {
		name = me_parthia.7.a
		custom_tooltip = "me_parthia.7.a.tt"
		hidden_effect = {
			while = {
				count = ROOT.var:number_pops_steppe
				every_owned_province = {
					limit = { is_in_region = sakia_region }
					every_pops_in_province = {
						limit = { 
							OR = {
								pop_culture = derbiccan
								pop_culture = parthian
							} 
						}
						random_list = {
							100 = { 
								trigger = {
									scope:parthia_settling_prov_1.total_population <= scope:parthia_settling_prov_1.population_cap
								}
								move_pop = scope:parthia_settling_prov_1 
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_2.total_population <= scope:parthia_settling_prov_2.population_cap
								}
								move_pop = scope:parthia_settling_prov_2
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_3.total_population <= scope:parthia_settling_prov_3.population_cap
								}
								move_pop = scope:parthia_settling_prov_3
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_4.total_population <= scope:parthia_settling_prov_4.population_cap
								}
								move_pop = scope:parthia_settling_prov_4 
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_5.total_population <= scope:parthia_settling_prov_5.population_cap
								}
								move_pop = scope:parthia_settling_prov_5 
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_6.total_population <= scope:parthia_settling_prov_6.population_cap
								}
								move_pop = scope:parthia_settling_prov_6
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_7.total_population <= scope:parthia_settling_prov_7.population_cap
								}
								move_pop = scope:parthia_settling_prov_7
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_8.total_population <= scope:parthia_settling_prov_8.population_cap
								}
								move_pop = scope:parthia_settling_prov_8 
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_9.total_population <= scope:parthia_settling_prov_9.population_cap
								}
								move_pop = scope:parthia_settling_prov_9
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_10.total_population <= scope:parthia_settling_prov_10.population_cap
								}
								move_pop = scope:parthia_settling_prov_10
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_11.total_population <= scope:parthia_settling_prov_11.population_cap
								}
								move_pop = scope:parthia_settling_prov_11 
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_12.total_population <= scope:parthia_settling_prov_12.population_cap
								}
								move_pop = scope:parthia_settling_prov_12
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_13.total_population <= scope:parthia_settling_prov_13.population_cap
								}
								move_pop = scope:parthia_settling_prov_13
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_14.total_population <= scope:parthia_settling_prov_14.population_cap
								}
								move_pop = scope:parthia_settling_prov_14 
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_15.total_population <= scope:parthia_settling_prov_15.population_cap
								}
								move_pop = scope:parthia_settling_prov_15 
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_16.total_population <= scope:parthia_settling_prov_16.population_cap
								}
								move_pop = scope:parthia_settling_prov_16
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_17.total_population <= scope:parthia_settling_prov_17.population_cap
								}
								move_pop = scope:parthia_settling_prov_17
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_18.total_population <= scope:parthia_settling_prov_18.population_cap
								}
								move_pop = scope:parthia_settling_prov_18 
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_19.total_population <= scope:parthia_settling_prov_19.population_cap
								}
								move_pop = scope:parthia_settling_prov_19 
							}
							100 = { 
								trigger = {
									scope:parthia_settling_prov_20.total_population <= scope:parthia_settling_prov_20.population_cap
								}
								move_pop = scope:parthia_settling_prov_20
							}
							1 = { 
								trigger = {
									p:3435.total_population <= p:3435.population_cap
								}
								move_pop = p:3435
							}
						}
					}
				}
			}
			trigger_event = {
				id = me_parthia.7000
				days = 1
			}
		}
	}
}

me_parthia.7000 = {
	type = country_event
	hidden = yes

	immediate = {	
		if = {
			limit = {
				has_variable = parthia_dahae_scythian_ally_var
				any_neighbour_country = {
					country_culture_group = scythia
					alliance_with = root
				}
			}
			random_country = {
				limit = {
					country_culture_group = scythia
					alliance_with = root
				}
				save_scope_as = scythian_ally_scope
			}
			if = {
				limit = {
					owns = 6683
					scope:scythian_ally_scope = {
						NOT = {
							tag = KRZ
						}
					}
				}
				p:6683 = {
					create_country = {
						save_scope_as = temp_country_release_scope
					}
				}
			}
			every_area = {
				limit = { 
					any_area_province = {
						owner = ROOT
					}
					region = region:sakia_region
				}
				every_area_province = {
					limit = {
						owner = ROOT
					}
					set_conquered_by = scope:scythian_ally_scope
				}
			}
		}
		else = {
			every_area = {
				limit = { 
					any_area_province = {
						owner = ROOT
					}
					region = region:sakia_region
				}
				ordered_area_province = {
					limit = {
						owner = ROOT
					}
					max = 1
					order_by = total_population
					add_to_list = to_shatter_list
				}
			}	
			every_in_list = {
				list = to_shatter_list
				create_country = {
					save_scope_as = temp_country_release_scope
				}
				hidden_effect = {
					area = {
						every_area_province = {
							limit = {
								owner = ROOT
							}
							set_owned_by = scope:temp_country_release_scope
						}
					}
				}
			}		
		}
	}
}
