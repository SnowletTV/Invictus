namespace = me_patauion

me_patauion.1 = {
	type = country_event
	hidden = yes

	immediate = {
	    trigger_event = { id = me_patauion.16 }
	}
}

me_patauion.2 = {
	type = country_event
	hidden = yes

	immediate = {
		random_character = {
			limit = {
				is_alive = yes
	    		culture =  peloponnesian
	    		is_ruler = no
	    		NOR = {
	    		    has_variable = pat_event_choosen_character_1
	    		    has_variable = pat_event_choosen_character_2
	    		    has_variable = pat_event_choosen_character_3
	    		}
			}
			set_variable = pat_event_choosen_character_1
			save_scope_as = choosen_character_1
		}
		random_character = {
			limit = {
				is_alive = yes
	    		culture =  peloponnesian
	    		is_ruler = no
	    		NOR = {
	    		    has_variable = pat_event_choosen_character_1
	    		    has_variable = pat_event_choosen_character_2
	    		    has_variable = pat_event_choosen_character_3
	    		}
			}
			set_variable = pat_event_choosen_character_2
			save_scope_as = choosen_character_2
		}
		random_character = {
			limit = {
				is_alive = yes
	    		culture =  peloponnesian
	    		is_ruler = no
	    		NOR = {
	    		    has_variable = pat_event_choosen_character_1
	    		    has_variable = pat_event_choosen_character_2
	    		    has_variable = pat_event_choosen_character_3
	    		}
			}
			set_variable = pat_event_choosen_character_3
			save_scope_as = choosen_character_3
		}
	    trigger_event = { id = me_patauion.17 }#flavour event, - us spartans must stick together
	    every_character = {
	    	limit = {
	    		is_alive = yes
	    		culture =  peloponnesian
	    	}
	    	add_loyalty = loyalty_alliance
	    }
	}
}

me_patauion.3 = {
	type = country_event
	hidden = yes

	immediate = {
		random_allied_country = {
			limit = {
				OR = {
                    primary_culture = aeolian
                    primary_culture = italiotian
                    primary_culture = achaean
                    primary_culture = ionian
                    primary_culture = athenian
                    primary_culture = argolian
                    primary_culture = cretan
                    primary_culture = peloponnesian
                    primary_culture = syracusan
                    primary_culture = aegean
                    primary_culture = troan
                    primary_culture = cypriot
                    primary_culture = cyrenaican
                    primary_culture = macedonian
                    primary_culture = thessalian
                    primary_culture = boeotian
                    primary_culture = bosporan
                    primary_culture = massalian
                    primary_culture = greco_pontic
                    primary_culture = thracian
                    primary_culture = hellenistic
                }
                country_population >= 50
                opinion = {
                    target = root
                    value >= 100
                } 
			}
			save_scope_as = hellenic_country_allied_to_pat
			random_character = {
				limit = {
					is_ruler = yes
				}
				save_scope_as = hellenic_country_allied_to_pat_ruler
			}
		}
	    trigger_event = { id = me_patauion.21 }
	}
}

me_patauion.4 = {
	type = country_event
	hidden = yes

	immediate = {
		random_allied_country = {
			limit = {
				capital_scope = {
                    OR = {
                        is_in_region = cisalpine_gaul_region
                        is_in_area = ariminum_area
                    }
                }
                opinion = {
                    target = root
                    value >= 100
                } 
			}
			save_scope_as = cisalpine_country_allied_to_pat
			random_character = {
				limit = {
					is_ruler = yes
				}
				save_scope_as = cisalpine_country_allied_to_pat_ruler
			}
		}
	    trigger_event = { id = me_patauion.25 }
	}
}

me_patauion.5 = {
	type = country_event
	hidden = yes

	immediate = {
	    trigger_event = { id = me_patauion.18 }
	}
}

me_patauion.6 = {
	type = country_event
	hidden = yes

	immediate = {
	    remove_country_modifier = me_angry_patavi_cmod
	}
}

me_patauion.7 = {
	type = country_event
	hidden = yes

	immediate = {
	    remove_country_modifier = me_pat_difficulty_with_taxation_cmod
	}
}

me_patauion.8 = {
	type = country_event
	hidden = yes

	immediate = {
	    remove_country_modifier = me_pat_outnumbered_aristocracy_cmod
	    trigger_event = {
	    	id = me_patauion.19
	    }
	}
}

me_patauion.9 = {
	type = country_event
	hidden = yes

	immediate = {
	    remove_country_modifier = me_pat_difficulty_with_taxation_cmod
	}
}

me_patauion.10 = {
	type = country_event
	hidden = yes

	immediate = {
	    remove_country_modifier = me_angry_patavi_cmod
	}
}

me_patauion.11 = {
	type = country_event
	hidden = yes

	immediate = {
	    remove_country_modifier = me_pat_outnumbered_aristocracy_cmod
	    trigger_event = { id = me_patauion.20 }
	}
}

me_patauion.12 = {
	type = country_event
	hidden = yes

	immediate = {
	    
	}
}

me_patauion.13 = {
	type = country_event
	hidden = yes

	immediate = {
	    
	}
}

me_patauion.14 = {
	type = country_event
	hidden = yes

	immediate = {
	    
	}
}

me_patauion.15 = {
	type = country_event
	hidden = yes

	immediate = {
	    
	}
}

me_patauion.16 = { #unstable patauion flavour event
	type = country_event 
	title = me_patauion.16.t
	desc = me_patauion.16.desc 
	picture = dagger_behind_back
	left_portrait = current_ruler

	immediate = {
		add_country_modifier = {
			name = me_angry_patavi_cmod
			duration = -1
		}
		add_country_modifier = {
			name = me_pat_outnumbered_aristocracy_cmod
			duration = -1
		}
		add_country_modifier = {
			name = me_pat_difficulty_with_taxation_cmod
			duration = -1
		}
	}

	option = {
		name = me_patauion.16.a
		custom_tooltip = "me_patauion.16.a_tt"
	}
}

me_patauion.17 = { #united aristocracy flavour event
	type = country_event 
	title = me_patauion.17.t
	desc = me_patauion.17.desc 
	picture = greek_court
	left_portrait = current_ruler
	left_portrait = scope:choosen_character_1
	right_portrait = scope:choosen_character_2
	right_portrait = scope:choosen_character_3

	option = {
		name = me_patauion.17.a #Us Spartans must stick together
		custom_tooltip = "me_patauion.17.a_tt" 
	}
}

me_patauion.18 = { #future of Patauion
	type = country_event 
	title = me_patauion.18.t
	desc = me_patauion.18.desc 
	picture = trial_govtype
	left_portrait = current_ruler

	option = {
		name = me_patauion.18.a #Kleonymos is gone, we must look for another destiny to follow...
		custom_tooltip = "me_patauion.18.a_tt" 
        trigger = {
            NOT = {
            	current_ruler = char:176
            }
        }
        set_variable = PAT_forging_a_new_path_for_patauion
	}

	option = {
		name = me_patauion.18.b #Kleonymos will lead us, as he lead us to this land.
		custom_tooltip = "me_patauion.18.b_tt" 
        trigger = {
            current_ruler = char:176
        }
        set_variable = PAT_forging_a_true_spartan_patauion
	}
}

me_patauion.19 = { #A new venetic-spartan patauion
	type = country_event 
	title = me_patauion.19.t
	desc = me_patauion.19.desc 
	picture = greek_philosophers
	left_portrait = current_ruler

	option = {
		name = me_patauion.19.a
		custom_tooltip = "me_patauion.19.a_tt"
		custom_tooltip = "reform_patauion_completion_tt_1"
	    custom_tooltip = "reform_patauion_completion_tt_2"
	    set_country_heritage = spartan_patavium_late_heritage_1
	    hidden_effect = {
            every_owned_province = {
            	every_pops_in_province = {
            		if = {
            		    limit = {
            		    	pop_culture = peloponnesian
            		    }
            		    set_pop_culture = enetoian
            		    set_pop_religion = root.religion
            		}
            	}
            	random_pops_in_province = {
            		limit = {
            			pop_culture = venetic
            		}
            		set_pop_culture = enetoian
            		set_pop_religion = root.religion
            	}
            	random_pops_in_province = {
            		limit = {
            			pop_culture = venetic
            		}
            		set_pop_culture = enetoian
            		set_pop_religion = root.religion
            	}
            	random_pops_in_province = {
            		limit = {
            			pop_culture = venetic
            		}
            		set_pop_culture = enetoian
            		set_pop_religion = root.religion
            	}
            	random_pops_in_province = {
            		limit = {
            			pop_culture = venetic
            		}
            		set_pop_culture = enetoian
            		set_pop_religion = root.religion
            	}
            	random_pops_in_province = {
            		limit = {
            			pop_culture = venetic
            		}
            		set_pop_culture = enetoian
            		set_pop_religion = root.religion
            	}
            	random_pops_in_province = {
            		limit = {
            			pop_culture = venetic
            		}
            		set_pop_culture = enetoian
            		set_pop_religion = root.religion
            	}
            }    
            set_primary_culture_cleanup_effect = {
                NEW_PRIMARY_CULTURE = enetoian
                MAKE_OLD_CULTURE_INTEGRATED = yes
            }
            every_character = {
            	limit = {
            		is_alive = yes
            		OR = {
            		    has_culture = peloponnesian
            		    has_religion = roman_pantheon
            		}
            	}
            	set_culture = enetoian
            }	
        }
	}
}

me_patauion.20 = { #A new Spartan Kingdom
	type = country_event 
	title = me_patauion.20.t
	desc = me_patauion.20.desc 
	picture = greek_city
	left_portrait = current_ruler

	option = {
		name = me_patauion.20.a
		custom_tooltip = "me_patauion.20.a_tt"
        set_country_heritage = spartan_patavium_late_heritage_2
	}
}

me_patauion.21 = { #Ask Hellenic ally for assistance
	type = country_event 
	title = me_patauion.21.t
	desc = me_patauion.21.desc 
	picture = trial_govtype
	left_portrait = current_ruler
	right_portrait = scope:hellenic_country_allied_to_pat_ruler 

	immediate = {
		save_scope_as = pat_country_asking_hellenic_ally_for_help
	}

	option = {
		name = me_patauion.21.a
		custom_tooltip = "me_patauion.21.a_tt"
		scope:hellenic_country_allied_to_pat = {
			trigger_event = {
				id = me_patauion.22
			}
		}
	}
}

me_patauion.22 = { #Patauion asks for assistance (hellenic country)
	type = country_event 
	title = me_patauion.22.t
	desc = me_patauion.22.desc 
	picture = trial_govtype
	left_portrait = current_ruler
	right_portrait = scope:pat_country_asking_hellenic_ally_for_help.current_ruler 

	option = {
		name = me_patauion.22.a #Of course we will help our newfound ally!
		custom_tooltip = "me_patauion.22.a_tt" #2 pops leave for patauion
		add_treasury = -25
		hidden_effect = {
            random_owned_province = {
            	limit = {
            		total_population >= 3
            		any_pops_in_province = {
            			count >= 1
            			OR = {
            				pop_culture = aeolian
                            pop_culture = italiotian
                            pop_culture = achaean
                            pop_culture = ionian
                            pop_culture = athenian
                            pop_culture = argolian
                            pop_culture = cretan
                            pop_culture = peloponnesian
                            pop_culture = syracusan
                            pop_culture = aegean
                            pop_culture = troan
                            pop_culture = cypriot
                            pop_culture = cyrenaican
                            pop_culture = macedonian
                            pop_culture = thessalian
                            pop_culture = boeotian
                            pop_culture = bosporan
                            pop_culture = massalian
                            pop_culture = greco_pontic
                            pop_culture = thracian
                            pop_culture = hellenistic
            			}
            		}
            	}
            	random_pops_in_province = {
            		culture = {
            	    	save_scope_as = pop_culture_to_take_to_patauion
            	    }
            		kill_pop = yes
            	}
            }
            random_owned_province = {
            	limit = {
            		total_population >= 3
            	}
            	random_pops_in_province = {
            		kill_pop = yes
            	}
            }
		}
		scope:pat_country_asking_hellenic_ally_for_help = {
			trigger_event = {
				id = me_patauion.23
			}
		}
		ai_chance = {
			factor = 75
		}
	}

	option = {
		name = me_patauion.22.b
		custom_tooltip = "me_patauion.22.b_tt" #Temporary opinion reduction
		ai_chance = {
			factor = 25
		}
		scope:pat_country_asking_hellenic_ally_for_help = {
			trigger_event = {
				id = me_patauion.24
			}
		}
	}
}

me_patauion.23 = { #Hellenic ally offers colonists and funds
	type = country_event 
	title = me_patauion.23.t
	desc = me_patauion.23.desc 
	picture = greek_court
	left_portrait = current_ruler
	right_portrait = scope:hellenic_country_allied_to_pat_ruler 

	immediate = {
		p:3594 = {
			define_pop = {
				type = freemen
				culture = scope:pop_culture_to_take_to_patauion
				religion = roman_pantheon
			}
			define_pop = {
				type = freemen
				culture = scope:pop_culture_to_take_to_patauion
				religion = roman_pantheon
			}
			define_pop = {
				type = freemen
				culture = scope:pop_culture_to_take_to_patauion
				religion = roman_pantheon
			}
			define_pop = {
				type = slaves
				culture = scope:pop_culture_to_take_to_patauion
				religion = roman_pantheon
			}
		}
		add_treasury = 50
		custom_tooltip = "me_patauion.23_tt"
	}

	option = {
		name = me_patauion.23.a
		custom_tooltip = "me_patauion.23.a_tt"
	}
}

me_patauion.24 = { #Hellenic ally refuses to send any aid
	type = country_event 
	title = me_patauion.24.t
	desc = me_patauion.24.desc 
	picture = trial_govtype
	left_portrait = current_ruler
	right_portrait = scope:hellenic_country_allied_to_pat_ruler 

	immediate = {
		add_opinion = {
			modifier = refused_to_help_patauion_opinion
			target = scope:hellenic_country_allied_to_pat
		}
	}

	option = {
		name = me_patauion.23.a
		custom_tooltip = "me_patauion.23.a_tt"
	}
}

me_patauion.25 = { #Ask Cisalpine ally for assistance
	type = country_event 
	title = me_patauion.21.t
	desc = me_patauion.21.desc 
	picture = trial_govtype
	left_portrait = current_ruler
	right_portrait = scope:cisalpine_country_allied_to_pat_ruler

	immediate = {
		save_scope_as = pat_country_asking_cisapline_ally_for_help
	}

	option = {
		name = me_patauion.25.a
		custom_tooltip = "me_patauion.25.a_tt"
		scope:cisalpine_country_allied_to_pat = {
			trigger_event = {
				id = me_patauion.26
			}
		}
	}
}

me_patauion.26 = { #Patauion asks for assistance (cisalpine country)
	type = country_event 
	title = me_patauion.26.t
	desc = me_patauion.26.desc 
	picture = trial_govtype
	left_portrait = current_ruler
	right_portrait = scope:pat_country_asking_cisalpine_ally_for_help.current_ruler 

	option = {
		name = me_patauion.26.a #Of course we will help our newfound ally!
		custom_tooltip = "me_patauion.26.a_tt"
		add_treasury = -25
		add_opinion = {
			modifier = strengthened_ties_patauion_opinion
			target = scope:pat_country_asking_cisalpine_ally_for_help
		}
		scope:pat_country_asking_cisalpine_ally_for_help = {
			trigger_event = {
				id = me_patauion.27
			}
		}
		ai_chance = {
			factor = 75
		}
	}

	option = {
		name = me_patauion.26.b
		custom_tooltip = "me_patauion.26.b_tt" #Temporary opinion reduction
		ai_chance = {
			factor = 25
		}
		scope:pat_country_asking_cisalpine_ally_for_help = {
			trigger_event = {
				id = me_patauion.28
			}
		}
	}
}

me_patauion.27 = { #Cisalpine ally offers funds
	type = country_event 
	title = me_patauion.27.t
	desc = me_patauion.27.desc 
	picture = celtic_diplomacy
	left_portrait = current_ruler
	right_portrait = scope:cisalpine_country_allied_to_pat_ruler 

	immediate = {
		add_opinion = {
			modifier = strengthened_ties_patauion_opinion
			target = scope:cisalpine_country_allied_to_pat
		}
		add_treasury = 50
		custom_tooltip = "me_patauion.27_tt"
	}

	option = {
		name = me_patauion.27.a
		custom_tooltip = "me_patauion.27.a_tt"
	}
}

me_patauion.28 = { #Cisalpine ally refuses to send any aid
	type = country_event 
	title = me_patauion.28.t
	desc = me_patauion.28.desc 
	picture = trial_govtype
	left_portrait = current_ruler
	right_portrait = scope:cisalpine_country_allied_to_pat_ruler 

	immediate = {
		add_opinion = {
			modifier = refused_to_help_patauion_opinion
			target = scope:cisalpine_country_allied_to_pat
		}
	}

	option = {
		name = me_patauion.28.a
		custom_tooltip = "me_patauion.28.a_tt"
	}
}

me_patauion.29 = {
	type = country_event 
	hidden = yes

	immediate = {
		if = {
			limit = {
				current_ruler = char:176
			}
		}
		trigger_event = me_patauion.30
	}
}

me_patauion.30 = { #Shall we keep kleonymos? (will effect options ahead)
	type = country_event 
	title = me_patauion.30.t
	desc = me_patauion.30.desc
	picture = dagger_behind_back
    
    option = {
		name = me_patauion.30.a #Kleonymos must be removed
		custom_tooltip = "me_patauion.30.a_tt" 
        hidden_effect = {
            set_as_ruler = root.primary_heir
        }
	}

	option = {
		name = me_patauion.30.b #We won't betray our king!
		custom_tooltip = "me_patauion.30.b_tt" 
	}
}