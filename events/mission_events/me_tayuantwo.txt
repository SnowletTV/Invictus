namespace = me_tayuan_ferghana

me_tayuan_ferghana.1 = {
	type = country_event

    title = me_tayuan_ferghana.1.title
    desc = me_tayuan_ferghana.1.desc
    picture = greeks_marching

	option = {
		name = "me_tayuan_ferghana.1.a"
	}
}

me_tayuan_ferghana.2 = {
    type = country_event


    title = me_tayuan_ferghana.2.title
    desc = me_tayuan_ferghana.2.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.2.a"
    }
}

me_tayuan_ferghana.3 = {
    type = country_event


    title = me_tayuan_ferghana.3.title
    desc = me_tayuan_ferghana.3.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.3.a"
        if = {
            limit = {
                owns_or_subject_owns_area = north_tarim_area
            }
            qin_culture_point_effect = yes
        }
        else = {
            zhangzhung_culture_point_effect = yes
        }
    }
}

me_tayuan_ferghana.4 = {
    type = country_event


    title = me_tayuan_ferghana.4.title
    desc = me_tayuan_ferghana.4.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.4.a"
    }
}

me_tayuan_ferghana.7 = {
    type = country_event


    title = me_tayuan_ferghana.7.title
    desc = me_tayuan_ferghana.7.desc
    picture = event_china_frontier_steppe
    left_portrait = current_ruler
    right_portrait = current_ruler.spouse

    goto_location = p:8763

    immediate = {
        p:7184 = {
            hidden_effect = {
                ordered_pops_in_province = {
                    limit = {
                        NOT = {
                            pop_culture = qin
                        }
                    }
                    order_by = pop_hapiness
                    max = 4
                    set_pop_culture = qin
                    set_pop_religion = chinese_religions
                }
            }
        }
        p:6744 = {
            hidden_effect = {
                ordered_pops_in_province = {
                    limit = {
                        NOT = {
                            pop_culture = qin
                        }
                    }
                    order_by = pop_hapiness
                    max = 4
                    set_pop_culture = qin
                    set_pop_religion = chinese_religions
                }
            }
        }
        p:6753 = {
            hidden_effect = {
                ordered_pops_in_province = {
                    limit = {
                        NOT = {
                            pop_culture = qin
                        }
                    }
                    order_by = pop_hapiness
                    max = 1
                    set_pop_culture = qin
                    set_pop_religion = chinese_religions
                }
            }
        }
    }


    option = {
        name = "me_tayuan_ferghana.7.a"
        add_treasury = 20
        current_ruler = {
            add_gold = 50
        }
        current_ruler.spouse = {
			add_gold = 50
		}
    }
}

me_tayuan_ferghana.7001 = {
    type = country_event


    title = me_tayuan_ferghana.7.title
    desc = me_tayuan_ferghana.7001.desc
    picture = event_china_frontier_steppe
    left_portrait = current_ruler
    right_portrait = current_ruler.spouse

    goto_location = p:8763

    immediate = {
        p:7184 = {
            hidden_effect = {
                ordered_pops_in_province = {
                    limit = {
                        NOT = {
                            pop_culture = qin
                        }
                    }
                    order_by = pop_hapiness
                    max = 1
                    set_pop_culture = qin
                    set_pop_religion = chinese_religions
                }
            }
        }
        p:6744 = {
            hidden_effect = {
                ordered_pops_in_province = {
                    limit = {
                        NOT = {
                            pop_culture = qin
                        }
                    }
                    order_by = pop_hapiness
                    max = 1
                    set_pop_culture = qin
                    set_pop_religion = chinese_religions
                }
            }
        }
        p:6753 = {
            hidden_effect = {
                ordered_pops_in_province = {
                    limit = {
                        NOT = {
                            pop_culture = qin
                        }
                    }
                    order_by = pop_hapiness
                    max = 1
                    set_pop_culture = qin
                    set_pop_religion = chinese_religions
                }
            }
        }
    }

    option = {
        name = "me_tayuan_ferghana.7.a"
        add_treasury = 10
        current_ruler = {
			add_gold = 15
		}
        current_ruler.spouse = {
			add_gold = 15
		}
    }
}

me_tayuan_ferghana.12 = {
    type = country_event


    title = me_tayuan_ferghana.12.title
    desc = me_tayuan_ferghana.12.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.12.a"
    }
}

me_tayuan_ferghana.17 = {
    type = country_event


    title = me_tayuan_ferghana.17.title
    desc = me_tayuan_ferghana.17.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.17.a"
    }
}

me_tayuan_ferghana.24 = {
    type = country_event


    title = me_tayuan_ferghana.24.title
    desc = me_tayuan_ferghana.24.desc
    picture = diadochi_coronation
    left_portrait = current_ruler
    right_portrait = scope:tay_ferg_ruler_scope
    right_portrait = scope:ferghanitayruler


    immediate = {
		random_character = {
            limit = {
                has_culture = tayuan
                popularity >= 20
            }
            save_scope_as = tay_ferg_ruler_scope
        }
	}

    option = {
        name = "me_tayuan_ferghana.24.b"
        custom_tooltip = taykingcul_tt
        hidden_effect = {
			every_character = {
				limit = { from_ruler_family = yes }
				set_culture = tayuan
			}
		}
    }

    option = {
        name = "me_tayuan_ferghana.24.a"
        if = {
            limit = {
                exists = scope:tay_ferg_ruler_scope
            }
            set_as_ruler = scope:tay_ferg_ruler_scope
            hidden_effect = {
                create_family = scope:tay_ferg_ruler_scope
            }
        }
        else = {
            custom_tooltip = ferghanitayruler_tt
            hidden_effect = {
                create_character = {
                    culture = "tayuan"
                    female = no
                    add_popularity = 30
                    add_gold = 50
                    add_charisma = 9
                    save_scope_as = ferghanitayruler
                }
                create_family = scope:ferghanitayruler
                set_as_ruler = scope:ferghanitayruler
            }
        }
    }

    option = {
        name = "me_tayuan_ferghana.24.c"
        add_stability = -20
        add_political_influence = -60
    }
}

me_tayuan_ferghana.28 = {
    type = country_event


    title = me_tayuan_ferghana.28.title
    desc = me_tayuan_ferghana.28.desc
    picture = Lang_Shining_event_theme
    left_portrait = current_ruler
    right_portrait = scope:tay_highprieest

    immediate = {
        random_character = {
            limit = {
                has_office = office_high_priest_monarchy
            }
            save_scope_as = tay_highprieest
        }
    }

    option = {
        name = "me_tayuan_ferghana.28.a"
        create_country_treasure = {
            key = i_ching
            icon = old_script_1
            modifier = {
                happiness_for_wrong_religion_modifier = 0.03
                stability_cost_modifier = -0.075
            }
        }
        add_treasury = -40
    }

    option = {
        name = "me_tayuan_ferghana.28.b"
        create_country_treasure = {
            key = four_five_claa
            icon = old_script_2
            modifier = {
                monthly_corruption = -0.22
                monthly_legitimacy = 0.1
            }
        }
        add_treasury = -90
    }

    option = {
        name = "me_tayuan_ferghana.28.c"
        create_country_treasure = {
            key = art_of_war
            icon = old_script_3
            modifier = {
                global_start_experience = 2.0
                land_unit_attrition = -0.025
            }
        }
        add_treasury = -20
    }
}

me_tayuan_ferghana.30 = {
    type = country_event


    title = me_tayuan_ferghana.30.title
    desc = me_tayuan_ferghana.30.desc
    picture = greek_marketplace
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.30.a"
        custom_tooltip = me_tayuan_ferghana.30.a.tt
        trigger_event = {
			id = me_tayuan_ferghana.3001
			days = { 1 2 }
		}
    }
}

me_tayuan_ferghana.38 = {
    type = country_event


    title = me_tayuan_ferghana.38.title
    desc = me_tayuan_ferghana.38.desc
    picture = interesting_histories_city_mountains
    left_portrait = current_ruler
    right_portrait = scope:tay_ionian_country.current_ruler


    option = {
        name = "me_tayuan_ferghana.38.a"
        add_treasury = 50
        scope:tay_ionian_country = {
            add_alliance = ROOT
        }
    }
}

me_tayuan_ferghana.49 = {
    type = country_event


    title = me_tayuan_ferghana.49.title
    desc = me_tayuan_ferghana.49.desc
    picture = greek_theater
    left_portrait = current_ruler
    right_portrait = scope:taymacfella

    immediate = {
        hidden_effect = {
            create_character = {
                culture = macedonian
                religion = vaksh_religion
                save_scope_as = taymacfella
            }
        }
    }


    option = {
        name = "me_tayuan_ferghana.49.a"
        random_country_culture = {
	            limit = {
	                is_culture = macedonian
	            }
	            add_country_culture_modifier = {
	                name = tay_royal_reassurance
	                duration = 7300
	            }
	    }
        add_treasury = 40
        hidden_effect = {
            scope:taymacfella = {
                death = {
				    death_reason = death_mysteriously_retired
				    silent = yes
			    }
            }
        }
    }

    option = {
        name = "me_tayuan_ferghana.49.b"
        hidden_effect = {
            scope:taymacfella = {
                death = {
				    death_reason = death_mysteriously_retired
				    silent = yes
			    }
            }
        }
        custom_tooltip = tay_macdeport_tt
        random_country_culture = {
	        limit = {
	            is_culture = macedonian
	        }
	        set_country_culture_right = slaves
            hidden_effect = {
                area:oxiana_area = {
				    ordered_area_province = {
					    order_by = total_population
					    max = 9
					    while = {
						    count = 2
						    random_pops_in_province = {
                                limit = {
                                    pop_culture = macedonian
                                }
                                kill_pop = yes
                            }
					    }
				    }		
			    }
                area:bactria_area = {
				    ordered_area_province = {
					    order_by = total_population
					    max = 9
					    while = {
						    count = 2
						    random_pops_in_province = {
                                limit = {
                                    pop_culture = macedonian
                                }
                                set_pop_culture = ionian
                            }
					    }
				    }		
			    }
            }
	    }
    }

    option = {
        name = "me_tayuan_ferghana.49.c"
        custom_tooltip = me_tayuan_ferghana.49.c_tt
        hidden_effect = {
            scope:taymacfella = {
                death = {
				    death_reason = death_mysteriously_retired
				    silent = yes
			    }
            }
        }
    }
}

me_tayuan_ferghana. = {
    type = country_event


    title = me_tayuan_ferghana..title
    desc = me_tayuan_ferghana..desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana..a"
    }
}

# EVENT CHAINS

me_tayuan_ferghana.3001 = {
    type = country_event


    title = me_tayuan_ferghana.3001.title
    desc = me_tayuan_ferghana.3001.desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:tay_bdg_plot

    immediate = {
        random_character = {
            limit = {
                has_office = office_master_of_the_guard
            }
            save_scope_as = tay_bdg_plot
        }
    }

    option = {
        name = "me_tayuan_ferghana.3001.a"
        custom_tooltip = me_tayuan_ferghana.3001.a_tt
        if = {
            limit = { 
                scope:tay_bdg_plot = {
                    charisma >= 6
                    character_is_disloyal = no
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3002
			    days = { 10 15 }
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3003
			    days = { 10 15 }
		    }
        }
    }

    option = {
        name = "me_tayuan_ferghana.3001.b"
        custom_tooltip = me_tayuan_ferghana.3001.a_tt
        if = {
            limit = { 
                scope:tay_bdg_plot = {
                    martial >= 9
                    character_is_disloyal = no
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3002
			    days = { 10 15 }
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3003
			    days = { 10 15 }
		    }
        }
    }
}

me_tayuan_ferghana.3002 = {
    type = country_event


    title = me_tayuan_ferghana.3002.title
    desc = me_tayuan_ferghana.3002.desc
    picture = assassination
    left_portrait = current_ruler
    right_portrait = scope:tay_bdg_plot


    option = {
        name = "me_tayuan_ferghana.3002.a"
        add_manpower = -2
        if = {
            limit = { 
                any_country_culture = {
                    count >= 3
                    is_integrated = yes
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3004
			    days = { 110 120 }
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3005
			    days = { 110 120 }
		    }
        }
        custom_tooltip = me_tayuan_ferghana.3002.a_tt
    }
}

me_tayuan_ferghana.3003 = {
    type = country_event


    title = me_tayuan_ferghana.3003.title
    desc = me_tayuan_ferghana.3003.desc
    picture = assassination
    left_portrait = current_ruler
    right_portrait = scope:tay_bdg_plot

    immediate = {
        set_variable = tay_plot_initial_failure
    }

    option = {
        name = "me_tayuan_ferghana.3003.a"
        if = {
            limit = { 
                any_country_culture = {
                    count >= 3
                    is_integrated = yes
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3004
			    days = { 110 120 }
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3005
			    days = { 110 120 }
		    }
        }
        custom_tooltip = me_tayuan_ferghana.3002.a_tt
    }
}

me_tayuan_ferghana.3004 = {
    type = country_event


    title = me_tayuan_ferghana.3004.title
    desc = me_tayuan_ferghana.3004.desc
    picture = greek_city_market
    left_portrait = current_ruler
    right_portrait = scope:tay_guvnahh

    immediate = {
        random_character = {
            limit = {
                is_governor = yes
            }
            save_scope_as = tay_guvnahh
        }
    }


    option = {
        name = "me_tayuan_ferghana.3004.a"
        custom_tooltip = me_tayuan_ferghana.3005.a_tt
        if = {
            limit = {
                random_allied_country = {
                    count >= 2
                    opinion = {
                        target = root
                        value >= 90
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }

    option = {
        name = "me_tayuan_ferghana.3004.b"
        custom_tooltip = me_tayuan_ferghana.3005.b_tt
        if = {
            limit = {
                random_subject = {
                    count >= 2
                    opinion = {
                        target = root
                        value >= 90
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }

    option = {
        name = "me_tayuan_ferghana.3004.c"
        custom_tooltip = me_tayuan_ferghana.3005.c_tt
        if = {
            limit = {
                random_neighbor_country = {
                    count >= 4
                    opinion = {
                        target = root
                        value >= 70
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }
}

me_tayuan_ferghana.3005 = {
    type = country_event


    title = me_tayuan_ferghana.3005.title
    desc = me_tayuan_ferghana.3005.desc
    picture = greek_city_market
    left_portrait = current_ruler
    right_portrait = scope:tay_guvnahh

    immediate = {
        random_character = {
            limit = {
                is_governor = yes
            }
            save_scope_as = tay_guvnahh
        }
        set_variable = tay_plot_middle_failure
    }


    option = {
        name = "me_tayuan_ferghana.3005.a"
        custom_tooltip = me_tayuan_ferghana.3005.a_tt
        if = {
            limit = {
                any_allied_country = {
                    count >= 2
                    opinion = {
                        target = root
                        value >= 90
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }

    option = {
        name = "me_tayuan_ferghana.3005.b"
        custom_tooltip = me_tayuan_ferghana.3005.b_tt
        if = {
            limit = {
                any_subject = {
                    count >= 2
                    opinion = {
                        target = root
                        value >= 90
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }

    option = {
        name = "me_tayuan_ferghana.3005.c"
        custom_tooltip = me_tayuan_ferghana.3005.c_tt
        if = {
            limit = {
                any_neighbor_country = {
                    count >= 4
                    opinion = {
                        target = root
                        value >= 70
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }
}

me_tayuan_ferghana.3006 = {
    type = country_event


    title = me_tayuan_ferghana.3006.title
    desc = me_tayuan_ferghana.3006.desc
    picture = greek_home
    left_portrait = current_ruler
    right_portrait = scope:tayallycountry.current_ruler

    immediate = {
        any_neighbor_country = {
            opinion = {
                        target = root
                        value >= 70
            }
            save_scope_as = tay_allycountry
        }
    }


    option = {
        name = "me_tayuan_ferghana.3006.a"
        if = {
            limit = {
                OR = {
                    AND = {
                        has_variable = tay_plot_initial_failure
                        has_variable = tay_plot_middle_failure
                    }
                    AND = {
                        has_variable = tay_plot_initial_failure
                        has_variable = tay_plot_final_failure
                    }
                    AND = {
                        has_variable = tay_plot_middle_failure
                        has_variable = tay_plot_final_failure
                    }
                    AND = {
                        has_variable = tay_plot_initial_failure
                        has_variable = tay_plot_middle_failure
                        has_variable = tay_plot_final_failure
                    }
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3008
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3009
			    days = 30
		    }
        }
    }
}

me_tayuan_ferghana.3007 = {
    type = country_event


    title = me_tayuan_ferghana.3007.title
    desc = me_tayuan_ferghana.3007.desc
    picture = greek_home
    left_portrait = current_ruler

    immediate = {
        set_variable = tay_plot_final_failure
    }


    option = {
        name = "me_tayuan_ferghana.3006.a"
        if = {
            limit = {
                OR = {
                    AND = {
                        has_variable = tay_plot_initial_failure
                        has_variable = tay_plot_middle_failure
                    }
                    AND = {
                        has_variable = tay_plot_initial_failure
                        has_variable = tay_plot_final_failure
                    }
                    AND = {
                        has_variable = tay_plot_middle_failure
                        has_variable = tay_plot_final_failure
                    }
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3008
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3009
			    days = 30
		    }
        }
    }
}

me_tayuan_ferghana.3008 = {
    type = country_event


    title = me_tayuan_ferghana.3008.title
    desc = me_tayuan_ferghana.3008.desc
    picture = event_hellenic_city_fire
    left_portrait = current_ruler
    left_portrait = current_ruler.spouse
    right_portrait = scope:tay_revoltleader

    immediate = {
        random_character = {
            limit = {
                is_disloyal = yes
            }
            save_scope_as = tay_revoltleader
        }
        current_ruler.family = { save_scope_as = tayruler_family }
    }


    option = {
        name = "me_tayuan_ferghana.3008.a"
        change_government = democratic_republic
		switch_government_type_event_clearup_effect = yes
        set_as_ruler = scope:tay_revoltleader
        scope:tayruler_family = {
            remove_family = ROOT
        }
    }
}

me_tayuan_ferghana.3009 = {
    type = country_event


    title = me_tayuan_ferghana.3009.title
    desc = me_tayuan_ferghana.3009.desc
    picture = greek_siege
    left_portrait = current_ruler
    right_portrait = current_ruler.spouse


    option = {
        name = "me_tayuan_ferghana.3009.a"
        capital_scope.area = {
					every_area_province = {
						remove_province_modifier = tayuan_polises
					}
				}
    }
}

me_tayuan_ferghana.100 = {
    type = country_event


    title = me_tayuan_ferghana.100.title
    desc = me_tayuan_ferghana.100.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.100.a"
    }
}

# War of the Heavenly Horses

me_tayuan_ferghana.001 = {
    type = country_event


    title = me_tayuan_ferghana.001.title
    desc = me_tayuan_ferghana.001.desc
    picture = greek_home
    left_portrait = current_ruler

    trigger = {
        var:qin_culture_points <= 5
        tay_heavenly_points_svalue >= 10
    }

    option = {
        name = "me_tayuan_ferghana.001.a"
    }
}
