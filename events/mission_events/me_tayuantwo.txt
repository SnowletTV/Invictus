namespace = me_tayuan_ferghana

me_tayuan_ferghana.1 = {
	type = country_event

    title = me_tayuan_ferghana.1.title
    desc = me_tayuan_ferghana.1.desc
    picture = greeks_marching

	option = {
		name = "me_tayuan_ferghana.1.a"
	}
}

me_tayuan_ferghana.2 = {
    type = country_event


    title = me_tayuan_ferghana.2.title
    desc = me_tayuan_ferghana.2.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.2.a"
    }
}

me_tayuan_ferghana.3 = {
    type = country_event


    title = me_tayuan_ferghana.3.title
    desc = me_tayuan_ferghana.3.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.3.a"
    }
}

me_tayuan_ferghana.4 = {
    type = country_event


    title = me_tayuan_ferghana.4.title
    desc = me_tayuan_ferghana.4.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.4.a"
    }
}

me_tayuan_ferghana.7 = {
    type = country_event


    title = me_tayuan_ferghana.7.title
    desc = me_tayuan_ferghana.7.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.7.a"
            p:7184 = {
                hidden_effect = {
                    ordered_pops_in_province = {
                        limit = {
                            NOT = {
                                pop_culture = qin
                            }
                        }
                        order_by = pop_hapiness
                        max = 4
                        set_pop_culture = qin
                        set_pop_religion = chinese_religions
                    }
                }
            }
            p:6744 = {
                hidden_effect = {
                    ordered_pops_in_province = {
                        limit = {
                            NOT = {
                                pop_culture = qin
                            }
                        }
                        order_by = pop_hapiness
                        max = 4
                        set_pop_culture = qin
                        set_pop_religion = chinese_religions
                    }
                }
            }
            p:6753 = {
                hidden_effect = {
                    ordered_pops_in_province = {
                        limit = {
                            NOT = {
                                pop_culture = qin
                            }
                        }
                        order_by = pop_hapiness
                        max = 1
                        set_pop_culture = qin
                        set_pop_religion = chinese_religions
                    }
                }
            }
    }

    option = {
        name = "me_tayuan_ferghana.7.b"
    }
}

me_tayuan_ferghana.7001 = {
    type = country_event


    title = me_tayuan_ferghana.7001.title
    desc = me_tayuan_ferghana.7001.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.7001.a"
    }
}

me_tayuan_ferghana.12 = {
    type = country_event


    title = me_tayuan_ferghana.12.title
    desc = me_tayuan_ferghana.12.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.12.a"
    }
}

me_tayuan_ferghana.17 = {
    type = country_event


    title = me_tayuan_ferghana.17.title
    desc = me_tayuan_ferghana.17.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.17.a"
    }
}

me_tayuan_ferghana.30 = {
    type = country_event


    title = me_tayuan_ferghana.30.title
    desc = me_tayuan_ferghana.30.desc
    picture = greek_marketplace
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.30.a"
        custom_tooltip = me_tayuan_ferghana.30.a.tt
        trigger_event = {
			id = me_tayuan_ferghana.3001
			days = { 1 2 }
		}
    }
}

me_tayuan_ferghana. = {
    type = country_event


    title = me_tayuan_ferghana..title
    desc = me_tayuan_ferghana..desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana..a"
    }
}

# EVENT CHAINS

me_tayuan_ferghana.3001 = {
    type = country_event


    title = me_tayuan_ferghana.3001.title
    desc = me_tayuan_ferghana.3001.desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:tay_bdg_plot

    immediate = {
        random_character = {
            limit = {
                has_office = office_master_of_the_guard
            }
            save_scope_as = tay_bdg_plot
        }
    }

    option = {
        name = "me_tayuan_ferghana.3001.a"
        custom_tooltip = me_tayuan_ferghana.3001.a_tt
        if = {
            limit = { 
                scope:tay_bdg_plot = {
                    charisma >= 6
                    character_is_disloyal = no
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3002
			    days = { 10 15 }
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3003
			    days = { 10 15 }
		    }
        }
    }

    option = {
        name = "me_tayuan_ferghana.3001.b"
        custom_tooltip = me_tayuan_ferghana.3001.a_tt
        if = {
            limit = { 
                scope:tay_bdg_plot = {
                    martial >= 9
                    character_is_disloyal = no
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3002
			    days = { 10 15 }
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3003
			    days = { 10 15 }
		    }
        }
    }
}

me_tayuan_ferghana.3002 = {
    type = country_event


    title = me_tayuan_ferghana.3002.title
    desc = me_tayuan_ferghana.3002.desc
    picture = assassination
    left_portrait = current_ruler
    right_portrait = scope:tay_bdg_plot


    option = {
        name = "me_tayuan_ferghana.3002.a"
        add_manpower = -2
        if = {
            limit = { 
                any_country_culture = {
                    count >= 3
                    is_integrated = yes
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3004
			    days = { 110 120 }
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3005
			    days = { 110 120 }
		    }
        }
        custom_tooltip = me_tayuan_ferghana.3002.a_tt
    }
}

me_tayuan_ferghana.3003 = {
    type = country_event


    title = me_tayuan_ferghana.3003.title
    desc = me_tayuan_ferghana.3003.desc
    picture = assassination
    left_portrait = current_ruler
    right_portrait = scope:tay_bdg_plot

    immediate = {
        set_variable = tay_plot_initial_failure
    }

    option = {
        name = "me_tayuan_ferghana.3003.a"
        if = {
            limit = { 
                any_country_culture = {
                    count >= 3
                    is_integrated = yes
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3004
			    days = { 110 120 }
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3005
			    days = { 110 120 }
		    }
        }
        custom_tooltip = me_tayuan_ferghana.3002.a_tt
    }
}

me_tayuan_ferghana.3004 = {
    type = country_event


    title = me_tayuan_ferghana.3004.title
    desc = me_tayuan_ferghana.3004.desc
    picture = greek_city_market
    left_portrait = current_ruler
    right_portrait = scope:tay_guvnahh

    immediate = {
        random_character = {
            limit = {
                is_governor = yes
            }
            save_scope_as = tay_guvnahh
        }
    }


    option = {
        name = "me_tayuan_ferghana.3004.a"
        custom_tooltip = me_tayuan_ferghana.3005.a_tt
        if = {
            limit = {
                random_allied_country = {
                    count >= 2
                    opinion = {
                        target = root
                        value >= 90
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }

    option = {
        name = "me_tayuan_ferghana.3004.b"
        custom_tooltip = me_tayuan_ferghana.3005.b_tt
        if = {
            limit = {
                random_subject = {
                    count >= 2
                    opinion = {
                        target = root
                        value >= 90
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }

    option = {
        name = "me_tayuan_ferghana.3004.c"
        custom_tooltip = me_tayuan_ferghana.3005.c_tt
        if = {
            limit = {
                random_neighbor_country = {
                    count >= 4
                    opinion = {
                        target = root
                        value >= 70
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }
}

me_tayuan_ferghana.3005 = {
    type = country_event


    title = me_tayuan_ferghana.3005.title
    desc = me_tayuan_ferghana.3005.desc
    picture = greek_city_market
    left_portrait = current_ruler
    right_portrait = scope:tay_guvnahh

    immediate = {
        random_character = {
            limit = {
                is_governor = yes
            }
            save_scope_as = tay_guvnahh
        }
        set_variable = tay_plot_middle_failure
    }


    option = {
        name = "me_tayuan_ferghana.3005.a"
        custom_tooltip = me_tayuan_ferghana.3005.a_tt
        if = {
            limit = {
                any_allied_country = {
                    count >= 2
                    opinion = {
                        target = root
                        value >= 90
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }

    option = {
        name = "me_tayuan_ferghana.3005.b"
        custom_tooltip = me_tayuan_ferghana.3005.b_tt
        if = {
            limit = {
                any_subject = {
                    count >= 2
                    opinion = {
                        target = root
                        value >= 90
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }

    option = {
        name = "me_tayuan_ferghana.3005.c"
        custom_tooltip = me_tayuan_ferghana.3005.c_tt
        if = {
            limit = {
                any_neighbor_country = {
                    count >= 4
                    opinion = {
                        target = root
                        value >= 70
                    } 
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3006
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3007
			    days = 30
		    }
        }
    }
}

me_tayuan_ferghana.3006 = {
    type = country_event


    title = me_tayuan_ferghana.3006.title
    desc = me_tayuan_ferghana.3006.desc
    picture = greek_home
    left_portrait = current_ruler
    right_portrait = scope:tayallycountry.current_ruler

    immediate = {
        any_neighbor_country = {
            opinion = {
                        target = root
                        value >= 70
            }
            save_scope_as = tay_allycountry
        }
    }


    option = {
        name = "me_tayuan_ferghana.3006.a"
        if = {
            limit = {
                OR = {
                    AND = {
                        has_variable = tay_plot_initial_failure
                        has_variable = tay_plot_middle_failure
                    }
                    AND = {
                        has_variable = tay_plot_initial_failure
                        has_variable = tay_plot_final_failure
                    }
                    AND = {
                        has_variable = tay_plot_middle_failure
                        has_variable = tay_plot_final_failure
                    }
                    AND = {
                        has_variable = tay_plot_initial_failure
                        has_variable = tay_plot_middle_failure
                        has_variable = tay_plot_final_failure
                    }
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3008
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3009
			    days = 30
		    }
        }
    }
}

me_tayuan_ferghana.3007 = {
    type = country_event


    title = me_tayuan_ferghana.3007.title
    desc = me_tayuan_ferghana.3007.desc
    picture = greek_home
    left_portrait = current_ruler

    immediate = {
        set_variable = tay_plot_final_failure
    }


    option = {
        name = "me_tayuan_ferghana.3006.a"
        if = {
            limit = {
                OR = {
                    AND = {
                        has_variable = tay_plot_initial_failure
                        has_variable = tay_plot_middle_failure
                    }
                    AND = {
                        has_variable = tay_plot_initial_failure
                        has_variable = tay_plot_final_failure
                    }
                    AND = {
                        has_variable = tay_plot_middle_failure
                        has_variable = tay_plot_final_failure
                    }
                }
            }
            trigger_event = {
			    id = me_tayuan_ferghana.3008
			    days = 30
		    }
        }
        else = {
            trigger_event = {
			    id = me_tayuan_ferghana.3009
			    days = 30
		    }
        }
    }
}

me_tayuan_ferghana.3008 = {
    type = country_event


    title = me_tayuan_ferghana.3008.title
    desc = me_tayuan_ferghana.3008.desc
    picture = event_hellenic_city_fire
    left_portrait = current_ruler
    right_portrait = scope:tay_revoltleader

    immediate = {
        random_character = {
            limit = {
                is_disloyal = yes
            }
            save_scope_as = tay_revoltleader
        }
    }


    option = {
        name = "me_tayuan_ferghana.3008.a"
        change_government = democratic_republic
		switch_government_type_event_clearup_effect = yes
        set_as_ruler = scope:tay_revoltleader
    }
}

me_tayuan_ferghana.3009 = {
    type = country_event


    title = me_tayuan_ferghana.3009.title
    desc = me_tayuan_ferghana.3009.desc
    picture = greek_home
    left_portrait = current_ruler


    option = {
        name = "me_tayuan_ferghana.3009.a"
    }
}

# Decisions

