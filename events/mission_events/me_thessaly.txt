namespace = thessalian_league_0

thessalian_league_0.1 = {
    type = country_event
    title = thessalian_league_0_title
    desc = thessalian_league_0_desc
    picture = throneroom
    left_portrait = current_ruler
    right_portrait = scope:thessalian_nobleman

    immediate = {
        hidden_effect = {
            create_character = {
                culture = thessalian
                religion = roman_pantheon
                female = no
                save_scope_as = thessalian_nobleman
                good_martial_effect = yes
                good_charisma_effect = yes
                good_finesse_effect = yes
                add_trait="equestrian"
            }         
        }    
    }
    option = {      
        name = thessalian_league_0.a
            add_country_modifier = {
                name = thessalian_cavalrymen
                duration = 18250
            }    
        ai_chance = { factor = 70 }
    	}

    option = {  
        name = thessalian_league_0.b
        custom_tooltip = thessalian_league_release_tooltip
            hidden_effect = {
                 random_owned_province = {
                    limit = { is_in_area = thessaly_area }
                    create_country = {
                        name = {
                            name = THESSALIAN_LEAGUE
                            adjective = THESSALY_ADJECTIVE
                        }
                        change_country_flag = THESSALY_FLAG
                        change_country_tag = THL
                        change_country_color = thessalian_color   
                        set_primary_culture = thessalian  
                        set_country_heritage = thessalian_league_heritage    
                        change_government = aristocratic_republic
                        save_scope_as = thessaly_scope                                  
                        }
                    }
                    scope:thessalian_nobleman = {
                        move_country_with_entire_family_effect = { COUNTRY = scope:thessaly_scope }
                    }
                    scope:thessaly_scope = {
                        set_as_ruler = scope:thessalian_nobleman                  
                    }                    
                every_owned_province = {
                    limit = { is_in_area = thessaly_area }
                    set_owned_by = scope:thessaly_scope
                    }
                make_subject = {
                    target = scope:thessaly_scope
                    type = subject_colony
                }
                area:thessaly_area = {
                    ordered_area_province = {
                        limit = {
                            OR = {
                                province_id = 394
                                province_id = 389
                                province_id = 390
                            }
                        }
                        order_by = total_population
                        save_scope_as = thessaly_cap_scope
                    }
                }
               scope:thessaly_scope = {
                    set_primary_culture_cleanup_effect = {
                        NEW_PRIMARY_CULTURE = thessalian
                        MAKE_OLD_CULTURE_INTEGRATED = yes
                        }
                    }      
                scope:thessaly_scope = { set_capital = scope:thessaly_cap_scope }
                scope:thessaly_scope = {
                capital_scope = {
                    create_state_pop = nobles
                    create_state_pop = nobles
                }
                random_owned_province = {
                    create_state_pop = nobles
                }
                random_owned_province = {
                    create_state_pop = nobles
                }
                random_owned_province = {
                    create_state_pop = nobles
                }
                random_owned_province = {
                    create_state_pop = nobles
                }
                random_owned_province = {
                    create_state_pop = nobles
                }
                add_4_free_province_investments = yes
                capital_formable_small_effect = yes
                formable_capital_modifier_normal_effect = yes
                    add_manpower = 5
                    add_treasury = 300
                    add_opinion = {
                        target = root
                        modifier = opinion_liberated_us
                    }
                    add_country_modifier = { name = athenian_mission_04_loyalist_path }                    
                c:THL = {
                    every_character = {
                        limit = {
                            AND = {
                                OR = {
                                    from_ruler_family = yes
                                    is_minor_character = no
                                }
                                has_culture = root.culture
                            }
                        }
                        set_culture = thessalian
                    }                    
                }            
            }
        }        
            add_country_modifier = {
                name = thessalian_cavalrymen
                duration = 3650
            }         
            set_variable = restored_thessalian_league          
        }    
        ai_chance = { factor = 20 }

    option = {  
        name = thessalian_league_0.c
        custom_tooltip = thessalian_league_2_release_tooltip
            hidden_effect = {
                 random_owned_province = {
                    limit = { is_in_area = thessaly_area }
                    create_country = {
                        name = {
                            name = THESSALY_NAME
                            adjective = THESSALY_ADJECTIVE
                        }
                        change_country_flag = THESSALY_FLAG
                        change_country_tag = THL
                        change_country_color = thessalian_color   
                        set_primary_culture = thessalian  
                        set_country_heritage = thessalian_league_heritage    
                        change_government = tyrannic_monarchy
                        save_scope_as = thessaly_scope                                  
                        }
                    }
                    scope:thessalian_nobleman = {
                        move_country_with_entire_family_effect = { COUNTRY = scope:thessaly_scope }
                    }
                    scope:thessaly_scope = {
                        set_as_ruler = scope:thessalian_nobleman                  
                    }                        
                every_owned_province = {
                    limit = { is_in_area = thessaly_area }
                    set_owned_by = scope:thessaly_scope
                    }
                make_subject = {
                    target = scope:thessaly_scope
                    type = feudatory
                }
                area:thessaly_area = {
                    ordered_area_province = {
                        limit = {
                            OR = {
                                province_id = 394
                                province_id = 389
                                province_id = 390
                            }
                        }
                        order_by = total_population
                        save_scope_as = thessaly_cap_scope
                    }
                }
               scope:thessaly_scope = {
                    set_primary_culture_cleanup_effect = {
                        NEW_PRIMARY_CULTURE = thessalian
                        MAKE_OLD_CULTURE_INTEGRATED = yes
                        }
                    }      
                scope:thessaly_scope = { set_capital = scope:thessaly_cap_scope }
                scope:thessaly_scope = {
                capital_scope = {
                    create_state_pop = nobles
                    create_state_pop = nobles
                }
                random_owned_province = {
                    create_state_pop = nobles
                }
                random_owned_province = {
                    create_state_pop = nobles
                }
                random_owned_province = {
                    create_state_pop = nobles
                }
                random_owned_province = {
                    create_state_pop = nobles
                }
                random_owned_province = {
                    create_state_pop = nobles
                }
                add_4_free_province_investments = yes
                capital_formable_small_effect = yes
                formable_capital_modifier_normal_effect = yes
                    add_manpower = 5
                    add_treasury = 300
                    add_opinion = {
                        target = root
                        modifier = opinion_liberated_us
                    }
                    add_country_modifier = { name = me_gre_2_self_government_cmod }                    
                c:THL = {
                    every_character = {
                        limit = {
                            AND = {
                                OR = {
                                    from_ruler_family = yes
                                    is_minor_character = no
                                }
                                has_culture = root.culture
                            }
                        }
                        set_culture = thessalian
                    }                    
                }            
            }
        }        
            add_country_modifier = {
                name = thessalian_cavalrymen
                duration = 3650
            }         
            set_variable = restored_thessalian_league          
        }    
        ai_chance = { factor = 10 }
    }           