namespace = rel_flavor_kemetic

# A question of Maat
rel_flavor_kemetic.1 = {
	type = country_event
	title = "rel_flavor_kemetic.1.t"
	desc = "rel_flavor_kemetic.1.desc"
	picture = persepolis
	
	left_portrait = current_ruler

	goto_location = scope:randomized_country_province
	
	trigger = {
		current_date > 470.1.1
		religion = egyptian_pantheon
		current_ruler = {
			char_is_bad_leader_trigger = yes
		}
		any_owned_province = {
			OR = {
			dominant_province_culture = egyptian
			dominant_province_culture = meroitic
			}
			has_city_status = yes
		}
	}

	immediate = {
		random_owned_province = {
			limit = {
				OR = {
				dominant_province_culture = egyptian
				dominant_province_culture = meroitic
				}
				has_city_status = yes
				is_capital = no
			}
			save_scope_as = randomized_country_province
		}
	}

	option = {
		name = "rel_flavor_kemetic.1.a"
		add_tyranny = tyranny_medium
		if = {
			limit = {
				is_monarchy = yes
			}
			add_legitimacy = subtract_legitimacy_medium
		}
		current_ruler = {
			add_popularity = subtract_popularity_small
		}
		#Trigger Rebellion two rebellion events
            trigger_event = {
                id = rel_flavor_kemetic.6
                days = { 365 720 }
            }		
	}

	option = {
		name = "rel_flavor_kemetic.1.b"
		add_treasury = {
		subtract = root.has_monthly_income
		multiply = 6
		}
		add_political_influence = subtract_influence_large
		add_country_modifier = {
			name = country_improvement_appeased_maat
			duration = 1825
		}
	}

	option = {
		name = "rel_flavor_kemetic.1.c"
		scope:randomized_country_province = {
			add_province_modifier = {
				name = province_diminishment_questionable_maat
				duration = 3650	
			} 
		}
		#Trigger Rebellion two rebellion events
            trigger_event = {
                id = rel_flavor_kemetic.6
                days = { 365 720 }
            }		
	}
}

# Seeking out an oracle in times of instability
rel_flavor_kemetic.2 = {
	type = country_event
	title = "rel_flavor_kemetic.2.t"
	desc = "rel_flavor_kemetic.2.desc"
	picture = hellenic_temple
	
	left_portrait = current_ruler
	right_portrait = scope:randomized_priest

	trigger = {
		NOT = { has_variable = rel_flavor_kemetic_2_cooldown }
		religion = egyptian_pantheon
		stability < 30
		NOT = { has_country_modifier = country_improvement_found_guidance }
		any_character = {
			has_priest_office_trigger = yes
		}
	}

	immediate = {
		random_character = {
			limit = {
				has_priest_office_trigger = yes
			}
			save_scope_as = randomized_priest
		}
		set_variable = {
			name = rel_flavor_kemetic_2_cooldown
			days = 7300
		}		
	}

	option = {
		name = "rel_flavor_kemetic.2.a"
		add_stability_effect = yes
		add_political_influence = subtract_influence_large
		##Trigger random List either Find Guidance or Don't find Guidance
            trigger_event = {
                id = rel_flavor_kemetic.8
                days = { 180 365 }
            }		
	}

	option = {
		name = "rel_flavor_kemetic.2.b"
		if = {
			limit = {
				is_monarchy = yes
			}
			add_legitimacy = subtract_legitimacy_medium
		}
		current_ruler = {
			add_popularity = subtract_popularity_small
		}
	}
}

# Constructing a new temple
rel_flavor_kemetic.3 = {
	type = country_event
	title = "rel_flavor_kemetic.3.t"
	desc = "rel_flavor_kemetic.3.desc"
	picture = hellenic_temple
	
	left_portrait = current_ruler
	right_portrait = scope:randomized_priest

	goto_location = scope:capital_province
	
	trigger = {
		religion = egyptian_pantheon
		NOT = { has_variable = rel_flavor_kemetic_3_cooldown }
		any_character = {
			has_priest_office_trigger = yes
		}
	}

	immediate = {
		random_character = {
			limit = {
				has_priest_office_trigger = yes
			}
			save_scope_as = randomized_priest
		}
		capital_scope = {
			save_scope_as = capital_province
		}
		hidden_effect = {
			set_variable = {
				name = rel_flavor_kemetic_3_cooldown
				days = 7300
			}
		}
	}

	option = {
		name = "rel_flavor_kemetic.3.a"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 6
		}
		add_country_modifier = {
			name = country_improvement_temple_of_isis
			duration = 3650
		}
		current_ruler = {
			add_popularity = popularity_small
		}
		scope:randomized_priest = {
			add_loyalty = loyalty_temple_funding
		}
	}

	option = {
		name = "rel_flavor_kemetic.3.b"
		scope:randomized_priest = {
			add_loyalty = loyalty_priest_refused
		}
	}
}

# A religious proceeding, calming the populace
rel_flavor_kemetic.4 = {
	type = country_event
	title = "rel_flavor_kemetic.4.t"
	desc = "rel_flavor_kemetic.4.desc"
	picture = religious_rite
	
	left_portrait = current_ruler
	right_portrait = scope:randomized_priest

	trigger = {
		#religion = egyptian_pantheon
		NOT = { has_variable = rel_flavor_kemetic_4_cooldown }
		any_character = {
			has_priest_office_trigger = yes
		}
	}

	immediate = {
		random_character = {
			limit = {
				has_priest_office_trigger = yes
			}
			save_scope_as = randomized_priest
		}
		hidden_effect = {
			set_variable = {
				name = rel_flavor_kemetic_4_cooldown
				days = 7300
			}
		}
	}

	option = {
		name = "rel_flavor_kemetic.4.a"
		remove_stability_effect = yes
		add_country_modifier = {
			name = country_modifier_closed_temples
			duration = 3650
		}
		scope:randomized_priest = {
			add_loyalty = loyalty_priest_autonomy
		}
	}

	option = {
		name = "rel_flavor_kemetic.4.b"
		add_stability_effect_small = yes
		scope:randomized_priest = {
			add_loyalty = loyalty_religious_proceding
		}
	}

	option = {
		name = "rel_flavor_kemetic.4.c"
		add_stability_effect = yes
		add_country_modifier = {
			name = country_modifier_opened_temples
			duration = 3650
		}
		scope:randomized_priest = {
			add_loyalty = loyalty_opened_temples
		}
	}
}

# The disappearance of the sacred beast
rel_flavor_kemetic.5 = {
	type = country_event
	title = "rel_flavor_kemetic.5.t"
	desc = "rel_flavor_kemetic.5.desc"
	picture = hellenic_temple
	
	left_portrait = current_ruler
	right_portrait = scope:randomized_priest

	trigger = {
		religion = egyptian_pantheon
		any_character = {
			has_priest_office_trigger = yes
		}
	}

	immediate = {
		random_character = {
			limit = {
				has_priest_office_trigger = yes
			}
			save_scope_as = randomized_priest
		}
	}

	option = {
		name = "rel_flavor_kemetic.5.a"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 10
		}
	}

	option = {
		name = "rel_flavor_kemetic.5.b"
		add_political_influence = subtract_influence_large
		add_stability_effect_small = yes
	}
}
####ADDED EVENTS####
# The Curse of Maat (Warning rebellion event)
rel_flavor_kemetic.6 = {
	type = country_event
	title = "rel_flavor_kemetic.6.t"
	desc = "rel_flavor_kemetic.6.desc"
	picture = persepolis
	
	goto_location = scope:randomized_country_province

	left_portrait = current_ruler

	option = {	##Peasants will always complain
		name = "rel_flavor_kemetic.6.a"
		add_tyranny = tyranny_medium
		if = {
			limit = {
				is_monarchy = yes
			}
			add_legitimacy = subtract_legitimacy_medium
		}
            trigger_event = {
                id = rel_flavor_kemetic.7
                days = { 365 720 }
            }
	}

	option = {	##Some Money should change their minds
		name = "rel_flavor_kemetic.6.b"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 40
		}		
	}
}
# The Curse of Maat (Province Rebellion)
rel_flavor_kemetic.7 = {
	type = country_event
	title = "rel_flavor_kemetic.7.t"
	desc = "rel_flavor_kemetic.7.desc"
	picture = army_desert
	fire_only_once = yes

	left_portrait = scope:maat_rebellion_leader
	right_portrait = scope:maat_rebellion_leader

	goto_location = p:613

	trigger = {
		owns = 613
	}

	immediate = {
		hidden_effect = {
				create_character = {
					first_name = "Isfet"
					family_name = "Harbinger of Chaos"
					culture = egyptian
					religion = egyptian_pantheon
					age = 25
					female = no
					no_stats = yes
					no_traits = yes
	        		hidden_effect = {
	        			add_martial = 10
	        			good_charisma_effect = yes
	        			average_finesse_effect = yes
	        			good_zeal_effect = yes
	        			add_trait = brave
	        			add_trait = proud
	        			add_trait = aggressive
	        			add_trait = blind
	        		}
	        		save_scope_as = maat_rebellion_leader
				}
        }
		hidden_effect = {
            p:613 = {
                    create_country = {
						change_country_name = "MAAT_REBELLION_NAME"
						change_country_flag = CURSE_OF_MAAT_FLAG
						set_country_heritage = curse_of_maat_heritage
						change_country_color =  "isfet_color"    
                        save_scope_as = bane_of_dementive
                        change_country_tag = ZZW
                    }
			add_vfx = {
				name = "desert_sandstorm"
				duration = 365
			}
				every_neighbor_province = {
					limit = {
						NOT = { has_province_modifier = desert_storm }
					}
					add_vfx = {
						name = "desert_sandstorm"
						duration = 365
					}
				}                    
                }
                p:614 = {
					add_vfx = {
						name = "desert_sandstorm"
						duration = 365
					}
						every_neighbor_province = {
							limit = {
								NOT = { has_province_modifier = desert_storm }
							}
							add_vfx = {
								name = "desert_sandstorm"
								duration = 365
							}
						}
                }
                p:608 = {
					add_vfx = {
						name = "desert_sandstorm"
						duration = 365
					}
						every_neighbor_province = {
							limit = {
								NOT = { has_province_modifier = desert_storm }
							}
							add_vfx = {
								name = "desert_sandstorm"
								duration = 365
							}
						}
                }
                p:621 = {
					add_vfx = {
						name = "desert_sandstorm"
						duration = 365
					}
						every_neighbor_province = {
							limit = {
								NOT = { has_province_modifier = desert_storm }
							}
							add_vfx = {
								name = "desert_sandstorm"
								duration = 365
							}
						}
                }
                p:7582 = {
					add_vfx = {
						name = "desert_sandstorm"
						duration = 365
					}
						every_neighbor_province = {
							limit = {
								NOT = { has_province_modifier = desert_storm }
							}
							add_vfx = {
								name = "desert_sandstorm"
								duration = 365
							}
						}
                }
                p:7580 = {
					add_vfx = {
						name = "desert_sandstorm"
						duration = 365
					}
						every_neighbor_province = {
							limit = {
								NOT = { has_province_modifier = desert_storm }
							}
							add_vfx = {
								name = "desert_sandstorm"
								duration = 365
							}
						}
                }                                                                 				                
				scope:maat_rebellion_leader = {
					remove_all_positions = yes
					move_country = scope:bane_of_dementive
					set_home_country = scope:bane_of_dementive
					remove_character_modifier = foreign_citizen
				} 
				scope:bane_of_dementive = {
					add_treasury = 2000
					add_manpower = 20
					set_as_ruler = scope:maat_rebellion_leader
					if = {
						limit = {
							NOR = {
								has_law = republican_recruitment_2 # legions capital
								has_law = republican_recruitment_4 # legions enabled
							}
						}
						change_law = republican_recruitment_2 # capital
					}
				create_character = {
					culture = root.culture
					religion = root.religion
					age = 34
					female = no
					no_stats = yes
					no_traits = yes
	        		hidden_effect = {
	        			good_martial_effect = yes
	        			good_charisma_effect = yes
	        			average_finesse_effect = yes
	        			bad_zeal_effect = yes
	        			add_trait = brave
	        			add_trait = proud
	        			add_trait = aggressive
	        		}
	        		save_scope_as = isfet_general
				}
				capital_scope.governorship = {
					raise_legion = {
						save_scope_as = isfet_legion
						create_unit = {
							location = p:613 # Patigga
							save_scope_as = isfet_unit
							every_sub_unit = { set_personal_loyalty = scope:maat_rebellion_leader }
							#15 Camels, 3 Archers and 5 HI
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels	
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = archers
							add_loyal_subunit = archers
							add_loyal_subunit = archers
							add_loyal_subunit = heavy_infantry
							add_loyal_subunit = heavy_infantry
							add_loyal_subunit = heavy_infantry
							add_loyal_subunit = heavy_infantry
							add_loyal_subunit = heavy_infantry																																								
						}
					}
				}
			}
			scope:isfet_legion = {
				add_commander = scope:isfet_general
			}
			scope:isfet_unit = {
				set_as_commander = scope:isfet_general
			}              			
			p:613.area = {
            	every_area_province = {
                limit = { owned_or_subject_owned = root }
                set_owned_by = scope:bane_of_dementive
                }				
			}			
			p:613 = { # capital fort
				state = { set_state_capital = p:613 }
				if = {
					limit = { can_build_building = fortress_building }
					add_building_level = fortress_building
				}
			}
            p:613.owner = {
				declare_war_with_wargoal = {
					war_goal = imperial_conquest_wargoal
					province = root.capital_scope
					target = ROOT
				}                
       	    }						
        }
	}

	option = {	##Maat has Cursed Us!
		name = "rel_flavor_kemetic.7.a"
		add_political_influence = -25
		add_country_modifier = {
			name = curse_of_maat
			duration = 730
		}
	}
}
#A Mystic has been found
rel_flavor_kemetic.8 = {
	type = country_event
	title = "rel_flavor_kemetic.8.t"
	desc = "rel_flavor_kemetic.8.desc"
	picture = interesting_histories_kush_capital

	left_portrait = current_ruler
	right_portrait = scope:mystic_character

	goto_location = scope:country_province
	
	trigger = {
		religion = egyptian_pantheon
		current_ruler = {
			number_of_traits < max_number_of_traits_svalue
			OR = {
				NOT = { has_trait = modest }
				NOT = { has_trait = just }
				NOT = { has_trait = righteous }
				NOT = { has_trait = generous }
				NOT = { has_trait = scholar }
				NOT = { has_trait = energetic }
				NOT = { has_trait = wise }
			}
		}
	}

	immediate = {
		random_owned_province = {
			limit = {
				any_pops_in_province = {
				pop_religion = egyptian_pantheon
				}
				has_city_status = yes
			}
			save_scope_as = country_province
		}
		hidden_effect = {
			current_ruler = {
				random_list = {
					20 = { # Modest
						trigger = {
							NOT = { has_trait = modest }
						}
						set_variable = {
							name = modest_flag
						}
					}
					20 = { # Just 
						trigger = {
							NOT = { has_trait = just }
						}
						set_variable = {
							name = just_flag 
						}
					}
					20 = { # Righteous
						trigger = {
							NOT = {	has_trait = righteous }
						}
						set_variable = {
							name = righteous_flag
						}
					}
					20 = { # Generous
						trigger = {
							NOT = { has_trait = generous }
						}
						set_variable = {
							name = generous_flag
						}
					}
					20 = { # Scholar
						trigger = {
							NOT = { has_trait = scholar }
						}
						set_variable = {
							name = scholar_flag
						}
					}
					20 = { # Energetic 
						trigger = {
							NOT = { has_trait = energetic }
						}
						set_variable = {
							name = energetic_flag
						}
					}
					20 = { # Wise
						trigger = {
							NOT = { has_trait = wise }
						}
						set_variable = {
							name = wise_flag
						}
					}
				}
			}
		}
	}

	option = {
		name = "rel_flavor_kemetic.8.a"
		current_ruler = {
			switch = {
				trigger = has_variable
				modest_flag = { 
					remove_variable = modest_flag
					if = {
						limit = {
							has_trait = arrogant
						}
						remove_trait = arrogant
					}
					add_trait = modest
					root = {
						create_character = {
							female = no
							age = 40
							add_trait = modest
						}
					}
				}
				just_flag = {
					remove_variable = just_flag
					if = {
						limit = {
							has_trait = arbitrary
						}
						remove_trait = arbitrary
					}
					add_trait = just
					root = {
						create_character = {
							female = no
							age = 40
							add_trait = just
						}
					}
				}
				righteous_flag = {
					remove_variable = righteous_flag
					if = {
						limit = {
							has_trait = corrupt
						}
						remove_trait = corrupt
					}
					add_trait = righteous
					root = {
						create_character = {
							female = no
							age = 40
							add_trait = righteous
						}
					}
				}
				generous_flag = {
					remove_variable = generous_flag
					if = {
						limit = {
							has_trait = selfish
						}
						remove_trait = selfish
					}
					if = {
						limit = {
							has_trait = miserly
						}
						remove_trait = miserly
					}
					add_trait = generous
					root = {
						create_character = {
							female = no
							age = 40
							add_trait = generous
						}
					}
				}
				scholar_flag = {
					remove_variable = scholar_flag
					if = {
						limit = {
							has_trait = narrowminded
						}
						remove_trait = narrowminded
					}
					add_trait = scholar
					root = {
						create_character = {
							female = no
							age = 40
							add_trait = scholar
						}
					}
				}
				energetic_flag = {
					remove_variable = energetic_flag
					if = {
						limit = {
							has_trait = lazy
						}
						remove_trait = lazy
					}
					add_trait = energetic
					root = {
						create_character = {
							female = no
							age = 40
							add_trait = energetic
						}
					}
				}
				wise_flag = {
					remove_variable = wise_flag
					if = {
						limit = {
							has_trait = rash
						}
						remove_trait = rash
					}
					add_trait = wise
					root = {
						create_character = {
							female = no
							age = 40
							add_trait = wise
						}
					}
				}
			}
		}
	}

	option = {
		name = "rel_flavor_kemetic.8.b"
		scope:country_province = {
			add_province_modifier = {
				name = province_improvement_kemetic_mystic_teacher
				duration = 3650
			}
			random_pops_in_province = {
				limit = {
					NOT = { pop_religion = egyptian_pantheon}
				}
				set_pop_religion = egyptian_pantheon
			}
			random_pops_in_province = {
				limit = {
					NOT = { pop_religion = egyptian_pantheon}
				}
				set_pop_religion = egyptian_pantheon
			}
		}
	}
}

# National religious festival (Can be for Amun, Osiris, Horus, or Ra)
rel_flavor_kemetic.9 = {
	type = country_event
	title = "rel_flavor_kemetic.9.t"
	desc = {
		first_valid = {
			triggered_desc = {	##Amun Description
				trigger = { has_variable = amun_flag }	
				desc = "rel_flavor_kemetic.9.desc_1"
			}
			triggered_desc = {	##Osiris Description
				trigger = { has_variable = osiris_flag }	
				desc = "rel_flavor_kemetic.9.desc_2"
			}
			triggered_desc = {	##Horus Description
				trigger = { has_variable = horus_flag }	
				desc = "rel_flavor_kemetic.9.desc_3"
			}
			triggered_desc = {	##Ra Description
				trigger = { has_variable = ra_flag }	
				desc = "rel_flavor_kemetic.9.desc_4"
			}			
		}
	}	
	picture = hellenic_temple
	
	left_portrait = scope:amun_local_priest
	left_portrait = scope:osiris_local_priest
	left_portrait = scope:horus_local_priest
	right_portrait = scope:randomized_priest
	right_portrait = scope:ra_local_priest

	trigger = {
		religion = egyptian_pantheon
		any_character = {
			has_priest_office_trigger = yes
		}
		stability >= 60
	}

	immediate = {
		hidden_effect = {	
			random_character = {
				limit = {
					has_priest_office_trigger = yes
				}
				save_scope_as = randomized_priest
			}
			random_list = {
				25 = { # Amun
					trigger = {
						NOT = { has_variable = amun_flag }
					}				
					set_variable = {
						name = amun_flag
						days = 7200
					}
				}
				25 = { # Osiris
					trigger = {
						NOT = { has_variable = osiris_flag }
					}				
					set_variable = {
						name = osiris_flag
						days = 7200
					}
				}
				25 = { # Horus
					trigger = {
						NOT = { has_variable = horus_flag }
					}				
					set_variable = {
						name = horus_flag
						days = 7200
					}
				}
				25 = { # Ra
					trigger = {
						NOT = { has_variable = ra_flag }
					}				
					set_variable = {
						name = ra_flag
						days = 7200
					}
				}
			}
			switch = {
				trigger = has_variable
				amun_flag = {
				create_character = {
					culture = root.culture
					religion = root.religion
					age = 34
					female = no
					no_stats = yes
					add_zeal = 8
					add_martial = 5
					add_finesse = 5
					add_charisma = 5
	        		save_scope_as = amun_local_priest
				}					
				}
				osiris_flag = {
				create_character = {
					culture = root.culture
					religion = root.religion
					age = 34
					female = no
					no_stats = yes
					add_zeal = 8
					add_martial = 5
					add_finesse = 5
					add_charisma = 5
	        		save_scope_as = osiris_local_priest
				}
				}
				horus_flag = {
				create_character = {
					culture = root.culture
					religion = root.religion
					age = 34
					female = no
					no_stats = yes
					add_zeal = 8
					add_martial = 5
					add_finesse = 5
					add_charisma = 5
	        		save_scope_as = horus_local_priest
				}
				}
				ra_flag = {
				create_character = {
					culture = root.culture
					religion = root.religion
					age = 34
					female = no
					no_stats = yes
					add_zeal = 8
					add_martial = 5
					add_finesse = 5
					add_charisma = 5
	        		save_scope_as = ra_local_priest
				}
				}
			}
		}			
	}

	option = {
		name = "rel_flavor_kemetic.9.a"
			switch = {
				trigger = has_variable
				amun_flag = {
				add_stability = 6
				add_country_modifier = {
					name = festival_of_amun
					duration = 730
				}
				scope:amun_local_priest = {
					add_zeal = 3				
				}
				}
				osiris_flag = {
				add_stability = 6
				add_country_modifier = {
					name = festival_of_osiris
					duration = 730
				}
				scope:osiris_local_priest = {
					add_zeal = 3				
				}
				}
				horus_flag = {
				add_stability = 6
				add_country_modifier = {
					name = festival_of_horus
					duration = 730
				}
				scope:horus_local_priest = {
					add_zeal = 3		
				}
				}
				ra_flag = {
				add_stability = 6
				add_country_modifier = {
					name = festival_of_ra
					duration = 730
				}
				scope:ra_local_priest = {
					add_zeal = 3				
				}
				}
			}
		scope:randomized_priest = {
			add_zeal = 3
		}					
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 10
		}
	}

	option = {
		name = "rel_flavor_kemetic.9.b"
		add_political_influence = subtract_influence_large
		add_stability = -10
	}
}

rel_flavor_kemetic.10 = {	#Holy man gives amulet of Ra to ruler
    type = country_event
    title = rel_flavor_kemetic.10.t
    desc = rel_flavor_kemetic.10.desc
    picture = hellenic_temple
    
    left_portrait = current_ruler
    right_portrait = scope:holy_man

	trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		current_ruler = {
			wealth >= 100
		}
	}

    immediate = {
    	hidden_effect = {
    		create_character = {
    			add_zeal = 5
    			save_scope_as = holy_man
    		}
    		primary_heir = { save_scope_as = heir_dude }
    	}
    }

    option = {      
        name = rel_flavor_kemetic.10.a
    	current_ruler = {
    		add_popularity = 10
    		add_gold = -100
    		add_zeal = 2
    	}
    }
    option = {      
        name = rel_flavor_kemetic.10.b #Give it to primary heir
       	trigger = {
       		exists = primary_heir
       		is_monarchy = yes
       	}
       	current_ruler = {
       		add_gold = -100
       	}
       	primary_heir = {
       		add_zeal = 2
       	}
    }
    option = {      
        name = rel_flavor_kemetic.10.c #Kill the holy man because im crazy
        trigger = { current_ruler = { has_trait = lunatic } }
        highlight = yes
        current_ruler = {
        	add_popularity = -5
        }
      	scope:holy_man = {
			death = {
				death_reason = death_execution
			}
      	}
    }
}
rel_flavor_kemetic.11 = {	#Upheaval among temple preists
    type = country_event
    title = rel_flavor_kemetic.11.t
    desc = rel_flavor_kemetic.11.desc
    picture = religious_rite
    goto_location = scope:temple_province
    left_portrait = current_ruler
    right_portrait = scope:temple_preist

	trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		any_owned_province = {
			has_building = temple_building
			dominant_province_religion = egyptian_pantheon
		}
	}

    immediate = {
    	hidden_effect = {
    		create_character = {
    			add_zeal = 5
    			save_scope_as = temple_preist
    		}
    		random_owned_province = {
    			limit = {
					has_building = temple_building
					dominant_province_religion = egyptian_pantheon    				
    			}
    			save_scope_as = temple_province
    		}
    	}
    }

    option = {	#Don't give them a anything
        name = rel_flavor_kemetic.11.a
    	current_ruler = {
    		add_zeal = -1
    	}
    	scope:temple_province = {
    		add_province_modifier = {
    			name = dishonored_local_preists_mod
    			duration = 1825
    		}
    	}
    }
    option = {	#Give them funds to maintain the temple
        name = rel_flavor_kemetic.11.b
        add_treasury = {
        	value = scope:temple_province.province_income
        	multiply = -40
        	max = 10
        	min = -150
        }
    	scope:temple_province = {
    		add_province_modifier = {
    			name = honored_local_preists_mod
    			duration = 1825
    		}
    	}
    }
    option = {	#[SCOPE.GetRootScope.GetCountry.GetRuler.GetName] will visit [temple_province.GetName]
        name = rel_flavor_kemetic.11.c
        trigger = {
        	current_ruler = {
        		has_trait = pious
        	}
        }
        current_ruler = {
        	add_zeal = 1
        }
    	scope:temple_province = {
    		add_province_modifier = {
    			name = honored_local_preists_mod
    			duration = 1825
    		}
    	}
    }
}
rel_flavor_kemetic.12 = {	#Blasphemous Scribe
    type = country_event
    title = rel_flavor_kemetic.12.t
    desc = rel_flavor_kemetic.12.desc
    picture = persepolis
    
    right_portrait = scope:scribe
    left_portrait = current_ruler

    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		current_ruler = {
			zeal < 8
		}   
    }

    immediate = {
    	hidden_effect = {
    		create_character = {
    			add_zeal = 2
    			save_scope_as = scribe
    		}
    	}    
    }

    option = {      
        name = rel_flavor_kemetic.12.a #This cannot stand!
    	add_tyranny = {
    		value = scope:scribe.zeal
    		multiply = 2
    		max = 20
    	}
      	scope:scribe = {
			death = {
				death_reason = death_execution
			}
      	}
    }
    option = {      
        name = rel_flavor_kemetic.12.b #We'll let this go...for now
        current_ruler = {
        	add_popularity = -5
        }
        add_legitimacy = -5
    }
    option = {      
        name = rel_flavor_kemetic.12.c #Maybe I am a bad ruler...
        trigger = {
        	current_ruler = { has_trait = dumb }
        }
        current_ruler = {
        	add_popularity = -10
        }
        exclusive = yes
        highlight = yes
    }
}

rel_flavor_kemetic.13 = {	#Trouble at the Temple
    type = country_event
    title = rel_flavor_kemetic.13.t
    desc = rel_flavor_kemetic.13.desc
    picture = religious_rite
    goto_location = scope:temple_province
    left_portrait = current_ruler

    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		any_owned_province = {
			has_building = temple_building
			dominant_province_religion = egyptian_pantheon
		}    
    }

    immediate = {
    	hidden_effect = {
    		create_character = {
    			add_zeal = 5
    			save_scope_as = temple_preist
    		}
    		random_owned_province = {
    			limit = {
					has_building = temple_building
					dominant_province_religion = egyptian_pantheon    				
    			}
    			save_scope_as = temple_province
    		}
    	}
    	scope:temple_province = {
    		ordered_pops_in_province = {
    			order_by = pop_hapiness
    			max = 2
    			kill_pop = yes
    		}
    	}   	
    }

    option = {	#Send in troops to keep order
        name = rel_flavor_kemetic.13.a
       	add_manpower = -2
       	scope:temple_province = {
       		add_province_modifier = {
       			name = local_unrest_quelled
       			duration = 3650
       		}
       	}
    }
    option = {	#Leave them be
        name = rel_flavor_kemetic.13.b
        current_ruler = { add_popularity = -5 }
    	scope:temple_province = {
    		ordered_pops_in_province = {
    			order_by = pop_hapiness
    			max = 2
    			kill_pop = yes
    		}
    	}
    }
}
rel_flavor_kemetic.14 = {	#Holding Owner Challenges Maat
    type = country_event
    title = rel_flavor_kemetic.14.t
    desc = rel_flavor_kemetic.14.desc
    picture = persepolis
    goto_location = scope:academy_province

    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		any_owned_province = {
			has_building = academy_building
			dominant_province_religion = egyptian_pantheon
			exists = holding_owner
			holding_owner = {
				NOT = { this = root.current_ruler }
			}
		}    
    }

    immediate = {
    	hidden_effect = {
    		random_owned_province = {
    			limit = {
					has_building = academy_building
					dominant_province_religion = egyptian_pantheon
					exists = holding_owner
					holding_owner = {
						NOT = { this = root.current_ruler }
					}    				
    			}
    			save_scope_as = academy_province
    			holding_owner = {
    				save_scope_as = bad_guy
    			}
    		}
    	}
    }

    option = {	#Now is the time to act, Isfet must not prevail!
        name = rel_flavor_kemetic.14.a
        scope:bad_guy = {
        	remove_holding = scope:academy_province
        	add_loyalty = spurned_family
        }
        add_tyranny = 10
        current_ruler = {
        	add_holding = scope:academy_province
        }
        scope:academy_province = {
        	add_province_modifier = {
        		name = maat_restored_province_mod
        		duration = 3650
        	}
        }
    }
    option = {	#Leave them be, it should be fine
        name = rel_flavor_kemetic.14.b
        current_ruler = {
        	add_popularity = -10
        }
        scope:academy_province = {
        	add_province_modifier = {
        		name = isfet_present_in_province_mod
        		duration = 3650
        	}
        }        
    }
    option = {      
        name = rel_flavor_kemetic.14.c
		trigger = {
			current_ruler = { has_trait = lunatic }
		}
		add_tyranny = 5
		current_ruler = {
			add_popularity = 10
		}
        scope:bad_guy = {
			death = {
				death_reason = death_execution
			}
        }		
    }
}
rel_flavor_kemetic.15 = {	#Holy site deity blesses state
    type = country_event
    title = rel_flavor_kemetic.15.t
    desc = rel_flavor_kemetic.15.desc
    picture = persepolis
    goto_location = scope:deity_holy_site
    left_portrait = current_ruler

    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		any_owned_holy_site = {
			count >= 1
			exists = province_deity
			province_deity.religion = root.religion
		}
    }

    immediate = {
    	hidden_effect = {
    		random_owned_holy_site = {
    			limit = {
    				exists = province_deity
    				province_deity.religion = root.religion
    			}
    			save_scope_as = deity_holy_site
    			province_deity = {
    				save_scope_as = da_deity
    			}
    		}
    	}
    }

    option = {	#
        name = rel_flavor_kemetic.15.a
        scope:deity_holy_site.state = {
        	add_state_modifier = {
        		name = kemetic_blessing_mod
        		duration = 3650
        	}
        }
    }
    option = {	#Redirect the funds to the state
        name = rel_flavor_kemetic.15.b
        add_treasury = {
        	value = scope:deity_holy_site.province_income
        	multiply = 50
        	max = 250
        	min = 100
        }
    }
}
rel_flavor_kemetic.16 = {	#Holy site holder tries destroy holy site
    type = country_event
    title = rel_flavor_kemetic.16.t
    desc = rel_flavor_kemetic.16.desc
    picture = persepolis
    goto_location = scope:deity_holy_site
    left_portrait = current_ruler
    right_portrait = scope:holy_site_owner

    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		any_owned_holy_site = {
			count >= 1
			exists = province_deity
			exists = holding_owner
			holding_owner = {
				NOT = { this = root.current_ruler }
			}
			province_deity.religion = root.religion
		}
    }

    immediate = {
    	hidden_effect = {
    		random_owned_holy_site = {
    			limit = {
    				exists = province_deity
    				exists = holding_owner
    				province_deity.religion = root.religion
    			}
    			save_scope_as = deity_holy_site
    			province_deity = {
    				save_scope_as = da_deity
    			}
    			holding_owner = {
    				save_scope_as = holy_site_owner
    			}
    		}
    	}
    }

    option = {	#There is nothing we can do
        name = rel_flavor_kemetic.16.a
        current_ruler = {
        	add_popularity = -25
        }
        add_stability = -5
		scope:deity_holy_site = {
			remove_province_deity = yes
			add_city_fire_effect = yes
			add_province_modifier = {
				name = "upset_local_priests"
				duration = 365
			}
		}
    }
    option = {	#Confiscate the holding
        name = rel_flavor_kemetic.16.b
        add_treasury = -250
        scope:holy_site_owner = {
        	add_loyalty = spurned_family
        	remove_holding = scope:deity_holy_site
        }
    	hidden_effect = {
        	random = {
        		chance = 15
        		start_civil_war = scope:holy_site_owner
        	}
        }
    }
}
rel_flavor_kemetic.17 = {	#Egyptian Investments
    type = country_event
    title = rel_flavor_kemetic.17.t
    desc = rel_flavor_kemetic.17.desc
    picture = hellenic_temple
    goto_location = scope:commerce_province

    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		any_owned_province = {
			NOT = { this = root.capital_scope }
			has_building = commerce_building
			free_building_slots >= 0
			has_construction = no
		} 
    }

    immediate = {
    	hidden_effect = {
    		random_owned_province = {
    			limit = {
					NOT = { this = root.capital_scope }
					has_building = commerce_building
					free_building_slots >= 0
					has_construction = no
    			}
    			save_scope_as = commerce_province
    		}
    	}
    }

    option = {	#Allow them to continue
        name = rel_flavor_kemetic.17.a
        scope:commerce_province = {
			if = {
				limit = {
					can_build_building = commerce_building
				}
				add_building_level = commerce_building
			}
			else_if = {
				limit = {
					can_build_building = population_building
				}
				add_building_level = population_building
			}
			else = {
				create_2_citizens_effect = yes
			}
		}
    }
    option = {	#They must contribute their efforts to the state
        name = rel_flavor_kemetic.17.b
        add_stability = 5
        scope:commerce_province = {
        	add_province_modifier = {
        		name = resources_appropriated_mod
        		duration = 1825
        	}
        }
    }
    option = {	#Invest in the territory
        name = rel_flavor_kemetic.17.c
        trigger = {
        	current_ruler = {
        		has_trait = founder
        	}
        }
        highlight = yes
        scope:commerce_province = {
        	add_province_modifier = {
        		name = state_territorial_investments_mod
        		duration = 1825
        	}
        }
    }
}
rel_flavor_kemetic.18 = {	#Temple Offerings
    type = country_event
    title = rel_flavor_kemetic.18.t
    desc = rel_flavor_kemetic.18.desc
    picture = religious_rite
    goto_location = scope:deity_holy_site
    right_portrait = scope:holy_man
    left_portrait = current_ruler

    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		any_owned_holy_site = {
			count >= 1
			exists = province_deity
			province_deity.religion = root.religion
			NOT = { this = root.capital_scope }
		}
    }

    immediate = {
    	hidden_effect = {
    		create_character = {
    			add_zeal = 5
    			save_scope_as = holy_man
    		}
    		random_owned_holy_site = {
    			limit = {
    				exists = province_deity
    				province_deity.religion = root.religion
    			}
    			save_scope_as = deity_holy_site
    			province_deity = {
    				save_scope_as = da_deity
    			}
    		}
    	}
    }

    option = {	#Send Some Offerings
        name = rel_flavor_kemetic.18.a
        add_treasury = -25
        add_legitimacy = 5
        current_ruler = { add_popularity = 5 }
    }
    option = {	#Take the time to tour the site and renovate it.
        name = rel_flavor_kemetic.18.b
        current_ruler = {
        	add_popularity = 10
        }
        add_treasury = {
        	value = root.has_monthly_income
        	multiply = -12
        	min = 100
        	max = 350
        }
        scope:deity_holy_site = {
        	add_province_modifier = {
        		name = blessing_of_the_pharaoh_mod
        		duration = 3650
        	}
        }
    }
    option = {	#None of this is necessary.
        name = rel_flavor_kemetic.18.c
        current_ruler = {
        	add_popularity = -5
        }
    }
}
rel_flavor_kemetic.19 = {	#Trouble at the Temple of Hatshepsu p:569 (Waset)
    type = country_event
    title = rel_flavor_kemetic.19.t
    desc = rel_flavor_kemetic.19.desc
    picture = hellenic_temple

    trigger = {
		current_date > 500.2.1
		religion = egyptian_pantheon
		owns = 569
		is_ai = no
		NOT = { has_variable = rel_flavor_kemetic_19_happened }
    }

    immediate = {
    	set_variable = rel_flavor_kemetic_19_happened
    }

    option = {	#Send Troops to repair the temple
        name = rel_flavor_kemetic.19.a
       	add_manpower = -4
       	add_treasury = -50
       	scope:temple_province = {
       		add_province_modifier = {
       			name = temple_of_hatshepsu
       			duration = -1
       		}
       	}
    }
    option = {	#This isn't worth it
        name = rel_flavor_kemetic.19.b
        current_ruler = { add_popularity = -5 }
    	scope:temple_province = {
    		add_state_loyalty = -15
    		ordered_pops_in_province = {
    			order_by = pop_hapiness
    			max = 5
    			kill_pop = yes
    		}
    	}
    }
}
rel_flavor_kemetic.20 = {	#King Priests of Thebes p:569 (only for player and only happens once)
    type = country_event
    title = rel_flavor_kemetic.20.t
    desc = rel_flavor_kemetic.20.desc
    picture = religious_rite
    
    right_portrait = scope:king_priest
    left_portrait = current_ruler

    trigger = {
		current_date > 550.2.1
		OR = {
			religion = egyptian_pantheon
			tag = EGY
		}
		owns = 569
		is_ai = no
		NOT = { has_global_variable = thebes_preiests_attacked }
    }

    immediate = {
    	set_global_variable = thebes_preiests_attacked
 		hidden_effect = {
 			p:569 = {
 				if = {
 					limit = {
 						exists = holding_owner
 					}
 					holding_owner = {
 						remove_holding = p:569
 					}
 				}
 			}
    		create_character = {
                culture = egyptian
                religion = egyptian_pantheon
                add_martial = 5
                add_zeal = 7
    			save_scope_as = king_priest
    		}
    		scope:king_priest = {
    			add_holding = p:569
    		}
 		}   	
    }

    option = {	#Do Nothing for now
        name = rel_flavor_kemetic.20.a
        add_political_influence = -5
        trigger_event = {
        	id = rel_flavor_kemetic.21
        	days = 180
        }
    }
    option = {	#Stop this now!
        name = rel_flavor_kemetic.20.b
        add_tyranny = 10
        current_ruler = {
        	add_corruption = 5
        	add_popularity = -10
        }
        scope:king_priest = {
        	remove_holding = p:569
        	add_loyalty = spurned_family
        }
    }
}
rel_flavor_kemetic.21 = {	#King Priests declare independence
    type = country_event
    title = rel_flavor_kemetic.21.t
    desc = rel_flavor_kemetic.21.desc
    picture = army_desert
    right_portrait = scope:king_priest
    left_portrait = current_ruler

    trigger = {
    	exists = scope:king_priest
    }

    immediate = {
    	hidden_effect = {
    		p:569 = {
    			create_country = {
                    set_country_religion = egyptian_pantheon
                    set_primary_culture = egyptian
                    change_country_name = "UPPER_EGYPT_NAME"
                    change_country_color = "lombard_red"
                    change_government = theocratic_monarchy
                    change_country_adjective = "UPPER_EGYPT_ADJ"
                    #TODO - Make flag
                    #change_country_flag = CRETE_FLAG
                    save_scope_as = upper_egypt_scope
    			}
    		}
    		scope:king_priest = {
				remove_all_positions = yes
				move_country = scope:upper_egypt_scope
				set_home_country = scope:upper_egypt_scope
				remove_character_modifier = foreign_citizen
    		}
    		p:569.area = {
    			every_neighbor_area = {
    				limit = {
    					any_area_province = { owner = root }
    				}
    				every_area_province = {
    					set_owned_by = scope:upper_egypt_scope
    				}
    				random_neighbor_area = {
	    				limit = {
	    					any_area_province = { owner = root }
	    				}
	    				every_area_province = {
	    					set_owned_by = scope:upper_egypt_scope
	    				}
    				}
    			}
    		}
    		scope:upper_egypt_scope = {
				add_treasury = 2000
				add_manpower = 20
				set_as_ruler = scope:king_priest
				if = {
					limit = {
						NOR = {
							has_law = republican_recruitment_2 # legions capital
							has_law = republican_recruitment_4 # legions enabled
						}
					}
					change_law = republican_recruitment_2 # capital
				}
				create_character = {
					culture = egyptian
					religion = egyptian_pantheon
					age = 34
					female = no
					no_stats = yes
					no_traits = yes
	        		hidden_effect = {
	        			good_martial_effect = yes
	        			good_charisma_effect = yes
	        			average_finesse_effect = yes
	        			bad_zeal_effect = yes
	        			add_trait = brave
	        			add_trait = proud
	        			add_trait = aggressive
	        		}
	        		save_scope_as = thebes_general
				}
				capital_scope.governorship = {
					raise_legion = {
						save_scope_as = thebes_legion
						create_unit = {
							location = p:569 
							save_scope_as = thebes_unit
							every_sub_unit = { set_personal_loyalty = scope:king_priest }
							add_loyal_subunit = camels
							add_loyal_subunit = camels
							add_loyal_subunit = light_infantry
							add_loyal_subunit = light_infantry
							add_loyal_subunit = light_infantry
							add_loyal_subunit = light_infantry
							add_loyal_subunit = light_infantry
							add_loyal_subunit = light_infantry
							add_loyal_subunit = light_infantry
							add_loyal_subunit = light_infantry
							add_loyal_subunit = light_infantry
							add_loyal_subunit = light_infantry
							add_loyal_subunit = light_infantry
							add_loyal_subunit = archers
							add_loyal_subunit = archers
							add_loyal_subunit = archers
							add_loyal_subunit = heavy_infantry
							add_loyal_subunit = heavy_infantry
							add_loyal_subunit = heavy_infantry
							add_loyal_subunit = heavy_infantry
							add_loyal_subunit = heavy_infantry																																								
						}
					}
				}
    		}
			scope:thebes_legion = {
				add_commander = scope:thebes_general
			}
			scope:thebes_unit = {
				set_as_commander = scope:thebes_general
			}              				
			p:569 = { # capital fort
				state = { set_state_capital = p:569 }
				if = {
					limit = { can_build_building = fortress_building }
					add_building_level = fortress_building
				}
			}
    	}
    }

    option = {	#Time to Fight!     
        name = rel_flavor_kemetic.21.a
        scope:upper_egypt_scope = {
			declare_war_with_wargoal = {
				war_goal = imperial_conquest_wargoal
				province = root.capital_scope
				target = ROOT
			}
        }
    }
}
#The Apis Bull events for player owner of  p:500 memphis
rel_flavor_kemetic.22 = {	#The Apis Bull has been found!
    type = country_event
    title = rel_flavor_kemetic.22.t
    desc = rel_flavor_kemetic.22.desc
    picture = religious_rite
    goto_location = p:500
    left_portrait = current_ruler
    right_portrait = scope:priest

    trigger = {
		current_date > 520.2.1
		religion = egyptian_pantheon
		owns = 500
		is_ai = no
		NOT = { has_variable = apis_bull_event_1_happened }
    }

    immediate = {
    	set_variable = apis_bull_event_1_happened
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    }

    option = {	#Praise be to the Apis Bull!
        name = rel_flavor_kemetic.22.a
      	p:500 = {
      		add_permanent_province_modifier = {
      			name = apis_bull_of_memphis
      			mode = add
      		}
      	}
    }
}
rel_flavor_kemetic.23 = {	#The Apis Bull inspires current_ruler
    type = country_event
    title = rel_flavor_kemetic.23.t
    desc = rel_flavor_kemetic.23.desc
    picture = religious_rite
    goto_location = p:500
    left_portrait = current_ruler
    right_portrait = scope:priest

    trigger = {
		current_date > 520.2.1
		religion = egyptian_pantheon
		owns = 500
		is_ai = no
		has_variable = apis_bull_event_1_happened
		NOR = { 
			has_variable = apis_bull_event_2_happened
			has_variable = apis_bull_event_3_happened 
		}
    }

    immediate = {
    	set_variable = apis_bull_event_2_happened
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    }

    option = {	#What a great bull
        name = rel_flavor_kemetic.23.a
        current_ruler = {
        	add_zeal = 2
        	add_popularity = 5
        }
    }
    option = {	#Shower the Temple with gifts
        name = rel_flavor_kemetic.23.b
        add_treasury = -150
        add_political_influence = -5
      	p:500 = {
      		add_permanent_province_modifier = {
      			name = apis_bull_of_memphis
      			mode = add
      		}
      	}
    }
    option = {	#Eat the Apis Bull!?!
        name = rel_flavor_kemetic.23.c
        trigger = {
        	current_ruler = { has_trait = lunatic }
        }
        custom_tooltip = eat_the_apis_bull_tt
        set_variable = apis_bull_eaten
        current_ruler = {
        	add_zeal = -2
        	add_popularity = -10
        	add_character_modifier = {
        		name = blood_of_the_apis_bull
        		duration = -1
        	}
        }
        hidden_effect = {
	      	p:500 = {
	      		remove_province_modifier = apis_bull_of_memphis
	      	}
        }
    }
}
rel_flavor_kemetic.24 = {	#The Apis Bull is Sick
    type = country_event
    title = rel_flavor_kemetic.24.t
    desc = rel_flavor_kemetic.24.desc
    picture = religious_rite
    goto_location = p:500
    left_portrait = current_ruler
    right_portrait = scope:priest

    trigger = {
		current_date > 520.2.1
		religion = egyptian_pantheon
		owns = 500
		is_ai = no
		has_variable = apis_bull_event_1_happened
		NOR = { 
			has_variable = apis_bull_event_2_happened
			has_variable = apis_bull_event_3_happened 
		}
    }

    immediate = {
    	set_variable = apis_bull_event_3_happened
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    }

    option = {	#Do everything we can to heal the bull
        name = rel_flavor_kemetic.24.a
        add_treasury = -150
        add_political_influence = -5
      	p:500 = {
      		add_permanent_province_modifier = {
      			name = apis_bull_of_memphis
      			mode = add
      		}
      	}        
    }
    option = {	#Praying for it's wellbeing will do
        name = rel_flavor_kemetic.24.b
        current_ruler = {
        	add_popularity = 5
        }
    }
    option = {	#The Apis bull looks very tasty
        name = rel_flavor_kemetic.24.c
        trigger = {
        	current_ruler = { has_trait = lunatic }
        }
        custom_tooltip = eat_the_apis_bull_tt
        set_variable = apis_bull_eaten
        current_ruler = {
        	add_zeal = -2
        	add_popularity = -10
        	add_character_modifier = {
        		name = blood_of_the_apis_bull
        		duration = -1
        	}
        }
        hidden_effect = {
	      	p:500 = {
	      		remove_province_modifier = apis_bull_of_memphis
	      	}
        }
    }
}
rel_flavor_kemetic.25 = {	#The Apis Bull has died!
    type = country_event
    title = rel_flavor_kemetic.25.t
    desc = rel_flavor_kemetic.25.desc
    picture = religious_rite
    goto_location = p:500
    left_portrait = current_ruler
    right_portrait = scope:priest

    trigger = {
		current_date > 520.2.1
		religion = egyptian_pantheon
		owns = 500
		is_ai = no
		NOR = { 
			has_variable = apis_bull_event_4_happened
			has_variable = apis_bull_eaten
		}
		OR = { 
			has_variable = apis_bull_event_2_happened
			has_variable = apis_bull_event_3_happened 
		}
    }

    immediate = {
    	set_variable = apis_bull_event_4_happened
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    }

    option = {	#We Must find a new bull!
        name = rel_flavor_kemetic.25.a
        add_treasury = -300
        add_political_influence = -30
        current_ruler = {
        	add_zeal = 1
        }
        custom_tooltip = start_search_for_apis_bull_tt
        trigger_event = {
        	id = rel_flavor_kemetic.26
        	days = 180
        }
    }
    option = {	#Let the tradition die out
        name = rel_flavor_kemetic.25.b
      	p:500 = {
      		remove_province_modifier = apis_bull_of_memphis
      	}
      	current_ruler = { add_zeal = -1 }
    }
}
rel_flavor_kemetic.26 = {	#The Search Concludes
    type = country_event
    title = rel_flavor_kemetic.26.t
	desc = {
		first_valid = {
			triggered_desc = {	##bull found
				trigger = { var:apis_bull_roll = 1 }	
				desc = "apis_bull_found_desc"
			}
			triggered_desc = {	##no bull, rip
				trigger = { var:apis_bull_roll = 2 }	
				desc = "apis_bull_not_found_desc"
			}			
		}
	}
    picture = religious_rite
    goto_location = p:500
    left_portrait = current_ruler
    right_portrait = scope:priest

    trigger = {
		religion = egyptian_pantheon
		owns = 500
		is_ai = no
		NOT = { 
			has_variable = apis_bull_event_5_happened
		}
		has_variable = apis_bull_event_4_happened
    }

    immediate = {
    	set_variable = apis_bull_event_5_happened
    	set_variable = {
    		name = apis_bull_roll
    		value = {
    			value = { integer_range = { min = 1 max = 2 } }
    		}
    		days = 20
    	}
    }

    option = {	#A new Apis Bull has been found!
    	trigger = { var:apis_bull_roll = 1 }
        name = rel_flavor_kemetic.26.a
        highlight = yes
      	p:500 = {
      		add_permanent_province_modifier = {
      			name = apis_bull_of_memphis
      			mode = add
      		}
      	}
      	current_ruler = {
      		add_popularity = 10
      	}
    }
    option = {	#No Apis Bull has been found
    	trigger = { var:apis_bull_roll = 2 }  
        name = rel_flavor_kemetic.26.b
        add_legitimacy = -10
        hidden_effect = {
	      	p:500 = {
	      		remove_province_modifier = apis_bull_of_memphis
	      	}
        }
    }
}
#Pharaoh events related to preparation for mummification, building temples, and building pyramids.
rel_flavor_kemetic.27 = {	#Circumambulation of the White Walls	
    type = country_event
    title = rel_flavor_kemetic.27.t
    desc = rel_flavor_kemetic.27.desc
    picture = persepolis
    goto_location = p:500
    left_portrait = current_ruler
    right_portrait = scope:priest
    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		owns = 500
		NOT = { tag = KSH }
    }

    immediate = {
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    }

    option = {	#Walk the Walls    
        name = rel_flavor_kemetic.27.a
        add_treasury = -100
        current_ruler = {
        	add_character_modifier = {
        		name = walked_white_walls_of_memphis
        		duration = 3650
        	}
        }
    }
    option = {	#This is a silly tradition     
        name = rel_flavor_kemetic.27.b
        add_political_influence = -5
    }
}

rel_flavor_kemetic.28 = {	#Sokar Feast	
    type = country_event
    title = rel_flavor_kemetic.28.t
    desc = rel_flavor_kemetic.28.desc
    picture = religious_rite
    goto_location = p:500
    left_portrait = current_ruler
    right_portrait = scope:priest
    trigger = {
    	owns = 500
		current_date > 453.1.1
		religion = egyptian_pantheon
		NOT = { tag = KSH }
    }

    immediate = {
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    }

    option = {	#Begin the Feast   
        name = rel_flavor_kemetic.28.a
        add_treasury = -150
        p:500 = {
        	add_province_modifier = {
        		name = sokar_feast_celebrations
        		duration = 3650
        	}
        }
    }
    option = {	#This is a silly tradition     
        name = rel_flavor_kemetic.28.b
        add_political_influence = -15
    }
}

rel_flavor_kemetic.29 = {	#Sed Festival
    type = country_event
    title = rel_flavor_kemetic.29.t
    desc = rel_flavor_kemetic.29.desc
    picture = religious_rite
    left_portrait = current_ruler
    right_portrait = scope:priest
    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		NOT = { tag = KSH }
    }

    immediate = {
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    }

    option = {	#Begin the Festival   
        name = rel_flavor_kemetic.29.a
        add_treasury = -100
        capital_scope = {
        	add_province_modifier = {
        		name = sed_festival_province_mod
        		duration = 1825
        	}
        }
    }
    option = {	#This is a silly tradition     
        name = rel_flavor_kemetic.29.b
        add_political_influence = -15
    }
}
rel_flavor_kemetic.30 = {	#Opet Festival
    type = country_event
    title = rel_flavor_kemetic.30.t
    desc = rel_flavor_kemetic.30.desc
    picture = religious_rite
    left_portrait = current_ruler
    right_portrait = scope:priest
    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		NOT = { tag = KSH }
    }

    immediate = {
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    }

    option = {	#Begin the Festival   
        name = rel_flavor_kemetic.30.a
        add_treasury = -250
        p:569 = {
        	add_province_modifier = {
        		name = opet_festival_mod
        		duration = 3650
        	}
        }
    }
    option = {	#This is a silly tradition     
        name = rel_flavor_kemetic.30.b
        add_political_influence = -25
    }
}
rel_flavor_kemetic.31 = {	#Tekh Festival
    type = country_event
    title = rel_flavor_kemetic.31.t
    desc = rel_flavor_kemetic.31.desc
    picture = religious_rite
    goto_location = scope:tekh_province
    left_portrait = current_ruler
    right_portrait = scope:priest
    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		NOT = { tag = KSH }
    }

    immediate = {
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    	random_owned_province = {
    		limit = {
    			dominant_province_religion = egyptian_pantheon
    		}
    		weight = {
				modifier = {
					factor = 10000
					total_population > 40
				}    			
    		}
    		save_scope_as = tekh_province
    	}
    }

    option = {	#Begin the Festival   
        name = rel_flavor_kemetic.31.a
        add_treasury = -200
        current_ruler = {
        	add_popularity = 10
        }
        scope:tekh_province = {
        	add_province_modifier = {
        		name = tekh_festival_mod
        		duration = 1825
        	}
        }
    }
    option = {	#This is a silly tradition     
        name = rel_flavor_kemetic.31.b
        add_political_influence = -20
    }
}
rel_flavor_kemetic.32 = {	#Bast Festival
    type = country_event
    title = rel_flavor_kemetic.32.t
    desc = rel_flavor_kemetic.32.desc
    picture = religious_rite
    goto_location = scope:bast_province
    left_portrait = current_ruler
    right_portrait = scope:priest
    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		NOT = { tag = KSH }
    }

    immediate = {
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    	random_owned_province = {
    		limit = {
    			dominant_province_religion = egyptian_pantheon
    		}
    		weight = {
				modifier = {
					factor = 10000
					total_population > 40
				}    			
    		}
    		save_scope_as = bast_province
    	}
    }

    option = {	#Begin the Festival   
        name = rel_flavor_kemetic.32.a
        add_treasury = -100
        scope:bast_province = {
        	add_state_loyalty = 25
        	state = {
        		add_state_modifier = {
        			name = bast_festival_mod
        			duration = 3650
        		}
        	}
        }
    }
    option = {	#This is a silly tradition     
        name = rel_flavor_kemetic.32.b
        add_political_influence = -15
    }
}
rel_flavor_kemetic.33 = {	#Min Festival
    type = country_event
    title = rel_flavor_kemetic.33.t
    desc = rel_flavor_kemetic.33.desc
    picture = religious_rite
    goto_location = p:566
    left_portrait = current_ruler
    right_portrait = scope:priest
    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		NOT = { tag = KSH }
		owns = 566
    }

    immediate = {
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    }

    option = {	#Begin the Festival   
        name = rel_flavor_kemetic.33.a
        add_treasury = -150
        p:566 = {
        	add_province_modifier = {
        		name = min_festival_mod
        		duration = 1825
        	}
        }
    }
    option = {	#This is a silly tradition     
        name = rel_flavor_kemetic.33.b
        add_political_influence = -10
    }
}
rel_flavor_kemetic.34 = {	#The Beautiful Feast of the Valley
    type = country_event
    title = rel_flavor_kemetic.34.t
    desc = rel_flavor_kemetic.34.desc
    picture = religious_rite
    left_portrait = current_ruler
    right_portrait = scope:priest
    trigger = {
		current_date > 453.1.1
		religion = egyptian_pantheon
		NOT = { tag = KSH }
		owns = 500
    }

    immediate = {
    	random_character = {
    		limit = { has_high_priest_office_trigger = yes }
    		save_scope_as = priest
    	}
    }

    option = {	#Begin the Festival   
        name = rel_flavor_kemetic.34.a
        add_treasury = -100
        current_ruler = {
        	add_popularity = 10
        }
        add_legitimacy = 5
    }
    option = {	#This is a silly tradition     
        name = rel_flavor_kemetic.34.b
        add_political_influence = -15
    }
}
# Great Pyramid building event chain 
#NOTE: This is very similar to the Colossus of Rhodes building events.
rel_flavor_kemetic.35 = {	#A Great Builder Appears and suggests we build a pyramid
    type = country_event
    title = rel_flavor_kemetic.35.t
    desc = rel_flavor_kemetic.35.desc
    picture = persepolis
    right_portrait = scope:pyramid_builder
    left_portrait = current_ruler

    trigger = {
		current_date > 500.1.1
		is_ai = no
		treasury >= 750
		any_owned_province = {
			count >= 4
			free_building_slots >= 1
	    	has_great_work = no			
		}
		religion = egyptian_pantheon
		NOR = {
			has_variable = pyramid_province_1_var
			has_variable = pyramid_province_2_var
			has_variable = pyramid_province_3_var
			has_variable = pyramid_province_4_var
		}
    }

    immediate = {
    	hidden_effect = {
    		create_character = {
				culture="egyptian"
				religion="egyptian_pantheon"
				age = 28
				add_finesse = 5
    			add_trait = great_builder
    			save_scope_as = pyramid_builder 
    		}
	    	if = {
	    		limit = {
	    			capital_scope = {
	    				free_building_slots >= 1
	    				has_great_work = no
	    			}
	    		}
	    		capital_scope = {
	    			save_scope_as = pyramid_province_1
	    		}
	    	}
	    	else = {
	    		random_owned_province = {
	    			limit = {
	    				free_building_slots >= 1
	    				has_great_work = no
	    			}
		    		weight = {
						modifier = {
							factor = 10000
							total_population > 40
						}    			
		    		}
		    		save_scope_as = pyramid_province_1		
	    		}
	    	}
	    	if = {
	    		limit = {
	    			exists = scope:pyramid_province_1
	    		}
	    		random_owned_province = {
	    			limit = {
	    				NOT = { this = scope:pyramid_province_1 }
	    				free_building_slots >= 1
	    				has_great_work = no
	    			}
		    		weight = {
						modifier = {
							factor = 10000
							total_population > 40
						}    			
		    		}
		    		save_scope_as = pyramid_province_2	    			
	    		}
	    	}
	    	if = {
	    		limit = {
	    			exists = scope:pyramid_province_1
	    			exists = scope:pyramid_province_2
	    		}
	    		random_owned_province = {
	    			limit = {
	    				NOR = {
	    					this = scope:pyramid_province_1
	    					this = scope:pyramid_province_2
	    				}
	    				free_building_slots >= 1
	    				has_great_work = no
	    			}
		    		weight = {
						modifier = {
							factor = 10000
							total_population > 40
						}    			
		    		}
		    		save_scope_as = pyramid_province_3 			
	    		}
	    	}
	    	if = {
	    		limit = {
	    			exists = scope:pyramid_province_1
	    			exists = scope:pyramid_province_2
	    			exists = scope:pyramid_province_3
	    		}
	    		random_owned_province = {
	    			limit = {
	    				NOR = {
	    					this = scope:pyramid_province_1
	    					this = scope:pyramid_province_2
	    					this = scope:pyramid_province_3
	    				}
	    				free_building_slots >= 1
	    				has_great_work = no
	    			}
		    		weight = {
						modifier = {
							factor = 10000
							total_population > 40
						}    			
		    		}
		    		save_scope_as = pyramid_province_4	
	    		}
	    	}
    	}
    }

    option = {      
        name = rel_flavor_kemetic.35.a
        trigger = {
        	exists = scope:pyramid_province_1
        }
        set_variable = pyramid_province_1_var
        custom_tooltip = choose_the_kind_of_pyramid_to_build
        trigger_event = {
        	id = rel_flavor_kemetic.36
        	days = 5
        }
    }
    option = {      
        name = rel_flavor_kemetic.35.b
        trigger = {
        	exists = scope:pyramid_province_2
        }
        set_variable = pyramid_province_2_var
        custom_tooltip = choose_the_kind_of_pyramid_to_build
        trigger_event = {
        	id = rel_flavor_kemetic.36
        	days = 5
        }
    }
    option = {      
        name = rel_flavor_kemetic.35.c
        trigger = {
        	exists = scope:pyramid_province_3
        }	
        set_variable = pyramid_province_3_var
        custom_tooltip = choose_the_kind_of_pyramid_to_build
        trigger_event = {
        	id = rel_flavor_kemetic.36
        	days = 5
        }
    }
    option = {      
        name = rel_flavor_kemetic.35.d
        trigger = {
        	exists = scope:pyramid_province_4
        }
        set_variable = pyramid_province_4_var
        custom_tooltip = choose_the_kind_of_pyramid_to_build
        trigger_event = {
        	id = rel_flavor_kemetic.36
        	days = 5
        }
    }
    option = {	#We don't need to build a pyramid!    
        name = rel_flavor_kemetic.35.e
        current_ruler = {
        	add_popularity = -25
        }
    }
    option = {	#What an awful idea, kill this man immediately!!! 
        name = rel_flavor_kemetic.35.f
        trigger = {
        	current_ruler = {
        		has_trait = lunatic
        	}
        }
        highlight = yes
        add_tyranny = 15
        scope:pyramid_builder = {
        	death = {
        		death_reason = death_execution
        	}
        }
    }
}

rel_flavor_kemetic.36 = {	#Pyramid Materials
    type = country_event
    title = rel_flavor_kemetic.36.t
    desc = rel_flavor_kemetic.36.desc
    picture = quarry
    goto_location = var:pyramid_province_flag
    right_portrait = scope:pyramid_builder
    left_portrait = current_ruler

    immediate = {
    	switch = {
    		trigger = has_variable

    		pyramid_province_1_var = {
    			set_variable = {
    				name = pyramid_province_flag
    				value = scope:pyramid_province_1
    			}
    		}
    		pyramid_province_2_var = {
    			set_variable = {
    				name = pyramid_province_flag
    				value = scope:pyramid_province_2
    			}
    		}
    		pyramid_province_3_var = {
    			set_variable = {
    				name = pyramid_province_flag
    				value = scope:pyramid_province_3
    			}
    		}
    		pyramid_province_4_var = {
    			set_variable = {
    				name = pyramid_province_flag
    				value = scope:pyramid_province_4
    			}
    		}
    	}
    }

    option = {	#A small stone pyramid will be enough 
        name = rel_flavor_kemetic.36.a
        add_treasury = -250
        if = {
        	limit = {
        		treasury < 250
        	}
        	custom_tooltip = this_will_put_us_into_debt_tt
        }
        hidden_effect = {
			var:pyramid_province_flag = {
				begin_great_work_construction = {
					great_work = "pyramid_template_1"
					locator = primary_great_work
					is_ancient = yes #Have to be ancient or materials and leader are required.						
				}
			}
		}
		set_variable = pyramid_1_construction
    	custom_tooltip = begin_pyramid_construction_tt
    	set_variable = {
    		name = pyramid_progress
    		value = 0
    	}
    	trigger_event = {
    		id = rel_flavor_kemetic.37 #Maintenance
    		days = { 150 300 }
    	}
    }
    option = {	#Marble and silver will be exquisite
        name = rel_flavor_kemetic.36.b
        add_treasury = -500
        if = {
        	limit = {
        		treasury < 500
        	}
        	custom_tooltip = this_will_put_us_into_debt_tt
        }
        hidden_effect = {
			var:pyramid_province_flag = {
				begin_great_work_construction = {
					great_work = "pyramid_template_2"
					locator = primary_great_work
					is_ancient = yes					
				}
			}
		}
		set_variable = pyramid_2_construction
    	custom_tooltip = begin_pyramid_construction_tt
    	set_variable = {
    		name = pyramid_progress
    		value = 0
    	}
    	trigger_event = {
    		id = rel_flavor_kemetic.37 #Maintenance
    		days = { 150 300 }
    	}
    }
    option = {	#Ebony and Ivory will do fine
        name = rel_flavor_kemetic.36.c
        add_treasury = -1000
        if = {
        	limit = {
        		treasury < 1000
        	}
        	custom_tooltip = this_will_put_us_into_debt_tt
        }
        hidden_effect = {
			var:pyramid_province_flag = {
				begin_great_work_construction = {
					great_work = "pyramid_template_3"
					locator = primary_great_work
					is_ancient = yes						
				}
			}
		}
		set_variable = pyramid_3_construction
    	custom_tooltip = begin_pyramid_construction_tt
    	set_variable = {
    		name = pyramid_progress
    		value = 0
    	}
    	trigger_event = {
    		id = rel_flavor_kemetic.37 #Maintenance
    		days = { 150 300 }
    	}
    }
    option = {	#A fully gold pyramid is the only option for [ruler]
        name = rel_flavor_kemetic.36.d
        add_treasury = -1500
        if = {
        	limit = {
        		treasury < 1500
        	}
        	custom_tooltip = this_will_put_us_into_debt_tt
        }
        hidden_effect = {
			var:pyramid_province_flag = {
				begin_great_work_construction = {
					great_work = "pyramid_template_4"
					locator = primary_great_work
					is_ancient = yes						
				}
			}
		}
		set_variable = pyramid_4_construction
    	custom_tooltip = begin_pyramid_construction_tt
    	set_variable = {
    		name = pyramid_progress
    		value = 0
    	}
    	trigger_event = {
    		id = rel_flavor_kemetic.37 #Maintenance
    		days = { 150 300 }
    	}
    }
    option = {
    	name = rel_flavor_kemetic.36.e
    	current_ruler = {
    		add_popularity = -25
    	}
    }
}
rel_flavor_kemetic.37 = {	#Maintenance Event
    type = country_event
    hidden = yes

    immediate = {
    	if = {
    		limit = {
    			has_variable = pyramid_progress
    			owns = var:pyramid_province_flag
    		}
    		if = {
    			limit = {
    				var:pyramid_progress < 3
    			}
    			random_list = {
    				1 = {	# Building progresses without any event
    					change_variable = {
    						name = pyramid_progress
    						add = 1
    					}
    				}
					2 = { # Complication event - materials misplaced
						trigger = {
							any_owned_province = {
								is_coastal = yes
							}
						}
						trigger_event = {
							id = "rel_flavor_kemetic.38"
						}
					}
					2 = { # Complication event - Uninspired workers
						trigger_event = {
							id = "rel_flavor_kemetic.39"
						}
					}
					2 = { #Complication Event - Theft and sabotage
						trigger_event = {
							id = "rel_flavor_kemetic.40"
						}
					}
    			}
				trigger_event = { # Trigger next event
					id = "rel_flavor_kemetic.37"
					days = { 150 300 }
				}
    		}
    		else_if = {
    			limit = { var:pyramid_progress >= 3 }
    			trigger_event = {
					id = "rel_flavor_kemetic.41" #Constuction in Finished
				}
    		}
    	}
    	else = {
    		remove_variable = pyramid_province_flag
    		remove_variable = pyramid_progress
    		remove_variable = pyramid_1_construction
    		remove_variable = pyramid_2_construction
    		remove_variable = pyramid_3_construction
    		remove_variable = pyramid_4_construction
    	}
    }
}

rel_flavor_kemetic.38 = {	#Complication event - materials misplaced
    type = country_event
    title = rel_flavor_kemetic.38.t
    desc = rel_flavor_kemetic.38.desc
    picture = quarry
    goto_location = var:pyramid_province_flag
    right_portrait = scope:pyramid_builder
    left_portrait = current_ruler

    immediate = {
		random_owned_province = {
			limit = {
				is_coastal = yes
			}
			save_scope_as = coastal_province
		}
    }

    option = {      
        name = rel_flavor_kemetic.38.a
        custom_tooltip = "progress_continues_unhindered_tt"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 6
			min = -500
			max = -50
		}
		change_variable = {
			name = pyramid_progress
			add = 1
		}
    }
    option = {      
        name = rel_flavor_kemetic.38.b
        custom_tooltip = progress_materials_tt
    }
}
rel_flavor_kemetic.39 = {	#Complication event - Uninspired workers
    type = country_event
    title = rel_flavor_kemetic.39.t
    desc = rel_flavor_kemetic.39.desc
    picture = quarry
    goto_location = var:pyramid_province_flag
    right_portrait = scope:pyramid_builder
    left_portrait = current_ruler

    option = {      
        name = rel_flavor_kemetic.39.a
        custom_tooltip = "progress_continues_unhindered_tt"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 4
			min = -400
			max = -40
		}
		change_variable = {
			name = pyramid_progress
			add = 1
		}
    }
    option = {      
        name = rel_flavor_kemetic.39.b
        custom_tooltip = "progress_continues_unhindered_tt"
        add_political_influence = subtract_influence_medium
        add_tyranny = 5
		change_variable = {
			name = pyramid_progress
			add = 1
		}
    }
    option = {      
        name = rel_flavor_kemetic.39.c
        custom_tooltip = progress_bad_workers_tt
        current_ruler = { add_popularity = -5 }

    }
}
rel_flavor_kemetic.40 = {	#Complication Event - Theft and sabotage
    type = country_event
    title = rel_flavor_kemetic.40.t
    desc = rel_flavor_kemetic.40.desc
    picture = quarry
    goto_location = var:pyramid_province_flag
    right_portrait = scope:pyramid_builder
    left_portrait = current_ruler

    option = {      
        name = rel_flavor_kemetic.40.a
        custom_tooltip = "progress_continues_unhindered_tt"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 3
			min = -300
			max = -30
		}
		change_variable = {
			name = pyramid_progress
			add = 1
		}
    }
    option = {      
        name = rel_flavor_kemetic.40.b
        custom_tooltip = "progress_continues_unhindered_tt"
        add_manpower = -5
		change_variable = {
			name = pyramid_progress
			add = 1
		}
    }
    option = {      
        name = rel_flavor_kemetic.40.c
        custom_tooltip = progress_sabatoge_tt
        current_ruler = { add_popularity = -5 }

    }
}
rel_flavor_kemetic.41 = {	#Pyramid Construction Finished
    type = country_event
    title = rel_flavor_kemetic.41.t
    desc = rel_flavor_kemetic.41.desc
    picture = persepolis
    goto_location = var:pyramid_province_flag
    right_portrait = scope:pyramid_builder
    left_portrait = current_ruler

    immediate = {
    	random_deity = {
    		limit = {
    			deity_religion = root.religion
    		}
    		save_scope_as = deity_to_deify
    	}
    }

    option = {      
        name = rel_flavor_kemetic.41.a
    	scope:pyramid_builder = {
    		add_finesse = 2
    		add_popularity = 15
    	}
    	if = {
    		limit = { exists = scope:deity_to_deify }
	    	current_ruler = {
	    		if = {
	    			limit = {
	    				is_deified = no
	    			}
		            deify_character = {
		                deity = scope:deity_to_deify
		                country = ROOT
		            }
	    		}
	    	}
	    	custom_tooltip = deify_ruler_tooltip_k
	    }
        switch = {
        	trigger = has_variable

        	pyramid_1_construction = {
        		var:pyramid_province_flag = {
	        		finish_great_work_construction = {
						great_work = "pyramid_template_1"
						locator = primary_great_work
	        		}
	        	}
        	}

        	pyramid_2_construction = {
				var:pyramid_province_flag = {        	
	        		finish_great_work_construction = {
						great_work = "pyramid_template_2"
						locator = primary_great_work
	        		}
        		}
        	}

        	pyramid_3_construction = {
       			var:pyramid_province_flag = {
	        		finish_great_work_construction = {
						great_work = "pyramid_template_3"
						locator = primary_great_work
	        		}
        		}
        	}

        	pyramid_4_construction = {
        		var:pyramid_province_flag = {
	        		finish_great_work_construction = {
						great_work = "pyramid_template_4"
						locator = primary_great_work
	        		}
        		}
        	}
        }
    }
}
rel_flavor_kemetic.42 = {	#White Crocodile of Krokolipolis p:539
    type = country_event
    title = rel_flavor_kemetic.42.t
    desc = rel_flavor_kemetic.42.desc
    picture = persepolis
    goto_location = p:539
    left_portrait = current_ruler

    trigger = {
		current_date > 550.1.1
		religion = egyptian_pantheon
		owns = 539
		has_dlc = "Heirs of Alexander" #Sobek deity is from dlc, no idea why but it is.
		is_ai = no
		NOT = { has_variable = white_crocodile_appeared }
    }

    immediate = {
    	set_variable = white_crocodile_appeared
    }

    option = {      
        name = rel_flavor_kemetic.42.a
        p:539 = {
        	state = {
        		add_state_modifier = {
        			name = blessing_of_sobek_mod
        			duration = -1
        		}
        	}
        }
    }
}

##################################################
# Room for 3 more white crocodile events if needed
##################################################

rel_flavor_kemetic.46 = {	#Choose a God/Goddess to support the war effort
    type = country_event
    title = rel_flavor_kemetic.46.t
    desc = rel_flavor_kemetic.46.desc
    picture = religious_rite
    
	left_portrait = current_ruler
	right_portrait = scope:randomized_priest

    trigger = {
		religion = egyptian_pantheon
		war = yes
		NOR = {
			has_country_modifier = country_improvement_war_osiris_blessing
			has_country_modifier = country_improvement_war_isis_blessing
			has_country_modifier = country_improvement_war_amun_blessing
			has_country_modifier = country_improvement_war_set_blessing
		}
		any_character = {
			has_priest_office_trigger = yes
		}    
    }

    immediate = {
		random_character = {
			limit = {
				has_priest_office_trigger = yes
			}
			save_scope_as = randomized_priest
		}
		random_current_war = {
			if = {
				limit = {
					any_war_defender = { THIS = root }
				}
				attacker_warleader = {
					save_scope_as = war_enemy
				}
			}
			else = {
				limit = {
					any_war_attacker = { THIS = root }
				}
				defender_warleader = {
					save_scope_as = war_enemy
				}
			}
		}
    }

    option = {	#Osiris
        name = rel_flavor_kemetic.46.a
		add_political_influence = subtract_influence_medium
		add_country_modifier = {
			name = country_improvement_war_osiris_blessing
			duration = 1825
		}
    }
    option = {	#Isis      
        name = rel_flavor_kemetic.46.b
		add_political_influence = subtract_influence_medium
		add_country_modifier = {
			name = country_improvement_war_isis_blessing
			duration = 1825
		}
    }
    option = {	#Amun
        name = rel_flavor_kemetic.46.c
		add_political_influence = subtract_influence_medium
		add_country_modifier = {
			name = country_improvement_war_amun_blessing
			duration = 1825
		}
    }
    option = {	#Set      
        name = rel_flavor_kemetic.46.d
		add_political_influence = subtract_influence_medium
		add_country_modifier = {
			name = country_improvement_war_set_blessing
			duration = 1825
		}
    }
	option = { # No blessing
		name = rel_flavor_kemetic.46.e
		custom_tooltip = "no_effect_tooltip"
	}
}
rel_flavor_kemetic.47 = {	#Inspired by war god
	type = country_event
	title = "rel_flavor_kemetic.47.t"
	desc = "rel_flavor_kemetic.47.desc"
	picture = elephant_battle
	
	left_portrait = current_ruler

	trigger = {
		religion = egyptian_pantheon
		NOT = { has_variable = rel_flavor_kemetic_47_cooldown }
		NOT = { has_country_modifier = country_improvement_inspiring_soldier }
	}

	immediate = {
		hidden_effect = {
			set_variable = {
				name = rel_flavor_kemetic_47_cooldown
				days = 5475
			}
		}
	}

	option = {
		name = rel_flavor_kemetic.47.a
		create_character = {
			culture = root.current_ruler.culture
			religion = egyptian_pantheon
			female = no
			age = 25
			no_traits = yes
			no_stats = yes
			hidden_effect = {
				add_trait = brave
				amazing_martial_effect = yes
				good_charisma_effect = yes
				good_finesse_effect = yes
				average_zeal_effect = yes
				positive_martial_trait_effect = yes
			}
		}
	}

	option = {
		name = rel_flavor_kemetic.47.b
		add_country_modifier = {
			name = country_improvement_inspiring_soldier
			duration = 1825
		}
	}
}
rel_flavor_kemetic.48 = {	#Explosive commerce
	type = country_event
	title = "rel_flavor_kemetic.48.t"
	desc = "rel_flavor_kemetic.48.desc"
	picture = trade_port
	
	left_portrait = current_ruler

	goto_location = scope:randomized_country_province
	
	trigger = {
		religion = egyptian_pantheon
		any_owned_province = { 
			dominant_province_religion = egyptian_pantheon 
			has_city_status = yes
		}
	}

	immediate = {
		random_owned_province = {
			limit = {
				dominant_province_religion = egyptian_pantheon
				has_city_status = yes
			}
			save_scope_as = randomized_country_province
		}
	}

	option = {
		name = "rel_flavor_kemetic.48.a"
		add_treasury = {
			value = root.has_monthly_income
			multiply = 6
		}
		scope:randomized_country_province = {
			add_province_modifier = {
				name = province_improvement_touched_by_commerce_god
				duration = 1825
			}
		}
	}

	option = {
		name = "rel_flavor_kemetic.48.b"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 4
		}
		add_country_modifier = {
			name = country_improvement_commerce_blessing
			duration = 3650
		}
		scope:randomized_country_province = {
			add_province_modifier = {
				name = province_improvement_touched_by_commerce_god
				duration = 3650
			}
		}
	}
}
rel_flavor_kemetic.49 = {	#Hellenics/Arabians turning to our faith
	type = country_event
	title = "rel_flavor_kemetic.49.t"
	desc = "rel_flavor_kemetic.49.desc"
	picture = religious_rite

	left_portrait = current_ruler
	right_portrait = scope:random_priest

	goto_location = scope:country_province
	
	trigger = {
		religion = egyptian_pantheon
		NOT = { has_variable = rel_flavor_kemetic_49_cooldown }
		any_owned_province = {
			OR = {
				dominant_province_religion = roman_pantheon
				dominant_province_religion = arabian_pantheon
			}
			any_pops_in_province = {
				count > 5
				OR = {
					pop_religion = roman_pantheon
					pop_religion = arabian_pantheon
				}
			}
		}
		any_character = {
			has_priest_office_trigger = yes
		}
	}

	immediate = {
		set_variable = {
			name = rel_flavor_kemetic_49_cooldown
			days = 3650
		}
		random_owned_province = {
			limit = {
				OR = {
					dominant_province_religion = roman_pantheon
					dominant_province_religion = arabian_pantheon
				}
				any_pops_in_province = {
					count > 5
					OR = {
						pop_religion = roman_pantheon
						pop_religion = arabian_pantheon
					}
				}
			}
			save_scope_as = country_province
		}
		random_character = {
			limit = {
				has_priest_office_trigger = yes
			}
			save_scope_as = random_priest
		}
	}

	option = {
		name = "rel_flavor_kemetic.49.a"
		add_tyranny = tyranny_medium
		scope:country_province = {
			ordered_pops_in_province = {
				limit = {
					OR = {
						pop_religion = roman_pantheon
						pop_religion = arabian_pantheon
					}
				}
				order_by = pop_hapiness
				max = 6
				check_range_bounds = no
				set_pop_religion = root.religion
			}
		}
		scope:random_priest = {
			add_loyalty = loyalty_priest_allowed
		}
	}	

	option = {
		name = "rel_flavor_kemetic.49.b"
		scope:country_province = {
			ordered_pops_in_province = {
				limit = {
					OR = {
						pop_religion = roman_pantheon
						pop_religion = arabian_pantheon
					}
				}
				order_by = pop_hapiness
				max = 2
				check_range_bounds = no
				set_pop_religion = root.religion
			}
		}
		scope:random_priest = {
			add_loyalty = loyalty_priest_refused
		}
	}
}
rel_flavor_kemetic.50 = {	#Religious leader inspired to become better
	type = country_event
	title = "rel_flavor_kemetic.50.t"
	desc = "rel_flavor_kemetic.50.desc"
	picture = hellenic_temple

	left_portrait = current_ruler
	right_portrait = scope:random_advisor

	trigger = {
		religion = egyptian_pantheon
		NOT = { has_variable = rel_flavor_kemetic_50_cooldown }
		current_ruler = {
			char_is_religious_trigger = yes
			number_of_personality_traits < max_number_of_traits_svalue
		}
		any_character = {
			has_religion = egyptian_pantheon
			has_priest_office_trigger = yes
		}
	}

	immediate = {
		set_variable = {
			name = rel_flavor_kemetic_50_cooldown
			days = 10950
		}
		random_character = {
			limit = {
				is_ruler = no
				has_religion = egyptian_pantheon
				has_priest_office_trigger = yes
			}
			save_scope_as = random_advisor
		}
		hidden_effect = {
			current_ruler = {
				random_list = {
					1 = {
						trigger = {
							NOT = { has_trait = tolerant }
						}
						set_variable = {
							name = tolerant_trait_flag
						}
					}
					1 = {
						trigger = {
							NOT = { has_trait = merciful }
						}
						set_variable = {
							name = merciful_trait_flag 
						}
					}
					1 = {
						trigger = {
							NOT = {	has_trait = founder }
						}
						set_variable = {
							name = founder_trait_flag
						}
					}
					1 = {
						trigger = {
							NOT = { has_trait = benefactor }
						}
						set_variable = {
							name = benefactor_trait_flag
						}
					}
					1 = {
						trigger = {
							NOT = { has_trait = forgiving }
						}
						set_variable = {
							name = forgiving_trait_flag
						}
					}
					1 = {
						trigger = {
							NOT = { has_trait = confident }
						}
						set_variable = {
							name = confident_trait_flag
						}
					}
					1 = {
						trigger = {
							NOT = { has_trait = kindly }
						}
						set_variable = {
							name = kindly_trait_flag 
						}
					}
				}
			}
		}
	}

	option = {
		name = "rel_flavor_kemetic.50.a"
		add_political_influence = subtract_influence_small
		current_ruler = {
			switch = {
				trigger = has_variable
				tolerant_trait_flag = { add_trait = tolerant }
				merciful_trait_flag = { add_trait = merciful }
				founder_trait_flag = { add_trait = founder }
				benefactor_trait_flag = { add_trait = benefactor }
				forgiving_trait_flag = { add_trait = forgiving }
				confident_trait_flag = { add_trait = confident }
				kindly_trait_flag = { add_trait = kindly }
			}
		}
		scope:random_advisor = {
			add_loyalty = loyalty_magi_influence
		}
	}

	option = {
		name = "rel_flavor_kemetic.50.b"
		scope:random_advisor = {
			add_loyalty = loyalty_ignored_magi
		}
	}
}
rel_flavor_kemetic.51 = {	# Hellenics convinced by charismatic character to become our religion
	type = country_event
	title = "rel_flavor_kemetic.51.t"
	desc = "rel_flavor_kemetic.51.desc"
	picture = persepolis

	left_portrait = current_ruler

	goto_location = scope:country_province
	
	trigger = {
		religion = egyptian_pantheon
		NOT = { has_variable = rel_flavor_kemetic_51_cooldown }
		any_owned_province = {
			dominant_province_religion = root.religion
			any_pops_in_province = {
				count > 2
				pop_religion = roman_pantheon
			}
		}
	}

	immediate = {
		set_variable = {
			name = rel_flavor_kemetic_51_cooldown
			days = 7300
		}
		random_owned_province = {
			limit = {
				dominant_province_religion = root.religion
				any_pops_in_province = {
					count > 2
					pop_religion = roman_pantheon
				}
			}
			weight = {
				modifier = {
					factor = 10
					any_pops_in_province = {
						count > 10
						pop_religion = roman_pantheon
					}
				}
				modifier = {
					factor = 10
					any_pops_in_province = {
						count > 5
						pop_religion = roman_pantheon
					}
				}
			}
			save_scope_as = country_province
		}
	}

	option = {
		name = "rel_flavor_kemetic.51.a"
		scope:country_province = {
			ordered_pops_in_province = {
				limit = {
					pop_religion = roman_pantheon
				}
				order_by = pop_hapiness
				max = 1
				check_range_bounds = no
				set_pop_religion = root.religion
			}
		}
	}	

	option = {
		name = "rel_flavor_kemetic.51.b"
		remove_stability_effect = yes
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 2
		}
		scope:country_province = {
			every_pops_in_province = {
				limit = {
					pop_religion = roman_pantheon
				}
				set_pop_religion = root.religion
			}
		}
		create_character = {
			culture = root.current_ruler.culture
			religion = root.religion
			age = 30
			female = no
			save_scope_as = community_ambassador
		}
		hidden_effect = {
			scope:community_ambassador = {
				while = {
					count = 3
					if = {
						limit = {
							number_of_traits < max_number_of_traits_svalue
						}
						random_list = {
							10 = {
								trigger = {
									NOT = { has_trait = silver_tongued }
								}
								add_trait = silver_tongued
							}
							10 = {
								trigger = {
									NOT = { has_trait = humble }
								}
								add_trait = humble
							}
							10 = {
								trigger = {
									NOT = { has_trait = intelligent }
								}
								add_trait = intelligent
							}
							10 = {
								trigger = {
									NOT = { has_trait = loving }
								}
								add_trait = loving
							}
						}
					}
				}
			}
		}
	}
}