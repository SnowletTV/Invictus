namespace = rel_flavor_persia

rel_flavor_persia.1 = { # Parthian Conversion
	type = country_event
	title = "rel_flavor_persia.1.t"
	desc = "rel_flavor_persia.1.desc"
	picture = persia_marching
	fire_only_once = yes
	left_portrait = current_ruler
	right_portrait = current_ruler

	option = {
		trigger = {
			is_ai = yes
		}
		exclusive = yes
		name = "rel_flavor_persia.1.ai"
		random_list = {
			59 = {
				soft_change_religion_effect = {
					RELIGION = zoroaster
				}
			}
			25 = {
				soft_change_religion_effect = {
					RELIGION = mithra_religion
				}
			}
			10 = {
				soft_change_religion_effect = {
					RELIGION = indo_iranian_religion
				}
			}
			5 = {
				soft_change_religion_effect = {
					RELIGION = roman_pantheon
				}
			}
			1 = {
				soft_change_religion_effect = {
					RELIGION = mesopotamian_religion
				}
			}
		}
	}
	option = {
		name = "rel_flavor_persia.1.a"
		soft_change_religion_effect = {
			RELIGION = zoroaster
		}
		add_stability = 10
		add_political_influence = 50
	}
	option = {
		name = "rel_flavor_persia.1.b"
		soft_change_religion_effect = {
			RELIGION = mithra_religion
		}
		add_stability = 10
		add_political_influence = 50
	}
	option = {
		name = "rel_flavor_persia.1.c"
		soft_change_religion_effect = {
			RELIGION = indo_iranian_religion
		}
	}
	option = {
		name = "rel_flavor_persia.1.d"
		soft_change_religion_effect = {
			RELIGION = roman_pantheon
		}
		add_stability = 10
		add_political_influence = 50
	}
	option = {
		name = "rel_flavor_persia.1.e"
		soft_change_religion_effect = {
			RELIGION = mesopotamian_religion
		}
		add_stability = 5
		add_political_influence = 25
	}
	option = {
		trigger = {
			any_owned_province = {
				any_pops_in_province = {
					pop_religion = vaksh_religion
				}
			}
		}
		name = "rel_flavor_persia.1.f"
		soft_change_religion_effect = {
			RELIGION = vaksh_religion
		}
		add_stability = 5
		add_political_influence = 10
	}
	option = {
		trigger = {
			any_owned_province = {
				any_pops_in_province = {
					pop_religion = buddhism
				}
			}
		}
		name = "rel_flavor_persia.1.g"
		soft_change_religion_effect = {
			RELIGION = buddhism
		}
	}
}

rel_flavor_persia.2 = { # Holy Fire
    type = country_event
    title = rel_flavor_persia.t
    desc = rel_flavor_persia.desc
    picture = Event_fire_city

    trigger = {
    	is_zorastrian_religion = yes
    }
	
	immediate = {
		ordered_area = {
			limit = {
				any_area = {
					count >= 6
					any_area_province = {
						NOT = { is_in_area = root.capital_scope }
						owner = root
						any_unit_in_province = { 
							unit_owner = ROOT
						}
						NOT = { has_province_modifier = holy_fire_mod }
					}
				}
			}
			set_variable = holy_fire_var
		}
		random_owned_province = {
			limit = { has_variable = holy_fire_var }
			add_province_modifier = holy_fire_mod
		}
		name = "rel_flavor_persia_2.a"
	}
	option = {
		random_owned_province = {
			limit = { has_variable = holy_fire_var }
			add_province_modifier = holy_fire_mod
		}
		name = "rel_flavor_persia_2.b"
	}
	option = {
		random_owned_province = {
			limit = { has_variable = holy_fire_var }
			add_province_modifier = holy_fire_mod
		}
		name = "rel_flavor_persia_2.c"
	}
	option = {
		random_owned_province = {
			limit = { has_variable = holy_fire_var }
			add_province_modifier = holy_fire_mod
		}
		name = "rel_flavor_persia_2.d"
	}
	option = {
		random_owned_province = {
			limit = { has_variable = holy_fire_var }
			add_province_modifier = holy_fire_mod
		}
		name = "rel_flavor_persia_2.e"
	}
	option = {
		random_owned_province = {
			limit = { has_variable = holy_fire_var }
			add_province_modifier = holy_fire_mod
		}
		name = "rel_flavor_persia_2.f"
	}
	option = {
		trigger_event = rel_flavor_persia.2
		name = "rel_flavor_persia_2.g"
	}
}

rel_flavor_persia.5 = { # Paropamisadae Startup
	type = country_event
	title = "rel_flavor_persia.5.t"
	desc = "rel_flavor_persia.5.desc"
	picture = religious_rite
	fire_only_once = yes
	left_portrait = char:32
	right_portrait = char:551

	immediate = {
		hidden_effect = { current_ruler = { add_popularity = 35 } }
		custom_tooltip = "roxana_murder_tt"
		add_opinion = {
			target = c:MAC
			modifier = attempted_assassination_on_us
		}
	}

	option = {
		name = "rel_flavor_persia.5.a"
		current_ruler = {
			set_character_religion = zoroaster
		}
	}
	option = {
		name = "rel_flavor_persia.5.b"
		set_country_religion = vaksh_religion
		current_ruler = {
			add_popularity = -30
		}
		add_tyranny = 10
	}
}

rel_flavor_persia.6 = { # Death of Oxyartes
	type = country_event
	title = "rel_flavor_persia.6.t"
	desc = "rel_flavor_persia.6.desc"
	picture = persia_marching
	left_portrait = current_ruler
	right_portrait = char:291
	fire_only_once = yes

	option = {
		name = "rel_flavor_persia.6.a"
		current_ruler = {
			add_popularity = 10
		}
		add_legitimacy = 10
		if = {
			limit = {
				religion = zoroaster
			}
			add_stability = -5
			add_tyranny = 5
		}
		ai_chance = { factor = 80 }
	}
	option = {
		name = "rel_flavor_persia.6.b"
		set_country_heritage = sattagydian_heritage
		change_country_name = SATTAGYDIA_NAME
		hidden_effect = {
			change_country_adjective = SATTAGYDIA_ADJ
			change_country_color = ck2_blue
			change_country_flag = SATTAGYDIA_FLAG
		}
		custom_tooltip = "new_ruler_for_sattagydia.tt"
		hidden_effect = {
			create_character = {
      			age = 35
      			culture = sattagydian
      			religion = root.religion
      			add_popularity = 20
      			save_scope_as = new_sattagydian_ruler_scope
      		}
      		set_as_ruler = scope:new_sattagydian_ruler_scope
		}
		if = {
			limit = {
				religion = vaksh_religion
			}
			add_stability = -5
			add_tyranny = 5
		}
		ai_chance = { factor = 20 }
	}
}

rel_flavor_persia.10 = { # Media Flavor: Religion
	type = country_event
	title = "rel_flavor_persia.10.t"
	desc = "rel_flavor_persia.10.desc"
	picture = religious_rite

	immediate = {
		trigger_event = rel_flavor_persia.11
	}

	option = {
		trigger = { is_zoroastrian_religion = no }
		name = "rel_flavor_persia.10.a"
		set_country_religion = zoroaster
	}
	option = {
		trigger = { is_zoroastrian_religion = no }
		name = "rel_flavor_persia.10.b"
		set_country_religion = mithra_religion
	}
	option = {
		trigger = { is_ai = no }
		name = "rel_flavor_persia.10.c"
		add_stability = 5
	}
	option = { # Zurvanism ?
		trigger = {
			is_zorastrian_religion = yes
		}
		name = "rel_flavor_persia.10.d"
		set_country_religion = zurvan_religion
	}
}
rel_flavor_persia.11 = { # Media Flavor Decisions: Culture
	type = country_event
	title = "rel_flavor_persia.11.t"
	desc = "rel_flavor_persia.11.desc"
	picture = religious_rite

	trigger = { NOT = { primary_culture = median } }

	immediate = {
		random_owned_province = {
			limit = { is_in_region = media_region }
			random_pops_in_province = {
				set_culture = median
			}
		}
	}

	option = {
		name = "rel_flavor_persia.11.b"
		trigger = { is_ai = no }
		if = {
			limit = {
				NOT = {
					primary_culture = median
				}
				set_primary_culture_cleanup_effect = {
					NEW_PRIMARY_CULTURE = median
					MAKE_OLD_CULTURE_INTEGRATED = yes
				}
			}
		}
	}
	option = {
		name = "rel_flavor_persia.11.b"
		integrate_country_culture = median
	}
	option = {
		name = "rel_flavor_persia.11.c"
		trigger = { is_ai = no }
		random_country_culture = {
			limit = {
				culture = median
			}
			add_country_culture_modifier = {
				name = too_many_foreigners
				duration = 3650
			}
		}
	}
}